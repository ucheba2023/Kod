(()=>{"use strict";var __webpack_modules__={441357:(_,e,o)=>{o.d(e,{initAndLoadCloud:()=>c});var r=o(434788),t=o(528488),s=o(504867),i=o(534841);const c=({container:_,docParams:e,listeners:o})=>{var c,a,n,d;if(!_)return!1;const l=(0,t.createIframe)({url:"",id:i.CLOUD_FRAME_ID,className:"iframe",container:_}),u=(0,r._)({},o,{onReady:()=>{o.onReady(),l.style.opacity="1"}});return(null==(c=e)?void 0:c.url)&&(null==(a=e)?void 0:a.docExt)&&(null==(n=e)?void 0:n.docSize)&&(null==(d=e)?void 0:d.docTitle)?(({container:_,iframe:e,iframeId:o,listeners:{onInit:r,onLoad:c,onError:a,onReady:n},docParams:d})=>{var l;"function"==typeof r&&r();const{docUrl:u,docExt:E,docTitle:b,docSize:w,uid:D,reqId:M,postContentType:h,url:P}=d,m={url:u,ext:E,name:b,size:w,external_uid:D,external_req_id:M},O=(0,t.createForm)({container:_,action:P,inputs:m,target:o,postContentType:h});let p=!1;null==(l=e)||l.addEventListener("load",(()=>{p=!0,e.style.opacity="1",n(),(0,s.statlogsValueEvent)("docs_preview",0,"cloud_iframe_load",E)}));const C=window.setTimeout((()=>{i.CLOUD_FALLBACK_CONFIG.enableTimeoutFallback&&!p&&a("timeout_fallback")}),1e3*i.CLOUD_TIMEOUT_FALLBACK_TIME_SEC);O.submit(),c({timer:C})})({container:_,iframe:l,iframeId:i.CLOUD_FRAME_ID,listeners:u,docParams:e}):u.onError("doc_data_not_ok")}},6497:(_,e,o)=>{o.d(e,{getCloudPreviewAnalyticsParams:()=>t});var r=o(434788);function t({errorType:_,timespent:e,uid:o,requestId:t,docExt:s="",docSize:i=0,userAgent:c="",userCity:a="",userCountry:n=""}){return(0,r._)({agent:c,city:a,country:n,ext:s,reqId:t,size:i,platform:"web",timestamp:Date.now()},void 0!==_?{errorType:_}:{},void 0!==e?{timespent:e}:{},void 0!==o?{uid:o}:{uid:window.vk.id})}},534841:(_,e,o)=>{o.d(e,{CLOUD_FALLBACK_CONFIG:()=>c,CLOUD_FRAME_ID:()=>r,CLOUD_ORIGIN:()=>t,CLOUD_TIMEOUT_FALLBACK_TIME_SEC:()=>i,CLOUD_URL:()=>s});const r="iframe",t="https://cloud.mail.ru",s=t+"/embedded",i=60,c={enableTimeoutFallback:!0}},528488:(_,e,o)=>{o.d(e,{createForm:()=>r,createIframe:()=>t});const r=({container:_=null,method:e="post",action:o,inputs:r,target:t,postContentType:s=""})=>{const i=document.createElement("form");return i.action=o,i.method=e,i.target=t,i.enctype=s,Object.keys(r).forEach((function(_){i.appendChild((({type:_="hidden",name:e,value:o})=>{const r=document.createElement("input");return r.name=e,r.type=_,r.value=o,r})({name:_,value:r[_]}))})),_||(_=document.body),_.appendChild(i),i},t=({url:_,id:e,className:o,container:r,extraData:t})=>{var s;const i=document.createElement("iframe");return _&&(i.src=_),i.className=o,i.name=e,i.id=e,i.allowFullscreen=!0,i.width="100%",i.height="100%",t&&Object.entries(t).forEach((([_,e])=>{i.setAttribute(`data-${_}`,e)})),i.setAttribute("allowfullscreen",""),i.setAttribute("onmousewheel",""),i.setAttribute("allow","autoplay"),i.style.opacity="0",null==(s=r)||s.appendChild(i),i}},617954:(_,e,o)=>{o.d(e,{startCloudPreview:()=>s});var r=o(534841),t=o(441357);function s(_){const{docUrl:e,docExt:o,docTitle:s,docSize:i,uid:c,reqId:a,listeners:n}=_,d=document.querySelector(".docs_iframe_container");(0,t.initAndLoadCloud)({container:d,listeners:n,docParams:{docTitle:s,docSize:i,docExt:o,docUrl:e,uid:c,reqId:a,url:r.CLOUD_URL,postContentType:"application/x-www-form-urlencoded"}})}},622781:(_,e,o)=>{o.d(e,{CloudMessagesListener:()=>a});var r=o(434788),t=o(504867),s=o(40256),i=o(534841),c=o(6497);class a{handleEvent(_){if(_.origin!==i.CLOUD_ORIGIN)return;const{type:e}=_.data||{};void 0!==typeof e&&("app-ready"===e&&this.clearTimer(),this.logEvent(e),this.applyAction(e))}applyAction(_){this.actions[_]&&"function"==typeof this.actions[_]&&this.actions[_]()}clearTimer(){this._timer&&(clearTimeout(this._timer),this.setTimer(void 0))}logEvent(_){const e=this.selectLogger(_),o="error"===_?(0,r._)({},this.options,{errorType:"cloud"}):this.options;e(_,(0,c.getCloudPreviewAnalyticsParams)(o))}selectLogger(_){return"app-ready"===_?(_,e,o="docs_preview",r=0)=>{var s;return(0,t.statlogsValueEvent)(o,r,_,null==(s=e)?void 0:s.ext)}:(_,e)=>(0,s.tmrTrackCustomGoal)(`vk_file_viewer_${_}`,e)}setTimer(_){this._timer=_}constructor({actions:_,options:e}){this.actions=_,this.options=e}}},908772:(_,e,o)=>{o.d(e,{handleCloudPreviewVisibilityChange:()=>i});var r=o(434788),t=o(40256),s=o(6497);function i(_){let e=0;return function(){switch(document.visibilityState){case"visible":e=Date.now(),(0,t.tmrTrackCustomGoal)("vk_file_viewer_open",(0,s.getCloudPreviewAnalyticsParams)(_));break;case"hidden":const o=0===e?void 0:Math.floor((Date.now()-e)/1e3);(0,t.tmrTrackCustomGoal)("vk_file_viewer_close",(0,s.getCloudPreviewAnalyticsParams)((0,r._)({},_,{timespent:o}))),e=0;break;default:return}}}},422328:(_,e,o)=>{var r,t,s,i=o(895223);(null==(t=window.vk)||null==(r=t.pe)?void 0:r.static_manager_dynamic_imports)&&(null==(s=window.vk)?void 0:s.stDomain)&&(o.p=window.vk.stDomain+"/dist/"),window.Docs=i.Docs;try{window.stManager.done(window.jsc("web/docs.js"))}catch(_){}},200574:(_,e,o)=>{function r(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M9 9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 1 1 2 0v4h4a1 1 0 1 1 0 2H9Z"/></svg>',name:"add_16"}}o.d(e,{getIcon16Add:()=>r})},251434:(_,e,o)=>{function r(){return{icon:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.74 3.76c.35.34.35.9 0 1.23l-7.31 7.25a.88.88 0 0 1-1.25 0L2.26 9.36a.87.87 0 0 1 0-1.23.88.88 0 0 1 1.24 0l2.3 2.26 6.7-6.63a.88.88 0 0 1 1.24 0Z" fill="currentColor"/></svg>',name:"done_16"}}o.d(e,{getIcon16Done:()=>r})},895223:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Docs:()=>Docs});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(795558),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(504867),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(953908),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(438221),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82161),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(29271),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(514986),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(584356),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(962983),_shared_lib_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(664988),_web_indexer_indexer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(672132),_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(215066),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(254667),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(320422),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(301230),_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(849222),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(862736),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(258016),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10645),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(643897),_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(725296),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(854099),_icons_desktop__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(200574),_icons_desktop__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(251434),_web_docs_cloud_cloud_preview__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(617954),_web_docs_cloud_listeners_message__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(622781),_web_docs_cloud_listeners_visibility__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(908772),_shared_ranges__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(931917),_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(40256);const Docs={init:function(){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(cur,{module:"docs",rmenu:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_rmenu"),menuTypesList:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#ui_rmenu_all_list"),menuTagsList:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#ui_rmenu_tag_list"),menuTagsToggle:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#ui_rmenu_tag_toggle"),searchInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search"),searchReset:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_reset"),listCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_list"),summary:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_summary"),titleEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_title"),listMore:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_more"),searchCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_list"),searchSummary:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_summary"),searchMore:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_more"),searchBlock:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_search_list_block")}),Docs.indexDocs(),setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(cur.searchInput)),0),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(cur,{list:{all:cur.docs},cache:{}}),cur.nav.push((function(_,e,o,r){if(e[0]==o[0]&&(o.section!=e.section&&!_.id||o.type!=e.type))return Docs.changed(o.section,o.type),window.nav.setLoc(o),!1})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(window,"scroll",Docs.scrollResize)},saveDoc:function(_){var e,o;let r=cur.docUrl;r+=r.match(/\?/)?"&dl=1":"?dl=1";const t=document.createElement("a");return t.href=r,t.download=cur.docTitle,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"download",cur.docExt),(0,_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_26__.tmrTrackCustomGoal)("vk_file_viewer_download",{ext:window.cur.docExt,size:window.cur.docSize,country:null==(e=window.cur)?void 0:e.userCountry,city:null==(o=window.cur)?void 0:o.userCity,agent:window.cur.userAgent,platform:"web",timestamp:Date.now()}),t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1})),_&&setTimeout((function(){window.close()}),2e3),!1},saveLitresDoc:function(){const _=document.createElement("a");_.href=cur.docUrl,_.target="_blank",_.download="book.pdf",(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"litres_download",cur.docExt),_.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},litresBuy:function(){return cur.docBuyLink&&((0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"litres_buy",cur.docExt),window.location=cur.docBuyLink),!1},imgZoom:function(_){"can_zoom"==_.className?_.className="can_zoom_out":(_.className="can_zoom",window.scroll(0,0))},saveToDocs:function(_,e){if(!vk.id)return!1;const o=document.querySelector(".SaveToDocsButton");if(!o||_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.isLocked(o))return!1;_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.lock(o);const r="SaveToDocsButton--saved",t=o.classList.contains(r),s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_save_to_docs"),i=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_saved_to_docs");t?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.savedId,hash:cur.savedHash},{onDone:function(){_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(o),cur.savedId=0,cur.savedHash="",_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setLabel(o,s),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setBefore(o,(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_27__.getIcon16Add)().icon),o.classList.remove(r),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"remove_from_docs",cur.docExt)},onFail:()=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(o)}}):ajax.post("docs.php",{act:"a_add",doc:`${cur.docOwnerId}_${cur.docId}`,hash:_,add_hash:e},{onDone:function(_,e,t,s){_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(o),cur.savedId=t[0],cur.savedHash=s,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setLabel(o,i),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setBefore(o,(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_28__.getIcon16Done)().icon),o.classList.add(r),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"save_to_docs",cur.docExt)},onFail:()=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(o)}})},initDoc:function(_){if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(cur,_),window.opener=null,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,"open-js",_.docExt),document.body.onkeydown=_=>{"KeyS"===_.code&&(_.ctrlKey||_.metaKey)&&(_.preventDefault(),Docs.saveDoc())},_.hasCloudPreview){const e={error:()=>Docs.saveDoc(!0)},o=new _web_docs_cloud_listeners_message__WEBPACK_IMPORTED_MODULE_23__.CloudMessagesListener({actions:e,options:_}),r=(0,_web_docs_cloud_listeners_visibility__WEBPACK_IMPORTED_MODULE_24__.handleCloudPreviewVisibilityChange)(_);(0,_web_docs_cloud_cloud_preview__WEBPACK_IMPORTED_MODULE_22__.startCloudPreview)({docUrl:_.docUrl,docExt:_.docExt,docTitle:_.docTitle,docSize:_.docSize,uid:window.vk.id,reqId:_.requestId,listeners:{onInit:r,onLoad:({timer:_})=>{o.setTimer(_),window.addEventListener("message",o,!1),document.addEventListener("visibilitychange",r,!1)},onError:_=>this.handlePreviewError(_),onReady:()=>this.hidePreviewLoader()}}),cur.destroy.push((function(){window.removeEventListener("message",o,!1),document.removeEventListener("visibilitychange",r,!1)}))}(0,_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__.updateCounters)(location.href,document.referrer)},changed:function(_,e){cur.section=_||"all",cur.type=e||"",Docs.getList(),cur.searchInput.setValue(""),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.onChanged(cur.searchInput,!0),Docs.updateList("",{force:!0}),cur.searchShown=0},scrollResize:function(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_14__.browser.mobile)return;let _=cur.listMore,e=cur.searchMore;if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(_)&&(_=e,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(_)))return;let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.clientHeight)(),r=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollGetY)(),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(_)[1];(r+o>t||cur.searchOffset&&r+2*o>t)&&Docs.showMore()},getList:function(_){let e;if(_=_||cur.section,cur.searchStr?(e=_+"_"+cur.type+"_"+cur.searchStr,cur.selection={re:new RegExp("("+cur.searchStr.replace(cur.index.delimiter,"|").replace(/[\/\\\(\)\[\]\{\}\*,]/g,"").replace(/^\||\|$/g,"")+")","gi"),val:'<span class="highlight">$1</span>'}):e=cur.type?_+"_"+cur.type:_,cur.list[e])return cur.found=cur.list[e].length,cur.list[e];let o=cur.searchStr?cur.index.search(cur.searchStr):cur.docs;return cur.list[e]=Docs.filterList(o),cur.found=cur.list[e].length,cur.list[e]},filterList:function(_){let e=[],o=_.length;for(let r=0;r<o;r++){let o=_[r];("all"===cur.section&&(!cur.type||cur.type==o[9])||"sent"===cur.section&&1==o[5])&&e.push(o)}return e},indexDocs:function(){cur.docs&&(cur.index=new _web_indexer_indexer__WEBPACK_IMPORTED_MODULE_10__.vkIndexer(cur.docs,(function(_){return _[2]+" "+_[6]})))},updateTypes:function(){cur.docs&&cur.typesChanged&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$$)("._ui_rmenu_subitem",cur.menuTypesList).forEach((_=>_.classList.add("ui_rmenu_item_hidden"))),cur.docs.forEach((_=>{const e=_[9];(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(`._docs_type_${e}`,cur.menuTypesList).classList.remove("ui_rmenu_item_hidden")})),delete cur.typesChanged)},updateTags:function(_){cur.tags&&_&&_.split(",").forEach((_=>{_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(_),cur.tags[_]||(cur.tags[_]=!0,cur.menuTagsList.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.tagItem,{label:_}))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(cur.menuTagsToggle,"ui_rmenu_item_hidden"))}))},addDocBox:function(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showBox)("/docs.php",{act:"add_box",oid:cur.oid})},addDoc:function(_){cur.docs&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__.lockButton)("docs_add_doc"),_._order=(cur.docs[0]&&cur.docs[0]._order||0)-1,cur.docs.unshift(_),Docs.showList(cur.docs.slice(0,cur.perPage)),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollToTop)(200),cur.index.add(_),Docs.updateTags(_[6]),cur.count+=1,cur.found+=1,cur.menuProgress=cur.typesChanged=!0,window.nav.go(window.nav.objLoc[0]))},drawList:function(_,e){e=e||cur.listCont;const o=document.createDocumentFragment();_.forEach((_=>{o.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)(Docs.getDocHTML(_)))})),e.appendChild(o),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__.checkPageBlocks)()},getDocHTML:function(_){let e,o=_[0],r=_[1],t=_[2],s=t,i=_[3],c=_[4],a=_[6],n=_[7],d=_[9]||0,l=_[10]?_[10]:"",u="/doc"+c+"_"+o,E=c==window.vk.id||n==window.vk.id||c==cur.oid&&_shared_ranges__WEBPACK_IMPORTED_MODULE_25__.Ranges.isGroupId(c)&&cur.groupAdmin,b=_[8];cur.selection&&(s=s.replace(cur.selection.re,cur.selection.val)),a&&(a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.tags,{tags:a.split(",").map((_=>(cur.selection&&(_=_.replace(cur.selection.re,cur.selection.val)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.tag,{title:_})))).join(", ")}));let w=" docs_icon_type"+d;e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(E?cur.tpl.edit:cur.tpl.add,{oid:c,item_id:o}),b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(b?cur.tpl.thumb:cur.tpl.icon,{oid:c,item_id:o,ext:r,url:u,thumb:b,title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.clean)(s),icon_class:w});let D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.itemAdditionalInfo,{date:i,actions:l,tags:a});return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.item,{oid:c,item_id:o,thumb:b,actions:e,title:s,title_clean:t,url:u,additional_info:D})},showList:function(_){if(cur.shown=_.length,cur.shown){if(!cur.listCont)return;cur.listCont.innerHTML="",Docs.drawList(_)}cur.searchShown=0},showMore:function(){let _=Docs.getList();if(_.length&&cur.shown<_.length){let e=_.slice(cur.shown,cur.shown+cur.perPage);cur.shown+=e.length,Docs.drawList(e),cur.shown>=cur.found&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.listMore,"unshown")}else cur.searchStr&&Docs.globalSearch(!!cur.searchShown)},globalSearch:function(more){if(clearTimeout(cur.searchTimeout),!cur.searchStr||cur.loadingDocs)return!1;!more&&cur.found&&(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs,0,cur.found,cur.searchStr);let searchStr=cur.searchStr;if(!more&&cur.cache[cur.searchStr]){let _=cur.cache[cur.searchStr];return cur.found||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs,0,_[2],cur.searchStr),Docs.processGlobalSearch(searchStr,!0,_[0],_[1],_[2])}return cur.searchTimeout=setTimeout((function(){if(searchStr!=cur.searchStr)return;const requestStartedAt=+new Date;window.ajax.post("/docs.php",{act:"search_docs",q:cur.searchStr,offset:more&&cur.searchShown||0,oid:cur.oid},{onDone:function(evalString,shown,count){let list;try{list=eval("("+evalString+")")}catch(_){return(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.logEvalError)(_,evalString),!1}if(!more&&!cur.found){const _=+new Date-requestStartedAt;(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs,0,count,cur.searchStr,0,0,_)}return Docs.processGlobalSearch(searchStr,!more,list,shown,count)},showProgress:function(){cur.loadingDocs=!0,more?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__.lockButton)(cur.searchMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.showProgress(cur.searchInput)},hideProgress:function(){cur.loadingDocs=!1,more?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_20__.unlockButton)(cur.searchMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.hideProgress(cur.searchInput)}})}),more?10:300),!0},processGlobalSearch:function(_,e,o,r,t){return _===cur.searchStr&&(cur.searchCount=t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)(cur.searchBlock,!e||r&&o),r&&o&&(e&&(cur.searchCont.innerHTML="",cur.searchShown=0),Docs.drawList(o,cur.searchCont),cur.searchShown=cur.searchShown+r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.searchMore,"unshown",cur.searchShown>=t||cur.searchShown>=1e3||!r||!o),Docs.drawSummary(!0),cur.cache[cur.searchStr]=[o,r,t],!0)},drawSummary:function(_){let e=Docs.getList().length,o=cur.type?"type"+cur.type:cur.section;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(cur.summary,e?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.langNumeric)(e,"%s",!0):""),cur.sectionLabels[o]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(cur.titleEl,cur.sectionLabels[o]),_){let _=cur.searchShown&&cur.searchCount;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(cur.searchSummary,_?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.langNumeric)(_,"%s",!0):"")}},updateList:function(_,e){if(e=e||{},_==cur.searchStr&&!e.force)return Docs.hideLoadProgress(),!1;if(cur.menuProgress&&"menu"!==e.from){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(`._docs_section_${cur.section}`,cur.rmenu);window.uiRightMenu.switchMenu(_),window.uiRightMenu.showProgress(_),delete cur.menuProgress}Docs.updateTypes(),cur.searchStr=_,cur.selection=!1;let o=Docs.getList(),r=o.length;if(Docs.hideLoadProgress(),cur.searchStr||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.searchBlock),cur.searchStr||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_11__.serviceDocs),!r){cur.shown=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.listMore,"unshown");let _=cur.searchStr?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_empty_search").replace("%s","<b>"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.clean)(cur.searchStr)+"</b>"):cur.oid<0?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_no_group_docs"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_no_user_docs");cur.listCont.innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(cur.tpl.empty,{text:_})}return(cur.searchStr||r)&&(Docs.showList(o.slice(0,cur.perPage)),r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(cur.listMore,"unshown",cur.found<=cur.shown),r<cur.perPage)?(cur.searchStr&&Docs.globalSearch(),Docs.drawSummary(),!0):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.searchBlock),Docs.drawSummary(),!0)},hideLoadProgress:function(){window.uiRightMenu&&window.uiRightMenu.hideProgress((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#narrow_column")))},editItem:function(_,e,o){return!(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showBox)("/docs.php",{act:"edit_box",oid:e,did:o})},downloadItem:function(_,e,o,r,t){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.checkEvent)(t))return!0;const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(!s)return!((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_feed_notification",_)&&cur&&"notifications"===cur.section);let i=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".docs_item_icon",s)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".docs_item_thumb",s)).href;return r&&(i+=(i.match(/\?/)?"&":"?")+"fragment=1"),window.open(i),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(t)},addItem:function(_,e,o,r){cur._addedDocsInfo=cur._addedDocsInfo||{};let t=e+"_"+o,s=cur._addedDocsInfo[t],i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(s){const _={act:"a_delete",hash:r,did:s[0],oid:s[4]};window.ajax.post("/docs.php",_,{onDone:function(){if(delete cur._addedDocsInfo[t],_.to_id==cur.oid){let _=cur.docs.length;for(;_--;){cur.docs[_][0]==s[0]&&(cur["item_restore"+s[0]]=[cur.docs.splice(_,1)[0],_],cur.index.remove(cur["item_restore"+s[0]][0]),cur.typesChanged=!0)}cur.count-=1,cur.found-=1,cur.list={}}}})}else{const _={act:"a_add",doc:t,hash:r,to_id:cur.groupAdmin?cur.oid:window.vk.id};window.ajax.post("/docs.php",_,{onDone:function(e,o,r){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showDoneBox)(e),cur._addedDocsInfo[t]=r,_.to_id==cur.oid&&(r._order=(cur.docs[0]&&cur.docs[0]._order||0)-1,cur.docs.unshift(r),cur.index.add(r),Docs.updateTags(r[6]),cur.typesChanged=!0,window._tbLink&&window._tbLink.loc&&(cur.__phinputs=cur.__phinputs||[],(0,_web_lib_nav_utils__WEBPACK_IMPORTED_MODULE_15__.globalHistoryDestroy)(window._tbLink.loc)))}})}const c=!s;if(i){i.classList.toggle("doc_added",c);const _=i.querySelector(".docs_action_icon");_&&(_.innerHTML=c?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_28__.getIcon16Done)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_27__.getIcon16Add)().icon)}return Docs.rowActive(_,"add"),!1},deleteItem:function(_,e,o,r,t,s){let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(i)return _&&window.tooltips&&window.tooltips.destroy(_),window.ajax.post("/docs.php",{act:"a_delete",hash:r,did:o,oid:e,sure:t,comment:s},{onDone:function(t){if(!t)return void window.createConfirmBox(Docs.deleteItem.bind(null,_,e,o,r,1),"документ");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(i,"docs_item_deleted");let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(`#docs_restore_row${e}_${o}`);s&&(s.innerHTML=t);let c=cur.docs.length;for(;c--;){cur.docs[c][0]==o&&(cur["item_restore"+o]=[cur.docs.splice(c,1)[0],c],cur.index.remove(cur["item_restore"+o][0]),cur.typesChanged=!0)}cur.count-=1,cur.found-=1,cur.list={}},showProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(i,"docs_item_loading"),hideProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(i,"docs_item_loading")}),!1},restoreItem:function(_,e,o,r){let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);if(t)return window.ajax.post("/docs.php",{act:"a_restore",hash:r,did:o,oid:e},{onDone:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(t,"docs_item_deleted");let e=cur["item_restore"+o];e&&(cur.docs.splice(e[1],0,e[0]),cur.index.add(e[0]),cur.typesChanged=!0,cur.count+=1,cur.found+=1)},showProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(t,"docs_item_loading"),hideProgress:()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(t,"docs_item_loading")}),!1},tagSearch:function(_,e){let o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(_.innerText||_.textContent);return cur.searchInput.setValue(o),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.onChanged(cur.searchInput,!0),Docs.updateList(o,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(cur.searchInput),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollToTop)(100),!1},selectTag:function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".ui_rmenu_item_sel",cur.rmenu)!==_&&(window.uiRightMenu.switchMenu(_),window.uiRightMenu.showProgress(_),cur.menuProgress=!0,cur.section="all",cur.type="",Docs.tagSearch(_,{from:"menu"}))},addTag:function(_,e){let o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(_.innerText||_.textContent);return e.selectItem([o,o])},rowActive:function(_,e){let o,r=[12,5,5],t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_docs_item",_);o="delete"===e||t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t,"doc_added")&&"add"===e?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_remove_tt"):"edit"===e?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_edit_tt"):cur.groupAdmin?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_add_to_group_tt"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_add_tt"),o&&(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{text:function(){return o},showdt:500,black:1,shift:r})},filterMP3:function(_,e){let o=[];return(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_9__.each)(e,(function(){if("mp3"!==this.name.substr(-3).toLowerCase())o.push(this);else{let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#docs_upload_error");_?(_.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_mp3_fail"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(_))):setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error")},_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_mp3_fail")).hide,4e3)}})),o},showFileTT:function(_,e,o){if(clearTimeout(cur.fileTT),!_||!e||!o)return!1;"gif"===e&&(cur.fileTT=setTimeout((function(){let e=o+"?wnd=1";cur.fileTTImage=new Image,cur.fileTTImage.src=e,cur.fileTTImage.onload=function(){cur.fileTTImage&&cur.fileTTImage.getAttribute("src")===e&&(cur.prevTT&&cur.prevTT!=_&&cur.prevTT.tt&&cur.prevTT.tt.hide(),clearTimeout(_.hidetimer),_.hidetimer=!1,cur.prevTT=_,(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{content:'<img class="docs_tt_image" src="'+e+'" align="center"/>',shift:[14,7,7],slide:15,className:"docs_tt",dir:"auto",hasover:!1,nohideover:!0,showdt:0}))},window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"])}),500))},hideFileTT:function(){clearTimeout(cur.fileTT),delete cur.fileTTImage},chooseSwitchTT:function(_){return(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{text:function(){return _.getAttribute("data-tt")},black:1,showdt:500,shift:[3,0,0]})},chooseSwitch:function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().titleWrap,"box_loading"))return!1;cur.docsChooseInput.setValue(""),_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.onChanged(cur.docsChooseInput,!0),cur.docsTab="user_docs"===cur.docsTab?"group_docs":"user_docs";let e=cur.docsCurFilter;const o={act:"a_choose_doc_box",offset:0,to_id:cur.docsToId,tab:cur.docsTab,switch_tab:1,ext_filter:e||""};Object.assign(o,{from:cur.docsChooseFrom,imhash:cur.docsChooseImHash}),window.ajax.post("/docs.php",o,{onDone:function(e,o,r,t,s){cur.docsChooseRows.innerHTML=e,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.setLabel(cur.docsChooseMore,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)(cur.docsChooseMore,!r),cur.docsOffset=o,_.innerHTML=s},showProgress:(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().showCloseProgress,hideProgress:(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hideCloseProgress})},chooseUpdateList:function(_,e){e!=cur.chooseDocsQuery&&(clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>Docs.chooseDocsSearch(_)),e?300:0))},chooseDocsSearch:function(_){let e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(_));e!=cur.docsSearchStr&&(cur.docsSearchStr=e,e?(cur.docsOffset=0,Docs.chooseMore()):(cur.docsOffset=cur.docsStartOffset,cur.docsChooseRows.innerHTML=cur.docsStartHTML,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)(cur.docsChooseMore,cur.docsStartMore)))},chooseMore:function(){if(cur.docsChooseLoading)return!1;const _={act:"a_choose_doc_box",offset:cur.docsOffset,to_id:cur.docsToId,tab:cur.docsTab,q:cur.docsSearchStr,more:1,ext_filter:cur.docsCurFilter};Object.assign(_,{from:cur.docsChooseFrom,imhash:cur.docsChooseImHash}),window.ajax.post("/docs.php",_,{onDone:function(_,e,o){0==cur.docsOffset?cur.docsChooseRows.innerHTML=_:cur.docsChooseRows.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.cf)(_)),cur.docsOffset=e,o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(cur.docsChooseMore)},showProgress:function(){cur.docsChooseLoading=!0,cur.docsOffset?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.lock(cur.docsChooseMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.showProgress(cur.docsChooseInput)},hideProgress:function(){cur.docsChooseLoading=!1,cur.docsOffset?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_21__.FlatButton.unlock(cur.docsChooseMore):_web_legacy_ui_ui_search__WEBPACK_IMPORTED_MODULE_17__.default.hideProgress(cur.docsChooseInput)}})},chooseScroll:function(){let _=window.lastWindowHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(cur.docsChooseMore)&&_>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(cur.docsChooseMore,!0)[1]-(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_3__.scrollGetY)()-_&&cur.docsChooseMore.click()},chooseDoc:function(_,e,o,r){if("A"===r.target.tagName||"A"===r.target.parentNode.tagName)return!0;let t=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("._docs_choose_attach",_);if(void 0!==_.selected)cur.lastAddMedia&&(cur.lastAddMedia.unchooseMedia(_.selected),_.selected=void 0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(_,"docs_item_selected"),t&&(t.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_add_media")));else{let s=cur.attachCount&&cur.attachCount()||0;window.event=window.event||r,cur.chooseMedia("doc",e,o),window.event=void 0,(!cur.attachCount||cur.attachCount()>s)&&cur.lastAddMedia&&(_.selected=cur.lastAddMedia.chosenMedias.length-1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(_,"docs_item_selected"),t&&(t.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_cancel")))}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(r)},upload:function(_,e){return!(void 0!==cur.uplId&&window.Upload&&window.Upload.checkFileApi()&&window.Upload.checked&&window.Upload.checked[cur.uplId])||(cur.docsChooseUpload.click(),!1)},chooseUploaded:function(_,e){let o=void 0!==_.ind?_.ind:_,r=(_.fileName||_.filename).replace(/[&<>"']/g,""),t=r?o+"_"+r:_;const s=document.getElementById(`upload${t}_progress_wrap`);s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".progress_x",s)),window.ajax.post("/docs.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)({act:"a_save_doc",from:"choose",from_place:cur.docsChooseFrom,imhash:cur.docsChooseImHash,blockPersonal:cur.docsChooseBlockPersonal,mail_add:cur.docsChooseMailAdd},e),{onDone:function(_,e,o){cur.chooseMedia("doc",_+"_"+e,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o,{upload_ind:t}))},onFail:(_,e)=>Docs.chooseUploadFailed(_,e),progress:"form"===window.Upload.types[o]?window.box.progress:null})},chooseUploadFailed:function(_,e){let o=void 0!==_.ind?_.ind:_,r=(_.fileName?_.fileName:_.filename||_).replace(/[&<>"']/g,"");if("fileApi"===window.Upload.types[o]&&!window.Upload.options[o].wiki_editor){let t,s,i=(_.fileName||_.filename).replace(/[&<>"']/g,""),c=i?o+"_"+i:_;cur.imMedia||cur.imwMedia?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("upload"+c+"_progress_wrap"),t=(-3==cur.peer?cur.imwMedia:cur.imMedia).lnkId,cur.addMedia[t].unchooseMedia(!1)):cur.addMedia&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("upload"+c+"_progress_wrap"),t=(cur.attachMediaIndexes||{})[r],t&&cur.addMedia[t].unchooseMedia(!1));let a=!0;e&&"string"==typeof e.error&&e.error.match(/ERR_UPLOAD_TERMINATED/)&&(a=!1),s=e&&"wrong_arch_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_arch_fail"):e&&"wrong_mp3_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_mp3_fail"):e&&"wrong_music_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_music_fail"):e&&"wrong_arch_mp3_file"===e.error?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_arch_mp3_fail"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_upload_fail"),a&&setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error")},s).hide,4e3)}(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().progress),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_12__.topError)("Upload failed",{dt:-1,type:102,url:((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)("#file_uploader_form"+o)||{}).action}),window.Upload.embed(o),cur.onMediaUploadFail&&cur.onMediaUploadFail(_)},chooseUploadStart:function(_,e){let o=void 0!==_.ind?_.ind:_,r=window.Upload.options[o],t=window.Upload.types[o];cur.docsChooseFiles[o]=e||_,"form"===t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().progress),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().changed=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.$)(".file",cur.docsChooseUpload).disabled=!0),"flash"===t&&(window.boxLayerWrap.visibilityHide=!0,cur.docsChooseIsFlash=!0),r.wiki_editor||(cur.notStarted&&(window.boxQueue.hideLast(),delete cur.notStarted),Docs.chooseUploadProgress(_,0,0)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(window.boxLayerWrap,"dropbox_over"),cur.onMediaUploadStarted&&cur.onMediaUploadStarted(_)},chooseUploadProgress:function(_,e,o){let r=void 0!==_.ind?_.ind:_;if(void 0===_.ind&&(_=cur.docsChooseFiles[r]),window.Upload.options[r].wiki_editor)cur.docsChooseUploadArea.innerHTML='<img src="/images/upload.gif"/>';else{let t=(cur.attachMediaIndexes||{})[r];if(void 0===t||t&&cur.addMedia[t].chosenMedia||cur.imMedia){let t={loaded:e,total:o};(_.fileName||_.filename)&&(t.fileName=(_.fileName||_.filename).replace(/[&<>"']/g,"")),cur.showMediaProgress("photo",r,t)}}},chooseUploadComplete:function(info,res){let params,i=void 0!==info.ind?info.ind:info;if(!res)return;try{params=eval("("+res+")")}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.logEvalError)(_,res),params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__.fromQueryString)(res)}if(!params.file)return void window.Upload.onUploadError(info,params);let options=window.Upload.options[i];options&&options.bugcomments_editor&&(params.bugcomments_editor=options.bugcomments_editor),options&&options.blog_editor_hash&&(params.blog_editor_hash=options.blog_editor_hash),Docs.chooseUploaded(info,params)},chooseHideFlashUploader:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(window.boxLayerWrap,"box_layer_hidden")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(window.boxLayerWrap,"box_layer_hidden"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(window.boxLayerWrap)),window.boxLayerWrap.visibilityHide=!1},onChooseDragEnter:function(_){window.boxLayerWrap.scrollTop=0;let e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)(),o=e.bodyNode;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(cur.docsChooseRows))e.bodyH=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(o)[1];else if(void 0!==e.bodyH){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(o,!0)[1],r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(cur.docsChooseDropbox)[1],t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(cur.docsChooseDropbox))[1]-r;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(cur.docsChooseDropbox,"height",Math.min(window.lastWindowHeight-_-t,e.bodyH-t))}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.cancelEvent)(_)},onDragEnter:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(cur.docsChooseWrap,"dropbox_over"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("box_layer_wrap","box_layer_wrap--docs_upload")},onDragOut:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(cur.docsChooseWrap,"dropbox_over"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)("box_layer_wrap","box_layer_wrap--docs_upload")},hidePreviewLoader:function(){const _=document.querySelector(".docs_loader");return!!_&&(_.classList.add("hidden"),!0)},handlePreviewError:function(_){var e,o;return(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_1__.statlogsValueEvent)("docs_preview",0,`cloud_view_doc_error_${_}`,window.cur.docExt),(0,_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_26__.tmrTrackCustomGoal)("vk_file_viewer_error",{errorType:_,ext:window.cur.docExt,size:window.cur.docSize,country:null==(e=window.cur)?void 0:e.userCountry,city:null==(o=window.cur)?void 0:o.userCity,agent:window.cur.userAgent,timestamp:Date.now()}),this.saveDoc(!0)},claimHint:function(_){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(_,{text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_5__.getLang("docs_claimed_doc_hint"),shift:[24,3],black:1,className:"claim_hint_tooltip",dir:"bottom"})},_eof:1}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(_){var e=__webpack_module_cache__[_];if(void 0!==e)return e.exports;var o=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(_,e,o,r)=>{if(!e){var t=1/0;for(a=0;a<deferred.length;a++){for(var[e,o,r]=deferred[a],s=!0,i=0;i<e.length;i++)(!1&r||t>=r)&&Object.keys(__webpack_require__.O).every((_=>__webpack_require__.O[_](e[i])))?e.splice(i--,1):(s=!1,r<t&&(t=r));if(s){deferred.splice(a--,1);var c=o();void 0!==c&&(_=c)}}return _}r=r||0;for(var a=deferred.length;a>0&&deferred[a-1][2]>r;a--)deferred[a]=deferred[a-1];deferred[a]=[e,o,r]},__webpack_require__.n=_=>{var e=_&&_.__esModule?()=>_.default:()=>_;return __webpack_require__.d(e,{a:e}),e},getProto=Object.getPrototypeOf?_=>Object.getPrototypeOf(_):_=>_.__proto__,__webpack_require__.t=function(_,e){if(1&e&&(_=this(_)),8&e)return _;if("object"==typeof _&&_){if(4&e&&_.__esModule)return _;if(16&e&&"function"==typeof _.then)return _}var o=Object.create(null);__webpack_require__.r(o);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var t=2&e&&_;"object"==typeof t&&!~leafPrototypes.indexOf(t);t=getProto(t))Object.getOwnPropertyNames(t).forEach((e=>r[e]=()=>_[e]));return r.default=()=>_,__webpack_require__.d(o,r),o},__webpack_require__.d=(_,e)=>{for(var o in e)__webpack_require__.o(e,o)&&!__webpack_require__.o(_,o)&&Object.defineProperty(_,o,{enumerable:!0,get:e[o]})},__webpack_require__.f={},__webpack_require__.e=_=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,o)=>(__webpack_require__.f[o](_,e),e)),[])),__webpack_require__.u=_=>25394===_?"AudioLongtapModal.2932c6e9c6120eff2657.js":24817===_?"hls.7bfefe299fa92971b99a.js":75980===_?"menu_settings.3ea04534d06cb6d38e2c.js":96816===_?"web-audio-lyrics-modal.218229d2232b2e3d93fb.js":9375===_?"voice_message_player.e464fba002f2d3244773.js":28762===_?"speech.be0c329a1eff7c81577d.js":57468===_?"SilentModeForms.81e354f9bd61dfd364b5.js":96248===_?"feed-skeleton.add07457f9a9b141ed5a.js":59240===_?"performance-stats.4b38c82ee7bdbd67bf4a.js":38288===_?"lottie.5e4758c39f106eab733a.js":void 0,__webpack_require__.miniCssF=_=>_+"."+{25394:"6af57e1b0cf5a74f9a87",57468:"35be3dfa1e90e3cdd0a1",75980:"5bbee2c9f3e189193a73"}[_]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(_){if("object"==typeof window)return window}}(),__webpack_require__.o=(_,e)=>Object.prototype.hasOwnProperty.call(_,e),inProgress={},__webpack_require__.l=(_,e,o,r)=>{if(inProgress[_])inProgress[_].push(e);else{var t,s;if(void 0!==o)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var a=i[c];if(a.getAttribute("src")==_||a.getAttribute("data-webpack")=="vk:"+o){t=a;break}}t||(s=!0,(t=document.createElement("script")).charset="utf-8",t.timeout=120,__webpack_require__.nc&&t.setAttribute("nonce",__webpack_require__.nc),t.setAttribute("data-webpack","vk:"+o),t.src=_),inProgress[_]=[e];var n=(e,o)=>{t.onerror=t.onload=null,clearTimeout(d);var r=inProgress[_];if(delete inProgress[_],t.parentNode&&t.parentNode.removeChild(t),r&&r.forEach((_=>_(o))),e)return e(o)},d=setTimeout(n.bind(null,void 0,{type:"timeout",target:t}),12e4);t.onerror=n.bind(null,t.onerror),t.onload=n.bind(null,t.onload),s&&document.head.appendChild(t)}},__webpack_require__.r=_=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=_=>new Promise(((e,o)=>{var r=__webpack_require__.miniCssF(_),t=__webpack_require__.p+r;if(((_,e)=>{for(var o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var t=(i=o[r]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(t===_||t===e))return i}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){var i;if((t=(i=s[r]).getAttribute("data-href"))===_||t===e)return i}})(r,t))return e();((_,e,o,r)=>{var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.onerror=t.onload=s=>{if(t.onerror=t.onload=null,"load"===s.type)o();else{var i=s&&("load"===s.type?"missing":s.type),c=s&&s.target&&s.target.href||e,a=new Error("Loading CSS chunk "+_+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.type=i,a.request=c,t.parentNode.removeChild(t),r(a)}},t.href=e,document.head.appendChild(t)})(_,t,e,o)})),installedCssChunks={33897:0},__webpack_require__.f.miniCss=(_,e)=>{installedCssChunks[_]?e.push(installedCssChunks[_]):0!==installedCssChunks[_]&&{25394:1,57468:1,75980:1}[_]&&e.push(installedCssChunks[_]=loadStylesheet(_).then((()=>{installedCssChunks[_]=0}),(e=>{throw delete installedCssChunks[_],e})))},(()=>{var _={33897:0};__webpack_require__.f.j=(e,o)=>{var r=__webpack_require__.o(_,e)?_[e]:void 0;if(0!==r)if(r)o.push(r[2]);else if(75980!=e){var t=new Promise(((o,t)=>r=_[e]=[o,t]));o.push(r[2]=t);var s=__webpack_require__.p+__webpack_require__.u(e),i=new Error;__webpack_require__.l(s,(o=>{if(__webpack_require__.o(_,e)&&(0!==(r=_[e])&&(_[e]=void 0),r)){var t=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+e+" failed.\n("+t+": "+s+")",i.name="ChunkLoadError",i.type=t,i.request=s,r[1](i)}}),"chunk-"+e,e)}else _[e]=0},__webpack_require__.O.j=e=>0===_[e];var e=(e,o)=>{var r,t,[s,i,c]=o,a=0;if(s.some((e=>0!==_[e]))){for(r in i)__webpack_require__.o(i,r)&&(__webpack_require__.m[r]=i[r]);if(c)var n=c(__webpack_require__)}for(e&&e(o);a<s.length;a++)t=s[a],__webpack_require__.o(_,t)&&_[t]&&_[t][0](),_[t]=0;return __webpack_require__.O(n)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[75514,98066,56990,24509,76400,40885,68592],(()=>__webpack_require__(422328)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();