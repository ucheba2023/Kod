(()=>{"use strict";var e,t={505806:(e,t,r)=>{r.d(t,{EMPTY_SCREEN:()=>i});const i="other"},291179:(e,t,r)=>{r.d(t,{FAVE_PRODUCTS_SCREEN:()=>n,FAVE_SCREEN:()=>i});const i="fave",n="fave_products"},468176:(e,t,r)=>{r.d(t,{initMarketAnalytics:()=>b,trackMarketArea:()=>f,trackMarketEvent:()=>S});var i=r(883377),n=r(230670),s=r(839470),o=r(291179),a=r(505806),c=r(382671),_=r(865142),d=r(500240),m=r(706259),l=r(42906),u=r(238138),E=r(321668),h=r(975562);const I=[];let T=!1;function v(e,t=0){const r=O(t);return!!r&&e.includes(r.event)}function O(e=0){return I.length>e?I[I.length-(1+e)]:null}function p(e){T||(window.addEventListener("beforeunload",(()=>{(0,u.observersStop)(),(0,E.flushMarketEvents)(e)})),T=!0)}function S(e){if(!function(e){const t=O();if(t){if(e===l.ECommGoodsEvent.CLOSE_ITEM&&t.event===l.ECommGoodsEvent.CLOSE_ITEM)return!1;if(e===l.ECommGoodsEvent.TRANSITION_TO_ITEM){if(v([l.ECommGoodsEvent.TRANSITION_TO_ITEM_LEFT,l.ECommGoodsEvent.TRANSITION_TO_ITEM_RIGHT]))return!1;if(v([l.ECommGoodsEvent.SWITCH_ITEM_VARIANT_1,l.ECommGoodsEvent.SWITCH_ITEM_VARIANT_2]))return!1}}return!0}(e.event))return;if(!e.event&&!e.table)return void(0,n.marketDebug)("error","event and table not specified",e);e.table||(Object.values(l.ECommGoodsEvent).includes(e.event)?e.table=l.AnalyticsEventTable.GOODS:Object.values(l.ECommOrdersEvent).includes(e.event)?e.table=l.AnalyticsEventTable.ORDERS:(0,n.marketDebug)("error","table not specified")),e.screen=e.screen?e.screen:window.MarketAnalyticsManager&&window.MarketAnalyticsManager.getScreen(),e.platform=e.platform?e.platform:"web",e.itemType=e.itemType?e.itemType:"",p(e.platform);const t=String(e.event),r=`${e.table}:${t}`;e.instant?(0,E.logMarketEventNow)(e.platform,r,e.ownerId,e.itemId,e.screen,e.albumId,e.time,e.duration,e.itemType):(0,E.logMarketEvent)(e.platform,r,e.ownerId,e.itemId,e.screen,e.albumId,e.time,e.duration,e.itemType),I.push(e),I.length>3&&I.shift()}function f(e,t=""){p(t),(0,E.flushMarketEvents)(t),(0,u.observersStop)(),(0,n.marketDebug)("warn","analytics: start tracking area",e);const r=({observerId:e,container:r,types:n,refSource:o,screen:m,customItemReachedCallback:u})=>{const E=h.MarketAnalyticsObserver.create({observerId:e,itemSelector:{types:null!=n?n:"market_item"},isUnifyNodes:!0,isDynamicContent:!0,platform:t,container:r,getExtraItemParams:()=>({ref_source:o})});return E.itemReachedCallback=null!=u?u:e=>{(0,s.partConfigEnabled)("market_view_item_analytics_new")&&t!==i.PLATFORM_MVK?c.viewAnalytics.logMarketItemView({view:{start_view:e.viewStart.toString(),end_view:e.viewEnd.toString()},screen:m||(0,_.getStatScreen)(),previous_screen:(0,d.getScreenPrev)()||a.EMPTY_SCREEN,ref_source:e.ref_source,params:{item_id:Number(e.itemId),owner_id:e.ownerId,search_query_id:e.searchQueryId,item_idx:Number(e.node.getAttribute("data-stat-id"))||0}}):S({event:"market_item"===e.type?l.ECommGoodsEvent.VIEW_ITEM:l.ECommGoodsEvent.VIEW_ALBUM,ownerId:e.ownerId,itemId:"market_item"===e.type?e.itemId:0,duration:e.duration,time:e.viewStart,albumId:"market_item"===e.type?0:e.itemId,platform:e.platform})},E.watch(),E};switch(e){case l.AnalyticsArea.MARKET:const e=e=>{let r=0;if(void 0!==window.cur.aid&&(r=window.cur.aid),(0,s.partConfigEnabled)("market_view_item_analytics_new")&&t!==i.PLATFORM_MVK){if("market_item"===e.type)c.viewAnalytics.logMarketItemView({view:{start_view:e.viewStart.toString(),end_view:e.viewEnd.toString()},screen:(0,_.getStatScreen)(),ref_source:e.ref_source,params:{item_id:Number(e.itemId),owner_id:e.ownerId,search_query_id:e.searchQueryId,item_idx:Number(e.node.getAttribute("data-stat-id"))||0}})}else S({event:"market_item"===e.type?l.ECommGoodsEvent.VIEW_ITEM:l.ECommGoodsEvent.VIEW_ALBUM,ownerId:e.ownerId,itemId:"market_item"===e.type?e.itemId:0,albumId:"market_item"===e.type?r:e.itemId,duration:e.duration,time:e.viewStart,platform:e.platform})},n=new URLSearchParams(window.location.search).has("section")?m.RefSource.COMMUNITY_GROUP_GOODS:m.RefSource.COMMUNITY_GOODS;r({observerId:"market_products",refSource:n,customItemReachedCallback:e});const a=r({observerId:"market_albums",types:"market_album",refSource:n,customItemReachedCallback:e});t!==i.PLATFORM_MVK&&(a.preCheckReachedCallback=e=>{var t;const r=e.offsetTop,i=null==(t=e.parentNode)?void 0:t.parentNode;return i&&r<i.offsetHeight});break;case l.AnalyticsArea.GROUP:r({observerId:"market_module",refSource:m.RefSource.COMMUNITY_SHOWCASE}),r({observerId:"group_wall",types:"market_item,market_album",refSource:m.RefSource.POST});break;case l.AnalyticsArea.USER_PROFILE:r({observerId:"user_wall",types:"market_item,market_album",refSource:m.RefSource.POST});break;case l.AnalyticsArea.BOOKMARKS:const d="product"===window.nav.objLoc.type;r({observerId:"bookmarks",refSource:m.RefSource.BOOKMARKS,screen:d?o.FAVE_PRODUCTS_SCREEN:o.FAVE_SCREEN});break;case l.AnalyticsArea.FEED:r({observerId:"feed",container:".feed_wrap",refSource:m.RefSource.POST});break;case l.AnalyticsArea.GLUBS:r({observerId:"glubs",container:".glubs-container",refSource:m.RefSource.GLUBS})}}function b(e,t,r,i){if(window.MarketAnalyticsManager)try{window.MarketAnalyticsManager.setScreen(e),window.MarketAnalyticsManager.setHash(r),window.MarketAnalyticsManager.setEnabled(i),window.MarketAnalytics.trackArea(t)}catch(e){console.error("cannot init market analytics",e)}else console.error("MarketAnalyticsManager is undefined")}},975562:(e,t,r)=>{r.d(t,{MarketAnalyticsObserver:()=>c});var i=r(230670),n=r(202157),s=r(121320),o=r(75272),a=r(883377);class c extends s.NodeViewObserver{isReached(e){if(!(0,i.isElementVisible)(e))return!1;let t,r=this.gap;const n=e.closest("[data-stat-viewport]");if(n){const e=n.getBoundingClientRect();r={top:e.top,left:e.left},t={width:e.left+e.width,height:e.top+e.height}}return(0,i.isElementInViewport)(e,45,r,t)}static create(e){var t,r,i,n,s;return new c(e.observerId,e.itemSelector,null==(t=e)?void 0:t.container,null==(r=e)?void 0:r.isUnifyNodes,null==(i=e)?void 0:i.isDynamicContent,null==(n=e)?void 0:n.platform,null==(s=e)?void 0:s.getExtraItemParams)}static getViewportGap(e=""){const t={left:0,top:0};let r="";r=e===a.PLATFORM_MVK?"#vk_head":"#page_header_wrap,#market_search_input";return document.querySelectorAll(r).forEach((e=>{const r=(0,o.getElementSize)(e);t.top=t.top+r.height})),t}constructor(e,t,r="",i=!1,s=!1,o="",a){super(e,t,r,i,o,a),this.observerId=e,this.itemSelector=t,this.container=r,this.isUnifyNodes=i,this.isDynamicNodes=s,this.gap=null,s&&this.addMutators([new n.NodeMutationObserver]),this.gap=c.getViewportGap(this.getPlatform())}}},42906:(e,t,r)=>{var i,n,s,o;r.d(t,{AnalyticsArea:()=>i,AnalyticsEventTable:()=>n,ECommGoodsEvent:()=>s,ECommOrdersEvent:()=>o}),function(e){e.MARKET="market",e.GROUP="group",e.USER_PROFILE="user_profile",e.BOOKMARKS="bookmarks",e.FEED="feed",e.GLUBS="glubs"}(i||(i={})),function(e){e.GOODS="ecomm_goods",e.ORDERS="ecomm_orders"}(n||(n={})),function(e){e.TRANSITION_TO_ITEM="transition_to_item",e.TRANSITION_TO_ALBUM="transition_to_album",e.SWITCH_ITEM_VARIANT_1="switch_item_variant_1",e.SWITCH_ITEM_VARIANT_2="switch_item_variant_2",e.TRANSITION_TO_ITEM_LEFT="transition_to_item_left",e.TRANSITION_TO_ITEM_RIGHT="transition_to_item_right",e.VIEW_ITEM="view_item",e.VIEW_ALBUM="view_album",e.CLOSE_ITEM="close_item",e.TRANSITION_TO_OWNER="transition_to_owner",e.VIEW_ITEM_MEDIA="view_item_media",e.ADD_ITEM_TO_CART="add_item_to_cart",e.EXPAND_ITEM_DESCRIPTION="expand_item_description",e.ADD_ITEM_TO_BOOKMARKS="add_item_to_bookmarks",e.REMOVE_ITEM_FROM_BOOKMARKS="remove_item_from_bookmarks",e.EXPAND_COMMENTS="expand_comments",e.COMMENT="comment",e.ADD_TO_CART_HS="add_to_cart_hs",e.OPEN_WIKI="open_wiki",e.SEND_MESSAGE_TO_OWNER="send_message_to_owner",e.SEND_MESSAGE_TO_OWNER_2="send_message_to_owner_2",e.OPEN_CHAT_WITH_OWNER="open_chat_with_owner",e.OPEN_CHAT_WITH_OWNER_2="open_chat_with_owner_2",e.LIKE_ITEM="like_item",e.UNLIKE_ITEM="unlike_item",e.SHARE_ITEM="share_item",e.CTA_LINK="cta_link",e.CTA_LINK_2="cta_link_2",e.CALL="call",e.CALL_2="call_2",e.CREATE_ITEM="create_item",e.CREATE_ALBUM="create_album",e.EDIT_ITEM="edit_item",e.EDIT_ALBUM="edit_album",e.DELETE_ITEM="delete_item",e.DELETE_ALBUM="delete_album",e.GROUP_ITEMS="group_items",e.ADD_PROPERTY="add_property",e.ADD_PROPERTY_VALUE="add_property_value",e.DELETE_PROPERTY="delete_property",e.DELETE_PROPERTY_VALUE="delete_property_value",e.TRANSITION_TO_EDIT_PROPERTIES="transition_to_edit_properties",e.TRANSITION_TO_EDIT_ALBUMS="transition_to_edit_albums",e.TRANSITION_TO_ADD_ALBUM="transition_to_add_album",e.TRANSITION_TO_ADD_ITEM="transition_to_add_item",e.TRANSITION_TO_EDIT_ITEM="transition_to_edit_item",e.TRANSITION_TO_DELETE_ALBUM="transition_to_delete_album",e.TRANSITION_TO_GROUP_ITEMS="transition_to_group_items",e.VIEW_FEEDBACK="view_feedback",e.OPEN_FEEDBACK_PHOTO="open_feedback_photo"}(s||(s={})),function(e){e.EVENT_MAKE_ORDER="make_order",e.CANCEL_ORDER="cancel_order",e.EXPAND_ORDER_INFO="expand_order_info",e.TRANSITION_TO_ORDERS="transition_to_orders",e.OPEN_MARKET_GROUP_ORDERS="open_market_group_orders",e.OPEN_MARKET_GROUP_ITEMS="open_market_group_items",e.OPEN_MARKET_GROUP_SETTINGS="open_market_group_settings",e.OPEN_MARKET_GROUP_DELIVERY="open_market_group_delivery",e.TRANSITION_TO_MARKET_SUPPORT="transition_to_market_support",e.OPEN_ORDER_INFO="open_order_info",e.ADD_TRACK_CODE="add_track_code",e.ADD_INTERNAL_COMMENT="add_internal_comment",e.CHANGE_ORDER_STATUS="change_order_status",e.OPEN_CHAT_WITH_CUSTOMER="open_chat_with_customer",e.SEND_MESSAGE_TO_CUSTOMER="send_message_to_customer",e.OPEN_ORDER_HISTORY="open_order_history",e.FILTER_ORDERS_BY_STATUS="filter_orders_by_status",e.EXPORT_ORDERS_DATA="export_orders_data"}(o||(o={}))},202157:(e,t,r)=>{r.d(t,{NodeMutationObserver:()=>i});class i{connectMutator(e){if(this.mutationObserver)throw new Error(`{Observer #${e.getObserverId()}} MutationObserver already connected to observer`);const t=document.querySelector(e.getContainerQuery());t instanceof HTMLElement&&(this.mutationObserver=new MutationObserver((t=>{t.forEach((t=>{if(t.addedNodes)for(let r=0;r<t.addedNodes.length;r++){const n=t.addedNodes[r];if(n instanceof HTMLElement){const t=i.resolveNodes(n,e).filter((e=>!!e));t&&(t.forEach((t=>{e.add(t)})),e.scan())}}}))})),this.mutationObserver.observe(t,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))}disconnectMutator(e){e.isRunning()&&this.mutationObserver&&this.mutationObserver.disconnect()}static resolveNodes(e,t){let r=[];if(t.getSelectorQuery(!1).split(",").forEach((t=>{if(e.matches(t))return r.push(e),!1})),r.length<1){const i=e.querySelectorAll(t.getSelectorQuery(!1));r=Array.from(i)}return r}}},629709:(e,t,r)=>{r.d(t,{NodeObserver:()=>_});var i=r(434788),n=r(936134),s=r(238138),o=r(865142);const a="data-stat-item",c="data-stat-id";class _{set debounceTimeout(e){this._debounceTimeout=e}set itemReachedCallback(e){this._itemReachedCallback=e}set preCheckReachedCallback(e){this._preCheckReachedCallback=e}getObserverId(){return this.observerId}getItemSelector(){return this.itemSelector}getPlatform(){return this.platform}add(e){this.nodes.push(e)}getTrackingItems(){return this.trackingItems}addMutators(e){this.mutatorList=this.mutatorList.concat(e)}isRunning(){return this.isWatching}watch(){this.isWatching||(this.update(),this.startObserving(),this.connectMutators(),this.isWatching=!0)}stop(){this.isWatching&&(this.trackUntracked(),this.stopObserving(),this.disconnectMutators(),this.isWatching=!1)}scan(){this.viewportScanner()}trackUntracked(){const e=this.getTrackingItems();for(let t in e)if(e[t]){const r=e[t];!r.isTracked&&r.isReached&&(this.track(r),this.persist(r))}}connectMutators(){this.mutatorList.forEach((e=>{e.connectMutator(this)}))}disconnectMutators(){this.mutatorList.forEach((e=>{e.disconnectMutator(this)}))}getContainerQuery(){const e=this.container.substr(0,1);if("#"===e||"."===e)return this.container;return`[data-stat-container="${this.container?this.container:this.observerId}"]`}getSelectorQuery(e=!0){const t=this.getContainerQuery();let r=[];return this.itemSelector.selectors?r=this.itemSelector.selectors.split(",").map((r=>e?`${t} ${r}`:r)):this.itemSelector.types&&(r=this.itemSelector.types.split(",").map((r=>e?`${t} [${a}^="${r}|"]`:`[${a}^="${r}|"]`))),r.join(",")}update(){const e=document.querySelectorAll(this.getSelectorQuery());this.nodes=Array.from(e)}static parseStatAttribute(e){var t;const r=null==(t=e.getAttribute(a))?void 0:t.split("|");return r?{type:r[0],ownerId:parseInt(r[1]),itemId:r[2]}:{type:"",ownerId:0,itemId:0}}getNodeKey(e,t){let r=String(t.itemId);if(this.isUnifyNodes){this.unifyNode(e);r=`${r}_${e.getAttribute(c)}`}return`${this.observerId}_${r}`}isItemReached(e){return!(void 0!==this._preCheckReachedCallback&&!this._preCheckReachedCallback(e))&&this.isReached(e)}filterItem(e){return!e.isTracked&&!e.isReached&&(this.isItemReached(e.node)?(this.track(e),this.persist(e),!1):(this.persist(e),!0))}track(e){e.isTracked||(e.viewEnd=Date.now(),e.duration=e.viewEnd-e.viewStart,this._itemReachedCallback(e),e.isReached=!1,e.isTracked=!0)}persist(e){this.trackingItems[e.key]=e}getTrackingItem(e){const t=_.parseStatAttribute(e);if(!t.type||!t.itemId)return null;const r=this.getNodeKey(e,t);return r?r in this.trackingItems?this.trackingItems[r]:this.createTrackingItem(e,t):null}createTrackingItem(e,t){const r=this.getNodeKey(e,t),n=this.getExtraItemParams&&this.getExtraItemParams()||{};return this.trackingItems[r]=(0,i._)({},n,{key:r,type:t.type,observerId:this.observerId,ownerId:t.ownerId,itemId:t.itemId,isTracked:!1,isReached:!1,viewStart:0,viewEnd:0,duration:0,node:e,viewTimer:0,data:{},platform:this.getPlatform(),city:(0,o.getStatCity)(),screen:n.screen||(0,o.getStatScreen)()}),this.trackingItems[r]}getNextUnifyId(){return++this.uniqueNodeCounter}unifyNode(e){e.getAttribute(c)||e.setAttribute(c,String(this.getNextUnifyId()))}startObserving(){this.update(),this.viewportScanner=(0,n.debounce)((()=>{this.nodes=this.nodes.filter((e=>{const t=this.getTrackingItem(e);return!!t&&this.filterItem(t)}))}),this._debounceTimeout),this.scrollEventListener=()=>this.scan(),document.addEventListener("scroll",this.scrollEventListener,{passive:!0}),this.scan()}stopObserving(){document.removeEventListener("scroll",this.scrollEventListener),this.nodes=[],this.viewportScanner=()=>{},this.scrollEventListener=()=>{}}constructor(e,t,r="",i=!1,n="",o){if(this.observerId=e,this.itemSelector=t,this.container=r,this.isUnifyNodes=i,this.platform=n,this.getExtraItemParams=o,this.trackingItems={},this._debounceTimeout=20,this.uniqueNodeCounter=0,this.nodes=[],this.isWatching=!1,this.mutatorList=[],(0,s.observersRegister)(this),!this.itemSelector.types&&!this.itemSelector.selectors)throw new Error("Empty itemSelector definition");this.container||(this.container=this.observerId)}}},121320:(e,t,r)=>{r.d(t,{NodeViewObserver:()=>n});var i=r(629709);class n extends i.NodeObserver{filterItem(e){return!e.isTracked&&(e.isReached&&!this.isItemReached(e.node)?(this.track(e),this.persist(e),!1):(this.isItemReached(e.node)&&this.view(e),this.persist(e),!0))}view(e){e.isTracked||(e.isReached=!0,e.viewStart||(e.viewStart=Date.now()),e.viewTimer&&(clearTimeout(e.viewTimer),e.viewTimer=0),e.viewTimer=window.setTimeout((()=>{const t=e.node;!this.isItemReached(t)||function(e){const t=e.viewStart;return Date.now()-t>3e4}(e)?this.track(e):this.view(e)}),3e3))}track(e){e.viewTimer&&(clearTimeout(e.viewTimer),e.viewTimer=0),super.track(e)}}},238138:(e,t,r)=>{r.d(t,{observersRegister:()=>n,observersRescan:()=>o,observersStop:()=>s});const i={};function n(e){e.getObserverId()in i&&(i[e.getObserverId()].stop(),delete i[e.getObserverId()]),i[e.getObserverId()]=e}function s(){for(let e in i)if(i[e]){i[e].stop()}}function o(){for(let e in i)if(i[e]){i[e].scan()}}},570957:(e,t,r)=>{var i,n,s,o=r(468176),a=r(321668),c=r(42906),_=r(382671),d=r(865142);(null==(n=window.vk)||null==(i=n.pe)?void 0:i.static_manager_dynamic_imports)&&(null==(s=window.vk)?void 0:s.stDomain)&&(r.p=window.vk.stDomain+"/dist/");const m={trackArea:o.trackMarketArea,onMarketAlbumEdit:(e,t,r)=>{(0,o.trackMarketEvent)({table:c.AnalyticsEventTable.GOODS,event:r?c.ECommGoodsEvent.CREATE_ALBUM:c.ECommGoodsEvent.EDIT_ALBUM,ownerId:e,albumId:t,instant:!0})},setStorageData:a.setStorageData,logViewItemEvent:e=>{_.viewAnalytics.logMarketItemView({view:{start_view:"0",end_view:"0"},screen:(0,d.getStatScreen)(),ref_source:e.refSource,params:{item_id:e.itemId,owner_id:e.ownerId,item_idx:0,search_query_id:0}})},onMarketItemCardOpen:a.onMarketItemCardOpen};window.MarketAnalytics=m;try{window.stManager.done(window.jsc("web/market_analytics.js"))}catch(e){}}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,r,n,s)=>{if(!r){var o=1/0;for(d=0;d<e.length;d++){for(var[r,n,s]=e[d],a=!0,c=0;c<r.length;c++)(!1&s||o>=s)&&Object.keys(i.O).every((e=>i.O[e](r[c])))?r.splice(c--,1):(a=!1,s<o&&(o=s));if(a){e.splice(d--,1);var _=n();void 0!==_&&(t=_)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,n,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.e=()=>Promise.resolve(),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/dist/",(()=>{var e={37317:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[o,a,c]=r,_=0;if(o.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(c)var d=c(i)}for(t&&t(r);_<o.length;_++)s=o[_],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},r=self.webpackChunkvk=self.webpackChunkvk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i.O(void 0,[68592],(()=>i(570957)));n=i.O(n)})();