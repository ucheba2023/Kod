/*! For license information please see 902866c362380432bb8fab2a5e67d693.133bdb8828ba4d165e67.js.LICENSE.txt */
(self.webpackChunkvk=self.webpackChunkvk||[]).push([[43087],{803437:(e,t,s)=>{"use strict";s.d(t,{Icon20MessageArrowRightOutline:()=>i});var i=(0,s(426435).makeIcon)("Icon20MessageArrowRightOutline","message_arrow_right_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="message_arrow_right_outline_20"><path d="M10.25 2.5c-2.938 0-5.576 1.391-7.044 3.572a.749.749 0 1 0 1.244.836c1.171-1.738 3.327-2.91 5.8-2.91 3.775 0 6.75 2.694 6.75 5.995s-2.975 5.995-6.75 5.995c-.91 0-1.788-.156-2.6-.455a.75.75 0 0 0-.822.207c-.609.687-1.64 1.105-3.123 1.22.682-1.347 1.045-2.376 1.084-3.13a.749.749 0 0 0-.15-.49 5.768 5.768 0 0 1-.67-1.137.75.75 0 0 0-1.372.607c.183.412.405.808.665 1.183-.082.457-.338 1.189-.896 2.292l-.24.475a1.2 1.2 0 0 0 1.164 1.736l.532-.041c1.472-.115 2.804-.51 3.768-1.361.85.26 1.745.392 2.66.392 4.435 0 8.25-3.206 8.25-7.493 0-4.287-3.815-7.493-8.25-7.493Zm-.971 3.97a.75.75 0 0 0-1.06 1.06l1.219 1.22H2.75a.75.75 0 1 0 0 1.5h6.688l-1.22 1.22a.75.75 0 1 0 1.06 1.06l2.5-2.5a.75.75 0 0 0 0-1.06l-2.5-2.5Z" /></symbol>',20,20,!1,void 0)},118083:(e,t,s)=>{"use strict";s.d(t,{Icon24MessageArrowRightOutline:()=>i});var i=(0,s(426435).makeIcon)("Icon24MessageArrowRightOutline","message_arrow_right_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="message_arrow_right_outline_24"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M12.016 4.9c-3.077 0-5.702 1.444-7.065 3.5a.9.9 0 0 1-1.5-.995C5.178 4.799 8.395 3.1 12.016 3.1c5.324 0 9.884 3.729 9.884 8.607 0 4.878-4.56 8.607-9.884 8.607-1.173 0-2.3-.178-3.348-.506C7.42 20.961 5.616 21.513 3.42 21.6c-.927.036-1.598-.927-1.209-1.792.529-1.183 1.197-2.403 1.298-3.72a8.205 8.205 0 0 1-.34-.54.9.9 0 0 1 1.56-.898c.124.216.262.426.413.629a.9.9 0 0 1 .177.537c0 1.38-.54 2.684-1.099 3.92 1.714-.194 2.835-.75 3.513-1.547a.9.9 0 0 1 1.002-.26c1 .376 2.11.586 3.28.586 4.6 0 8.085-3.172 8.085-6.807 0-3.635-3.485-6.807-8.084-6.807z" /><path d="M10.864 8.264a.9.9 0 0 1 1.272 0l2.6 2.6a.9.9 0 0 1 0 1.272l-2.6 2.6a.9.9 0 0 1-1.272-1.272l1.063-1.064H2.9a.9.9 0 1 1 0-1.8h9.027l-1.063-1.064a.9.9 0 0 1 0-1.272z" /></g></symbol>',24,24,!1,void 0)},736846:(e,t,s)=>{"use strict";s.d(t,{Icon12StarCircleFillYellow:()=>i});var i=(0,s(28178).makeIcon)("Icon12StarCircleFillYellow","star_circle_fill_yellow_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="star_circle_fill_yellow_12"><linearGradient id="star_circle_fill_yellow_12_a" x1="-6" x2="6" y1="6" y2="18" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffb73d" /><stop offset="1" stop-color="#ffa000" /></linearGradient><g fill-rule="evenodd" clip-rule="evenodd"><path fill="url(#star_circle_fill_yellow_12_a)" d="M6 0a6 6 0 1 1 0 12A6 6 0 0 1 6 0zm.11 2.59a.25.25 0 0 0-.334.114l-.952 1.928-2.127.31a.25.25 0 0 0-.138.426l1.539 1.5-.364 2.119a.25.25 0 0 0 .363.263L6 8.25l1.903 1a.25.25 0 0 0 .363-.263l-.364-2.119 1.54-1.5a.25.25 0 0 0-.14-.427l-2.126-.309-.952-1.928a.25.25 0 0 0-.113-.113z" /><path fill="#fff" d="M6.11 2.59a.25.25 0 0 0-.334.114l-.952 1.928-2.127.31a.25.25 0 0 0-.138.426l1.539 1.5-.364 2.119a.25.25 0 0 0 .363.263L6 8.25l1.903 1a.25.25 0 0 0 .363-.263l-.364-2.119 1.54-1.5a.25.25 0 0 0-.14-.427l-2.126-.309-.952-1.928a.25.25 0 0 0-.113-.113z" /></g></symbol>',12,12,!1,void 0)},161183:(e,t,s)=>{"use strict";s.d(t,{Icon16Attach:()=>i});var i=(0,s(28178).makeIcon)("Icon16Attach","attach_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="attach_16"><path fill="currentColor" fill-rule="evenodd" d="M7.968 2.038a3.528 3.528 0 0 1 4.998 0 3.545 3.545 0 0 1 0 5.005L8.66 11.359a2.14 2.14 0 0 1-3.03 0 2.148 2.148 0 0 1 0-3.031l2.09-2.106a.75.75 0 1 1 1.065 1.056L6.693 9.386a.648.648 0 0 0 0 .914.639.639 0 0 0 .906 0l4.305-4.317a2.045 2.045 0 0 0 0-2.886 2.028 2.028 0 0 0-2.874 0L4.603 7.536a9.39 9.39 0 0 0-.274.28 3.203 3.203 0 0 0 0 4.3c.174.192.36.38.552.554.594.54 1.421.824 2.252.827.836.003 1.591-.278 2.068-.755.1-.1.204-.198.304-.298l2.214-2.22a.75.75 0 0 1 1.062 1.06l-2.23 2.235c-.134.135-.222.223-.301.296-.818.81-1.984 1.186-3.121 1.182-1.148-.004-2.35-.392-3.258-1.219a9.76 9.76 0 0 1-.653-.655 4.703 4.703 0 0 1 0-6.315c.075-.083.165-.173.306-.315l4.444-4.455Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},728405:(e,t,s)=>{"use strict";s.d(t,{Icon20InfoCircleOutline:()=>i});var i=(0,s(28178).makeIcon)("Icon20InfoCircleOutline","info_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="info_circle_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 9.25a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75z" clip-rule="evenodd" /><path fill="currentColor" d="M11 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" /><path fill="currentColor" fill-rule="evenodd" d="M3.99 3.99A8.476 8.476 0 0 1 10 1.5c2.347 0 4.473.952 6.01 2.49A8.476 8.476 0 0 1 18.5 10a8.476 8.476 0 0 1-2.49 6.01A8.476 8.476 0 0 1 10 18.5a8.476 8.476 0 0 1-6.01-2.49A8.476 8.476 0 0 1 1.5 10c0-2.347.952-4.473 2.49-6.01zM10 3a6.976 6.976 0 0 0-4.95 2.05A6.976 6.976 0 0 0 3 10a6.98 6.98 0 0 0 2.05 4.95A6.976 6.976 0 0 0 10 17a6.975 6.975 0 0 0 4.95-2.05A6.975 6.975 0 0 0 17 10a6.976 6.976 0 0 0-2.05-4.95A6.976 6.976 0 0 0 10 3z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},249600:(e,t,s)=>{"use strict";s.d(t,{Icon20PictureOutline:()=>i});var i=(0,s(28178).makeIcon)("Icon20PictureOutline","picture_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="picture_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M6.838 16.437c.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.318a3.5 3.5 0 0 0 1.53-1.53c.146-.288.257-.686.318-1.427.016-.194.027-.402.036-.628l-.003-.004-1.303-1.303a12.742 12.742 0 0 0-.666-.64c-.156-.133-.23-.166-.27-.179a.75.75 0 0 0-.463 0c-.04.013-.113.046-.269.179-.162.138-.36.335-.666.64L10.53 13.53a.75.75 0 0 1-1.06 0l-.303-.303a12.75 12.75 0 0 0-.666-.64c-.156-.133-.23-.166-.27-.179a.75.75 0 0 0-.463 0c-.04.013-.113.046-.269.179-.162.138-.36.335-.666.64l-2.277 2.278c.25.245.539.452.855.614.288.146.686.257 1.427.318zm9.39-6.27.272.272V10c0-1.425-.001-2.403-.063-3.162-.06-.74-.172-1.139-.318-1.427a3.5 3.5 0 0 0-1.53-1.53c-.288-.146-.686-.257-1.427-.318C12.403 3.501 11.425 3.5 10 3.5c-1.425 0-2.403.001-3.162.063-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427C3.501 7.597 3.5 8.575 3.5 10c0 1.425.001 2.403.063 3.162.038.463.096.793.17 1.045l2.04-2.04.02-.02c.28-.28.52-.521.736-.704.226-.192.473-.363.776-.462a2.25 2.25 0 0 1 1.39 0c.303.099.55.27.776.462.16.136.335.304.529.497l1.773-1.773.02-.02c.28-.28.52-.521.736-.704.226-.192.473-.363.776-.462a2.25 2.25 0 0 1 1.39 0c.303.099.55.27.776.462.215.183.456.424.736.703zM2.544 4.73C2 5.8 2 7.2 2 10c0 2.8 0 4.2.545 5.27a5 5 0 0 0 2.185 2.185C5.8 18 7.2 18 10 18c2.8 0 4.2 0 5.27-.545a5 5 0 0 0 2.185-2.185C18 14.2 18 12.8 18 10c0-2.8 0-4.2-.545-5.27a5 5 0 0 0-2.185-2.185C14.2 2 12.8 2 10 2c-2.8 0-4.2 0-5.27.545A5 5 0 0 0 2.545 4.73zM7.25 6a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},77199:(e,t,s)=>{"use strict";s.d(t,{Icon20Stars:()=>i});var i=(0,s(28178).makeIcon)("Icon20Stars","stars_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="stars_20"><path fill-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367-.65.65-1.532 1.14-2.367 1.507.835.367 1.717.857 2.367 1.507.65.65 1.14 1.532 1.507 2.367.367-.835.857-1.717 1.507-2.367.65-.65 1.532-1.14 2.367-1.507-.835-.368-1.717-.857-2.367-1.507-.65-.65-1.14-1.532-1.507-2.367Zm-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21.073 21.073 0 0 1-1.162.338c-.38.1-.38.793 0 .894a27.146 27.146 0 0 1 .912.26c.083.025.166.05.25.078 1.317.421 2.716 1.014 3.485 1.782.768.768 1.36 2.168 1.782 3.485a20.843 20.843 0 0 1 .27.907l.068.255c.1.38.793.38.894 0a27.487 27.487 0 0 1 .26-.912c.025-.083.05-.166.078-.25.421-1.317 1.014-2.717 1.782-3.485.768-.768 2.168-1.36 3.485-1.782a20.843 20.843 0 0 1 .907-.27l.255-.068c.38-.1.38-.793 0-.894a27.487 27.487 0 0 1-.912-.26 20.843 20.843 0 0 1-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21.13 21.13 0 0 1-.338-1.162c-.1-.38-.793-.38-.894 0a27.146 27.146 0 0 1-.26.912 21.13 21.13 0 0 1-.078.25ZM4.365.763a.385.385 0 0 0-.73 0l-.414 1.24a1.926 1.926 0 0 1-1.218 1.218l-1.24.414a.385.385 0 0 0 0 .73l1.24.414a1.926 1.926 0 0 1 1.218 1.218l.414 1.24a.385.385 0 0 0 .73 0l.414-1.24a1.926 1.926 0 0 1 1.218-1.218l1.24-.414a.385.385 0 0 0 0-.73l-1.24-.414a1.926 1.926 0 0 1-1.218-1.218L4.365.763Z" /></symbol>',20,20,!1,void 0)},366582:(e,t,s)=>{"use strict";s.d(t,{Icon28AddCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28AddCircleFillBlue","add_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="add_circle_fill_blue_28"><linearGradient id="add_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#add_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="M14 7a1 1 0 0 1 1 1v5h5a1 1 0 1 1 0 2h-5v5a1 1 0 1 1-2 0v-5H8a1 1 0 1 1 0-2h5V8a1 1 0 0 1 1-1z" /></symbol>',28,28,!1,void 0)},689826:(e,t,s)=>{"use strict";s.d(t,{Icon28AdvertisingCircleFillRed:()=>i});var i=(0,s(28178).makeIcon)("Icon28AdvertisingCircleFillRed","advertising_circle_fill_red_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="advertising_circle_fill_red_28"><linearGradient id="advertising_circle_fill_red_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff5263" /><stop offset="1" stop-color="#ff3347" /></linearGradient><path fill="url(#advertising_circle_fill_red_28_a)" d="M14 28c7.732 0 14-6.268 14-14S21.732 0 14 0 0 6.268 0 14s6.268 14 14 14z" /><g fill="#fff"><path d="M19.7 19c-.169 0-.389-.05-.529-.149L16.732 16.7s-.123-.11-.152-.146a.35.35 0 0 1-.062-.122.52.52 0 0 1-.018-.143v-5.523a.68.68 0 0 1 .019-.205.35.35 0 0 1 .062-.122c.029-.037.152-.149.152-.149l2.438-2.135c.141-.1.371-.152.529-.155a.8.8 0 0 1 .8.8v9.4a.8.8 0 0 1-.8.8zM14.7 10.5a.3.3 0 0 1 .3.3v5.4a.3.3 0 0 1-.3.3l-2.2.003c0 .606.326 1.372.583 1.697.391.493.286 1.12-.182 1.53-.47.412-1.344.345-1.734-.148-.59-.743-1.167-1.93-1.167-3.08l-.5-.002a3 3 0 1 1 0-6z" /></g></symbol>',28,28,!1,void 0)},62340:(e,t,s)=>{"use strict";s.d(t,{Icon28ChainCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28ChainCircleFillBlue","chain_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chain_circle_fill_blue_28"><linearGradient id="chain_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#chain_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" fill-rule="evenodd" d="M13.022 16.184a.837.837 0 0 1-1.187-.001 3.861 3.861 0 0 1 0-5.419l2.618-2.643a3.772 3.772 0 0 1 5.366 0c1.261 1.274 1.557 3.033.67 4.508-.296.49-.947.47-1.326.09-.274-.276-.253-.707-.076-1.019.465-.817.24-1.683-.456-2.379a2.094 2.094 0 0 0-2.997 0l-2.611 2.636a2.143 2.143 0 0 0-.001 3.025.83.83 0 0 1 0 1.202zm1.95-3.166c.833.835.832 2.19-.001 3.025L12.36 18.68a2.094 2.094 0 0 1-2.997 0c-.696-.696-.911-1.555-.447-2.371.178-.312.199-.744-.076-1.019-.379-.38-1.03-.4-1.325.09-.888 1.474-.602 3.226.659 4.5a3.772 3.772 0 0 0 5.367 0l2.617-2.643a3.86 3.86 0 0 0 0-5.419.837.837 0 0 0-1.187 0 .831.831 0 0 0 0 1.2z" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},469531:(e,t,s)=>{"use strict";s.d(t,{Icon28EditCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28EditCircleFillBlue","edit_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="edit_circle_fill_blue_28"><linearGradient id="edit_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><rect width="28" height="28" fill="url(#edit_circle_fill_blue_28_a)" rx="14" /><path fill="#fff" fill-rule="evenodd" d="m14.987 9.976 3.035 3.035-5.539 5.54a5.722 5.722 0 0 1-2.375 1.426l-2.488.76a.286.286 0 0 1-.358-.358l.76-2.488a5.721 5.721 0 0 1 1.427-2.375zm4.17-2.35 1.216 1.217c.47.468.5 1.209.094 1.714l-.094.104-1.516 1.516-3.035-3.035 1.517-1.515a1.286 1.286 0 0 1 1.819 0z" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},535505:(e,t,s)=>{"use strict";s.d(t,{Icon28GearCircleFillGray:()=>i});var i=(0,s(28178).makeIcon)("Icon28GearCircleFillGray","gear_circle_fill_gray_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="gear_circle_fill_gray_28"><linearGradient id="gear_circle_fill_gray_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b1b6bd" /><stop offset="1" stop-color="#99a2ad" /></linearGradient><path fill="url(#gear_circle_fill_gray_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="M15 6.667c.18.6.306 1.201 1.305 1.777 1.118.304 1.665.003 2.173-.337.53-.353.688-.25.9-.043l.515.515c.235.236.33.33 0 .943-.298.552-.633 1.066-.335 2.18.577 1.004 1.176 1.178 1.775 1.298.625.125.664.309.667.606v.727c0 .334 0 .467-.667.667-.6.18-1.201.306-1.777 1.305-.303 1.118-.002 1.665.337 2.173.353.53.25.688.043.9l-.515.515c-.236.235-.33.33-.943 0-.552-.298-1.066-.633-2.18-.335-1.004.577-1.178 1.176-1.298 1.775-.125.625-.309.664-.606.667h-.727c-.334 0-.467 0-.667-.667-.18-.6-.306-1.201-1.305-1.777-1.118-.303-1.665-.002-2.173.337-.53.353-.688.25-.9.043l-.515-.515c-.235-.236-.33-.33 0-.943.298-.552.634-1.066.335-2.18C7.865 15.294 7.266 15.12 6.667 15c-.625-.125-.664-.309-.667-.606v-.727c0-.334 0-.467.667-.667.6-.18 1.201-.306 1.777-1.305.304-1.118.003-1.665-.337-2.173-.353-.53-.25-.688-.043-.9l.515-.515c.236-.235.33-.33.943 0 .552.298 1.066.634 2.18.335C12.706 7.865 12.88 7.266 13 6.667c.125-.625.309-.664.606-.667h.727c.334 0 .467 0 .667.667zM14 10.2a3.8 3.8 0 1 0 0 7.6 3.8 3.8 0 0 0 0-7.6z" /></symbol>',28,28,!1,void 0)},287865:(e,t,s)=>{"use strict";s.d(t,{Icon28MentionCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28MentionCircleFillBlue","mention_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="mention_circle_fill_blue_28"><linearGradient id="mention_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#mention_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="M13.875 21c-1.385 0-2.595-.274-3.63-.822s-1.835-1.33-2.4-2.344C7.283 16.82 7 15.638 7 14.285v-.42c0-1.352.298-2.547.895-3.585a6.19 6.19 0 0 1 2.516-2.418C11.49 7.287 12.735 7 14.143 7h.072c1.307 0 2.475.258 3.504.774s1.834 1.234 2.413 2.155c.579.922.868 1.965.868 3.131v.428c0 .805-.133 1.513-.398 2.125-.266.613-.643 1.086-1.133 1.421-.489.336-1.053.503-1.691.503-.585 0-1.091-.118-1.518-.354s-.696-.55-.81-.94h-.08c-.114.39-.36.702-.739.936-.379.233-.828.35-1.347.35-.525 0-.982-.116-1.37-.346s-.686-.561-.895-.993c-.209-.43-.313-.941-.313-1.53v-1.067c0-.565.106-1.058.318-1.477.212-.42.511-.745.9-.976.387-.23.84-.345 1.36-.345.49 0 .909.114 1.258.341.349.228.58.534.693.918h.063v-.166c0-.28.088-.507.264-.682.176-.175.404-.262.685-.262.274 0 .497.087.667.262s.255.402.255.682v3.42c0 .244.074.445.224.603s.343.236.581.236c.269 0 .503-.115.703-.346.2-.23.355-.555.466-.975.11-.42.165-.906.165-1.46v-.236c0-.892-.218-1.692-.653-2.4a4.478 4.478 0 0 0-1.813-1.658c-.773-.396-1.646-.594-2.618-.594h-.08c-1.08 0-2.028.224-2.843.673-.814.449-1.446 1.086-1.893 1.91s-.671 1.78-.671 2.865v.306c0 1.072.214 2.008.644 2.807.43.798 1.04 1.415 1.83 1.85s1.718.65 2.78.65h.09c.4 0 .87-.04 1.414-.122.274-.035.445-.052.51-.052a.73.73 0 0 1 .52.192.64.64 0 0 1 .205.49c0 .344-.194.577-.582.7-.519.169-1.247.253-2.184.253zm-1.146-6.637c0 1.06.397 1.591 1.19 1.591.376 0 .661-.124.855-.371.194-.248.291-.617.291-1.106v-.735c0-.443-.103-.79-.309-1.04-.205-.251-.49-.377-.854-.377-.382 0-.673.136-.873.407-.2.271-.3.663-.3 1.176z" /></symbol>',28,28,!1,void 0)},439561:(e,t,s)=>{"use strict";s.d(t,{Icon28MoreHorizontalCircleFillGray:()=>i});var i=(0,s(28178).makeIcon)("Icon28MoreHorizontalCircleFillGray","more_horizontal_circle_fill_gray_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="more_horizontal_circle_fill_gray_28"><linearGradient id="more_horizontal_circle_fill_gray_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b1b6bd" /><stop offset="1" stop-color="#99a2ad" /></linearGradient><path fill="url(#more_horizontal_circle_fill_gray_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="M15 6.667c.18.6.306 1.201 1.305 1.777 1.118.304 1.665.003 2.173-.337.53-.353.688-.25.9-.043l.515.515c.235.236.33.33 0 .943-.298.552-.633 1.066-.335 2.18.577 1.004 1.176 1.178 1.775 1.298.625.125.664.309.667.606v.727c0 .334 0 .467-.667.667-.6.18-1.201.306-1.777 1.305-.303 1.118-.002 1.665.337 2.173.353.53.25.688.043.9l-.515.515c-.236.235-.33.33-.943 0-.552-.298-1.066-.633-2.18-.335-1.004.577-1.178 1.176-1.298 1.775-.125.625-.309.664-.606.667h-.727c-.334 0-.467 0-.667-.667-.18-.6-.306-1.201-1.305-1.777-1.118-.303-1.665-.002-2.173.337-.53.353-.688.25-.9.043l-.515-.515c-.235-.236-.33-.33 0-.943.298-.552.634-1.066.335-2.18C7.865 15.294 7.266 15.12 6.667 15c-.625-.125-.664-.309-.667-.606v-.727c0-.334 0-.467.667-.667.6-.18 1.201-.306 1.777-1.305.304-1.118.003-1.665-.337-2.173-.353-.53-.25-.688-.043-.9l.515-.515c.236-.235.33-.33.943 0 .552.298 1.066.634 2.18.335C12.706 7.865 12.88 7.266 13 6.667c.125-.625.309-.664.606-.667h.727c.334 0 .467 0 .667.667zM14 10.2a3.8 3.8 0 1 0 0 7.6 3.8 3.8 0 0 0 0-7.6z" /></symbol>',28,28,!1,void 0)},382193:(e,t,s)=>{"use strict";s.d(t,{Icon28PaletteFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28PaletteFillBlue","palette_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="palette_fill_blue_28"><linearGradient id="palette_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#palette_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" fill-rule="evenodd" d="M14.629 17.702c-.174.375-.104.768.08 1.08.503.87.777 2.218-.68 2.218C10.307 21 7 17.783 7 14c0-3.866 3.147-7 7.03-7a7.03 7.03 0 0 1 6.942 5.894c.284 2.391-1.625 4.091-3.668 4.091-.84 0-2.231-.239-2.675.717zM9.75 15a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm6-3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm-4 0a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm6.5 3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5z" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},776076:(e,t,s)=>{"use strict";s.d(t,{Icon28PhoneCircleFillGreen:()=>i});var i=(0,s(28178).makeIcon)("Icon28PhoneCircleFillGreen","phone_circle_fill_green_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="phone_circle_fill_green_28"><linearGradient id="phone_circle_fill_green_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#50c750" /><stop offset="1" stop-color="#32b332" /></linearGradient><path fill="url(#phone_circle_fill_green_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="M15.642 16.535c1.054-1.054 2.712-1.15 3.814-.224l.797.671c.91.766 1.002 2.145.205 3.08a2.58 2.58 0 0 1-1.707.882c-2.546.343-5.217-.884-8.014-3.681-2.796-2.797-4.024-5.469-3.68-8.014.017-.199.058-.395.122-.585.149-.435.41-.822.759-1.122.936-.796 2.314-.705 3.08.205l.67.797c.928 1.101.832 2.76-.222 3.814l-.571.57a.554.554 0 0 0-.128.583c.208.569.739 1.28 1.59 2.131.854.853 1.564 1.384 2.132 1.592.203.075.43.024.582-.128z" /></symbol>',28,28,!1,void 0)},957228:(e,t,s)=>{"use strict";s.d(t,{Icon28PinCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28PinCircleFillBlue","pin_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="pin_circle_fill_blue_28"><linearGradient id="pin_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#pin_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="m16.235 8.109 3.657 3.663c.225.226.064.633-.263.633h-.523a.895.895 0 0 0-.633.263l-1.715 1.715a.896.896 0 0 0-.262.633v2.996c0 .554-.7.858-1.1.456l-2.301-2.3-3.57 3.57a.893.893 0 1 1-1.264-1.263L11.83 14.9l-2.29-2.29c-.391-.392-.109-1.102.456-1.102h2.995a.895.895 0 0 0 .633-.262l1.715-1.715a.896.896 0 0 0 .263-.634v-.526c0-.32.403-.495.634-.263z" /></symbol>',28,28,!1,void 0)},685446:(e,t,s)=>{"use strict";s.d(t,{Icon28UgcChatStickerCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28UgcChatStickerCircleFillBlue","ugc_chat_sticker_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="ugc_chat_sticker_circle_fill_blue_28"><rect width="28" height="28" fill="url(#ugc_chat_sticker_circle_fill_blue_28_a)" rx="14" /><path fill="#fff" d="M13.47 8v2.286c0 2.612 2.105 4.728 4.702 4.728h1.986c-.832 1.797-3.026 3.515-5.655 3.515a6.746 6.746 0 0 1-1.703-.216 12.07 12.07 0 0 1-1.896 1.34 7.9 7.9 0 0 1-.401.21l-.159.078a.604.604 0 0 1-.802-.275.584.584 0 0 1-.017-.477 8.66 8.66 0 0 0 .225-.61c.176-.55.311-1.117.404-1.699-1.026-.95-1.654-2.236-1.654-3.65 0-2.63 2.132-4.813 4.97-5.229Zm1.4.318v1.968a3.31 3.31 0 0 0 3.302 3.32H20.5l-5.63-5.288Z" /><defs><linearGradient id="ugc_chat_sticker_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF" /><stop offset="1" stop-color="#5C9CE6" /></linearGradient></defs></symbol>',28,28,!1,void 0)},691324:(e,t,s)=>{"use strict";s.d(t,{Icon28UserCircleFillBlue:()=>i});var i=(0,s(28178).makeIcon)("Icon28UserCircleFillBlue","user_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="user_circle_fill_blue_28"><circle cx="14" cy="14" r="14" fill="url(#user_circle_fill_blue_28_a)" /><path fill="#fff" d="M16.75 11.25a2.75 2.75 0 1 0-5.5 0 2.75 2.75 0 1 0 5.5 0ZM8.5 18.115v.715c0 .37.3.67.67.67h9.66c.37 0 .67-.3.67-.67v-.715C19.5 15.692 15.836 15 14 15c-1.836 0-5.5.692-5.5 3.115Z" /><defs><linearGradient id="user_circle_fill_blue_28_a" x1="0" x2="28.733" y1="0" y2=".773" gradientUnits="userSpaceOnUse"><stop stop-color="#70B2FF" /><stop offset="1" stop-color="#5C9CE6" /></linearGradient></defs></symbol>',28,28,!1,void 0)},735347:(e,t,s)=>{"use strict";s.d(t,{Icon56LockOutline:()=>i});var i=(0,s(28178).makeIcon)("Icon56LockOutline","lock_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 56 56" id="lock_outline_56"><g fill="currentColor"><path d="M28 31a3 3 0 0 0-1.5 5.599V39.5a1.5 1.5 0 0 0 3 0v-2.901A2.999 2.999 0 0 0 28 31z" /><path fill-rule="evenodd" d="M28 4c-6.075 0-11 4.925-11 11v5.04c-.36.015-.7.034-1.02.06-1.26.103-2.344.32-3.339.826a8.5 8.5 0 0 0-3.715 3.715c-.507.996-.723 2.08-.826 3.34C8 29.208 8 30.73 8 32.634v6.73c0 1.905 0 3.426.1 4.655.103 1.26.32 2.344.826 3.339a8.5 8.5 0 0 0 3.715 3.715c.995.507 2.08.723 3.34.826 1.228.1 2.749.1 4.654.1h14.73c1.905 0 3.426 0 4.655-.1 1.26-.103 2.343-.32 3.339-.826a8.5 8.5 0 0 0 3.715-3.715c.507-.995.723-2.08.826-3.34.1-1.228.1-2.749.1-4.654v-6.73c0-1.905 0-3.426-.1-4.655-.103-1.26-.32-2.343-.826-3.339a8.5 8.5 0 0 0-3.715-3.715c-.996-.507-2.08-.723-3.34-.826-.319-.026-.658-.045-1.019-.06V15c0-6.075-4.925-11-11-11zm-8 11a8 8 0 1 1 16 0v5H20zm-5.997 8.6c.502-.256 1.147-.422 2.222-.51 1.092-.089 2.49-.09 4.475-.09h14.6c1.985 0 3.383.001 4.476.09 1.074.088 1.719.254 2.221.51a5.5 5.5 0 0 1 2.404 2.403c.255.502.42 1.147.509 2.222.089 1.092.09 2.49.09 4.475v6.6c0 1.985-.001 3.383-.09 4.476-.088 1.074-.254 1.719-.51 2.221a5.5 5.5 0 0 1-2.403 2.404c-.502.255-1.147.42-2.222.509-1.092.089-2.49.09-4.475.09H20.7c-1.985 0-3.383-.001-4.475-.09-1.075-.088-1.72-.254-2.222-.51a5.5 5.5 0 0 1-2.404-2.403c-.255-.502-.42-1.147-.509-2.222-.089-1.092-.09-2.49-.09-4.475v-6.6c0-1.985.001-3.383.09-4.475.088-1.075.254-1.72.51-2.222a5.5 5.5 0 0 1 2.403-2.404z" clip-rule="evenodd" /></g></symbol>',56,56,!1,void 0)},839123:(e,t,s)=>{"use strict";s.d(t,{Icon56SettingsOutline:()=>i});var i=(0,s(28178).makeIcon)("Icon56SettingsOutline","settings_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 56 56" id="settings_outline_56"><path fill-rule="evenodd" d="M37.004 28.152c0 4.96-4.03 8.98-9.001 8.98-4.971 0-9.001-4.02-9.001-8.98 0-4.96 4.03-8.98 9-8.98 4.972 0 9.002 4.02 9.002 8.98Zm-9.001 5.987c3.314 0 6-2.68 6-5.987 0-3.306-2.686-5.987-6-5.987s-6.001 2.68-6.001 5.987 2.687 5.987 6 5.987Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M29.265 4.005c-.798 0-1.598.017-2.396-.002-.41-.01-1.849-.044-3.058.923-1.186.949-1.628 2.398-1.895 3.463a10.3 10.3 0 0 1-.884 2.233c-.841.334-1.652.727-2.428 1.173a10.265 10.265 0 0 1-2.22-.704c-.996-.463-2.403-1.034-3.89-.708-1.514.33-2.392 1.469-2.642 1.793a48.31 48.31 0 0 1-1.427 1.76c-.266.314-1.194 1.407-1.204 2.95-.009 1.516.839 2.77 1.5 3.649.407.54.86 1.32 1.209 2.162a18.752 18.752 0 0 0-.582 2.561c-.672.59-1.406 1.08-1.997 1.381-.98.5-2.294 1.257-2.951 2.625-.669 1.391-.314 2.78-.212 3.177.187.731.358 1.47.51 2.209.083.4.373 1.806 1.586 2.764 1.193.944 2.707 1.048 3.807 1.068.65.012 1.504.127 2.352.353.51.742 1.072 1.445 1.681 2.104.028.872-.052 1.724-.186 2.356-.228 1.074-.465 2.569.184 3.94.662 1.396 1.968 1.995 2.34 2.166.686.315 1.368.647 2.038.994.364.188 1.643.85 3.155.51 1.485-.334 2.519-1.444 3.225-2.284a10.326 10.326 0 0 1 1.816-1.65c.864.06 1.75.06 2.614 0a10.33 10.33 0 0 1 1.815 1.65c.707.84 1.74 1.95 3.225 2.284 1.513.34 2.791-.322 3.155-.51.67-.347 1.352-.679 2.038-.994.373-.17 1.679-.77 2.34-2.166.65-1.371.412-2.866.184-3.94a10.283 10.283 0 0 1-.186-2.356 18.833 18.833 0 0 0 1.681-2.104 10.29 10.29 0 0 1 2.353-.353c1.099-.02 2.614-.124 3.807-1.068 1.213-.958 1.502-2.364 1.585-2.764.153-.74.323-1.478.51-2.209.102-.397.457-1.786-.211-3.177-.658-1.368-1.972-2.125-2.951-2.625a10.313 10.313 0 0 1-1.998-1.38 18.78 18.78 0 0 0-.581-2.562 10.34 10.34 0 0 1 1.208-2.162c.662-.878 1.509-2.133 1.5-3.65-.01-1.542-.938-2.635-1.204-2.948a48.17 48.17 0 0 1-1.427-1.761c-.25-.324-1.128-1.462-2.641-1.793-1.487-.325-2.895.245-3.891.708a10.25 10.25 0 0 1-2.22.704 18.81 18.81 0 0 0-2.428-1.173 10.3 10.3 0 0 1-.884-2.233c-.256-1.024-.666-2.348-1.683-3.281-1.192-1.094-2.595-1.1-3.098-1.103h-.043Zm8.892 42.739-1.902.927c-.952.464-1.427.696-2.83-.974-.788-.936-2.02-2.026-3.367-2.806a16.262 16.262 0 0 1-4.11 0c-1.348.78-2.58 1.87-3.367 2.806-1.403 1.67-1.88 1.438-2.83.974l-1.903-.927c-.951-.464-1.427-.696-.974-2.83.249-1.175.35-2.779.15-4.297a15.941 15.941 0 0 1-2.64-3.302c-1.439-.54-3.033-.804-4.24-.826-2.18-.04-2.3-.555-2.538-1.585l-.476-2.062c-.238-1.03-.357-1.546 1.586-2.537 1.085-.554 2.418-1.503 3.48-2.633.129-1.396.44-2.74.907-4.009-.457-1.494-1.245-2.946-1.983-3.926-1.312-1.743-.98-2.154-.313-2.976l1.332-1.644c.666-.822 1-1.233 2.977-.313 1.084.504 2.615.962 4.133 1.111a15.814 15.814 0 0 1 3.81-1.843c.855-1.284 1.475-2.784 1.768-3.959.53-2.115 1.059-2.115 2.117-2.115h2.299c.939.007 1.437.124 1.935 2.115.294 1.175.913 2.675 1.769 3.959 1.36.445 2.64 1.069 3.81 1.843 1.517-.15 3.048-.607 4.132-1.111 1.978-.92 2.311-.51 2.977.313l1.332 1.644c.666.822 1 1.233-.313 2.976-.738.98-1.526 2.432-1.983 3.927a15.77 15.77 0 0 1 .908 4.008c1.062 1.13 2.394 2.08 3.479 2.633 1.943.991 1.824 1.506 1.586 2.537l-.476 2.062c-.238 1.03-.357 1.546-2.538 1.585-1.207.022-2.8.286-4.24.826a15.938 15.938 0 0 1-2.64 3.302c-.2 1.518-.098 3.122.15 4.298.453 2.133-.023 2.365-.974 2.829Z" clip-rule="evenodd" /></symbol>',56,56,!1,void 0)},9752:(e,t,s)=>{"use strict";s.d(t,{Icon56UsersOutline:()=>i});var i=(0,s(28178).makeIcon)("Icon56UsersOutline","users_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="users_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path fill="currentColor" fill-rule="nonzero" d="M39.5 31c5.609 0 10.5 2.699 10.5 8 0 2.625-1.833 4-4 4h-8.5a1.5 1.5 0 0 1 0-3H46c.667 0 1-.25 1-1 0-3.164-3.328-5-7.5-5-.71 0-1.482.07-2.226.208a1.5 1.5 0 1 1-.548-2.95A15.385 15.385 0 0 1 39.5 31Zm-19-2c7.356 0 13.5 2.836 13.5 9 0 3.078-1.922 5-4.5 5h-18C8.814 43 7 41.59 7 38.5c0-6.545 6.065-9.5 13.5-9.5Zm0 3C14.514 32 10 34.2 10 38.5c0 1.244.33 1.5 1.5 1.5h18c.922 0 1.5-.578 1.5-2 0-3.874-4.606-6-10.5-6ZM39 15a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13Zm-18.5-4a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15ZM39 18a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm-18.5-4a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9Z" /></g></symbol>',56,56,!1,void 0)},294184:(e,t)=>{var s;!function(){"use strict";var i={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var a=typeof s;if("string"===a||"number"===a)e.push(s);else if(Array.isArray(s)){if(s.length){var o=n.apply(null,s);o&&e.push(o)}}else if("object"===a)if(s.toString===Object.prototype.toString)for(var r in s)i.call(s,r)&&s[r]&&e.push(r);else e.push(s.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},335106:()=>{},704107:()=>{},128831:()=>{},402752:()=>{},651656:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});const i={ugcBadge:"ChatSettingsUGCStickers-module__ugcBadge--Fxi7u",ugcIcon:"ChatSettingsUGCStickers-module__ugcIcon--wa31g",listItem:"ChatSettingsUGCStickers-module__listItem--hWpWE",textWrapper:"ChatSettingsUGCStickers-module__textWrapper--eae7m",secondaryText:"ChatSettingsUGCStickers-module__secondaryText--pu1YU",infoIcon:"ChatSettingsUGCStickers-module__infoIcon--RUa0q",userAside:"ChatSettingsUGCStickers-module__userAside--NvIXj"}},640523:(e,t,s)=>{"use strict";function i(e){return new URLSearchParams(e).toString()}s.d(t,{getUGCAppHash:()=>i})},257306:(e,t,s)=>{"use strict";s.d(t,{AvatarDropdown:()=>d});var i=s(785893),n=s(249600),a=s(77199),o=s(95432),r=s(29271),l=s(273192),c=s(769287);const d=({peerId:e,onPhotoUpload:t,children:s})=>{const d=[{text:(0,i.jsx)(c.AvatarDropdownItem,{icon:(0,i.jsx)(n.Icon20PictureOutline,{}),text:r.getLang("mail_upload_photo")}),onClick:t},{text:(0,i.jsx)(c.AvatarDropdownItem,{icon:(0,i.jsx)(a.Icon20Stars,{}),text:r.getLang("mail_create_photo_from_emoji")}),onClick:()=>{(0,o.showWiki)({w:`app7754294#peer=${e}`})}}];return(0,i.jsx)(l.default,{position:"b",appearance:"fancy",trigger:"hover",marginTop:2,marginLeft:5,align:"left",horizontalPosition:"left",data:d,children:s})}},769287:(e,t,s)=>{"use strict";s.d(t,{AvatarDropdownItem:()=>n});var i=s(785893);const n=({icon:e,text:t})=>(0,i.jsxs)("div",{className:"AvatarDropdownItem",children:[(0,i.jsx)("div",{className:"AvatarDropdownItem__icon",children:e}),t]})},600998:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsInfo:()=>v});var i=s(785893),n=s(667294),a=s(659397),o=s(401840),r=s(622284),l=s(664988),c=s(29271),d=s(514653),h=s(513698),u=s(736846),_=s(568012),g=s(875610),m=s(257306),p=s(47304);class v extends n.PureComponent{getCasperInfo(){const e=c.getLang("mail_casper_chat_info");return(0,i.jsxs)(i.Fragment,{children:[c.getLang("mail_casper_chat_label"),(0,i.jsx)(o.HintIcon,{"aria-label":e,tooltip:{maxWidth:280,placement:"top",text:e}})]})}render(){const{store:e,photo:t,title:s,description:n,grid:o,meta:g,isDonutChat:p,isDefaultPhotoOwner:v=!1,isCasper:C=!1,peerId:f}=this.props,A=(0,l.unclean)(s),I=(0,_.canChangeTitle)(e),S=(0,a.classNames)("ChatSettingsInfo",{"ChatSettingsInfo--editable":I}),L=e.get().isAvatarBuilderEntryPointEnabled,N=(0,a.classNames)("ChatSettingsInfo__title",{"ChatSettingsInfo__title-service":Boolean(64&this.props.flags)}),w=t?(0,i.jsx)("img",{src:t,width:"80",height:"80",alt:A,className:"ChatSettingsInfo__photoSelf"}):(0,i.jsx)("div",{className:"nim-peer--photo-w",children:(0,i.jsx)("div",{className:"ChatSettingsInfo__photoGrid nim-peer--photo",dangerouslySetInnerHTML:{__html:o}})});return(0,i.jsxs)("div",{className:S,children:[(0,i.jsxs)("header",{className:"ChatSettingsInfo__header",children:[(0,i.jsxs)("div",{className:"ChatSettingsInfo__photo",children:[L&&I?(0,i.jsx)(m.AvatarDropdown,{peerId:f,onPhotoUpload:this.onPhotoUpload,children:(0,i.jsx)("div",{className:"ChatSettingsInfo__avatar nim-peer nim-peer_larger",children:w})}):(0,i.jsx)("div",{className:"ChatSettingsInfo__attach nim-peer nim-peer_larger","data-tip":c.getLang("mail_settings_photo"),onClick:this.onPhotoUpload,children:w}),t&&I&&!v&&(0,i.jsx)(r.TextTooltip,{text:c.getLang("mail_settings_remove_photo"),placement:"top-start",children:(0,i.jsx)("button",{onClick:this.onPhotoRemove,className:"ChatSettingsInfo__photoRemove",children:(0,i.jsx)(h.Icon12Cancel,{})})})]}),(0,i.jsx)("h3",{className:N,children:I?(0,i.jsx)(d.EditableLabel,{value:this.state.title,changed:this.state.titleChanged,useEnter:!0,onSave:this.onSaveTitle,onChange:this.onChangeTitle,onCancel:this.onCancelTitle,validate:this.onValidateTitle}):A}),(0,i.jsxs)("div",{className:"ChatSettingsInfo__meta",children:[(0,i.jsx)("span",{className:"ChatSettingsInfo__metaItem",children:g}),p&&(0,i.jsxs)("span",{className:"ChatSettingsInfo__metaItem",children:[c.getLang("groups_donut_is_dons_chat")," ",(0,i.jsx)(u.Icon12StarCircleFillYellow,{})]}),C&&(0,i.jsx)("span",{className:"ChatSettingsInfo__metaItem",children:this.getCasperInfo()})]})]}),n&&(0,i.jsx)("div",{className:"ChatSettingsInfo__description",children:I?(0,i.jsx)(d.EditableLabel,{value:n,onSave:this.onSaveDescription}):n})]})}constructor(e){super(e),this.onSaveTitle=e=>{const t=this.props.store,s=t.get(),i=e.value.trim().replace("\n","");i&&i!==(0,l.unclean)(this.props.title)&&(this.setState({titleChanged:!1}),t.set(g.updateChatTopic.bind(null,s.peer,i)))},this.onChangeTitle=e=>{if(this.state.title!==e.target.value){const t=e.target.value.replace("\n","");this.setState({title:t,titleChanged:(0,l.unclean)(this.props.title)!==t})}},this.onValidateTitle=e=>!!e.trim().replace("\n",""),this.onCancelTitle=()=>{this.setState({title:(0,l.unclean)(this.props.title),titleChanged:!1})},this.onSaveDescription=()=>{},this.onPhotoUpload=()=>{const e=this.props.store,t=e.get().peer;(0,_.canChangeTitle)(e)&&(window.cur.recieveCropResult=void 0,window.Page.ownerPhoto(t,{gid:e.get().gid}))},this.onPhotoRemove=()=>{const e=this.props.store,t=e.get().peer;(0,_.canChangeTitle)(e)&&e.set(g.removeChatPhoto.bind(null,t)).then((()=>e.set(g.getChatDetails.bind(null,t)))).catch(p.dummyCatch)},this.state={title:(0,l.unclean)(e.title),titleChanged:!1}}}},198710:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var i=s(785893),n=s(667294),a=s(795558),o=s(29271),r=s(639973),l=s(589897),c=s(86894),d=s(898672),h=s(662230),u=s(840842),_=s(527405),g=s(774001),m=s(659397);class p extends n.Component{componentDidMount(){this.input&&(0,a.elfocus)(this.input,0,this.input.value.length)}render(){const{onReset:e,invitationLinks:t,store:s}=this.props,n=o.getLang("mail_invite_link_reset_explainer").split("{reset_link}"),a=!(0,_.isFvkcomgroup)(s,s.get().peer),{linkWithHistory:p,linkWithoutHistory:v}=t,C=this.props.isInvitationLinkWithHistory?p:v;return(0,i.jsxs)("div",{className:"ChatSettingsInvitationLink",children:[this.props.reseted&&(0,i.jsx)("div",{className:"ChatSettingsInvitationLink__reseted",children:o.getLang("mail_invite_link_reseted_explainer")}),(0,i.jsx)("p",{children:o.getLang("mail_invite_link_explainer")}),(0,i.jsx)("div",{className:"ChatSettingsInvitationLink__switch",children:(0,i.jsx)(g.default,{checked:this.props.isInvitationLinkWithHistory,onChange:this.props.onLinkHistoryOptionToggle,children:o.getLang("mail_im_chat_add_members_show_history")})}),(0,i.jsxs)("div",{className:"ChatSettingsInvitationLink__main",children:[(0,i.jsx)(r.default,{getRef:this.getInputRef,readOnly:!0,className:"ChatSettingsInvitationLink__input",value:C}),(0,i.jsx)(l.default,{onClick:this.onCopy,children:o.getLang("mail_get_invite_link_copy")}),(0,i.jsx)(c.Text,{weight:"3",className:(0,m.classNames)("ChatSettingsInvitationLink__copied",(0,d.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(h.BlinkText,{shown:this.state.copied,onHide:this.onBlinkTextHide,children:o.getLang("mail_invite_link_copied")})})]}),a&&(0,i.jsxs)("p",{children:[n[0],(0,i.jsx)(u.default,{className:"ChatSettingsInvitationLink__reset",onClick:e,children:o.getLang("mail_invite_reset_link")}),n[1]]})]})}constructor(e){super(e),this.onCopy=()=>{this.input&&((0,a.elfocus)(this.input,0,this.input.value.length),document.execCommand("copy"),this.setState({copied:!0}))},this.onBlinkTextHide=()=>{this.setState({copied:!1})},this.getInputRef=e=>{e&&(this.input=e)},this.state={copied:!1}}}},9654:(e,t,s)=>{"use strict";s.d(t,{default:()=>M});var i=s(785893),n=s(667294),a=s(664988),o=s(29271),r=s(659397),l=s(221780),c=s(527405),d=s(568012),h=s(425308),u=s(642144),_=s(512334),g=s(205423),m=s(377841),p=s(86894),v=s(898672),C=s(662230),f=s(705758),A=s(518219),I=s(790932),S=s(195192),L=s(407729),N=s(931917);const w=50,E={appendParentCls:"ChatSettingsWrapper"},b={all:"allShowMore",admins:"adminsShowMore",invitedByMRShowMore:"invitedByMRShowMore",invitedByMR:"invitedByMRShowMore"};class M extends n.Component{componentWillReceiveProps(e){const t=e.store.get(),s=this.getMembers(t),i=this.getAdmins(t),n=this.getInvitedByMessageRequests(t),a={removes:[],additions:[]},o=s.reduce(((e,t)=>(e[t]=!0,e)),{});s.forEach((e=>{this.membersMap[e]||a.additions.push(e)})),Object.keys(this.membersMap).forEach((e=>{o[e]||a.removes.push(e)})),(a.removes.length||a.additions.length)&&(this.updateSearchIndex(t,a),this.membersMap=o);let r={all:s,allShowMore:this.state.allShowMore&&s.length>w,admins:i,adminsShowMore:this.state.adminsShowMore&&i.length>w,invitedByMR:n,invitedByMRShowMore:this.state.invitedByMRShowMore&&n.length>w,current:"all",showSearch:this.state.showSearch,searchQuery:this.state.searchQuery};this.state.current&&(r.current=this.state.current),this.setState(r)}getMembers(e){const t=e.peer,s=e.tabs[t],i=-1!==(s.memberIds||[]).indexOf(s.ownerId),n=(s.adminIds||[]).reduce(((e,t)=>(e[t]=!0,e)),{});return(i?[s.ownerId]:[]).concat((s.adminIds||[]).filter((e=>e!==s.ownerId)),(s.memberIds||[]).filter((e=>e!==s.ownerId&&!n[e])))}getAdmins(e){const t=e.peer,s=e.tabs[t];return(-1!==(s.memberIds||[]).indexOf(s.ownerId)?[s.ownerId]:[]).concat((s.adminIds||[]).filter((e=>e!==s.ownerId)))}getInvitedByMessageRequests(e){const t=e.peer;return e.tabs[t].invitedByMessageRequest.sort((function(e,t){return e.date-t.date}))}getCurrentList(){const{store:e}=this.props,{current:t,showSearch:s,searchQuery:i,invitedByMR:n}=this.state;if(s&&i&&this.searchIndex){const e=n.filter((e=>!!e.name.toLowerCase().trim().split(/\s+/).find((e=>e.startsWith(i.toLowerCase())))));return this.searchIndex.search(i).concat(e)}const a=this.state[t],o="invitedByMR"===t?a:(0,c.getChatMembersByIds)(e.get(),a),r=`${t}ShowMore`;return this.state[r]?o.slice(0,w):o}getSearchIndex(e){const{vkIndexer:t}=window,s=(0,c.getChatMembersByIds)(this.props.store.get(),e);return this.membersMap=s.reduce(((e,t)=>(e[t.id]=!0,e)),{}),new Promise((e=>{const i=new t(s,(e=>e.name),(()=>{e(i)}))}))}updateSearchIndex(e,t){const s=(0,c.getChatMembersByIds)(e,t.removes),i=(0,c.getChatMembersByIds)(e,t.additions);(this.searchIndex?Promise.resolve(this.searchIndex):this.searchIndexPromise).then((e=>{s.forEach((t=>{e.remove(t)})),i.forEach((t=>{e.add(t)}))}))}componentDidMount(){this.searchInput.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){this.searchInput.removeEventListener("keydown",this.onKeydown)}render(){const{store:e,membersCount:t,membersAdded:s,onHideStatus:n}=this.props,{current:a,showSearch:d,searchQuery:f,admins:w,invitedByMR:E}=this.state,M=e.get(),k=M.peer,x=M.tabs[k],T=this.getCurrentList(),y=this.isAddMemberWidgetShown()?["add"].concat(T):T,R=b[a],P=this.state[R],O={"ChatSettingsMembersWidget--search":Boolean(d)},H=x.adminIds.reduce(((e,t)=>(e[t]=!0,e)),{});return(0,i.jsxs)("div",{className:(0,r.classNames)("ChatSettingsMembersWidget",O),children:[(0,i.jsxs)("header",{className:"ChatSettingsMembersWidget__header",children:[(0,i.jsx)("input",{placeholder:o.getLang("mail_members_search"),className:"ChatSettingsMembersWidget__search",onChange:this.onSearchChange,onInput:this.onSearchChange,onPaste:e=>this.onSearchChange(e),value:this.state.searchQuery,ref:this.searchInputRef}),(0,i.jsx)("button",{className:"ChatSettingsMembersWidget__searchIcon",onClick:this.onToggleSearch,children:this.state.showSearch?(0,i.jsx)(I.Icon16Cancel,{}):(0,i.jsx)(S.Icon16SearchOutline,{})}),(0,i.jsxs)(h.default,{className:"ChatSettingsMembersWidget__tabs",onTabClick:this.onTabClick,children:[(0,i.jsxs)("span",{children:[o.getLang("mail_settings_everyone")+" ",(0,i.jsx)("span",{className:"Tabs__desc",children:(0,c.getAliveMembersCount)(x)})]},"all"),w.length>0&&(0,i.jsxs)("span",{children:[o.getLang("mail_settings_admins")+" ",(0,i.jsx)("span",{className:"Tabs__desc",children:w.length})]},"admins"),E.length>0&&(0,i.jsxs)("span",{children:[o.getLang("mail_invited_members")+" ",(0,i.jsx)("span",{className:"Tabs__desc",children:E.length})]},"invitedByMR")]})]}),(0,i.jsx)("div",{className:"ChatSettingsMembersWidget__list",children:(0,i.jsxs)(u.default,{border:!1,children:[y.length>0&&y.map((d=>{if("add"===d)return(0,i.jsx)(_.default,{selectable:!1,border:!1,onClick:this.props.showMembersSettings,aside:(0,i.jsx)(p.Text,{weight:"3",className:(0,r.classNames)("ChatSettingsMembersWidget__blink",(0,v.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(C.BlinkText,{shown:s,onHide:n,children:(0,l.langNumeric)(t||0,o.getLang("mail_settings_members_added","raw"))})}),children:(0,i.jsxs)("span",{className:"ChatSettingsMembersWidget__add",children:[(0,i.jsx)("span",{className:"ChatSettingsMembersWidget__addIcon",children:(0,i.jsx)(L.Icon24Add,{})}),(0,i.jsx)("span",{children:o.getLang("mail_settings_add_members")})]})},"add");const h=this.getInviter(d.id),u="invitedByMR"===a,f=d.image_status?d.name+`<span class="ChatSettingsMembersWidget__imageStatus">${d.image_status}</span>`:d.name,I=this.getMemberDescriptionText(d,M,u);return(0,i.jsx)(_.default,{selectable:!1,border:!1,aside:(0,i.jsx)(m.default,{adminMap:H,store:e,storeData:M,mid:d.id,onLeave:this.props.onLeave,isMR:u}),children:(0,i.jsx)(g.default,{ignoreDecodeHTML:!0,photo:N.Ranges.isContactId(d.id)?(0,i.jsx)(A.ConversationNoPhoto,{id:k,text:(0,c.getUserInitials)(d.name),size:"xxxs",specificType:7}):d.photo,title:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:f}}),description:I?(0,i.jsx)("span",{title:h,dangerouslySetInnerHTML:{__html:I}}):void 0,href:d.link,onLinkClick:e=>{e.ctrlKey||e.altKey||e.metaKey||(e.preventDefault(),window.nav.go(d.link,e.nativeEvent))}})},d.id)})),!y.length&&d&&f&&(0,i.jsx)("div",{className:"ChatSettingsMembersWidget__empty",children:o.getLang("mail_settings_not_found")}),!(d&&f)&&P&&(0,i.jsx)("div",{className:"ChatSettingsMembersWidget__more",onClick:this.onShowMore,children:o.getLang("mail_settings_show_all_members")})]})})]})}constructor(e){super(e),this.onToggleSearch=()=>{this.state.showSearch?this.setState({showSearch:!1,searchQuery:""}):(this.setState({showSearch:!0}),requestAnimationFrame((()=>{this.searchInput.focus()})))},this.onSearchChange=e=>{const t=e.target;t.value!==this.state.searchQuery&&this.setState({searchQuery:t.value})},this.onShowMore=()=>{const e=b[this.state.current];if(this.state[e]){const t={[e]:!1};this.setState(t)}},this.onTabClick=(e,t)=>{e.preventDefault(),this.state.current!==t&&this.setState({current:t})},this.onKeydown=e=>{this.state.showSearch&&27===e.keyCode&&(this.searchInput.blur(),this.setState({showSearch:!1,searchQuery:""}),e.preventDefault(),e.stopPropagation())},this.getInviter=e=>{if(this.invitersCache[e])return this.invitersCache[e];const{store:t}=this.props,s=t.get(),i=s.peer,n=s.tabs[i],r=n.inviters;if(!r[e])return"";const h=(0,c.getChatMembersByIds)(s,[r[e][0]])[0],u=(0,l.getSmDate)(r[e][2],s.timeshift,!0);if((0,d.isUserOwnerInChat)(n,e))return this.invitersCache[e]=o.getLang("mail_settings_owner"),o.getLang("mail_settings_owner");if(!h)return this.invitersCache[e]=u,u;const _=(0,l.langSex)(r[e][1],o.getLang("mail_chat_member_invited_by_X","raw")).replace(/{inviter}/,(0,a.replaceEntities)(h.name))+" "+u;return this.invitersCache[e]=_,_},this.isAddMemberWidgetShown=()=>{const e=this.props.store,{id:t,peer:s}=(0,f.unpackStore)(e),{current:i,showSearch:n,searchQuery:a}=this.state;return"all"===i&&!(n&&""!==a)&&(0,d.canInviteUser)(e,s,t)},this.getCommunityDescriptionText=e=>e?o.getLang("mail_settings_community"):o.getLang("mail_settings_bot"),this.getMemberDescriptionText=(e,t,s)=>{const i=t.tabs[t.peer];if(N.Ranges.isGroupId(e.id))return this.getCommunityDescriptionText(e.id===i.ownerId);if(s)return(0,c.getMessageRequestDateText)(e.date,t.timeshift);const n=i.membersLastSeen;return n&&n[e.id]?(0,c.getLastSeenText)(t,e.id,n[e.id],E):void 0},this.searchInputRef=e=>{this.searchInput=e};const t=e.store.get(),s=this.getMembers(t),i=this.getAdmins(t),n=this.getInvitedByMessageRequests(t);this.state={showSearch:!1,searchQuery:"",current:"all",all:s,allShowMore:s.length>w,admins:i,adminsShowMore:i.length>w,invitedByMR:n,invitedByMRShowMore:n.length>w},this.membersMap=s.reduce(((e,t)=>(e[t]=!0,e)),{}),this.searchIndexPromise=this.getSearchIndex(s).then((e=>{this.searchIndex=e})),this.invitersCache={}}}},189563:(e,t,s)=>{"use strict";s.d(t,{default:()=>M});var i=s(785893),n=s(667294),a=s(682615),o=s(221780),r=s(29271),l=s(840842),c=s(642144),d=s(512334),h=s(86894),u=s(898672),_=s(662230),g=s(205423),m=s(627240),p=s(921018),v=s(177878),C=s(161183),f=s(287865),A=s(689826),I=s(62340),S=s(439561),L=s(568012),N=s(527405),w=s(222009),E=s(995276),b=s(396316);class M extends n.Component{getPushSettingsFromProps(e){const t=e.store.get();return t.tabs[t.peer].notifications}getPushDisabledFromProps(e){const t=e.store.get();return t.tabs[t.peer].notifications.push_disabled}getDisabledPlaceholder(e){if(!e||0===e)return r.getLang("mail_settings_configure");if(-1===e)return r.getLang("mail_settings_time_forever");const t=(0,o.getShortDateWithTime)(e,0,!1);return`${r.getLang("mail_settings_until")} ${t}`}getDisabledOptions(){const e=[{label:r.getLang("mail_settings_time_one_hour"),value:p.HOUR},{label:r.getLang("mail_settings_time_eight_hours"),value:8*p.HOUR},{label:r.getLang("mail_settings_time_day"),value:p.DAY},{label:r.getLang("mail_settings_time_week"),value:p.WEEK},{label:r.getLang("mail_settings_time_forever"),value:-1}];return this.state.push_disabled_until?[...e,{label:r.getLang("mail_settings_time_cancel"),value:0}]:e}render(){const{store:e,flagsUpdated:t,notificationSettingsUpdated:s,disableUntilUpdated:n,onHideStatus:o,invitationLinks:p,isInvitationLinkWithHistory:M}=this.props,k=e.get(),x=k.tabs[k.peer],T=(0,N.isFvkcomgroup)(k,k.peer),y=(0,w.isCommunityChat)(k,k.peer),R=x.inviteLinks&&(0,L.canSeeInviteLink)(e)||(0,L.canChangeInviteLink)(e),P=p||x.inviteLinks,O=P&&(M?P.linkWithHistory:P.linkWithoutHistory),H=(0,L.canSeeSettingsItem)(e,k.peer,k.id),j=(0,a.classNames)("ChatSettingsMenu",{"ChatSettingsMenu--copied":this.state.copied}),U=k.isMassMentionsMessageAllowed,G=M?r.getLang("mail_get_invite_link_copy_with_history"):r.getLang("mail_get_invite_link_copy_without_history");return(0,i.jsxs)("div",{className:"ChatSettings__pane",children:[y&&(0,i.jsx)(c.default,{className:j,children:(0,i.jsx)(d.default,{onClick:e=>window.nav.go(x.owner.link,e.nativeEvent),chevron:!0,className:"ChatSettingsMenu__owner",children:(0,i.jsx)(g.default,{size:"28",title:x.owner.title,photo:x.owner.photo,href:x.owner.link,description:x.owner.description})})}),(0,i.jsx)(c.default,{className:j,children:(0,i.jsxs)(d.default,{onClick:this.props.showAttachments,chevron:!0,children:[(0,i.jsx)(v.ChatSettingsRoundedIcon,{backgroundColor:"blue",children:(0,i.jsx)(C.Icon16Attach,{})}),r.getLang("mail_im_show_media_history")]})}),(0,b.isUGCStickersEnabled)()&&(0,i.jsx)(c.default,{className:j,children:(0,i.jsx)(E.ChatSettingsUGCStickers,{peerId:k.peer})}),(0,i.jsxs)(c.default,{className:j,children:[U&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.default,{selectable:!1,chevron:!1,aside:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Text,{weight:"3",className:(0,a.classNames)("ChatSettingsMenu__saved",(0,u.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(_.BlinkText,{shown:s,onHide:o,children:r.getLang("global_changes_saved_short")})}),(0,i.jsx)(m.default,{className:"ChatSettingsMenu__select",onChange:this.onMentionSettingsChange,options:[{label:r.getLang("mail_settings_mentions_all"),value:0},{label:r.getLang("mail_settings_mentions_except"),value:1},{label:r.getLang("mail_settings_mentions_disable"),value:2}],value:this.state.mentions_push_disabled})]}),children:[(0,i.jsx)(v.ChatSettingsRoundedIcon,{children:(0,i.jsx)(f.Icon28MentionCircleFillBlue,{})}),r.getLang("mail_settings_mentions")]}),(0,i.jsxs)(d.default,{selectable:!1,aside:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Text,{weight:"3",className:(0,a.classNames)("ChatSettingsMenu__saved",(0,u.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(_.BlinkText,{shown:n,onHide:o,children:r.getLang("global_changes_saved_short")})}),(0,i.jsx)(m.default,{className:"ChatSettingsMenu__select",onChange:this.onDisabledSettingsChange,options:this.getDisabledOptions(),placeholder:this.state.disabledPlaceholder})]}),children:[(0,i.jsx)(v.ChatSettingsRoundedIcon,{children:(0,i.jsx)(A.Icon28AdvertisingCircleFillRed,{})}),r.getLang("mail_settings_notices")]})]}),(R||H)&&(0,i.jsxs)(i.Fragment,{children:[R&&(0,i.jsxs)(d.default,{onClick:this.onShowInviteLink,chevron:(0,L.canChangeInviteLink)(e),children:[(0,i.jsx)(v.ChatSettingsRoundedIcon,{children:(0,i.jsx)(I.Icon28ChainCircleFillBlue,{})}),T?r.getLang("mail_vkcomgroup_invite_link"):r.getLang("mail_chat_invite_link"),O&&(0,i.jsxs)("span",{className:"ChatSettingsMenu__invite",children:[(0,i.jsx)("span",{className:"ChatSettingsMenu__hidden",children:(0,i.jsx)("input",{type:"text",readOnly:!0,value:O,ref:this.getHiddenInput})}),(0,i.jsx)(h.Text,{weight:"3",className:(0,a.classNames)("ChatSettingsMenu__copied",(0,u.getColorClass)("color_text_secondary")),Component:"span",normalize:!1,children:(0,i.jsx)(_.BlinkText,{shown:this.state.copied,onHide:this.onBlinkTextHide,children:r.getLang("mail_invite_link_copied")})}),(0,i.jsx)(l.default,{className:"ChatSettingsMenu__copy",onClick:this.onCopyInviteLink,children:G})]})]}),H&&(0,i.jsxs)(d.default,{onClick:this.props.showSettings,chevron:!0,aside:(0,i.jsx)(h.Text,{weight:"3",className:(0,u.getColorClass)("color_text_secondary"),Component:"span",normalize:!1,children:(0,i.jsx)(_.BlinkText,{shown:t,onHide:o,children:r.getLang("global_changes_saved")})}),children:[(0,i.jsx)(v.ChatSettingsRoundedIcon,{children:(0,i.jsx)(S.Icon28MoreHorizontalCircleFillGray,{})}),r.getLang("mail_settings_options")]})]})]})]})}constructor(e){super(e),this.onCopyInviteLink=e=>{this.input&&(this.input.focus(),this.input.select(),document.execCommand("copy"),this.setState({copied:!0})),e.preventDefault(),e.stopPropagation()},this.onBlinkTextHide=()=>{this.setState({copied:!1})},this.getHiddenInput=e=>{this.input=e},this.onDisabledSettingsChange=e=>{const t=Number(e.selected.value),s=t>0?Math.floor((Date.now()+t)/1e3):t,i=0!==s;this.setState({push_disabled_until:s?1:0,push_disabled:i?1:0,disabledPlaceholder:this.getDisabledPlaceholder(s)},(()=>{this.props.onUpdateNotificationSettings(i,Math.floor(t/1e3)).then((()=>{this.props.afterDisableUntilUpdated()}))}))},this.onMentionSettingsChange=e=>{const t=e.selected.value;this.setState({mentions_push_disabled:t},(()=>{this.props.onUpdateMentionNotificationSettings(t).then((()=>{this.props.afterNotificationSettingsUpdated()}))}))},this.onShowInviteLink=()=>{(0,L.canChangeInviteLink)(this.props.store)&&this.props.showInvitationLink()};const t=this.getPushSettingsFromProps(e),s=t.push_disabled_until,i=s>0?+new Date(s):s;this.state=Object.assign({pushDisabled:s,mentions_push_disabled:0,disabledPlaceholder:this.getDisabledPlaceholder(i),copied:!1,push_disabled_until:null,push_disabled:0},t)}}},177878:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsRoundedIcon:()=>a});var i=s(785893),n=s(682615);const a=({type:e,backgroundColor:t,children:s})=>(0,i.jsx)("div",{className:(0,n.classNames)("ChatSettingsRoundedIcon",`ChatSettingsRoundedIcon--${e}`,`ChatSettingsRoundedIcon--${t}`),children:s})},995276:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsUGCStickers:()=>u});var i=s(785893),n=s(967805),a=s(853224),o=s(96230),r=s(647742),l=s(70161),c=s(869048),d=s(86894);const h=({children:e})=>(0,i.jsx)(c.AppRootProvider,{platform:d.Platform.VKCOM,children:(0,i.jsx)("div",{children:e})}),u=({peerId:e})=>{var t;const s=(0,n.isActiveHint)(a.AvailableHelpHints.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN,(null==(t=window.IM)?void 0:t.activeHints)||[]),c=()=>{s&&((0,n.hideHelpHint)(a.AvailableHelpHints.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN),(0,n.deleteActiveHelpHintLocally)(a.AvailableHelpHints.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN))},d=(0,l.useCanOpenMiniApp)(),{canHideKeyboard:u}=(0,l.useUGCInKeyboardState)(e);return d?(0,i.jsx)(h,{children:(0,i.jsx)(o.ChatSettingsUGCStickersEditor,{showStickersUGCBadge:s,peerId:e,onClick:c})}):u?(0,i.jsx)(h,{children:(0,i.jsx)(r.ChatSettingsUGCStickersUser,{showStickersUGCBadge:s,peerId:e,onClick:c})}):null}},145258:(e,t,s)=>{"use strict";s.d(t,{Badge:()=>o});var i=s(785893),n=s(86894),a=s(651656);const o=()=>(0,i.jsx)("div",{className:a.default.ugcBadge,children:(0,i.jsx)(n.Badge,{mode:"new"})})},96230:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsUGCStickersEditor:()=>_});var i=s(785893),n=s(29271),a=s(86894),o=s(829494),r=s(651118),l=s(691709),c=s(728405),d=s(145258),h=s(70161),u=s(651656);const _=({showStickersUGCBadge:e,peerId:t,onClick:s})=>{const _=(0,h.useCannotManageUGCStickers)();return(0,i.jsx)(l.UGCListItem,{subheader:_&&(0,i.jsx)(a.Text,{className:u.default.secondaryText,children:n.getLang("stickers_ugc_management_restricted")}),onClick:({nativeEvent:e})=>{var i;_?(0,o.showUGCManagementRestrictedModal)():((0,r.showUGCStickersSettings)(e,{peer_id:t,ref:"settings"}),null==(i=s)||i())},chevron:!_,aside:(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(d.Badge,{}),_&&(0,i.jsx)(c.Icon20InfoCircleOutline,{className:u.default.infoIcon})]})})}},647742:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsUGCStickersUser:()=>u});var i=s(785893),n=s(900798),a=s(29271),o=s(86894),r=s(691709),l=s(145258),c=s(560899),d=s(70161),h=s(651656);const u=({showStickersUGCBadge:e,peerId:t,onClick:s})=>{const{isKeyboardHidden:u}=(0,d.useUGCInKeyboardState)(t);return(0,i.jsx)(c.DropdownHideShowUGC,{peerId:t,children:(0,i.jsx)("div",{children:(0,i.jsx)(r.UGCListItem,{subheader:u&&(0,i.jsx)(o.Text,{className:h.default.secondaryText,children:a.getLang("stickers_ugc_management_stickers_hidden")}),chevron:!1,aside:(0,i.jsxs)("div",{className:h.default.userAside,children:[e&&(0,i.jsx)(l.Badge,{}),(0,i.jsx)(n.Icon16MoreVertical,{width:16,className:h.default.infoIcon})]}),onClick:s})})})}},560899:(e,t,s)=>{"use strict";s.d(t,{DropdownHideShowUGC:()=>r});var i=s(785893),n=s(384627),a=s(29271),o=s(70161);const r=({children:e,peerId:t})=>{const{isKeyboardHidden:s,toggle:r}=(0,o.useUGCInKeyboardState)(t),l=s?a.getLang("stickers_ugc_management_show_stickers"):a.getLang("stickers_ugc_management_hide_stickers"),c=s?"default":"destructive";return(0,i.jsx)(n.DropdownActionSheet,{offsetDistance:-10,offsetSkidding:-20,placement:"bottom-end",action:"click",content:(0,i.jsx)(n.DropdownActionSheet.Item,{type:c,onClick:r,children:l}),children:e})}},691709:(e,t,s)=>{"use strict";s.d(t,{UGCListItem:()=>c});var i=s(785893),n=s(512334),a=s(177878),o=s(685446),r=s(29271),l=s(651656);const c=({onClick:e,aside:t,chevron:s,subheader:c})=>(0,i.jsx)(n.default,{onClick:e,aside:t,chevron:s,children:(0,i.jsxs)("div",{className:l.default.listItem,children:[(0,i.jsx)(a.ChatSettingsRoundedIcon,{backgroundColor:"blue",children:(0,i.jsx)(o.Icon28UgcChatStickerCircleFillBlue,{className:l.default.ugcIcon})}),(0,i.jsxs)("div",{className:l.default.textWrapper,children:[r.getLang("stickers_ugc_chat_settings_menu"),c||null]})]})})},70161:(e,t,s)=>{"use strict";s.d(t,{useCanOpenMiniApp:()=>r,useCannotManageUGCStickers:()=>o,useUGCInKeyboardState:()=>l});var i=s(504190),n=s(667294),a=s(597765);const o=()=>{const{is_banned:e=!1,can_edit:t=!1}=(0,i.useStore)(a.$ugcInfo);return t&&e},r=()=>{const{is_banned:e=!1,can_edit:t=!1}=(0,i.useStore)(a.$ugcInfo);return t&&!e},l=e=>{const{can_hide_keyboard:t=!1,is_keyboard_hidden:s=!1}=(0,i.useStore)(a.$ugcInfo),o=(0,n.useCallback)((()=>{t&&(s?(0,a.showUgcFromKeyboardFx)(e):(0,a.hideUgcFromKeyboardFx)(e))}),[e,s,t]);return{canHideKeyboard:t,isKeyboardHidden:s,toggle:o}}},713871:(e,t,s)=>{"use strict";s.d(t,{onboardingHints:()=>c,showHintDefault:()=>l});var i=s(853224),n=s(104677),a=s(931917),o=s(967805);const r=e=>{var t;const s=null==(t=window.vk)?void 0:t.id;return!(!s||s===e)&&(a.Ranges.isUserId(e)||a.Ranges.isChatOrChannelPeer(e))},l=e=>!!window.IM.onboardingParams[e],c=[{hintId:i.AvailableHelpHints.IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER,targetClass:".ms_item_more_label",callback:({target:e})=>{const t=document.createElement("span");return t.classList.add("ms_item_more_hintDot"),e.appendChild(t),t},needToShow:r},{hintId:i.AvailableHelpHints.IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER,targetClass:'a[class*="app_action_mini_app"]:not(.ms_item--hidden)',callback:({hash:e,title:t,hintId:s,target:a})=>{if(!e||!t)return;const{tooltip:r}=(0,n.helpHintTooltip)(a,{content:t,helpHintHash:e,helpHintId:s,onHideRequestSent:()=>{const e=document.querySelector(".ms_item_more_hintDot");e&&(e.remove(),window.IM.activeHints=window.IM.activeHints.filter((({id:e})=>e!==i.AvailableHelpHints.IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER)))}},{offset:[6,-21],align:"left",forceSide:"left",width:160,appendToParent:!0,withCloseButton:!1,cls:"feature_intro_blue_tt feature_info_tooltip helpHintTooltip__appActionTooltip"});return r.show(),r._ttel.addEventListener("click",(()=>r.hide())),(0,o.initOnboardingAutoHide)(r),r},needToShow:r}]},967805:(e,t,s)=>{"use strict";s.d(t,{deleteActiveHelpHintLocally:()=>u,destroyHintEl:()=>m,hideHelpHint:()=>h,initOnboarding:()=>C,initOnboardingAutoHide:()=>f,isActiveHint:()=>_,updateHints:()=>v});var i=s(11010),n=s(599809),a=s(853224),o=s(713871),r=s(970978),l=s(953908);const c=e=>{const{id:t}=e;return Object.values(a.AvailableHelpHints).map((e=>String(e))).includes(t)},d=()=>new Promise(((e,t)=>{(0,n.api)("account.getHelpHints",{}).then((t=>{const s=t.items.filter(c);e(s)})).catch((e=>{var s;return t((null==(s=e)?void 0:s.message)||e)}))})),h=e=>{(0,n.api)("account.hideHelpHint",{hint_id:e}).catch((e=>(0,r.logError)(e,{environment:"im_help_hints_app_action_hide"})))},u=e=>{var t;(null==(t=window.IM)?void 0:t.activeHints)&&(window.IM.activeHints=window.IM.activeHints.filter((({id:t})=>t!==e)))},_=(e,t)=>t.findIndex((({id:t})=>t===e))>-1,g=(e,t,s)=>{var i;const{hintId:n,targetClass:a,callback:r}=e,l=((e,t)=>t.find((({id:t})=>t===e)))(n,t),c=document.querySelector(a);if(!l||!c)return;const{id:d,title:h}=l,u={target:c,hintId:d,title:h,hash:null==(i=window.IM.onboardingParams[d])?void 0:i.hash};o.onboardingHints[s].element=r(u)},m=({element:e},t)=>{e&&((e=>e.hasOwnProperty("_ttel"))(e)?e.hide():e.remove(),o.onboardingHints[t].element=null)},p=(e,t,s)=>s?s(t):(0,o.showHintDefault)(e),v=(0,i._)((function*(e){e&&(window.IM.activeHints||(yield d().then((e=>{window.IM.activeHints=e}))),o.onboardingHints.forEach(((t,s)=>{const{element:i,needToShow:n,hintId:a}=t,o=p(a,e,n);o&&!i?g(t,window.IM.activeHints,s):!o&&i&&m(t,s)})))})),C=e=>{window.IM.onboardingParams=e,o.onboardingHints.length>0&&d().then((e=>{window.IM.activeHints=e,o.onboardingHints.forEach(((t,s)=>{var i;const{hintId:n}=t,a=null==(i=window.IMBRIDGE)?void 0:i.selectedPeer(),{needToShow:o}=t;if(!a)return;p(n,a,o)&&g(t,e,s)}))})).catch((e=>{(0,r.logError)(e,{environment:"im_help_hints_app_action"})}))},f=e=>{var t,s;let i,n=!1;const a=document.querySelector("._im_media_selector"),o=null==(t=a)?void 0:t.querySelector(".ms_items_more_wrap"),r=null==(s=o)?void 0:s.querySelector(".ms_items_more");function c(){clearTimeout(i),o&&o.classList.contains("shown")&&!n&&h()}function d(){i=setTimeout(c,3e3)}function h(){n||(e.hide(),n=!0,clearTimeout(i),a&&r&&((0,l.removeEvent)(a,"mouseover",d),(0,l.removeEvent)(r,"mousedown",h)))}a&&o&&r&&((0,l.addEvent)(a,"mouseover",d),(0,l.addEvent)(r,"mousedown",h))}},853224:(e,t,s)=>{"use strict";var i;s.d(t,{AvailableHelpHints:()=>i}),function(e){e.IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER="superapp:im_integration_apps_tooltip_on_picker",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_APPS_BANNER="superapp:im_integration_picker_apps_banner",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_GAMES_BANNER="superapp:im_integration_picker_games_banner",e.ACCOUNT_HINT_IM_INTEGRATION_CATALOG_ONBOARDING="superapp:im_integration_catalog_onboarding",e.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_VIDEO_ONBOARDING="video:interactive_video_onboarding"}(i||(i={}))},91983:(e,t,s)=>{"use strict";s.d(t,{kickUserOptimistically:()=>n});var i=s(408014);function n(e,t,s){const n=(0,i.getTab)(e,t);return n&&(0,i.isChatConvo)(n)?(n.memberIds=n.memberIds.filter((e=>e!==s)),n.adminIds=n.adminIds.filter((e=>e!==s)),n.membersCount=n.memberIds.length,Promise.resolve(e)):Promise.reject("No chat info")}},701567:(e,t,s)=>{"use strict";s.d(t,{ConvoAttaches:()=>u});var i=s(785893),n=s(928265),a=s(240567),o=s(442717),r=s(29271),l=s(973935),c=s(96190),d=s(869048);const h=({store:e,browserEnv:t,onClose:s,peerId:l})=>(0,i.jsx)(d.AppRootProvider,{children:(0,i.jsxs)(a.BaseModal,{onClose:s,disableBodyScroll:!0,className:"ConvoAttachesModal",children:[(0,i.jsx)(o.Modal.Header,{title:r.getLang("me_convo_attaches_app"),onClose:s}),(0,i.jsx)("div",{style:{width:550,height:420},children:(0,i.jsx)(n.ConvoAttachmentsApp,{store:e,env:t,peerId:c.resolveId(l),goToMessage:()=>{}})})]})});class u{renderConvoAttachesPopup(e,t,s){const n=u.getContainer(),a=()=>this.hide();n&&l.render((0,i.jsx)(h,{store:e,browserEnv:t,peerId:s,onClose:a}),n)}static getContainer(){return document.getElementById("ConvoAttaches")}hide(){if(!this.isMounted)return;const e=u.getContainer();e&&l.unmountComponentAtNode(e),this.isMounted=!1}show(e){var t;const s=null==(t=window.reforgedME)?void 0:t.convoAttachesContext;if(!s)return;const{store:i,browserEnv:n}=s;this.renderConvoAttachesPopup(i,n,e),this.isMounted=!0}constructor(){this.isMounted=!1}}},651118:(e,t,s)=>{"use strict";s.d(t,{StickersUGC:()=>d,showUGCStickersSettings:()=>c});var i=s(829596),n=s(95432),a=s(457299),o=s(494774),r=s(829494),l=s(640523);function c(e,t,s){(0,n.showApp)(e,o.UGC_STICKERS_APP_ID,!1,null,null,{layer:!0,urlHash:(0,l.getUGCAppHash)(t),onHide:()=>{var e;null==(e=s)||e()}})}const d={showAgeRestriction:r.showAgeRestriction,showChatRestriction:r.showChatRestriction,showUGCPackInStickerPicker:e=>{var t;e?null==(t=window.StickerPickerViewer)||t.showPack(i.ServicePackKey.UGC,e):(0,a.logStickersError)("No html element as prop into showUGCPackInStickerPicker")}}},829494:(e,t,s)=>{"use strict";s.d(t,{showAgeRestriction:()=>d,showChatRestriction:()=>h,showUGCManagementRestrictedModal:()=>c});var i=s(785893),n=s(895145),a=s(457299),o=s(359639),r=s(991243);const l=400;function c(){const e=(0,n.asyncComponent)(a.getStickersKitModule,(({UGCManagementRestrictedModal:e})=>e));(0,o.showMessageBoxModalSuspense)((({onClose:t})=>(0,i.jsx)(e,{onClose:t,lang:(0,r.getLangCode)()})),{width:l})}function d(){const e=(0,n.asyncComponent)(a.getStickersKitModule,(({AgeRestrictionModal:e})=>e));(0,o.showMessageBoxModalSuspense)((({onClose:t})=>(0,i.jsx)(e,{onClose:t,lang:(0,r.getLangCode)()})),{width:l})}function h(){const e=(0,n.asyncComponent)(a.getStickersKitModule,(({ChatRestrictionModal:e})=>e));(0,o.showMessageBoxModalSuspense)((({onClose:t})=>(0,i.jsx)(e,{onClose:t,lang:(0,r.getLangCode)()})),{width:l})}},377976:(e,t,s)=>{"use strict";s.d(t,{API:()=>g});var i,n,a=s(434788),o=s(393356),r=s(401623),l=s(283085),c=s(618430),d=s(647827),h=s(183746),u=s(722223);const _="undefined"!=typeof window&&(null==(n=window.vk)||null==(i=n.apiConfigDomains)?void 0:i.apiDomain)||"api.vk.com";class g extends r.CallbackService{setOptions(e){this.options=(0,a._)({},this.options,e)}execute(e){return this.call("execute",e)}procedure(e,t){return this.call(`execute.${e}`,t)}call(e,t){return this.callWithRequest(new r.APIRequest({method:e,params:t,api:this}))}callWithRequest(e){return this.worker.enqueue(e),e.promise}getWorker(){switch(this.options.mode){case u.APIMode.PARALLEL:return new l.ParallelWorker(this);case u.APIMode.SEQUENTIAL:return new c.SequentialWorker(this)}}constructor(e,t={}){super(),this.globalParams=new Map,this.options=(0,a._)({token:"",mode:u.APIMode.SEQUENTIAL,requestMode:u.APIRequestMode.SEQUENTIAL,requestMethod:u.APIRequestMethod.FETCH,wait:3e3,limit:3,bridge:!1,version:o.API_VERSION,baseUrl:`https://${_}`,retryLimit:3,timeout:6e4,executeCount:25,language:"ru",executeUnsupportedMethods:["photos.save","photos.saveWallPhoto","photos.saveOwnerPhoto","photos.saveMessagesPhoto","messages.setChatPhoto","photos.saveMarketPhoto","photos.saveMarketAlbumPhoto","audio.save","docs.save","photos.saveOwnerCoverPhoto","stories.save","polls.savePhoto"]},e);for(const e of d.methodGroups)this[e]=new Proxy(Object.create(null),{get:(t,s)=>(t,i)=>this.callWithRequest(new r.APIRequest({api:this,method:`${e}.${s}`,params:t,options:i}))});this.worker=this.getWorker(),this.updates=new h.Updates(this,t)}}},513222:(e,t,s)=>{"use strict";s.d(t,{CaptchaType:()=>a,MINIMUM_TIME_INTERVAL_API:()=>n,POLLING_VERSION:()=>i});const i=10,n=1133;var a;!function(e){e.API="API",e.DIRECT_AUTH="DIRECT_AUTH",e.IMPLICIT_FLOW_AUTH="IMPLICIT_FLOW_AUTH",e.ACCOUNT_VERIFICATION="ACCOUNT_VERIFICATION"}(a||(a={}))},432043:(e,t,s)=>{"use strict";s.d(t,{APIError:()=>a});var i=s(602033),n=s(5874);class a extends n.VKError{constructor(e){const t=Number(e.error_code);switch(super({code:t,message:`Code №${t} - ${e.error_msg}`}),this.params=e.request_params,t===i.API_ERROR_CAPTCHA&&(this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img),t){case i.API_ERROR_CAPTCHA:this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img;break;case i.API_ERROR_AUTH_VALIDATION:this.redirectUri=e.redirect_uri;break;case i.API_ERROR_NEED_CONFIRMATION:this.confirmationText=e.confirmation_text}}}},752448:(e,t,s)=>{"use strict";s.d(t,{ExecuteError:()=>n});var i=s(432043);class n extends i.APIError{constructor(e){super({error_code:e.error_code,error_msg:e.error_msg,request_params:[]}),this.method=e.method}}},695007:(e,t,s)=>{"use strict";s.d(t,{OAuthError:()=>n});var i=s(5874);class n extends i.VKError{constructor({error:e,error_description:t}){super({code:e,message:t})}}},869489:(e,t,s)=>{"use strict";s.d(t,{UpdatesError:()=>n});var i=s(5874);class n extends i.VKError{}},5874:(e,t,s)=>{"use strict";var i;s.d(t,{SharedErrorCode:()=>i,VKError:()=>n}),function(e){e.UNSUPPORTED_MODE="UNSUPPORTED_MODE",e.MISSING_CAPTCHA_HANDLER="MISSING_CAPTCHA_HANDLER",e.MISSING_TOKEN_REGENERATE_HANDLER="MISSING_TOKEN_REGENERATE_HANDLER"}(i||(i={}));class n extends Error{constructor({code:e,message:t}){super(t),this.code=e,this.name=this.constructor.name}}},526511:(e,t,s)=>{"use strict";s.d(t,{CallbackService:()=>n});var i=s(5874);class n{get hasCaptchaHandler(){return void 0!==this.captchaHandler}onCaptcha(e){return this.captchaHandler=e,this}processingCaptcha(e){const{captchaHandler:t}=this;return t?new Promise(((s,i)=>{t(e,(e=>new Promise(((t,n)=>{if(e instanceof Error)return n(e),void i(e);s({key:e,validate:{resolve:t,reject:n}})}))))})):Promise.reject(new i.VKError({code:i.SharedErrorCode.MISSING_CAPTCHA_HANDLER,message:"Missing captcha handler"}))}get hasTokenRegenerateHandler(){return void 0!==this.tokenRegenerateHandler}onTokenRegenerate(e){return this.tokenRegenerateHandler=e,this}processingTokenRegenerate(){const{tokenRegenerateHandler:e}=this;return void 0===e?Promise.reject(new i.VKError({code:i.SharedErrorCode.MISSING_TOKEN_REGENERATE_HANDLER,message:"Missing token regenerate handler"})):new Promise(((t,s)=>{e((e=>new Promise(((i,n)=>{if(e instanceof Error)return n(e),void s(e);t({token:e,validate:{resolve:i,reject:n}})}))))}))}}},565579:(e,t,s)=>{"use strict";s.d(t,{EventDispatcher:()=>i});class i{hasEventListener(e,t){return this.listeners.some((s=>s.type===e&&s.listener===t))}addEventListener(e,t,s={}){return this.hasEventListener(e,t)||this.listeners.push({type:e,listener:t,options:s}),this}removeEventListener(e,t){const s=this.listeners.findIndex((s=>s.type===e&&s.listener===t));return-1!==s&&this.listeners.splice(s,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e){return this.listeners.filter((t=>t.type===e.type)).forEach((t=>{const{type:s,listener:i,options:{once:n}}=t;i.call(this,e),n&&this.removeEventListener(s,i)})),this}constructor(){this.listeners=[]}}},401623:(e,t,s)=>{"use strict";s.d(t,{APIRequest:()=>i.APIRequest,CallbackService:()=>n.CallbackService});var i=s(17318),n=s(526511)},17318:(e,t,s)=>{"use strict";s.d(t,{APIRequest:()=>c});var i=s(11010),n=s(434788),a=s(363476),o=s.n(a),r=s(372322),l=s(48989);class c{toString(){return(0,l.getExecuteMethod)(this.method,this.params)}get filteredParams(){const{options:{token:e,version:t,language:s}}=this.api;return Object.fromEntries([...Object.entries((0,n._)({},!this.isCustomMethod&&{v:t,access_token:e},{lang:s},this.params)),...this.api.globalParams.entries()].filter((([,e])=>void 0!==e)))}get isCustomMethod(){const{requestMethod:e}=this.api.options;return"function"==typeof e}make(){var e=this;return(0,i._)((function*(){const{options:{timeout:t,requestMethod:s}}=e.api;e.timeout=setTimeout((()=>{var t;return null==(t=e.options.abortController)?void 0:t.abort()}),t);try{return e.isCustomMethod?yield e.custom():yield e[s]()}finally{clearTimeout(e.timeout)}}))()}fetch(){var e;const{abortController:t}=this.options,{options:{baseUrl:s}}=this.api;return fetch(new URL(`/method/${this.method}`,s),{method:"POST",signal:null==(e=t)?void 0:e.signal,headers:{connection:"keep-alive"},body:new URLSearchParams(this.filteredParams)}).then((e=>e.json()))}bridge(){const{abortController:e}=this.options;return new Promise(((t,s)=>{var i,n;(null==(i=e)?void 0:i.signal.aborted)&&s(e.signal.reason),null==(n=e)||n.signal.addEventListener("abort",(()=>{s(e.signal.reason)})),o().send("VKWebAppCallAPIMethod",{method:this.method,params:this.filteredParams}).then(t).catch((e=>{var s;const{error_data:i}=e;t({error:(null==(s=i)?void 0:s.error_reason)||i||e})}))}))}script(){const{abortController:e}=this.options,{options:{baseUrl:t}}=this.api;return new Promise(((s,i)=>{var n,a;(null==(n=e)?void 0:n.signal.aborted)&&i(e.signal.reason);const o=(0,r.generateId)(20),l=new URLSearchParams(this.filteredParams);l.set("callback",o);const c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=new URL(`/method/${this.method}?${l}`,t).toString(),window[o]=e=>{c.remove(),delete window[o],s(e)},null==(a=e)||a.signal.addEventListener("abort",(()=>{c.remove(),delete window[o],i(e.signal.reason)})),document.head.appendChild(c)}))}custom(){const{abortController:e}=this.options,{requestMethod:t}=this.api.options;if("function"==typeof t)return new Promise(((s,i)=>{var n,a;(null==(n=e)?void 0:n.signal.aborted)&&i(e.signal.reason),null==(a=e)||a.signal.addEventListener("abort",(()=>{i(e.signal.reason)})),t(this.method,this.filteredParams).then(s).catch(i)}))}constructor({api:e,method:t,params:s={},options:i={}}){var a;this.retries=0,this.api=e,this.method=t,this.params=(0,n._)({},s),this.options=(0,n._)({},i),null!=(a=this.options).abortController||(a.abortController=new AbortController),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}},506945:(e,t,s)=>{"use strict";s(667294)},964548:(e,t,s)=>{"use strict";s.d(t,{API:()=>i.API,StickersQueueEventType:()=>r.StickersQueueEventType,UpdatesSource:()=>a.UpdatesSource,VKError:()=>n.VKError,VmojiQueueEventType:()=>o.VmojiQueueEventType,getRandomId:()=>l.getRandomId});var i=s(377976),n=(s(722223),s(695007),s(869489),s(752448),s(5874)),a=(s(432043),s(183746)),o=s(563772),r=s(513080),l=(s(85158),s(456079),s(187684),s(969042),s(506945),s(167718));s(153473),s(517283)},647827:(e,t,s)=>{"use strict";s.d(t,{methodGroups:()=>i});const i=["account","accountVerification","actionLinks","address","adex","admin","admins","ads","adsint","adsweb","aliexpress","antispam","appWidgets","apps","articles","asr","audio","audioBooks","audioSearch","auth","authorsMarketplace","autotests","badges","bestFriends","biz","blogforce","board","bot","botsConf","bugtracker","calls","callsOk","captcha","cashout","catalog","channels","classifieds","combo","coupons","crowd","cua","database","deliveryClub","devAdmin","docs","documentation","donut","downloadedGames","ecosystem","education","educationCloud","educationForeign","educationParents","educationPolls","educationReport","educationUser","email","esia","exchange","exchangeRates","execute","experts","explore","externalAudioMatching","externalUsers","fave","finance","findMe","forbiddenRegistry","fortuneSquare","fortuneWheel","friends","gamesPromo","gifts","golunch","goodsOrders","groups","healthApp","healthCommon","healthCourses","healthLoyalty","id","identity","instManager","interests","internal","leadForms","leads","lifeEvents","likes","lovina","loyalty","loyaltyTeen","market","marusia","masks","memories","messages","microlandings","mobile","money","multiaccount","musicManager","narratives","newsfeed","nft","nftMarket","nospam","notes","notifications","odnoklassniki","onboarding","orders","pages","phones","photos","places","platform","platformConsole","podcasts","podcastsOffice","polls","prettyCards","promoCodes","questions","queue","reports","restore","rewardedAds","rightholders","search","secure","serverEffects","settings","shortVideo","signals","situationalSuggests","sms","social","specials","statEvents","stats","statsDashboard","status","stickers","storage","store","stories","streaming","studentsVerification","studio","superApp","superAppPromo","support","survey","tags","textlives","tickets","tinkoff","translations","uma","users","utils","uxpolls","verification","video","videoPostcards","vkCharity","vkIdHub","vkMusic","vkRun","vkStart","vkTaxi","vkUp","vkdrive","vkstore","vmoji","voicerooms","wall","weather","widgets","widgetsIOS","widgetsKit","wishlists"]},722223:(e,t,s)=>{"use strict";var i,n,a;s.d(t,{APIMode:()=>i,APIRequestMethod:()=>a,APIRequestMode:()=>n}),function(e){e.PARALLEL="parallel",e.SEQUENTIAL="sequential"}(i||(i={})),function(e){e.SEQUENTIAL="sequential",e.BURST="burst"}(n||(n={})),function(e){e.FETCH="fetch",e.SCRIPT="script",e.BRIDGE="bridge"}(a||(a={}))},513080:(e,t,s)=>{"use strict";var i;s.d(t,{StickersQueueEvent:()=>n,StickersQueueEventType:()=>i}),function(e){e.UGC_USER_UPDATE="ugc_user_update",e.UGC_PACK_UPDATE="ugc_pack_update",e.UGC_OWNER_UPDATE="ugc_owner_update",e.UGC_STICKER_UPDATE="ugc_sticker_update"}(i||(i={}));class n extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},718557:(e,t,s)=>{"use strict";s.d(t,{handlerStickersQueueEvent:()=>l});var i=s(513080),n=s(85158),a=s(456079),o=s(187684),r=s(969042);function l(e,{data:t}){const{type:s}=t;switch(s){case i.StickersQueueEventType.UGC_PACK_UPDATE:e.dispatchEvent(new n.StickersUGCPackUpdate(t));break;case i.StickersQueueEventType.UGC_USER_UPDATE:e.dispatchEvent(new a.StickersUGCUserUpdate(t));break;case i.StickersQueueEventType.UGC_OWNER_UPDATE:e.dispatchEvent(new o.StickersUGCOwnerUpdate(t));break;case i.StickersQueueEventType.UGC_STICKER_UPDATE:e.dispatchEvent(new r.StickersUGCStickerUpdate(t))}}},187684:(e,t,s)=>{"use strict";s.d(t,{StickersUGCOwnerUpdate:()=>n});var i=s(513080);class n extends i.StickersQueueEvent{constructor(e){super(i.StickersQueueEventType.UGC_OWNER_UPDATE,e)}}},85158:(e,t,s)=>{"use strict";s.d(t,{StickersUGCPackUpdate:()=>n});var i=s(513080);class n extends i.StickersQueueEvent{constructor(e){super(i.StickersQueueEventType.UGC_USER_UPDATE,e)}}},969042:(e,t,s)=>{"use strict";s.d(t,{StickersUGCStickerUpdate:()=>n});var i=s(513080);class n extends i.StickersQueueEvent{constructor(e){super(i.StickersQueueEventType.UGC_STICKER_UPDATE,e)}}},456079:(e,t,s)=>{"use strict";s.d(t,{StickersUGCUserUpdate:()=>n});var i=s(513080);class n extends i.StickersQueueEvent{constructor(e){super(i.StickersQueueEventType.UGC_USER_UPDATE,e)}}},563772:(e,t,s)=>{"use strict";var i;s.d(t,{VmojiQueueEvent:()=>n,VmojiQueueEventType:()=>i}),function(e){e.AVATAR="avatar",e.STICKERS="stickers",e.CHARACTER="character",e.STICKERS_PRINT_REQUEST="stickers_print_request"}(i||(i={}));class n extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},208911:(e,t,s)=>{"use strict";s.d(t,{handleVmojiQueueEvent:()=>n});var i=s(563772);function n(e,{data:t}){const{type:s,query_id:n}=t;n&&e.dispatchEvent(new i.VmojiQueueEvent(n,t)),e.dispatchEvent(new i.VmojiQueueEvent(s,t))}},183746:(e,t,s)=>{"use strict";s.d(t,{Updates:()=>m,UpdatesSource:()=>i});var i,n,a,o=s(11010),r=s(434788),l=s(820224),c=s(869489),d=s(565579),h=s(208911),u=s(718557),_=s(131942),g=s(513222);!function(e){e.USER="user",e.GROUP="group",e.VMOJI="vmoji",e.STICKERS="stickers"}(i||(i={})),function(e){e.CHECK="a_check",e.RELEASE="a_release"}(n||(n={})),function(e){e.NEED_RESTART="NEED_RESTART",e.POLLING_REQUEST_FAILED="POLLING_REQUEST_FAILED"}(a||(a={}));class m extends d.EventDispatcher{start(){var e=this;return(0,o._)((function*(){if(!e.started){e.started=!0;try{const t=yield e.getLongPollServer();if(!t)return;const{server:s,key:a,ts:o}=t;switch(0===e.ts&&(e.ts=o),e.url=new URL(s),e.url.searchParams.set("key",a),e.url.searchParams.set("act",n.CHECK),e.url.searchParams.set("wait","25"),e.url.searchParams.set("mode",String(e.mode)),e.url.searchParams.set("version",String(g.POLLING_VERSION)),e.source){case i.VMOJI:case i.STICKERS:e.url.searchParams.set("id",String(e.userId))}e.startFetchLoop()}catch(t){throw e.started=!1,t}}}))()}getLongPollServer(){var e=this;return(0,o._)((function*(){let t;switch(e.source){case i.GROUP:t=yield e.api.groups.getLongPollServer({group_id:e.groupId});break;case i.VMOJI:case i.STICKERS:var s;s=yield e.api[e.source].subscribeToQueue().then((e=>{var{base_url:t}=e,s=(0,l._)(e,["base_url"]);return(0,r._)({server:t},s)})),t=s;break;default:return}const{server:n}=t;return t.server=`${n.startsWith("https")?"":"https://"}${n}`,t}))()}stop(){var e=this;return(0,o._)((function*(){e.started=!1,e.restarted=0}))()}startFetchLoop(){var e=this;return(0,o._)((function*(){try{for(;e.started;)yield e.fetchUpdates()}catch(t){if(t.code!==a.NEED_RESTART&&e.restarted!==e.retryLimit)return e.restarted+=1,yield(0,_.wait)(3e3),void e.startFetchLoop();for(;e.started;)try{yield e.stop(),yield e.start();break}catch(t){console.log(t),e.started=!0,yield(0,_.wait)(e.wait)}}}))()}fetchUpdates(){var e=this;return(0,o._)((function*(){e.url.searchParams.set("ts",String(e.ts));const t=new AbortController,s=setTimeout((()=>t.abort()),3e4);let i;try{const s=yield fetch(e.url,{method:"GET",signal:t.signal,headers:{connection:"keep-alive"}});if(!s.ok)throw new c.UpdatesError({code:a.POLLING_REQUEST_FAILED,message:"Polling request failed"});i=yield s.json()}finally{clearTimeout(s)}if(void 0!==i.failed){if(1===i.failed)return void(e.ts=i.ts);throw e.ts=0,new c.UpdatesError({code:a.NEED_RESTART,message:"The server has been failed"})}e.restarted=0,e.ts=i.ts,i.pts&&(e.pts=Number(i.pts)),i.updates=i.updates||i.events||[];for(const t of i.updates)e.handleUpdate(t)}))()}handleUpdate(e){switch(this.source){case i.VMOJI:(0,h.handleVmojiQueueEvent)(this,e);break;case i.STICKERS:(0,u.handlerStickersQueueEvent)(this,e)}}constructor(e,t={}){super(),this.mode=202,this.started=!1,this.ts=0,this.pts=0,this.restarted=0,this.api=e;const{source:s,userId:i,groupId:n,wait:a,retryLimit:o}=t;this.source=s,this.userId=i,this.groupId=n,this.wait=a||3e3,this.retryLimit=o||3}}},372322:(e,t,s)=>{"use strict";function i(e){const t="abcdefghijklmnopqrstuvwxyz";let s="";for(let i=0;i<e;i++)s+=t.charAt(Math.floor(26*Math.random()));return s}s.d(t,{generateId:()=>i})},517283:(e,t,s)=>{"use strict";var i;s(363476);!function(e){e.WALL="wall",e.DOCS="docs",e.STATS="stats",e.VIDEO="video",e.PAGES="pages",e.NOTES="notes",e.MANAGE="manage",e.MARKET="market",e.PHOTOS="photos",e.STATUS="status",e.GROUPS="groups",e.OFFLINE="offline",e.STORIES="stories",e.FRIENDS="friends",e.MESSAGES="messages",e.APP_WIDGET="app_widget"}(i||(i={}))},868728:(e,t,s)=>{"use strict";function i(e){return`return [${e.join(",")}];`}s.d(t,{getChainReturn:()=>i})},48989:(e,t,s)=>{"use strict";s.d(t,{getExecuteMethod:()=>n});var i=s(206467);function n(e,t={}){return`API.${e}(${(0,i.getExecuteParams)(t)})`}},206467:(e,t,s)=>{"use strict";function i(e){return JSON.stringify(e,((t,s)=>"object"==typeof s&&s!==e?String(s):s))}s.d(t,{getExecuteParams:()=>i})},153473:(e,t,s)=>{"use strict";s(11010),s(432043),s(695007),s(131942)},167718:(e,t,s)=>{"use strict";function i(){const e=Math.pow(2,32)/2-1;return Math.floor(Math.random()*e)}s.d(t,{getRandomId:()=>i})},708672:(e,t,s)=>{"use strict";function i(e,t){let s=0;t.response.forEach(((i,n)=>{const a=e[n];!1===i?(a.reject(t.errors[s]),s++):a.resolve(i)}))}s.d(t,{resolveExecuteTask:()=>i})},131942:(e,t,s)=>{"use strict";function i(e){return new Promise((t=>{setTimeout(t,e)}))}s.d(t,{wait:()=>i})},283085:(e,t,s)=>{"use strict";s.d(t,{ParallelWorker:()=>l});var i=s(11010),n=s(401623),a=s(618430),o=s(868728),r=s(708672);class l extends a.SequentialWorker{execute(){var e=this,t=()=>super.execute;return(0,i._)((function*(){const{queue:s}=e;if(e.isAllowedMethod(s[0].method))return void t().call(e);const{executeCount:i}=e.api.options,a=[];for(let t=0;t<e.queue.length&&(e.isAllowedMethod(s[t].method)||(a.push(s.splice(t,1)[0]),t-=1,!(a.length>=i)));t+=1);if(0===a.length)return;const l=new n.APIRequest({api:e.api,method:"execute",params:{code:(0,o.getChainReturn)(a.map(String))}});t().call(e,l);try{(0,r.resolveExecuteTask)(a,yield l.promise)}catch(e){for(const t of a)t.reject(e)}}))()}isAllowedMethod(e){return e.startsWith("execute")||this.api.options.executeUnsupportedMethods.includes(e)}}},618430:(e,t,s)=>{"use strict";s.d(t,{SequentialWorker:()=>d});var i=s(11010),n=s(602033),a=s(614531),o=s(432043),r=s(752448),l=s(131942),c=s(513222);class d extends a.APIWorker{execute(e){var t=this;return(0,i._)((function*(){var s;if(e||(e=t.queue.shift()),!e)return;const{method:i}=e;let n;try{n=yield e.make()}catch(s){const{options:i}=t.api;var a;return e.retries===i.limit?(null==(a=e.captchaValidate)||a.reject(s),void e.reject(s)):(e.retries+=1,yield(0,l.wait)(i.wait),void t.requeue(e))}var c;void 0===n.error?(null==(s=e.captchaValidate)||s.resolve(),i.startsWith("execute")?e.resolve({response:n.response,errors:(n.execute_errors||[]).map((e=>new r.ExecuteError(e)))}):e.resolve(null!=(c=n.response)?c:n)):t.handleError(e,new o.APIError(n.error))}))()}handleError(e,t){var s=this;return(0,i._)((function*(){var i,a;const{code:o}=t,{options:r}=s.api;if(e.retries!==r.limit){if(e.retries+=1,o===n.API_ERROR_TOO_MANY)return s.paused?void s.requeue(e):(s.pause(),yield(0,l.wait)(c.MINIMUM_TIME_INTERVAL_API),s.requeue(e),void s.resume());if(null==(i=e.captchaValidate)||i.reject(t),null==(a=e.tokenRegenerateValidate)||a.reject(t),o===n.API_ERROR_CAPTCHA&&s.api.hasCaptchaHandler)try{const{captchaSid:i}=t,{key:n,validate:a}=yield s.api.processingCaptcha({type:c.CaptchaType.API,src:t.captchaImg,sid:i,request:e});e.captchaValidate=a,e.params.captcha_sid=i,e.params.captcha_key=n,s.requeue(e)}catch(t){e.reject(t)}else if(o===n.API_ERROR_AUTH&&s.api.hasTokenRegenerateHandler)try{const{token:t,validate:i}=yield s.api.processingTokenRegenerate();s.api.options.token=t,e.tokenRegenerateValidate=i,yield(0,l.wait)(c.MINIMUM_TIME_INTERVAL_API),s.requeue(e)}catch(t){e.reject(t)}else e.reject(t)}else e.reject(t)}))()}}},614531:(e,t,s)=>{"use strict";s.d(t,{APIWorker:()=>n});var i=s(513222);class n{enqueue(e){this.queue.push(e),this.immediateHeat()}requeue(e){this.queue.unshift(e),this.immediateHeat()}pause(){this.paused=!0}resume(){this.paused=!1,this.immediateHeat()}heat(){if(this.paused||this.busy||!this.queue.length)return;this.busy=!0;const{requestMode:e}=this.api.options;this[e]()}sequential(){this.execute(),setTimeout((()=>{this.busy=!1,this.immediateHeat()}),this.intervalPerRequests)}burst(){const e=Math.min(this.api.options.limit,this.queue.length);for(let t=0;t<e&&0!==this.queue.length;t+=1)this.execute();const t=Math.ceil(i.MINIMUM_TIME_INTERVAL_API-e*this.intervalPerRequests);setTimeout((()=>{this.busy=!1,this.immediateHeat()}),t<=0?i.MINIMUM_TIME_INTERVAL_API:t)}immediateHeat(){setTimeout((()=>this.heat()))}constructor(e){this.busy=!1,this.paused=!1,this.queue=[],this.api=e,this.intervalPerRequests=Math.ceil(i.MINIMUM_TIME_INTERVAL_API/this.api.options.limit)}}},907312:(e,t,s)=>{"use strict";s.d(t,{useConvoAttaches:()=>h});var i=s(11010),n=s(434788),a=s(696023),o=s(694788),r=s(667294),l=s(89131),c=s(991792);const d=30;function h(e){const[t,s]=(0,r.useState)(null),o=(0,a.useInsertIntoCache)(),{api:l}=(0,a.useBrowserEnv)(),c=(0,a.useOwner)();(0,r.useLayoutEffect)((()=>()=>{s(null)}),[e]);const d=(0,r.useCallback)((0,i._)((function*(i){var a,r,d;let h=t||{};if((null==(a=h[i])?void 0:a.isLoading)||(null==(r=h[i])?void 0:r.isAllLoaded))return;g(h,!0,i),s((0,n._)({},h));const _=yield function(e,t,s,i,n,a){return u.apply(this,arguments)}(l,e,c.id,i,o,(null==(d=h[i])?void 0:d.cursorNextLoad)||void 0);!function(e,t){var s,i,n,a,o;t.audios&&(e.audios={items:((null==(s=e.audios)?void 0:s.items)||[]).concat(t.audios.items),cursorNextLoad:t.audios.cursorNextLoad||null,isAllLoaded:t.audios.isAllLoaded});t.docs&&(e.docs={items:((null==(i=e.docs)?void 0:i.items)||[]).concat(t.docs.items),cursorNextLoad:t.docs.cursorNextLoad||null,isAllLoaded:t.docs.isAllLoaded});t.links&&(e.links={items:((null==(n=e.links)?void 0:n.items)||[]).concat(t.links.items),cursorNextLoad:t.links.cursorNextLoad||null,isAllLoaded:t.links.isAllLoaded});t.photos&&(e.photos={items:((null==(a=e.photos)?void 0:a.items)||[]).concat(t.photos.items),cursorNextLoad:t.photos.cursorNextLoad||null,isAllLoaded:t.photos.isAllLoaded});t.videos&&(e.videos={items:((null==(o=e.videos)?void 0:o.items)||[]).concat(t.videos.items),cursorNextLoad:t.videos.cursorNextLoad||null,isAllLoaded:t.videos.isAllLoaded})}(h,_),g(h,!1,i),s((0,n._)({},h))})),[l,t,c.id,e,o]);return{attaches:t,getNextPage:d}}function u(){return(u=(0,i._)((function*(e,t,s,i,n,a){try{const r=yield e.fetch("messages.getHistoryAttachments",{peer_id:t,media_type:_(i),count:d,start_from:a,extended:1,group_id:(0,c.getOwnerGroupId)(s)},{retries:5});if(!r.items||0===r.items.length)return{[i]:{items:[],isAllLoaded:!0,cursorNextLoad:null}};n({profiles:r.profiles,groups:r.groups,contacts:r.contacts});return{[i]:{items:(0,o.fromApiConvoAttach)(r.items)[i]||[],isAllLoaded:!r.next_from,cursorNextLoad:r.next_from}}}catch(e){return{}}}))).apply(this,arguments)}const _=e=>({audios:"audio",videos:"video",docs:"doc",links:"link",photos:"photo"}[e]);function g(e,t,s){e[s]||function(e,t){switch(t){case"audios":case"videos":case"docs":case"links":case"photos":e[t]={items:[],cursorNextLoad:null,isAllLoaded:!1};break;default:(0,l.exhaustivenessCheck)(t)}}(e,s);const i=e[s];i&&(i.isLoading=t)}},284837:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachAudioActionsMenu:()=>l});var i=s(667294),n=s(599660),a=s(89131),o=s(696023),r=s(118083);const l=({cmid:e,goToMessage:t})=>{const{lang:s}=(0,o.useBrowserEnv)(),l=(0,i.useCallback)((s=>{switch(s){case"share":return;case"go_to_message":return void t(e);default:return(0,a.exhaustivenessCheck)(s)}}),[e,t]);return i.createElement(n.ActionsMenu,null,i.createElement(n.ActionsMenuAction,{onClick:()=>l("go_to_message"),title:s.use("me_attach_action_go_to_message"),leftIcon:i.createElement(r.Icon24MessageArrowRightOutline,null),type:"secondary"}))}},98859:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachDocActionsMenu:()=>l});var i=s(667294),n=s(599660),a=s(118083),o=s(696023),r=s(89131);const l=({cmid:e,goToMessage:t})=>{const{lang:s}=(0,o.useBrowserEnv)(),l=(0,i.useCallback)((s=>{switch(s){case"share":return;case"go_to_message":return void t(e);default:return(0,r.exhaustivenessCheck)(s)}}),[e,t]);return i.createElement(n.ActionsMenu,null,i.createElement(n.ActionsMenuAction,{title:s.use("me_attach_action_go_to_message"),leftIcon:i.createElement(a.Icon24MessageArrowRightOutline,null),onClick:()=>l("go_to_message"),type:"secondary"}))}},394491:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachLinkActionsMenu:()=>r});var i=s(667294),n=s(599660),a=s(118083),o=s(696023);const r=({cmid:e,goToMessage:t})=>{const{lang:s}=(0,o.useBrowserEnv)();return i.createElement(n.ActionsMenu,null,i.createElement(n.ActionsMenuAction,{title:s.use("me_attach_action_go_to_message"),leftIcon:i.createElement(a.Icon24MessageArrowRightOutline,null),onClick:()=>t(e),type:"secondary"}))}},937842:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachesLinks:()=>m});var i=s(667294),n=s(197934),a=s(89131),o=s(757244),r=s(696023),l=s(597298),c=(s(335106),s(294184)),d=s.n(c),h=s(163332),u=s(394491),_=s(367763),g=s(179636);const m=({items:e,goToMessage:t})=>(()=>{const s=new Set;return i.createElement("ul",{className:"ConvoAttachesLinks"},e.map(((e,n)=>{const a=`${e.cmid}_${e.attach.url}`,o=s.has(a)?`${a}_${n}`:a;return s.add(a),i.createElement(p,{key:o,item:e,goToMessage:t})})))})(),p=({item:e,goToMessage:t})=>{const{isTouchOnly:s}=(0,_.useDeviceData)(),[c,m]=(0,i.useState)(!1),{settings:p}=(0,r.useViewer)(),v=p.rightClickActionsEnabled&&!s,[C,f]=(0,i.useState)(null),{lang:A}=(0,r.useBrowserEnv)(),I=e=>{switch(e.kind){case"Link":return e.url;case"MiniApp":return e.shareUrl;default:(0,a.exhaustivenessCheck)(e)}};return i.createElement("li",null,i.createElement(l.ExternalLink,{ref:e=>{f(e)},href:I(e.attach),className:"ConvoAttachesLink"},i.createElement("div",null,i.createElement("div",{className:"ConvoAttachesLink__image-container"},(e=>{var t;const s=48*window.devicePixelRatio,a="Link"===e.kind?n.preview(e,s,s,!0):n.preview(e,s,s);return(null==(t=a)?void 0:t.url)?i.createElement("img",{alt:e.title,src:a.url,className:"ConvoAttachesLink__image"}):i.createElement("div",{className:"ConvoAttachesLink__image"})})(e.attach))),i.createElement("div",{className:"ConvoAttachesLink__content"},i.createElement("div",{className:"ConvoAttachesLink__name"},e.attach.title),i.createElement("div",{className:"ConvoAttachesLink__url"},I(e.attach))),!v&&i.createElement(h.Dropdown,{open:s&&c,classNames:{wrapper:d()("ConvoAttachesLinkItem__dropdown",{"ConvoAttachesLinkItem__dropdown--open":s}),wrapperOpened:"ConvoAttachesLinkItem__dropdown--open"},content:i.createElement(u.ConvoAttachLinkActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"center",position:"bottom",openType:s?"click":"hover"},i.createElement("button",{className:"ConvoProfileAttachments__itemMenuButton","aria-label":A.use("me_actions_more"),onClick:e=>{e.preventDefault(),e.stopPropagation(),m((e=>!e))}},i.createElement(o.Icon20More,null))),v&&i.createElement(g.ContextMenu,{ref:{current:C},allowNativeContextMenu:!0,content:i.createElement(u.ConvoAttachLinkActionsMenu,{cmid:e.cmid,goToMessage:t})})))}},116278:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachesPhotos:()=>C});var i=s(434788),n=(s(704107),s(667294)),a=s(197934),o=s(597298),r=s(163332),l=s(803437),c=s(284379),d=s(658332),h=s(696023),u=s(89131),_=s(599660),g=s(367763),m=s(294184),p=s.n(m),v=s(179636);const C=({photos:e,goToMessage:t,withDateSeparator:s})=>{const i=(0,h.useNow)(),{api:a,lang:o}=(0,h.useBrowserEnv)(),[r,l]=(0,n.useState)(0),c=(0,n.useRef)(null),[d,_]=(0,n.useState)([]);(0,n.useLayoutEffect)((()=>{if(!window.IntersectionObserver)return;if(0!==r)return;if(!c.current)return;const e=new ResizeObserver((t=>{var s;t[0]&&l(t[0].contentRect.width),0===(null==(s=t[0])?void 0:s.contentRect.width)&&e.disconnect()}));return e.observe(c.current),()=>{e.disconnect()}}),[]);const g=(0,n.useCallback)(((e,s)=>{switch(e){case"set_as_avatar":case"copy_link":case"download":case"tag_item":case"tag_service":break;case"delete":a.fetch("photos.delete",{photo_id:s.attach.id,owner_id:s.attach.ownerId}).then((()=>{_((e=>[...e,s.attach.id]))}));break;case"restore":a.fetch("photos.restore",{photo_id:s.attach.id,owner_id:s.attach.ownerId}).then((()=>{_((e=>e.filter((e=>e!==s.attach.id))))}));break;case"go_to_message":t(s.cmid);break;default:(0,u.exhaustivenessCheck)(e)}}),[t,a]);if(!s)return n.createElement("ul",{className:"ConvoAttachesPhotos"},e.map(((e,t)=>{const s=0===t,i=0!==r?A(e.attach,r):void 0;return n.createElement(f,{key:`${e.cmid}-${e.attach.id}-${t}`,isDeleted:d.includes(e.attach.id),photo:e,photoSource:i||void 0,measuredElRef:s?c:void 0,onActionClick:g})})));const m=e.reduce(((t,s,i)=>{var n;const a=0===i,o=e[i-1];return(a||o&&!(0,u.isSameMonth)(1e3*o.date,1e3*s.date))&&t.push([]),null==(n=t[t.length-1])||n.push(s),t}),[]);return n.createElement(n.Fragment,null,m.map(((e,t)=>{var s;const a=(null==(s=e[0])?void 0:s.date)||0;return n.createElement(n.Fragment,{key:t},n.createElement("div",{className:"ConvoAttachesPhotos__dateSeparator"},o.use("me_month_year_date",{now:i,date:1e3*a,genMonths:!1})),n.createElement("ul",{className:"ConvoAttachesPhotos--separated"},e.map(((e,s)=>{const i=0===t&&0===s,a=0!==r?A(e.attach,r):void 0;return n.createElement(f,{key:`${e.cmid}-${e.attach.id}-${s}`,isDeleted:d.includes(e.attach.id),photo:e,photoSource:a||void 0,measuredElRef:i?c:void 0,onActionClick:g})}))))})))},f=({photo:e,measuredElRef:t,photoSource:s,isDeleted:a,onActionClick:u})=>{const{isTouchOnly:m}=(0,g.useDeviceData)(),{lang:C}=(0,h.useBrowserEnv)(),f=(0,h.useOwner)(),{settings:A}=(0,h.useViewer)(),I=A.rightClickActionsEnabled&&!m,S=(0,n.useRef)(null),L=(0,n.useMemo)((()=>n.createElement(n.Fragment,null,n.createElement(_.ActionsMenuAction,{key:"action_go_to_message",onClick:()=>u("go_to_message",e),title:C.use("me_attach_action_go_to_message"),leftIcon:n.createElement(l.Icon20MessageArrowRightOutline,null),type:"secondary"}),e.attach.ownerId===f.id&&n.createElement(_.ActionsMenuAction,{key:"action_delete",onClick:()=>u("delete",e),title:C.use("me_attach_action_delete_photo"),leftIcon:n.createElement(c.Icon20DeleteOutline,null),type:"danger"}))),[C,e,f.id,u]),N={kind:"message",peerId:e.authorId,cmid:e.cmid};return n.createElement("li",{className:"ConvoAttachesPhotos__item",ref:t},s&&!a&&n.createElement(n.Fragment,null,n.createElement(o.Link,{ref:S,to:{kind:"AttachMediaProxyRoute",attach:e.attach,source:N},key:e.attach.id,className:"ConvoAttachesPhotos__link"},n.createElement("img",(0,i._)({},s,{alt:"",className:"ConvoAttachPhoto__img"}))),!I&&n.createElement(r.Dropdown,(0,i._)({classNames:{wrapper:p()("ConvoAttachPhoto__dropdown",{"DropdownReforged--opened":m})},content:n.createElement(_.ActionsMenu,{className:"ConvoActionsMenu"},L),align:"right",position:"bottom"},m?{adaptation:"horizontal"}:{},{hideOnClick:!0}),n.createElement("button",{className:"ConvoAttachPhoto__action","aria-label":C.use("me_actions_more")},n.createElement(d.Icon24MoreHorizontal,null))),I&&n.createElement(v.ContextMenu,{ref:S,allowNativeContextMenu:!0,content:n.createElement(_.ActionsMenu,{className:"ConvoActionsMenu"},L)})),s&&a&&n.createElement("div",{className:"ConvoAttachesPhotos__restore"},n.createElement("div",{className:"ConvoAttachesPhoto__restore-button",onClick:()=>u("restore",e)},C.use("me_attach_action_restore"))))};function A(e,t){const s=a.preview(e,t,t,!1),i=a.preview(e,2*t,2*t,!1);return s||i?s&&i?{srcSet:`${s.url}, ${i.url} 2x`,src:i.url}:{src:s?s.url:i?i.url:""}:null}},872008:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachesVideos:()=>C});s(128831);var i=s(667294),n=s(197934),a=s(96190),o=s(89131),r=s(696023),l=s(163332),c=s(803437),d=s(757244),h=s(597298),u=s(599660),_=s(294184),g=s.n(_),m=s(650938),p=s(367763),v=s(179636);const C=({videos:e,goToMessage:t})=>{const[s,a]=(0,i.useState)(0),{api:l,lang:c}=(0,r.useBrowserEnv)(),d=(0,i.useRef)(null),[h,u]=(0,i.useState)([]),{viewer:_}=(0,r.useViewer)();(0,i.useLayoutEffect)((()=>{if(!window.IntersectionObserver)return;if(0!==s)return;if(!d.current)return;const e=new ResizeObserver((t=>{var s;t[0]&&a(t[0].contentRect.width),0===(null==(s=t[0])?void 0:s.contentRect.width)&&e.disconnect()}));return e.observe(d.current),()=>{e.disconnect()}}),[]);const g=(0,i.useCallback)(((e,s)=>{switch(e){case"go_to_message":t(s.cmid);break;case"delete_from_own":l.fetch("video.delete",{video_id:s.attach.id,owner_id:s.attach.ownerId,target_id:_.id}).then((()=>{u((e=>[...e,s.attach.id]))}));break;case"restore":l.fetch("video.restore",{video_id:s.attach.id,owner_id:s.attach.ownerId}).then((()=>{u((e=>e.filter((e=>e!==s.attach.id))))}));break;case"copy_link":case"download":case"report":case"share":case"add":case"add_to_playlist":break;default:(0,o.exhaustivenessCheck)(e)}}),[t,l,_.id]),m=Date.now();let p=null;return i.createElement("ul",{className:"ConvoAttachesVideos"},e.map(((e,t)=>{const a=0===t,o=new Date(1e3*e.date).getMonth(),r=null===p||o!==p;p=o;const l=0!==s?function(e,t){const s=n.preview(e,t),i=n.preview(e,2*t);if(!s&&!i)return null;if(!s||!i)return{src:s?s.url:i?i.url:""};return{srcSet:`${s.url}, ${i.url} 2x`,src:i.url}}(e.attach,s):void 0;return i.createElement(i.Fragment,null,r&&i.createElement("div",{className:"ConvoAttachesVideos__separator"},c.use("me_month_year_date",{now:m,date:1e3*e.date,genMonths:!1})),i.createElement(f,{key:`${e.cmid}-${e.attach.id}`,measuredElRef:a?d:void 0,isDeleted:h.includes(e.attach.id),onActionClick:g,video:e,videoSource:l||void 0}))})))},f=({video:e,videoSource:t,isDeleted:s,measuredElRef:n,onActionClick:o})=>{var _;const{isTouchOnly:C}=(0,p.useDeviceData)(),[f,A]=(0,i.useState)(!1),{settings:I}=(0,r.useViewer)(),S=I.rightClickActionsEnabled&&!C,[L,N]=(0,i.useState)(null),{lang:w}=(0,r.useBrowserEnv)(),E=(0,r.usePeers)(),b=a.safeGet(E,e.authorId),M=(0,m.getDuration)(e.attach.duration,!!(null==(_=e.attach.files)?void 0:_.external))||e.attach.platform,k=(0,i.useMemo)((()=>i.createElement(u.ActionsMenuAction,{key:"action_go_to_message",onClick:()=>o("go_to_message",e),title:w.use("me_attach_action_go_to_message"),leftIcon:i.createElement(c.Icon20MessageArrowRightOutline,null),type:"secondary"})),[w,e,o]);return i.createElement("li",{ref:n},(()=>{const n=!!t&&!s,o=i.createElement(i.Fragment,null,n&&i.createElement("div",{className:"ConvoAttachesVideoItem__preview"},!!M&&i.createElement("div",{className:"ConvoAttachesVideos__previewInfo"},M),i.createElement("img",{src:t.src,srcSet:t.srcSet,alt:""})),i.createElement("div",{className:"ConvoAttachesVideoItem__content"},i.createElement("div",{className:"ConvoAttachesVideoItem__title"},e.attach.title),i.createElement("div",{className:"ConvoAttachesVideoItem__info"},i.createElement("div",{className:"ConvoAttachesVideoItem__infoSide"},i.createElement(h.Link,{to:{kind:"PeerModalRoute",peerId:e.authorId},options:{clearModals:!0},className:"ConvoAttachesVideoItem__peer"},a.name(b)),i.createElement("div",{className:"ConvoAttachesVideo__views"},w.use("me_convo_attaches_video_views",{num:e.attach.views,formatted:"short",values:{count:w.formatNumber(e.attach.views,"short")}}))),n&&!S&&i.createElement(l.Dropdown,{open:C&&f,classNames:{wrapper:g()("ConvoAttachVideo__dropdown",{"ConvoAttachVideo__dropdown--open":C}),wrapperOpened:"ConvoAttachVideo__dropdown--open"},content:i.createElement(u.ActionsMenu,{className:"ConvoActionsMenu"},k),align:"center",position:"bottom",openType:C?"click":"hover"},i.createElement("button",{className:"ConvoAttachVideo__action","aria-label":w.use("me_actions_more"),onClick:e=>{e.preventDefault(),e.stopPropagation(),A((e=>!e))}},i.createElement(d.Icon20More,null))))),n&&S&&i.createElement(v.ContextMenu,{ref:{current:L},allowNativeContextMenu:!0,content:i.createElement(u.ActionsMenu,{className:"ConvoActionsMenu"},k)}));return n?i.createElement(h.Link,{ref:e=>{N(e)},to:{kind:"AttachMediaProxyRoute",attach:e.attach},className:"ConvoAttachesVideoItem"},o):i.createElement("div",{className:"ConvoAttachesVideoItem"},o)})())}},389706:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachments:()=>f});s(402752);var i=s(667294),n=s(86894),a=s(202158),o=s(76292),r=s(126528),l=s(907312),c=s(696023),d=s(116278),h=s(872008),u=s(163332),_=s(98859),g=s(658332),m=s(284837),p=s(937842),v=s(294184),C=s.n(v);const f=({peerId:e,goToMessage:t,className:s})=>{const[v,f]=(0,i.useState)("photos"),{attaches:A,getNextPage:I}=(0,l.useConvoAttaches)(e),{lang:S}=(0,c.useBrowserEnv)(),L=e=>{e!==v&&(A&&!A[e]&&I(e),f(e))};(0,i.useEffect)((()=>{null===A&&I(v)}));const N=(0,i.useRef)(v);N.current=v;const w=(0,i.useRef)(I);w.current=I;const E=(0,i.useCallback)((e=>{e&&w.current(N.current)}),[]),b=(0,i.useMemo)((()=>{var e,t;return{onChange:E,skip:null==(t=A)||null==(e=t[v])?void 0:e.isLoading}}),[v,A,E]);if(!A)return null;const M=A[v],k=!M||0===M.items.length&&M.isLoading,x=!k&&M&&M.items.length>0&&!M.isAllLoaded,T=M&&!M.isLoading&&0===M.items.length;return i.createElement("div",{className:C()("ConvoAttachments",s)},i.createElement(n.Tabs,{className:"ConvoAttachments_tabs"},i.createElement(n.HorizontalScroll,{arrowSize:"m"},i.createElement(n.TabsItem,{onClick:()=>L("photos"),selected:"photos"===v},S.use("me_convo_attaches_type_photo")),i.createElement(n.TabsItem,{onClick:()=>L("videos"),selected:"videos"===v},S.use("me_convo_attaches_type_video")),i.createElement(n.TabsItem,{onClick:()=>L("audios"),selected:"audios"===v},S.use("me_convo_attaches_type_music")),i.createElement(n.TabsItem,{onClick:()=>L("docs"),selected:"docs"===v},S.use("me_convo_attaches_type_doc")),i.createElement(n.TabsItem,{onClick:()=>L("links"),selected:"links"===v},S.use("me_convo_attaches_type_links")))),A&&i.createElement("div",{className:"ConvoAttachments__block"},(()=>{var e,s;if(!(null==(e=M)?void 0:e.items)||0===(null==(s=M)?void 0:s.items.length))return null;switch(v){case"audios":var n;return i.createElement("ul",{className:"ConvoAttachments__list"},null==(n=M)?void 0:n.items.map((e=>{const s=e.attach;return"Audio"!==s.kind?null:i.createElement("li",{key:`${e.cmid}-${s.id}`},i.createElement("div",{className:"ConvoAttachments__itemContainer"},i.createElement("div",{className:"ConvoAttachments__item"},i.createElement(a.AttachAudio,{audio:s})),i.createElement(u.Dropdown,{hideOnClick:!0,content:i.createElement(m.ConvoAttachAudioActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"right",position:"bottom"},i.createElement("button",{className:"ConvoAttachments__itemMenuButton"},i.createElement(g.Icon24MoreHorizontal,null)))))})));case"docs":var r;return i.createElement("ul",{className:"ConvoAttachments__list"},null==(r=M)?void 0:r.items.map((e=>{const s=e.attach;return"Doc"!==s.kind?null:i.createElement("li",{className:"ConvoAttachments__listItem ConvoAtachments__docItem",key:`${e.cmid}-${s.id}`},i.createElement("div",{className:"ConvoAttachments__itemContainer"},i.createElement("div",{className:"ConvoAttachments__item"},i.createElement(o.AttachDoc,{doc:s})),i.createElement(u.Dropdown,{hideOnClick:!0,content:i.createElement(_.ConvoAttachDocActionsMenu,{cmid:e.cmid,goToMessage:t}),align:"center",position:"left"},i.createElement("button",{className:"ConvoAttachments__itemMenuButton"},i.createElement(g.Icon24MoreHorizontal,null)))))})));case"links":const e=A[v];return e?i.createElement(p.ConvoAttachesLinks,{items:e.items,goToMessage:t}):null;case"photos":var l;const s=null==(l=A[v])?void 0:l.items;return s?i.createElement(d.ConvoAttachesPhotos,{photos:s,goToMessage:t}):null;case"videos":var c;const C=null==(c=A[v])?void 0:c.items;return C?i.createElement(h.ConvoAttachesVideos,{videos:C,goToMessage:t}):null;default:return null}})(),k&&i.createElement(n.Spinner,{size:"small",className:"ConvoAttachments__loader"}),x&&i.createElement(r.OptimizedSpinner,{size:"small",className:"ConvoAttachments__loader",intersectionOptions:b}),T&&i.createElement("div",{className:"ConvoAttachments__empty"},S.use("me_convo_attaches_empty_type"))))}},928265:(e,t,s)=>{"use strict";s.d(t,{ConvoAttachmentsApp:()=>l});var i=s(667294),n=s(682930),a=s(96190),o=s(389706),r=s(635800);const l=({store:e,env:t,peerId:s,goToMessage:l})=>{const[c,d]=(0,i.useState)(e.getState());(0,i.useEffect)((()=>e.subscribe(d)),[e]);const h=a.safeGet(c.peers,c.ownerId);return i.createElement(r.ErrorBoundary,{fallbackRender:()=>null,onError:e=>t.logger.error("[ConvoAttachmentsApp] Error",e)},i.createElement("div",{className:"ConvoAttachmentsApp MEConfig"},i.createElement(n.Provider,{env:t,state:c,dispatch:e.dispatch,featureFlags:e.featureFlags,owner:h},i.createElement(o.ConvoAttachments,{peerId:s,goToMessage:l}))))}},533425:(e,t,s)=>{"use strict";s.d(t,{ChatSettings:()=>E});var i=s(785893),n=s(667294),a=s(95432),o=s(527405),r=s(875610),l=s(95638),c=s(29271),d=s(705758),h=s(400856),u=s(589897),_=s(600998),g=s(198710),m=s(778555),p=s(189563),v=s(9654),C=s(763258),f=s(554254),A=s(568012),I=s(514986),S=s(222009),L=s(502478),N=s(408014),w=s(839470);class E extends n.Component{go(e,t){this.setState({section:e},(()=>{this.props.updatePopup(),t&&t()}))}getPopupTitle(){switch(this.state.section){case 1:return c.getLang("mail_settings_add_members");case 2:case 3:return c.getLang("mail_chat_invite_link");case 6:return c.getLang("mail_settings_options");default:return c.getLang("mail_settings_title")}}componentWillReceiveProps(e){const t=e.store.get(),s=t.peer,i=t.tabs[s];i.photoLarge||i.photoGrid||this.resync||(this.resync=!0,e.store.set(r.getChatDetails.bind(null,s)).then((()=>{this.resync=!0})))}componentDidMount(){this.props.updatePopup()}componentWillUnmount(){this.timers.forEach(clearTimeout)}render(){const{store:e,closePopup:t}=this.props,s=e.get(),n=s.peer,a=s.tabs[n],r=(0,o.isFvkcomgroup)(e,n),l=(0,S.isCasperChat)(e,n),d=(0,S.isCommunityChat)(e,n),I=!r&&!d||!e.get().gid,L=(0,A.canCloseChat)(e,n,s.id),w=(0,N.isClosedChat)(a),E=s.isChatTypeEditAllowed,b=r?c.getLang("mail_im_n_vkcomgroup_members",(0,o.getAliveMembersCount)(a)):c.getLang("mail_im_n_chat_members",(0,o.getAliveMembersCount)(a));return(0,i.jsxs)("section",{className:"ChatSettings",children:[(0,i.jsx)(h.ModalHeader,{onBack:()=>this.go(0),backLabel:0!==this.state.section?c.getLang("global_back"):void 0,onClose:t,closeAriaLabel:c.getLang("global_close"),children:this.getPopupTitle()}),0===this.state.section&&(0,i.jsxs)("div",{className:"ChatSettings__content",children:[(0,i.jsx)(_.ChatSettingsInfo,{peerId:n,store:e,photo:a.photoLarge,grid:a.photoGrid,title:a.name,flags:a.data.flags,isDefaultPhotoOwner:a.isDefaultPhotoOwner,isCasper:l,isDonutChat:a.isDonutChat,meta:b,description:""}),(0,i.jsx)(p.default,{store:e,showMembersSettings:()=>this.go(1),showAttachments:this.onShowAttachments,showInvitationLink:this.showInvitationLink,isInvitationLinkWithHistory:this.state.isInvitationLinkWithHistory,invitationLinks:this.state.invitationLinks,showSettings:()=>this.go(6),notificationSettingsUpdated:this.state.notificationSettingsUpdated,disableUntilUpdated:this.state.disableUntilUpdated,flagsUpdated:this.state.flagsUpdated,onHideStatus:this.onHideStatus,onUpdateNotificationSettings:this.onUpdateNotificationSettings,onUpdateMentionNotificationSettings:this.onUpdateMentionNotificationSettings,afterNotificationSettingsUpdated:this.afterNotificationSettingsUpdated,afterDisableUntilUpdated:this.afterDisableUntilUpdated}),r?null:(0,i.jsx)("div",{className:"ChatSettings__pane",children:(0,i.jsx)(v.default,{store:e,onLeave:this.onLeave,showMembersSettings:()=>this.go(1),membersAdded:this.state.membersAdded,onHideStatus:this.onHideStatus,membersCount:this.state.membersCount})}),I&&(0,i.jsx)("div",{className:"ChatSettings__pane",children:(0,i.jsx)(u.default,{appearance:["link","mobile"],className:"ChatSettings__criticalAction ChatSettings__leave",onClick:this.onLeave,children:r?c.getLang("mail_leave_channel"):c.getLang("mail_settings_leave")})}),L&&!w&&(0,i.jsx)("div",{className:"ChatSettings__pane",children:(0,i.jsx)(u.default,{appearance:["link","mobile"],className:"ChatSettings__criticalAction ChatSettings__close",onClick:this.onChatClose,children:c.getLang("mail_settings_close")})}),L&&w&&a.canRestore&&(0,i.jsx)("div",{className:"ChatSettings__pane",children:(0,i.jsx)(u.default,{appearance:["link","mobile"],className:"ChatSettings__criticalAction ChatSettings__restore",onClick:this.onChatRestore,children:c.getLang("mail_settings_restore")})})]}),1===this.state.section&&(0,i.jsx)(C.default,{store:e,afterSave:this.afterMembersAdded}),6===this.state.section&&(0,i.jsx)(f.ChatSettingsOptions,{isChatTypeEditAllowed:E,flags:a.data.flags,isCasperChatTab:l,isCommunityChat:d,allowedUpdateFlags:a.allowedUpdateFlags,back:()=>this.go(0),onSave:this.onUpdateFlags,afterSave:this.afterFlagsUpdated}),2===this.state.section&&(0,i.jsx)(g.default,{store:e,onReset:()=>this.go(3),onLinkHistoryOptionToggle:this.onLinkHistoryOptionToggle,reseted:this.state.invitationLinksReseted,isInvitationLinkWithHistory:this.state.isInvitationLinkWithHistory,invitationLinks:this.state.invitationLinks}),3===this.state.section&&(0,i.jsx)(m.default,{onConfirm:this.onResetLink,onCancel:()=>this.go(2)})]})}constructor(e){super(e),this.showInvitationLink=()=>{const{store:e}=this.props,t=(0,d.unpackStore)(e),s=t.peer;return this.setState({invitationLoading:!0}),(0,r.getInviteLink)(s-2e9,t).then((([e])=>{this.setState({section:2,invitationLoading:!1,invitationLinks:e})}))},this.onUpdateNotificationSettings=(e,t)=>{const{store:s,parentMutations:i}=this.props,n=s.get().peer;return s.set(r.toggleMutePeer.bind(null,n,e,t)).then(i().updateState.bind(null,n))},this.onUpdateMentionNotificationSettings=e=>{const{store:t,parentMutations:s}=this.props,i=t.get().peer;return t.set(r.toggleMuteMentionsPeer.bind(null,i,e)).then(s().updateState.bind(null,i))},this.onUpdateFlags=e=>{const{store:t}=this.props,s=t.get(),i=s.peer,n=s.hasOwnProperty("onUpdateFlags")?s.onUpdateFlags.bind(null,i,e):e=>Promise.resolve(e);return(0,r.updateFlags)(i,e,s).then(n)},this.afterFlagsUpdated=()=>{this.go(0,(()=>this.setBlinkStatus({flagsUpdated:!0})))},this.afterMembersAdded=e=>{this.go(0,(()=>this.setBlinkStatus({membersAdded:!0,membersCount:e})))},this.afterNotificationSettingsUpdated=()=>{this.setBlinkStatus({notificationSettingsUpdated:!0})},this.afterDisableUntilUpdated=()=>{this.setBlinkStatus({disableUntilUpdated:!0})},this.setBlinkStatus=e=>{this.timers.push(setTimeout((()=>this.setState(e)),300))},this.onHideStatus=()=>{this.setState({membersAdded:!1,flagsUpdated:!1,notificationSettingsUpdated:!1,disableUntilUpdated:!1})},this.onLeave=()=>{const{store:e,closePopup:t}=this.props,s=e.get().peer,i=(0,o.isFvkcomgroup)(e,s),n=(0,I.showFastBox)({title:i?c.getLang("mail_leave_channel"):c.getLang("mail_chat_leave_title")},i?c.getLang("mail_vkcomgroup_leave_confirm"):c.getLang("mail_chat_leave_confirm"),i?c.getLang("mail_leave_channel"):c.getLang("mail_leave_chat"),(function(){e.set(r.unpinMessageOptimistic.bind(null,s)),e.set(r.leaveChat.bind(null,s)),n.hide(),t(),e.get().longpoll.push([(0,l.resetPeer)()])}),c.getLang("global_cancel"),(function(){n.hide()}))},this.onChatClose=()=>{const{store:e,closePopup:t}=this.props,{peer:s}=e.get(),i=(0,S.getTab)(e,s).data.flags,n=i&A.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE?i&~A.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE:i|A.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE,a=(0,I.showFastBox)({title:c.getLang("global_warning")},c.getLang("mail_chat_close_confirm"),c.getLang("mail_close_chat"),(()=>{this.onUpdateFlags(n).then((()=>{a.hide(),t(),e.get().longpoll.push([(0,l.resetPeer)()])}))}),c.getLang("global_cancel"),(function(){a.hide()}))},this.onChatRestore=()=>{const{store:e,closePopup:t}=this.props,{peer:s}=e.get(),i=(0,S.getTab)(e,s).data.flags,n=i&A.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE?i&~A.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE:i|A.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE;this.onUpdateFlags(n).then(t)},this.onResetLink=()=>{const{store:e}=this.props,t=(0,d.unpackStore)(e),s=t.peer;return(0,r.resetInviteLink)(s,t).then((([e])=>{this.setState({invitationLinksReseted:!0,invitationLinks:e})}))},this.onShowAttachments=()=>{const e=(0,L.getPeer)(this.props.store);this.props.closePopup(),(0,w.partConfigEnabled)("me_fc_attaches_new_modal")?this.props.convoAttaches.show(e):(0,a.showWiki)({w:"history"+(0,o.convertPeerToUrl)(e)+"_photo"},null,{})},this.onLinkHistoryOptionToggle=()=>{const e=(0,L.getPeer)(this.props.store);this.setState((e=>({isInvitationLinkWithHistory:!e.isInvitationLinkWithHistory})),(()=>{this.props.updateHistoryLinkState(e,this.state.isInvitationLinkWithHistory)}))},this.state={section:0,invitationLinks:null,invitationLinksReseted:!1,isInvitationLinkWithHistory:this.props.isLinkWithHistorySelected,membersAdded:!1,flagsUpdated:!1,notificationSettingsUpdated:!1,disableUntilUpdated:!1},this.timers=[]}}},377841:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var i=s(785893),n=s(667294),a=s(29271),o=s(273192),r=s(752654),l=s(568012),c=s(875610),d=s(222009),h=s(149822),u=s(91983),_=s(705758),g=s(47304),m=s(931917),p=s(755320);class v extends n.Component{getMemberRole(e,t){const{storeData:s}=this.props,i=s.peer;return t===s.tabs[i].ownerId?a.getLang("mail_settings_owner"):e[t]?a.getLang("mail_settings_admin"):null}getActions(e){const{store:t,mid:s}=this.props,{id:i,peer:n}=(0,_.unpackStore)(t),o=i===s,r=(0,p.isMarusiaPeer)(s),c=[],h=(0,d.isCommunityChat)(t,n);if(r)return(0,l.canKickUser)(t,s)?[{text:a.getLang("mail_settings_kick"),onClick:this.kick}]:[];if(o)return h&&(0,d.isCommunityInterface)(t)?[]:[{text:a.getLang("mail_leave_chat"),onClick:this.props.onLeave}];if((0,l.canAddAdmin)(t,s)&&c.push({text:e[s]?a.getLang("mail_chat_remove_admin"):a.getLang("mail_settings_appoint_admin"),onClick:this.toggleAdmin}),(0,l.canKickUser)(t,s)&&c.push({text:a.getLang("mail_settings_kick"),onClick:this.kick}),m.Ranges.isGroupId(s)&&!e[s]){const e=(0,l.canSeeAllMessages)(t,t.get().peer,s),i=e?a.getLang("mail_settings_community_mentions_only"):a.getLang("mail_settings_community_full_access");c.push({text:i,onClick:this.changeAccess.bind(this,e)})}return c}render(){const{adminMap:e,storeData:t,mid:s,isMR:c}=this.props,{id:d}=t,h=!!e[d],u=this.getMemberRole(e,s),_=d===s,g=h&&this.getActions(e);return c?(0,i.jsx)(r.default,{text:a.getLang("mail_cancel_invitation"),position:"t",align:"right",children:(0,i.jsx)("span",{onClick:this.cancelMessageRequest,className:"ChatSettingsMembersEdit__kick"})}):(0,i.jsxs)(n.Fragment,{children:[u&&(0,i.jsx)("span",{className:"ChatSettingsMembersEdit__role",children:u}),g&&g.length>0&&(0,i.jsx)(o.default,{position:"b",align:"right",trigger:"hover",marginTop:-8,marginLeft:1,data:this.getActions(e),children:(0,i.jsx)("span",{className:"ChatSettingsMembersEdit__actions"})}),!h&&!_&&(0,l.canKickUser)(t,s)&&(0,i.jsx)(r.default,{text:a.getLang("mail_settings_kick"),position:"t",align:"right",children:(0,i.jsx)("span",{onClick:this.kick,className:"ChatSettingsMembersEdit__kick"})}),!h&&_&&(0,i.jsx)(r.default,{text:a.getLang("mail_leave_chat"),position:"t",align:"right",children:(0,i.jsx)("span",{onClick:this.props.onLeave,className:"ChatSettingsMembersEdit__kick"})})]})}constructor(...e){super(...e),this.toggleAdmin=()=>{const{store:e,mid:t,adminMap:s}=this.props,i=e.get().peer,n=!s[t];e.set(c.toggleAdminOptimisticly.bind(null,i,t,n)),e.set(c.toggleAdmin.bind(null,i,t,n))},this.kick=()=>{const e=this.props.store,t=e.get().peer,s=this.props.mid;e.set((e=>(0,u.kickUserOptimistically)(e,t,s))),e.set((e=>(0,h.kickUserAction)(e,t,s))).catch(g.dummyCatch)},this.cancelMessageRequest=()=>{const e=this.props.store,t=e.get().peer,s=this.props.mid;e.set((e=>(0,h.cancelMessageRequestAction)(e,t,s))).catch(g.dummyCatch)},this.changeAccess=e=>{const t=this.props.store,s=t.get().peer,i=this.props.mid;t.set(c.changeCommunityAccess.bind(null,s,i,!e)).catch(g.dummyCatch)}}}},763258:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var i=s(785893),n=s(667294),a=s(664988),o=s(29271),r=s(682615),l=s(222009),c=s(875610),d=s(205423),h=s(422536),u=s(589897),_=s(282133),g=s(866781),m=s(514986),p=s(731062),v=s(408014);const C=()=>{};class f extends n.Component{resetSearch(e,t){const s=this.props.store.get(),i=(0,l.getTab)(s,s.peer);return(i.customChatMemberSearch?i.customChatMemberSearch(""):(0,c.searchLocalHints)("",this.props.store.get())).then((s=>this.setSearchResults(e,t,"",s)))}componentDidMount(){this.resetSearch()}render(){const e=Object.keys(this.state.selected).length,t="ChatSettingsMembers__entity";return(0,i.jsxs)("div",{className:"ChatSettingsMembers",children:[(0,i.jsx)(h.default,{className:"ChatSettingsMembers__multiSelect",tokens:this.state.selected.map((e=>({text:(0,a.unclean)(this.data[e].name),id:e}))),removeTokenPlaceholder:o.getLang("mail_create_chat_remove_user"),onRemoveToken:this.onRemoveToken,placeholder:o.getLang("mail_search_creation"),value:this.state.value,onChange:this.onChange,onSelect:this.onSelect,useInfiniteScroll:!1,hasMore:!1,virtualized:!1,loadMore:()=>{},notFoundText:o.getLang("mail_not_found"),autoFocus:!0,isSearching:this.isSearching,badge:this.getBadge(),children:this.state.found.map((e=>(0,i.jsx)("div",{className:(0,r.classNames)(t,{[`${t}--selected`]:this.selected[e]}),"data-id":e,children:(0,i.jsx)(d.default,{size:"34",title:this.data[e].name,photo:this.data[e].photo})},e)))}),(0,i.jsxs)(_.default,{alignment:"right",className:"ChatSettingsMembers__submitArea",children:[(0,i.jsx)(g.default,{checked:this.state.isShowHistoryChecked,onChange:this.onShowHistoryToggle,className:"ChatSettingsMembers__showHistory",children:o.getLang("mail_im_chat_add_members_show_history")}),(0,i.jsx)(u.default,{size:"m",disabled:0===e,onClick:this.onAddPeople,loading:this.state.loading,className:"ChatSettingsMembers__confirm",children:e<2?o.getLang("mail_append_chat"):o.getLang("mail_im_create_chat_with")})]})]})}constructor(e){super(e),this.onChange=e=>{const t=this.props.store.get(),s=e.target.value,i=(0,l.getTab)(t,t.peer);i.customChatMemberSearch?i.customChatMemberSearch(s).then((e=>(this.setSearchResults({},!1,s,e),s&&i.customChatMemberServerSearch?(this.isSearching=!0,i.customChatMemberServerSearch(s).catch((e=>{if("debounce"!==e)throw e}))):Promise.resolve([])))).then(this.appendSearchResults):(0,c.searchLocalHints)(s,t).then((e=>(this.setSearchResults({},!1,s,e),s?(this.isSearching=!0,this.serverSearch(s,e.map((e=>e.peerId)))):Promise.resolve([])))).then(this.appendSearchResults).catch((()=>{}))},this.serverSearch=(0,p.debouncedPromise)(((e,t)=>{const s=this.props.store;return(0,c.searchHints)(e,t,"friends",s.get())}),300),this.onRemoveToken=e=>new Promise((t=>{const s=this.state.selected.filter((t=>t!==e));this.selected=s.reduce(((e,t)=>(e[t]=!0,e)),{}),this.setState({selected:s},t)})),this.onSelect=e=>new Promise((t=>{const s=this.selected[e]?this.state.selected.filter((t=>t!==e)):[].concat(this.state.selected,e).filter(((e,t,s)=>s.indexOf(e)===t));this.selected=s.reduce(((e,t)=>(e[t]=!0,e)),{}),this.resetSearch({selected:s,value:""},t)})),this.onShowHistoryToggle=()=>{this.setState({isShowHistoryChecked:!this.state.isShowHistoryChecked})},this.onAddPeople=()=>{const e=this.props.store,t=e.get().peer,s=this.state.selected.map((e=>parseInt(e))),i=this.state.isShowHistoryChecked;this.setState({loading:!0}),e.set(c.addNewMember.bind(null,t,s,i)).then((()=>e.set(c.getChatDetails.bind(null,t)).then((()=>{this.selected={},this.resetSearch({selected:[],loading:!1},(()=>{this.props.afterSave(s.length)}))})))).catch((e=>{this.selected={},this.resetSearch({selected:[],loading:!1}),(0,m.showFastBox)(o.getLang("global_error"),e)}))},this.setSearchResults=(e,t,s,i)=>{const n=this.props.store.get(),a=(0,l.getTab)(n,n.peer);let o=[];i.forEach((e=>{this.data[e.peerId]||(this.data[e.peerId]=e),-1===a.memberIds.indexOf(e.peerId)&&o.push(e.peerId)})),this.setState(Object.assign({},e,{found:o,value:s}),t||C)},this.appendSearchResults=e=>{const t=this.props.store.get(),s=(0,l.getTab)(t,t.peer);let i=this.state.found;e.forEach((e=>{this.data[e.peerId]||(this.data[e.peerId]=e),-1===s.memberIds.indexOf(e.peerId)&&-1===i.indexOf(e.peerId)&&i.push(e.peerId)})),this.isSearching=!1,this.setState({found:i})},this.getBadge=()=>(0,v.getCurrentTab)(this.props.store).isDonutChat?(0,i.jsx)("div",{className:"BannerInfo ChatSettingsMembers__donutBadge",children:o.getLang("mail_dons_only_search")}):null,this.state={selected:[],value:"",loading:!1,found:[],isShowHistoryChecked:!0},this.data={},this.selected={}}}},554254:(e,t,s)=>{"use strict";s.d(t,{ChatSettingsOptions:()=>L});var i=s(785893),n=s(667294),a=s(29271),o=s(642144),r=s(512334),l=s(627240),c=s(589897),d=s(282133),h=s(177878),u=s(883760),_=s(366582),g=s(469531),m=s(957228),p=s(287865),v=s(62340),C=s(776076),f=s(691324),A=s(382193),I=s(535505),S=s(568012);class L extends n.Component{render(){const{flags:e}=this.state,{isChatTypeEditAllowed:t,isCasperChatTab:s,isCommunityChat:n}=this.props,L=(e,t,s=0)=>[!n&&{value:e,label:a.getLang("mail_settings_only_owner")},{value:t,label:n?a.getLang("mail_settings_only_admins"):a.getLang("mail_settings_owner_and_admins")},{value:s,label:a.getLang("mail_settings_all_members")}].filter(Boolean);return(0,i.jsxs)("div",{className:"ChatSettingsOptions",children:[this.props.isChatCreation&&(0,i.jsx)(u.default,{flags:e,onSelectPreset:this.setFlags}),(0,i.jsxs)(o.default,{children:[(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE))&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE,options:L(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(_.Icon28AddCircleFillBlue,{})}),a.getLang("mail_settings_can_invite")]}),(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE))&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE,options:L(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(g.Icon28EditCircleFillBlue,{})}),a.getLang("mail_settings_can_edit_info")]}),(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN))&&!s&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN,options:L(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(m.Icon28PinCircleFillBlue,{})}),a.getLang("mail_settings_can_pin")]}),(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION))&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION,options:L(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(p.Icon28MentionCircleFillBlue,{})}),a.getLang("mail_settings_can_use_mass_mention")]}),(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK))&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK,options:L(0,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK,S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(v.Icon28ChainCircleFillBlue,{})}),a.getLang("mail_settings_can_see_invitation_link")]}),(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL))&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL,options:L(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(C.Icon28PhoneCircleFillGreen,{})}),a.getLang("mail_settings_can_start_group_call")]}),this.isAllowed(S.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS)&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS,options:[{value:0,label:a.getLang("mail_settings_only_owner")},{value:S.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS,label:a.getLang("mail_settings_owner_and_admins")}],value:e&S.MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(f.Icon28UserCircleFillBlue,{})}),a.getLang("mail_settings_admins_can_add_admins")]}),(this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE)||this.isAllowed(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE))&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__longselect",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE+S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE,options:L(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE,S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE),value:e&(S.MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_STYLE|S.MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_STYLE)}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(A.Icon28PaletteFillBlue,{})}),a.getLang("mail_settings_can_change_style")]}),this.isAllowed(S.MAIL_CHAT_FLAG_SERVICE_CHAT)&&t&&(0,i.jsxs)(r.default,{selectable:!1,aside:(0,i.jsx)(l.default,{className:"ChatSettingsOptions__select",onChange:this.onChange,name:S.MAIL_CHAT_FLAG_SERVICE_CHAT,options:[{value:0,label:a.getLang("mail_settings_service_simple")},{value:S.MAIL_CHAT_FLAG_SERVICE_CHAT,label:a.getLang("mail_settings_service_service")}],value:e&S.MAIL_CHAT_FLAG_SERVICE_CHAT}),children:[(0,i.jsx)(h.ChatSettingsRoundedIcon,{children:(0,i.jsx)(I.Icon28GearCircleFillGray,{})}),a.getLang("mail_settings_service")]})]}),(0,i.jsxs)(d.default,{alignment:"right",className:"ChatSettingsOptions__submitArena",children:[(0,i.jsx)(c.default,{size:"m",appearance:"tertiary",onClick:this.onCancel,children:a.getLang("global_cancel")}),(0,i.jsx)(c.default,{size:"m",onClick:this.onSave,loading:this.state.loading,children:a.getLang("global_save")})]})]})}constructor(e){super(e),this.onChange=e=>{const t=e.name,{value:s}=e.selected;this.setState((e=>({flags:s?e.flags&~t^s:e.flags&~t})))},this.onCancel=()=>{this.setState({flags:this.props.flags}),this.props.back()},this.onSave=()=>{this.state.loading||(this.setState({loading:!0}),this.props.onSave(this.state.flags).then((()=>{this.setState({loading:!1},this.props.afterSave)})).catch((e=>{this.setState({loading:!1,flags:this.props.flags})})))},this.setFlags=e=>{this.setState({flags:e})},this.isAllowed=e=>{const t=this.props.allowedUpdateFlags;return!t||t.includes(e)},this.state={flags:e.flags,loading:!1}}}},883760:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var i=s(785893),n=s(667294),a=s(45697),o=s.n(a),r=s(682615),l=s(29271),c=s(9752),d=s(735347),h=s(839123);const u=149946368,_=33554432,g={regular:(0,i.jsx)(c.Icon56UsersOutline,{}),closed:(0,i.jsx)(d.Icon56LockOutline,{}),custom:(0,i.jsx)(h.Icon56SettingsOutline,{})};class m extends n.Component{componentWillReceiveProps(e){![_,u].includes(e.flags)&&this.setState({customFlags:e.flags,selectedPresetId:3})}render(){const e=this.state.customFlags?this.state.customFlags:this.props.flags,t=this.state.selectedPresetId,s="ChatSettingsPresetPanel__preset",n=[{id:1,title:l.getLang("mail_chat_creation_preset_regular"),icon:"regular",flags:_},{id:2,title:l.getLang("mail_chat_creation_preset_closed"),icon:"closed",flags:u},{id:3,title:l.getLang("mail_chat_creation_preset_custom"),icon:"custom",flags:e}];return(0,i.jsx)("div",{className:"ChatSettingsPresetPanel",children:n.map(((e,n)=>(0,i.jsxs)("div",{className:(0,r.classNames)(s,{[`${s}--selected`]:e.id===t}),onClick:this.selectPreset.bind(null,e.flags,e.id),children:[(0,i.jsx)("div",{className:"ChatSettingsPresetPanel__presetIcon",children:g[e.icon]}),(0,i.jsx)("div",{className:"ChatSettingsPresetPanel__presetTitle",children:e.title})]},n)))})}constructor(e){super(e),this.selectPreset=(e,t)=>{const s=3===this.state.selectedPresetId&&null!==this.state.customFlags;this.setState((e=>({selectedPresetId:t,customFlags:s?this.props.flags:e.customFlags}))),this.props.onSelectPreset(e)};const t=this.props.flags===u?2:this.props.flags===_?1:3;this.state={customFlags:3===t?this.props.flags:null,selectedPresetId:t}}}m.propTypes={flags:o().number,onSelectPreset:o().func}},778555:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var i=s(785893),n=s(667294),a=s(29271),o=s(589897),r=s(282133);class l extends n.Component{render(){return(0,i.jsxs)("div",{className:"ChatSettingsResetInvitationLink",children:[(0,i.jsx)("div",{className:"ChatSettingsResetInvitationLink__text",dangerouslySetInnerHTML:{__html:a.getLang("mail_chat_reset_link_warning")}}),(0,i.jsxs)(r.default,{alignment:"right",children:[(0,i.jsx)(o.default,{size:"m",appearance:"tertiary",onClick:this.props.onCancel,children:a.getLang("global_cancel")}),(0,i.jsx)(o.default,{size:"m",onClick:this.onConfirm,loading:this.state.loading,children:a.getLang("mail_chat_reset_link_confirm")})]})]})}constructor(e){super(e),this.onConfirm=()=>{this.state.loading||(this.setState({loading:!0}),this.props.onConfirm().then((()=>{this.setState({loading:!1}),this.props.onCancel()})).catch((()=>this.setState({loading:!1}))))},this.state={}}}},349350:(e,t,s)=>{"use strict";s.d(t,{mount:()=>w});var i=s(785893),n=s(15080),a=s(795558),o=s(584356),r=(s(667294),s(973935)),l=s(533425),c=s(875610),d=s(222009),h=s(552666),u=s(502478),_=s(514986),g=s(701567),m=s(931917),p=s(869048);let v,C;function f(e,t){const s=ls.get("im_chats_no_invite_link_history")||[],i=m.Ranges.convertChatPeerIdToChatId(e),n=t?s.filter((e=>e!==i)):s.concat(i);ls.set("im_chats_no_invite_link_history",n)}function A(e,t){const s=L(),n=function(e){const t=(0,u.getPeer)(e),s=m.Ranges.convertChatPeerIdToChatId(t);return!(ls.get("im_chats_no_invite_link_history")||[]).includes(s)}(e);s&&r.render((0,i.jsx)(p.AppRootProvider,{children:(0,i.jsx)(l.ChatSettings,{store:e,closePopup:I.bind(null,e),updatePopup:S,isLinkWithHistorySelected:n,updateHistoryLinkState:f,parentMutations:t,convoAttaches:C})}),s)}function I(e){v&&v.hide();const t=e.get();t.hasOwnProperty("onClose")&&t.onClose()}function S(){v&&v.updateBoxCoords()}function L(){return document.querySelector("#ChatSettings")}function N(e){const t=document.querySelector("#box_layer_wrap"),s=document.querySelector("#box_loader"),i=(0,a.isVisible)(t);return{unmount(){const t=L();t&&r.unmountComponentAtNode(t),(0,n.destroyModule)(e)},showLoader(){(0,o.boxRefreshCoords)(s),(0,a.show)(s),i||(0,a.show)(t)},hideLoader(){(0,a.hide)(s),i||(0,a.hide)(t)}}}function w(e,t,s){const{bindMutations:i}=(0,n.createMutations)(N),a=t.get(),o=(0,n.createModule)({handlers:(e,t)=>{}}),r=a.peer,l=i(o);C=new g.ConvoAttaches(t,s);const u=function(e,t){t.get().peer===r?function(e,t){const s=(0,d.getTab)(e,e.get().peer);s&&s.data&&(0,d.isChatActive)(s)?A(e,t):I(e)}(t,s):e.unmount()}.bind(null,l),m={hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:560,onShow(){A(t,s),t.subscribe(u),requestAnimationFrame((()=>v.updateBoxCoords()))},onHideAttempt:()=>(t.unsubscribe(u),l.unmount(),!0)};return l.showLoader(),t.set(c.getChatDetails.bind(null,r)).then((e=>{l.hideLoader();const t=(0,h.unpackStore)(e).peer;t&&t===r?v=new _.MessageBox(m).content('<div id="ChatSettings" class="ChatSettingsWrapper"></div>').show():l.unmount()})).catch((()=>{l.hideLoader(),l.unmount()})),l}}}]);try{stManager.done("dist/902866c362380432bb8fab2a5e67d693.133bdb8828ba4d165e67.js")}catch(e){}