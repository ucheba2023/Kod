(()=>{"use strict";var e,t,r,o,n,i,s={658306:(e,t,r)=>{r.d(t,{friendsRecommLogAddVisited:()=>s,friendsRecommLogCheckVisited:()=>a,friendsRecommLogCleanVisited:()=>c});var o,n=r(531730),i=r(480912);function s(e,t,r){const o=d();o[e]={ref:t,trackCode:r,date:Date.now()},n.multiAccountLs.set("friends_recomm_visited",o),window.setTimeout((()=>c(e)),i.TIME_TO_SAVE_FRIENDS_VISITED)}function a(e){return d()[e]}function c(e){if(e){const t=d();delete t[e],n.multiAccountLs.set("friends_recomm_visited",t)}else n.multiAccountLs.remove("friends_recomm_visited")}function d(){const e=n.multiAccountLs.get("friends_recomm_visited")||{};return Object.keys(e).forEach((t=>{var r;Date.now()-(null==(r=e[t])?void 0:r.date)>i.TIME_TO_SAVE_FRIENDS_VISITED&&(delete e[t],n.multiAccountLs.set("friends_recomm_visited",e))})),Object.keys(e).length||n.multiAccountLs.remove("friends_recomm_visited"),e}!function(e){e.friends_recomm_visited="friends_recomm_visited"}(o||(o={}))},480912:(e,t,r)=>{var o;r.d(t,{FRIENDS_RECOM_VISITED:()=>n,LoadingStage:()=>c,SecondaryEventType:()=>a,TIME_TO_SAVE_FRIENDS_VISITED:()=>i,USER_REC_ASYNC_STATE_CHANGES:()=>s,UsersRecomStatisticEvents:()=>o}),function(e){e.ShowUserRec="show_user_rec"}(o||(o={}));const n="friends_recomm_visited",i=36e5,s="user_rec_async_state_changes";var a,c;!function(e){e.ViewSkeleton="view_skeleton",e.ViewError="view_error",e.ViewLoadedBlock="view_loaded_block",e.ViewBlockAfterSkeleton="view_block_after_skeleton",e.ViewBlockAfterError="view_block_after_error",e.ErrorLoadingData="error_loading_data",e.EmptyLoadingData="empty_loading_data",e.SuccessLoadingData="success_loading_data"}(a||(a={})),function(e){e.NotDefined="not_defined",e.BeforeView="before_view",e.AfterView="after_view"}(c||(c={}))},364311:(e,t,r)=>{var o,n,i,s=r(283452),a=r(814896),c=r(698010),d=r(839470);(null==(n=window.vk)||null==(o=n.pe)?void 0:o.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(r.p=window.vk.stDomain+"/dist/");const l=({payload:{target:e,data:t}})=>{if(!e)throw new Error("FriendsGroupsBlock: Missing target");const{friendId:r}=t,o=e,n=e.querySelector(".friends_recomm_gallery");if(!((0,a.isFeedBlockWithType)(o,"user_rec")||(0,a.isFeedBlockWithType)(o,"celeb_rec")||(0,a.isFeedBlockWithType)(o,"authors_rec"))||!n){const e=new Error("RecommendedFriendsBlock: Missing gallery");throw console.error(e,{block:o,gallery:n}),e}let i={};(0,d.partConfigEnabled)("friends_recommendations_old_fix_show_user_rec")||(i.checkViewItem=function(){return n.visible}),r&&(i.friendId=Number(r));const s=c.RecommendedFriends.initBlock({block:o,gallery:n,galleryOpts:i});(0,a.afterFeedCompleteDestruction)((function(){s.destroy()}))};try{window.stManager.done(window.jsc("web/recommended_friends_block.js")),(0,s.tq)().setStartupHandler("RecommendedFriendsBlock/init",l)}catch(e){}},814896:(e,t,r)=>{r.d(t,{afterFeedCompleteDestruction:()=>i,isFeedBlockWithType:()=>n});var o=r(795558);function n(e,t){return e instanceof HTMLElement&&(0,o.matchesSelector)(e,`[data-feed-block-type="${t}"]`)}function i(e){var t;null==(t=window.cur.destroy)||t.push((function(){e()}))}},698010:(e,t,r)=>{r.d(t,{RecommendedFriends:()=>b});var o=r(790500),n=r(795558),i=r(459474),s=r(363444),a=r(514986),c=r(29271),d=r(725296),l=r(953908),u=r(498275),f=r(658306),m=r(664988),_=r(854099),g=r(234873),h=r(584356),p=r(379610),w=r(839470);const y="al_friends.php",v=e=>console.error(e);class b{destroy(){var e;null==(e=this.galleryInstance)||e.destroy()}static initBlock({block:e,gallery:t,galleryOpts:r}){const o=new b(e,t,r);return o.initGallery(),o}initGallery(){const e=this.gallery.dataset.from||"user_rec",t=this.gallery.dataset.code,r=this.gallery.dataset.next,o={scrollY:!1,onViewItem:(t,r)=>{var o,n;!(0,w.partConfigEnabled)("friends_recommendations_old_fix_show_user_rec")&&(null==(n=this.galleryOpts)||null==(o=n.checkViewItem)?void 0:o.call(n,t))||this.onViewFriend(t,r,e)},shouldCheckGalleryViewed:(0,w.partConfigEnabled)("friends_recommendations_old_fix_show_user_rec")};r&&(o.onLoadMore=()=>{s.ajax.post(y,{act:"a_recomm_friends_gallery",next:(0,n.domData)(this.gallery,"next"),track_code:t,friend_id:this.galleryOpts.friendId||0,ref:(0,u.getRef)()},{onDone:(e,t)=>{var r;let o=[];e&&(o=(0,n.domChildren)((0,n.ce)("div",{innerHTML:e}))),null==(r=(0,i.uiGetGallery)(this.gallery))||r.addMore(o,!t),(0,n.domData)(this.gallery,"next",t||null)}})}),this.galleryInstance=new i.UIGallery(this.gallery,o),this.initUserEventHandlers()}hideBlock(e,t){const r=(0,n.domData)(this.gallery,"code")||"";this.destroy();const o=["hide_block",(0,m.vkNow)(),window.cur.module,r].join("|");return s.ajax.post(y,{act:"a_recomm_logs",logs:[o]}),(0,n.re)(this.block),t&&(0,l.cancelEvent)(t)}hideRecommBlock(e,t,r){const o=(0,n.domData)(this.gallery,"code")||"",i=window.cur.module;return this.destroy(),s.ajax.post("al_friends.php",{act:"a_hide_recomm_block",hash:r,track_code:o,ref:i}),(0,n.re)(this.block),t&&(0,l.cancelEvent)(t)}closeFriend(e,t,r){const o=e.closest(".friend_recomm_card"),{uid:f,code:m}=o.dataset;if(!f)return;const _=+f,g=(0,u.getRef)(),h=m||this.gallery.dataset.code||"";return s.ajax.post(y,{act:"hide_possible",mid:_,ref:g,track_code:h,hash:r},{onDone:()=>{const t=(0,i.uiGetGallery)((0,n.gpeByClass)("ui_gallery",e));if(t){const r=(0,n.gpeByClass)("ui_gallery_item",e);t.removeItem(r)}},onFail:e=>{if(e)return(0,a.showFastBox)(c.getLang("global_error"),e),!0},showProgress:()=>(0,d.lockButton)(e),hideProgress:()=>(0,d.unlockButton)(e)}),(0,l.cancelEvent)(t),!1}onViewFriend(e,t,r){if(e.viewed||!(0,n.hasClass)(e,"ui_gallery_item"))return;const o=+(0,n.domData)(e,"uid"),i=(0,u.getRef)(),s=(0,u.friendsRecommGetTrackCode)(e);(0,u.friendsRecommLogSave)(["show_user_rec",o,Date.now(),t,i,r,s]),e.viewed=!0}initUserEventHandlers(){(0,o.default)(this.block,'[data-section-ref="recommended-friends-page-block-hide"]',"click",(e=>{this.hideBlock(e.delegateTarget,e),this.destroy()})),(0,o.default)(this.block,'[data-section-ref="recommended-celebs-page-block-hide"]',"click",(e=>{const t=e.delegateTarget.getAttribute("data-action-hide-block-hash");this.hideRecommBlock(e.delegateTarget,e,t||""),this.destroy()})),(0,o.default)(this.gallery,'[data-gallery-section-ref="ui-gallery-card-item-link"]',"click",(e=>{this.clickOnFriend(e.delegateTarget)})),(0,o.default)(this.gallery,'[data-gallery-section-ref="ui-gallery-card-primary-button"]',"click",(e=>{const t=e.delegateTarget.getAttribute("data-action-subscribe-hash");t||v(new Error("RecommendedGroups: subscribe missing hash")),this.toggleSubscribe(e.delegateTarget,e,t||"")})),(0,o.default)(this.gallery,'[data-gallery-section-ref="ui-gallery-card-close"]',"click",(e=>{const t=e.delegateTarget.getAttribute("data-action-decline-hash");t||v(new Error("RecommendedFriends: decline missing hash")),this.closeFriend(e.delegateTarget,e,t||"")}))}toggleSubscribe(e,t,r){const o=(0,n.gpeByClass)("friend_recomm_card",e),i=o&&+(0,n.domData)(o,"uid");if(!i)return;const d=(0,n.gpeByClass)("feed_friends_recomm",o);var f;const m={act:"add",mid:i,hash:r,from:null!=(f=(0,n.domData)(d,"feed-block-type"))?f:"user_rec",ref:(0,u.getRef)(),track_code:(0,u.friendsRecommGetTrackCode)(o),ts:Date.now()},w=(0,u.friendsRecommLogGet)(!0,i);return w.length&&((0,u.friendsRecommLogClear)(i),m.logs=w),s.ajax.post("al_friends.php",m,{onDone:(t,r,i)=>{if(_.FlatButton.setLabel(e,t),_.FlatButton.setAppearance(e,_.FlatButtonAppearance.SECONDARY),_.FlatButton.setDisabled(e,!0),_.FlatButton.setBefore(e,null),(0,n.addClass)(o,"friend_recomm_card_accepted"),(0,n.re)((0,n.geByClass1)("wall_card_text_special",o)),(0,g.isFriendAddResultRequestSent)(r)&&r.friend_request_add_sent_message_nudge){const e=t;(0,h.showDoneBoxFull)("",{},{tooltipHandler:(s=r.friend_request_entrypoint,(e,{hide:t})=>{(0,l.addEvent)(e.querySelector('[data-section-ref="friend_request_notification_send_message"]'),"click",(e=>{if(!(e.currentTarget instanceof HTMLElement))return;var r;const o=parseInt(null!=(r=e.currentTarget.getAttribute("data-message-user-id"))?r:"");if(!o||(0,l.checkEvent)(e))return!0;t(),(0,p.showWriteMessageBox)(e,o,{params:{box_custom_entrypoint:s}})}))}),text:r.friend_request_add_sent_message_nudge,title:e})}else i&&(0,h.showDoneBox)(i);var s},onFail:e=>{if(w&&(0,u.friendsRecommLogOnFail)(w),e)return(0,a.showFastBox)(c.getLang("global_error"),e),!0},showProgress:()=>_.FlatButton.lock(e),hideProgress:()=>_.FlatButton.unlock(e)}),(0,l.cancelEvent)(t),!1}clickOnFriend(e){let t;if(e.classList.contains("ui_gallery_item"))t=e;else{const r=e.closest(".ui_gallery_item");if(!r)return;t=r}const{uid:r}=t.dataset;if(!r)return;const o=+r,n=(0,u.getRef)(),i=(0,u.friendsRecommGetTrackCode)(t);(0,f.friendsRecommLogAddVisited)(o,n,i),(0,u.friendsRecommLogSave)(["open_user",o,Date.now(),n,i])}constructor(e,t,r={}){this.block=e,this.gallery=t,this.galleryOpts=r}}},498275:(e,t,r)=>{r.d(t,{friendsRecommGetTrackCode:()=>g,friendsRecommLogClear:()=>u,friendsRecommLogGet:()=>l,friendsRecommLogOnFail:()=>_,friendsRecommLogSave:()=>d,friendsRecommLogSend:()=>f,getRef:()=>c,onViewFriendRecomm:()=>h});var o,n=r(531730),i=r(82161),s=r(363444),a=r(795558);!function(e){e.friends_recomm="friends_recomm"}(o||(o={}));const c=()=>{var e;return"feed"===window.cur.module&&window.Feed?null==(e=window.Feed)?void 0:e.getModuleRef():window.cur.module};function d(e,t=!1){const r=l();r.push(e),n.multiAccountLs.set("friends_recomm",r),f(t)}function l(e=!1,t,r=!1){const o=n.multiAccountLs.get("friends_recomm");let s=Array.isArray(o)?o:[];return t&&(s=s.filter((e=>(r?e[1]!==t:e[1]===t)&&(0,i.inArray)(e[0],["show_user_rec","open_user"])))),e&&(s=s.map((e=>e.join("|")))),s}function u(e){if(e){const t=l(!1,e,!0);t.length?n.multiAccountLs.set("friends_recomm",t):n.multiAccountLs.remove("friends_recomm")}else n.multiAccountLs.remove("friends_recomm")}function f(e=!1){var t,r,o;!(null==(t=window.cur)?void 0:t.friendsRecommLogIdle)&&(null==(o=window)||null==(r=o.curNotifier)?void 0:r.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=()=>{clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(f)),clearTimeout(window.cur.friendsRecommLog),e?m():window.cur.friendsRecommLog=window.setTimeout(m,1e4)}function m(){if(window.cur.friendsRecommProcess)return;const e=l(!0);e.length&&(window.cur.friendsRecommProcess=!0,u(),s.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:()=>{delete window.cur.friendsRecommProcess},onFail:()=>(_(e),delete window.cur.friendsRecommProcess,!0)}))}function _(e){let t=l();t=e.map((e=>e.split("|"))).concat(t),n.multiAccountLs.set("friends_recomm",t)}function g(e){let t,r=(0,a.domData)(e,"code");return r||(t=(0,a.gpeByClass)("ui_gallery",e),r=(0,a.domData)(t,"code")),r||""}function h(e,t,r){if(e.viewed||!(0,a.hasClass)(e,"ui_gallery_item"))return;const o=+(0,a.domData)(e,"uid"),n=c(),i=g(e);d(["show_user_rec",o,Date.now(),t,n,r,i]),e.viewed=!0}},234873:(e,t,r)=>{r.d(t,{isFriendAddResultRequestSent:()=>i});var o,n=r(664988);!function(e){e[e.DELETED_USER=-5]="DELETED_USER",e[e.BLACKLISTED=-4]="BLACKLISTED",e[e.FRIENDS_COUNT_EXCEEDED=-3]="FRIENDS_COUNT_EXCEEDED",e[e.FLOOD_CONTROL=-2]="FLOOD_CONTROL",e[e.SERVER_ERROR=-1]="SERVER_ERROR",e[e.NOT_FRIENDS=0]="NOT_FRIENDS",e[e.REQUEST_FROM_USER=1]="REQUEST_FROM_USER",e[e.REQUEST_TO_USER=2]="REQUEST_TO_USER",e[e.ARE_FRIENDS=3]="ARE_FRIENDS"}(o||(o={}));const i=e=>{if((0,n.isObject)(e)){var t;return 1===(null==(t=e)?void 0:t.result_code)}return!1}},790500:(e,t,r)=>{r.d(t,{default:()=>i});const o=new WeakMap;function n(e,t,r,n){var i,s;if(!e&&!o.has(t))return!1;const a=null!==(i=o.get(t))&&void 0!==i?i:new WeakMap;if(o.set(t,a),!e&&!o.has(t))return!1;const c=null!==(s=a.get(r))&&void 0!==s?s:new Set;a.set(r,c);const d=c.has(n);return e?c.add(n):c.delete(n),d&&e}const i=function e(t,r,o,i,s){if("string"==typeof t&&(t=document.querySelectorAll(t)),"function"!=typeof t.addEventListener){const n=Array.prototype.map.call(t,(t=>e(t,r,o,i,s)));return{destroy(){n.forEach((e=>e.destroy()))}}}const a=t,c=Boolean("object"==typeof s?s.capture:s),d=e=>{const t=e.target.closest(r);t&&(e.delegateTarget=t,e.currentTarget.contains(e.delegateTarget)&&i.call(a,e))},l=JSON.stringify({selector:r,type:o,capture:c}),u={destroy(){a.removeEventListener(o,d,s),n(!1,a,i,l)}};return n(!0,a,i,l)||a.addEventListener(o,d,s),u}}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return s[e].call(r.exports,r,r.exports,c),r.exports}c.m=s,c.amdO={},e=[],c.O=(t,r,o,n)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,o,n]=e[l],s=!0,a=0;a<r.length;a++)(!1&n||i>=n)&&Object.keys(c.O).every((e=>c.O[e](r[a])))?r.splice(a--,1):(s=!1,n<i&&(i=n));if(s){e.splice(l--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[r,o,n]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);c.r(n);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(n,i),n},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,r)=>(c.f[r](e,t),t)),[])),c.u=e=>25394===e?"AudioLongtapModal.2932c6e9c6120eff2657.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.3ea04534d06cb6d38e2c.js":96816===e?"web-audio-lyrics-modal.218229d2232b2e3d93fb.js":9375===e?"voice_message_player.e464fba002f2d3244773.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.81e354f9bd61dfd364b5.js":96248===e?"feed-skeleton.add07457f9a9b141ed5a.js":59240===e?"performance-stats.4b38c82ee7bdbd67bf4a.js":38288===e?"lottie.5e4758c39f106eab733a.js":void 0,c.miniCssF=e=>e+"."+{25394:"6af57e1b0cf5a74f9a87",57468:"35be3dfa1e90e3cdd0a1",75980:"5bbee2c9f3e189193a73"}[e]+".css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},c.l=(e,t,r,n)=>{if(o[e])o[e].push(t);else{var i,s;if(void 0!==r)for(var a=document.getElementsByTagName("script"),d=0;d<a.length;d++){var l=a[d];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+r){i=l;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.setAttribute("data-webpack","vk:"+r),i.src=e),o[e]=[t];var u=(t,r)=>{i.onerror=i.onload=null,clearTimeout(f);var n=o[e];if(delete o[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),s&&document.head.appendChild(i)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="/dist/",n=e=>new Promise(((t,r)=>{var o=c.miniCssF(e),n=c.p+o;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=(s=r[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){var s;if((n=(s=i[o]).getAttribute("data-href"))===e||n===t)return s}})(o,n))return t();((e,t,r,o)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=i=>{if(n.onerror=n.onload=null,"load"===i.type)r();else{var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,n.parentNode.removeChild(n),o(c)}},n.href=t,document.head.appendChild(n)})(e,n,t,r)})),i={28823:0},c.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{25394:1,57468:1,75980:1}[e]&&t.push(i[e]=n(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={28823:0};c.f.j=(t,r)=>{var o=c.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else if(75980!=t){var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var i=c.p+c.u(t),s=new Error;c.l(i,(r=>{if(c.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,o[1](s)}}),"chunk-"+t,t)}else e[t]=0},c.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[i,s,a]=r,d=0;if(i.some((t=>0!==e[t]))){for(o in s)c.o(s,o)&&(c.m[o]=s[o]);if(a)var l=a(c)}for(t&&t(r);d<i.length;d++)n=i[d],c.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return c.O(l)},r=self.webpackChunkvk=self.webpackChunkvk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var d=c.O(void 0,[75514,98066,56990,24509,76400,40885,68592],(()=>c(364311)));d=c.O(d)})();