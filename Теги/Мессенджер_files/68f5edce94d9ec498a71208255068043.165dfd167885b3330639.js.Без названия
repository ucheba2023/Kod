"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[98827],{834585:(e,_,i)=>{i.d(_,{Icon16ArchiveOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon16ArchiveOutline","archive_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="archive_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M6 8.75A.75.75 0 0 1 6.75 8h2.5a.75.75 0 1 1 0 1.5h-2.5A.75.75 0 0 1 6 8.75Z" clip-rule="evenodd" /><path fill="currentColor" fill-rule="evenodd" d="M11.25 14.5A2.75 2.75 0 0 0 14 11.75V6.383a1.6 1.6 0 0 0 .826-.757 1.601 1.601 0 0 0 .168-.598A2.14 2.14 0 0 0 15 4.84v-.28c0-.245 0-.51-.019-.739a2.518 2.518 0 0 0-.253-.956 2.5 2.5 0 0 0-1.093-1.093 2.519 2.519 0 0 0-.956-.253 9.49 9.49 0 0 0-.739-.019H4.06c-.244 0-.509 0-.738.019-.26.02-.602.073-.956.253a2.5 2.5 0 0 0-1.092 1.092c-.18.353-.233.696-.254.955-.02.23-.02.494-.02.738v.283a2.276 2.276 0 0 0 .006.186c.01.11.037.342.168.6A1.6 1.6 0 0 0 2 6.382v5.367a2.75 2.75 0 0 0 2.75 2.75h6.5ZM2.75 5h10.59c.118 0 .16-.033.16-.16V4.6c0-.56 0-.84-.109-1.054a1 1 0 0 0-.437-.437C12.74 3 12.46 3 11.9 3H4.1c-.56 0-.84 0-1.053.109a1 1 0 0 0-.437.437c-.109.213-.11.493-.11 1.053v.24c0 .12.033.161.16.161h.09Zm.75 1.5v5.25c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V6.5h-9Z" clip-rule="evenodd" /><path fill="currentColor" fill-rule="evenodd" d="M6.75 8a.75.75 0 0 0 0 1.5h2.5a.75.75 0 1 0 0-1.5h-2.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},36193:(e,_,i)=>{i.d(_,{Icon20Add:()=>o});var o=(0,i(28178).makeIcon)("Icon20Add","add_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="add_20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},939564:(e,_,i)=>{i.d(_,{Icon20BookmarkOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20BookmarkOutline","bookmark_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="bookmark_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M9.317 1.5h1.366c.952 0 1.713 0 2.327.05.63.052 1.172.16 1.67.413a4.25 4.25 0 0 1 1.857 1.857c.253.498.361 1.04.413 1.67.05.614.05 1.375.05 2.327v6.57c0 .776 0 1.41-.044 1.9-.044.484-.14.981-.452 1.37a2.25 2.25 0 0 1-1.773.84c-.498-.004-.943-.245-1.345-.516-.408-.276-.899-.677-1.5-1.169l-.842-.688c-.279-.228-.457-.373-.602-.474a.824.824 0 0 0-.239-.132.75.75 0 0 0-.406 0 .824.824 0 0 0-.239.132c-.145.101-.323.246-.602.474l-.842.688c-.601.492-1.092.893-1.5 1.169-.402.271-.847.512-1.345.516a2.25 2.25 0 0 1-1.773-.84c-.312-.389-.408-.886-.452-1.37C3 15.798 3 15.165 3 14.388v-6.57c0-.952 0-1.713.05-2.327.052-.63.16-1.172.413-1.67A4.25 4.25 0 0 1 5.32 1.964c.498-.253 1.04-.361 1.67-.413.614-.05 1.375-.05 2.327-.05ZM7.112 3.045c-.537.044-.86.127-1.11.255A2.75 2.75 0 0 0 4.8 4.502c-.128.25-.21.573-.255 1.11-.044.546-.045 1.245-.045 2.238v6.5c0 .823 0 1.388.038 1.802.04.429.108.541.127.565a.75.75 0 0 0 .591.28c.03 0 .161-.018.518-.259.344-.233.782-.59 1.42-1.111l.832-.68c.254-.208.475-.389.671-.526.21-.146.43-.273.694-.348a2.251 2.251 0 0 1 1.218 0c.263.075.485.202.694.348.196.137.417.318.67.526l.833.68c.638.52 1.076.878 1.42 1.111.356.241.488.259.518.259a.75.75 0 0 0 .59-.28c.02-.024.089-.136.128-.565.037-.414.038-.98.038-1.803V7.85c0-.993 0-1.692-.045-2.238-.044-.537-.127-.86-.255-1.11A2.75 2.75 0 0 0 13.998 3.3c-.25-.128-.573-.21-1.11-.255C12.342 3.001 11.643 3 10.65 3h-1.3c-.993 0-1.692 0-2.238.045Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},650163:(e,_,i)=>{i.d(_,{Icon20CopyOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20CopyOutline","copy_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="copy_outline_20"><path d="M9.2 3c-1.285 0-2.158.001-2.833.056-.658.054-.994.151-1.229.271a3 3 0 0 0-1.311 1.311c-.12.235-.217.57-.27 1.229C3.5 6.542 3.5 7.415 3.5 8.7v2.6c0 .585.001.933.022 1.191.01.11.02.176.028.212v.097c0 .761 0 1.264.068 1.642a1.723 1.723 0 0 1-.526-.16 2 2 0 0 1-.874-.874C2 12.98 2 12.42 2 11.3V8.7c0-2.52 0-3.78.49-4.743A4.5 4.5 0 0 1 4.457 1.99C5.42 1.5 6.68 1.5 9.2 1.5h2c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874c.07.137.117.288.15.466C13.96 3 13.472 3 12.75 3H9.2Z" /><path fill-rule="evenodd" d="M5.1 7.7c0-1.12 0-1.68.218-2.108a2 2 0 0 1 .874-.874C6.62 4.5 7.18 4.5 8.3 4.5h6c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874c.218.428.218.988.218 2.108v7.6c0 1.12 0 1.68-.218 2.108a2 2 0 0 1-.874.874c-.428.218-.988.218-2.108.218h-6c-1.12 0-1.68 0-2.108-.218a2 2 0 0 1-.874-.874C5.1 16.98 5.1 16.42 5.1 15.3V7.7ZM8.3 6h6c.585 0 .933.001 1.191.022.158.013.224.03.242.036a.5.5 0 0 1 .21.209c.005.018.022.084.035.242.02.258.022.606.022 1.191v7.6c0 .585-.001.933-.022 1.191-.013.158-.03.224-.036.242a.5.5 0 0 1-.209.21 1.253 1.253 0 0 1-.242.035c-.258.02-.606.022-1.191.022h-6c-.585 0-.933-.001-1.191-.022a1.253 1.253 0 0 1-.242-.036.5.5 0 0 1-.21-.209 1.255 1.255 0 0 1-.035-.242c-.02-.258-.022-.606-.022-1.191V7.7c0-.585.001-.933.022-1.191.013-.158.03-.224.036-.242a.5.5 0 0 1 .209-.21c.018-.005.084-.022.242-.035C7.367 6.002 7.715 6 8.3 6Zm7.438.06-.003-.002.003.001Zm.203.202v.003-.003Zm0 10.476v-.003a.014.014 0 0 1 0 .003Zm-.203.203h-.003.003Zm-8.876 0h.003-.003Zm-.203-.203v-.003.003Zm0-10.476v.003-.003Zm.203-.203h.003a.05.05 0 0 0-.003 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},277659:(e,_,i)=>{i.d(_,{Icon20DeleteOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20DeleteOutline","delete_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" d="M6.837 4H2.75a.75.75 0 0 0 0 1.5h.545l.907 9.248c.051.523.094.96.157 1.314.066.37.163.711.353 1.028a2.9 2.9 0 0 0 1.247 1.131c.334.158.682.222 1.058.25.36.029.797.029 1.323.029h3.32c.526 0 .964 0 1.323-.028.376-.03.724-.093 1.058-.25a2.9 2.9 0 0 0 1.247-1.132c.19-.317.287-.657.353-1.028.063-.355.106-.79.157-1.314l.907-9.248h.545a.75.75 0 0 0 0-1.5h-4.087a3.25 3.25 0 0 0-6.326 0Zm1.581 0h3.164a1.751 1.751 0 0 0-3.164 0Zm6.78 1.5H4.802l.89 9.072c.054.56.091.938.143 1.228.05.281.104.422.162.52a1.4 1.4 0 0 0 .603.546c.102.048.248.088.533.11.294.024.673.024 1.235.024h3.262c.562 0 .941 0 1.235-.023.285-.023.43-.063.533-.111a1.4 1.4 0 0 0 .603-.547c.058-.097.112-.238.162-.52.052-.29.09-.667.144-1.226l.89-9.073Zm-2.886 2.002a.75.75 0 0 1 .685.81l-.5 6.003a.75.75 0 0 1-1.494-.124l.5-6.003a.75.75 0 0 1 .81-.686Zm-4.624 0a.75.75 0 0 1 .81.686l.5 6.002a.75.75 0 0 1-1.495.125l-.5-6.003a.75.75 0 0 1 .685-.81Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},336572:(e,_,i)=>{i.d(_,{Icon20DownloadOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20DownloadOutline","download_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="download_outline_20"><g fill="currentColor"><path fill-rule="evenodd" d="M4 17.75a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75a.75.75 0 0 1-.75-.75z" clip-rule="evenodd" /><path d="M10.75 2.726c0-.401-.336-.726-.75-.726a.738.738 0 0 0-.75.726v9.722l-3.97-3.97a.75.75 0 0 0-1.06 1.06l5.245 5.246a.75.75 0 0 0 1.06 0l5.256-5.256a.75.75 0 0 0-1.06-1.061l-3.972 3.972z" /></g></symbol>',20,20,!1,void 0)},728405:(e,_,i)=>{i.d(_,{Icon20InfoCircleOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20InfoCircleOutline","info_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="info_circle_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 9.25a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75z" clip-rule="evenodd" /><path fill="currentColor" d="M11 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" /><path fill="currentColor" fill-rule="evenodd" d="M3.99 3.99A8.476 8.476 0 0 1 10 1.5c2.347 0 4.473.952 6.01 2.49A8.476 8.476 0 0 1 18.5 10a8.476 8.476 0 0 1-2.49 6.01A8.476 8.476 0 0 1 10 18.5a8.476 8.476 0 0 1-6.01-2.49A8.476 8.476 0 0 1 1.5 10c0-2.347.952-4.473 2.49-6.01zM10 3a6.976 6.976 0 0 0-4.95 2.05A6.976 6.976 0 0 0 3 10a6.98 6.98 0 0 0 2.05 4.95A6.976 6.976 0 0 0 10 17a6.975 6.975 0 0 0 4.95-2.05A6.975 6.975 0 0 0 17 10a6.976 6.976 0 0 0-2.05-4.95A6.976 6.976 0 0 0 10 3z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},17117:(e,_,i)=>{i.d(_,{Icon20ReportOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20ReportOutline","report_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="report_outline_20"><path d="M10.001 5.5a.75.75 0 0 0-.75.75v4.5a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75Zm-.9 8.4a.9.9 0 1 1 1.8 0 .9.9 0 0 1-1.8 0Z" /><path fill-rule="evenodd" d="m17.326 14.814-2.514 2.514c-.432.433-.648.649-.9.803a2.502 2.502 0 0 1-.723.3c-.288.069-.594.069-1.205.069h-3.97c-.612 0-.918 0-1.206-.07a2.502 2.502 0 0 1-.723-.299c-.252-.154-.468-.37-.9-.803L2.67 14.814c-.432-.432-.648-.648-.802-.9a2.5 2.5 0 0 1-.3-.723c-.068-.288-.068-.593-.069-1.204V8.014c0-.611 0-.917.069-1.205a2.5 2.5 0 0 1 .3-.723c.154-.252.37-.468.803-.9L5.186 2.67c.432-.432.649-.648.9-.803a2.5 2.5 0 0 1 .723-.299c.288-.069.594-.069 1.205-.069h3.97c.611 0 .917 0 1.205.07a2.5 2.5 0 0 1 .723.298c.252.155.468.371.9.804l2.514 2.514c.432.432.648.648.803.9.137.224.238.468.3.723.068.288.068.593.068 1.205v3.972c0 .611 0 .917-.069 1.205a2.497 2.497 0 0 1-.299.723c-.155.252-.37.468-.803.9Zm-.474-1.706c-.062.101-.149.188-.321.36l-3.063 3.063c-.173.173-.26.26-.36.322a.998.998 0 0 1-.29.12c-.115.027-.237.027-.482.027H7.662c-.245 0-.367 0-.482-.028a1.001 1.001 0 0 1-.29-.12c-.1-.061-.186-.148-.36-.32l-3.06-3.065c-.173-.172-.26-.259-.321-.36a1 1 0 0 1-.12-.289C3 12.704 3 12.582 3 12.338V7.663c0-.245 0-.367.027-.482a1 1 0 0 1 .12-.29c.062-.1.148-.187.321-.36l3.064-3.063c.173-.172.26-.259.36-.32a1 1 0 0 1 .29-.12C7.295 3 7.418 3 7.662 3h4.673c.245 0 .367 0 .482.028a1 1 0 0 1 .29.12c.1.061.187.148.36.32l3.063 3.063c.172.173.259.26.32.36.056.09.096.188.12.29.028.115.028.237.028.482v4.674c0 .245 0 .367-.027.482a.998.998 0 0 1-.12.29Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},194408:(e,_,i)=>{i.d(_,{Icon20StatisticsOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20StatisticsOutline","statistics_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="statistics_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M17 3.75a.75.75 0 0 0-.75-.75h-3.5a.75.75 0 0 0 0 1.5h1.69L10.5 8.44 9.03 6.97a.75.75 0 0 0-1.06 0l-4.75 4.75a.75.75 0 1 0 1.06 1.06L8.5 8.56l1.47 1.47a.75.75 0 0 0 1.06 0l4.47-4.47v1.69a.75.75 0 0 0 1.5 0zM2 16.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},376499:(e,_,i)=>{i.d(_,{Icon20WriteOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon20WriteOutline","write_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="write_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M13.076 2.649A2.215 2.215 0 0 1 14.645 2c.566 0 1.135.216 1.568.649l1.137 1.136a2.21 2.21 0 0 1 0 3.133l-.941.94-9.17 9.179a3.296 3.296 0 0 1-2.33.963H3a1 1 0 0 1-1-1v-1.893a3.288 3.288 0 0 1 .965-2.34l8.123-8.132 1.988-1.986zm2.286 4.135.927-.926a.711.711 0 0 0 0-1.013l-1.137-1.136a.713.713 0 0 0-.507-.21.713.713 0 0 0-.507.21l-.927.926 2.15 2.149zM12.135 5.71l-8.109 8.118a1.79 1.79 0 0 0-.525 1.266V16.2a.3.3 0 0 0 .3.3H4.91c.475 0 .931-.189 1.267-.525l8.11-8.118-2.152-2.148z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},849456:(e,_,i)=>{i.d(_,{Icon24AddSquareOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon24AddSquareOutline","add_square_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="add_square_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M12 7a.9.9 0 0 1 .9.9v3.2h3.2a.9.9 0 0 1 .9.9.9.9 0 0 1-.9.9h-3.2v3.2a.9.9 0 0 1-.9.9.9.9 0 0 1-.9-.9v-3.2H7.9A.9.9 0 0 1 7 12a.9.9 0 0 1 .9-.9h3.2V7.9A.9.9 0 0 1 12 7ZM9.462 3h5.076c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.923 1.922c.266.523.376 1.087.428 1.726.051.62.051 1.386.051 2.334v5.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05H9.462c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.725-.43a4.4 4.4 0 0 1-1.923-1.922c-.267-.523-.377-1.087-.43-1.726C3 16.252 3 15.486 3 14.538V9.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 5.403 3.48c.522-.267 1.086-.377 1.725-.43C7.748 3 8.514 3 9.462 3ZM7.275 4.845c-.528.043-.829.123-1.055.238A2.6 2.6 0 0 0 5.083 6.22c-.115.226-.195.527-.238 1.054C4.8 7.813 4.8 8.505 4.8 9.5v5c0 .995 0 1.687.045 2.225.043.528.123.83.238 1.055a2.6 2.6 0 0 0 1.137 1.137c.226.115.527.195 1.054.238.539.044 1.231.045 2.226.045h5c.995 0 1.687 0 2.225-.045.528-.043.83-.123 1.055-.238a2.6 2.6 0 0 0 1.137-1.137c.115-.226.195-.527.238-1.055.044-.538.045-1.23.045-2.225v-5c0-.995 0-1.687-.045-2.225-.043-.529-.123-.829-.238-1.055a2.6 2.6 0 0 0-1.137-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-5c-.995 0-1.687 0-2.225.045Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},521829:(e,_,i)=>{i.d(_,{Icon24Done:()=>o});var o=(0,i(28178).makeIcon)("Icon24Done","done_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="done_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" d="m9 16.2-3.5-3.5a.99.99 0 1 0-1.4 1.4l4.193 4.193a1 1 0 0 0 1.414 0L20.3 7.7a.99.99 0 0 0-1.4-1.4L9 16.2Z" /></g></symbol>',24,24,!1,void 0)},771687:(e,_,i)=>{i.d(_,{Icon24InfoCircleOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon24InfoCircleOutline","info_circle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="info_circle_outline_24"><path d="M12 20.105a8.105 8.105 0 1 0 0-16.21 8.105 8.105 0 0 0 0 16.21ZM12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10Zm0-12.372a1.316 1.316 0 1 1 0-2.632 1.316 1.316 0 0 1 0 2.632Zm-.947 2.822c0-.541.424-.98.947-.98.523 0 .947.439.947.98v3.83c0 .54-.424.98-.947.98-.523 0-.947-.44-.947-.98v-3.83Z" /></symbol>',24,24,!1,void 0)},380021:(e,_,i)=>{i.d(_,{Icon24LikeOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon24LikeOutline","like_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="like_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M15.992 4.006c-1.451.064-2.753.637-3.881 1.694l-.117.113-.122-.118C10.662 4.576 9.275 4 7.734 4 4.577 4 2 6.56 2 9.717c0 3.088 1.127 4.552 6.182 8.546l2.688 2.098a1.837 1.837 0 0 0 2.26 0l2.364-1.843.933-.74C20.965 14.144 22 12.676 22 9.718 22 6.56 19.423 4 16.266 4zm.274 1.794c2.165 0 3.934 1.757 3.934 3.917l-.005.294c-.076 2.156-1.062 3.341-5.509 6.852l-2.663 2.078a.038.038 0 0 1-.046 0l-2.364-1.843-.874-.691c-4.142-3.31-4.939-4.44-4.939-6.69C3.8 7.557 5.569 5.8 7.734 5.8c1.333 0 2.507.618 3.57 1.915a.9.9 0 0 0 1.398-.007C13.739 6.416 14.909 5.8 16.266 5.8z" /></g></symbol>',24,24,!1,void 0)},898366:(e,_,i)=>{i.d(_,{Icon24ShareOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon24ShareOutline","share_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="share_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M11.996 3.725A2.15 2.15 0 0 0 10 5.87l-.001 2.117-.02.005a9.904 9.904 0 0 0-7.827 10.721c.083.811 1.116 1.103 1.611.455l.187-.237a9.082 9.082 0 0 1 5.836-3.265l.213-.026.001 2.494a2.15 2.15 0 0 0 3.476 1.692l7.824-6.132a2.15 2.15 0 0 0 0-3.384l-7.824-6.132a2.15 2.15 0 0 0-1.326-.458zm.154 1.795a.35.35 0 0 1 .216.075l7.824 6.132a.35.35 0 0 1 0 .55l-7.824 6.133a.35.35 0 0 1-.566-.276l-.001-3.447a.9.9 0 0 0-.915-.9l-.233.004-.342.017a10.88 10.88 0 0 0-6.119 2.365l-.174.144.024-.135a8.103 8.103 0 0 1 6.968-6.537.9.9 0 0 0 .791-.893L11.8 5.87a.35.35 0 0 1 .35-.35z" /></g></symbol>',24,24,!1,void 0)},78750:(e,_,i)=>{i.d(_,{Icon28LikeCircleFillRed:()=>o});var o=(0,i(28178).makeIcon)("Icon28LikeCircleFillRed","like_circle_fill_red_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="like_circle_fill_red_28"><linearGradient id="like_circle_fill_red_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff5263" /><stop offset="1" stop-color="#ff3347" /></linearGradient><path fill="url(#like_circle_fill_red_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14z" /><path fill="#fff" d="M16.859 9c2.01 0 3.641 1.611 3.641 3.6 0 2.007-.814 3.013-4.265 5.667l-1.57 1.207c-.391.301-.939.301-1.33 0l-1.57-1.207C8.314 15.613 7.5 14.607 7.5 12.599 7.5 10.611 9.13 9 11.141 9c1.077 0 2.035.501 2.859 1.472C14.824 9.502 15.782 9 16.859 9z" /></symbol>',28,28,!1,void 0)},197684:(e,_,i)=>{i.d(_,{Icon28MoreHorizontal:()=>o});var o=(0,i(28178).makeIcon)("Icon28MoreHorizontal","more_horizontal_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="more_horizontal_28"><path d="M8.5 14a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm8 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm5.5 2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" /></symbol>',28,28,!1,void 0)},735347:(e,_,i)=>{i.d(_,{Icon56LockOutline:()=>o});var o=(0,i(28178).makeIcon)("Icon56LockOutline","lock_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 56 56" id="lock_outline_56"><g fill="currentColor"><path d="M28 31a3 3 0 0 0-1.5 5.599V39.5a1.5 1.5 0 0 0 3 0v-2.901A2.999 2.999 0 0 0 28 31z" /><path fill-rule="evenodd" d="M28 4c-6.075 0-11 4.925-11 11v5.04c-.36.015-.7.034-1.02.06-1.26.103-2.344.32-3.339.826a8.5 8.5 0 0 0-3.715 3.715c-.507.996-.723 2.08-.826 3.34C8 29.208 8 30.73 8 32.634v6.73c0 1.905 0 3.426.1 4.655.103 1.26.32 2.344.826 3.339a8.5 8.5 0 0 0 3.715 3.715c.995.507 2.08.723 3.34.826 1.228.1 2.749.1 4.654.1h14.73c1.905 0 3.426 0 4.655-.1 1.26-.103 2.343-.32 3.339-.826a8.5 8.5 0 0 0 3.715-3.715c.507-.995.723-2.08.826-3.34.1-1.228.1-2.749.1-4.654v-6.73c0-1.905 0-3.426-.1-4.655-.103-1.26-.32-2.343-.826-3.339a8.5 8.5 0 0 0-3.715-3.715c-.996-.507-2.08-.723-3.34-.826-.319-.026-.658-.045-1.019-.06V15c0-6.075-4.925-11-11-11zm-8 11a8 8 0 1 1 16 0v5H20zm-5.997 8.6c.502-.256 1.147-.422 2.222-.51 1.092-.089 2.49-.09 4.475-.09h14.6c1.985 0 3.383.001 4.476.09 1.074.088 1.719.254 2.221.51a5.5 5.5 0 0 1 2.404 2.403c.255.502.42 1.147.509 2.222.089 1.092.09 2.49.09 4.475v6.6c0 1.985-.001 3.383-.09 4.476-.088 1.074-.254 1.719-.51 2.221a5.5 5.5 0 0 1-2.403 2.404c-.502.255-1.147.42-2.222.509-1.092.089-2.49.09-4.475.09H20.7c-1.985 0-3.383-.001-4.475-.09-1.075-.088-1.72-.254-2.222-.51a5.5 5.5 0 0 1-2.404-2.403c-.255-.502-.42-1.147-.509-2.222-.089-1.092-.09-2.49-.09-4.475v-6.6c0-1.985.001-3.383.09-4.475.088-1.075.254-1.72.51-2.222a5.5 5.5 0 0 1 2.403-2.404z" clip-rule="evenodd" /></g></symbol>',56,56,!1,void 0)},190026:(e,_,i)=>{i.d(_,{default:()=>o});const o={ownerName:"Owner-module__ownerName--Qe3xf",subscriptionButton:"Owner-module__subscriptionButton--CasU2",featured:"Owner-module__featured--iuUdW"}},632299:(e,_,i)=>{i.d(_,{default:()=>o});const o={container:"VideoModalInfoActions-module__container--IzANo"}},491417:(e,_,i)=>{i.d(_,{default:()=>o});const o={textWrapper:"VideoModalInfoDescription-module__textWrapper--bhGXl"}},168755:(e,_,i)=>{i.d(_,{default:()=>o});const o={container:"VideoModalInfoTitle-module__container--Igc6Q",info:"VideoModalInfoTitle-module__info--fJmkB",wrapper:"VideoModalInfoTitle-module__wrapper--oPlBO",icon:"VideoModalInfoTitle-module__icon--qs_B8",separator:"VideoModalInfoTitle-module__separator--ntzvw",archive:"VideoModalInfoTitle-module__archive--b_hx9"}},368372:(e,_,i)=>{i.d(_,{default:()=>o});const o={icon:"MutePopup-module__icon--LNwv3",text:"MutePopup-module__text--yZGeR"}},495774:(e,_,i)=>{i.d(_,{default:()=>o});const o={playlistPrivateIcon:"PlaylistPopover-module__playlistPrivateIcon--_8Rba",playlistSubhead:"PlaylistPopover-module__playlistSubhead--G_uJa",scrollHeight:"PlaylistPopover-module__scrollHeight--_S6z1"}},940592:(e,_,i)=>{i.d(_,{default:()=>o});const o={wrapper:"GoodsRecognition-module__wrapper--eRdra",header:"GoodsRecognition-module__header--gF9yV",headerTitle:"GoodsRecognition-module__headerTitle--4tRCN",headerAction:"GoodsRecognition-module__headerAction--jcJ0A",container:"GoodsRecognition-module__container--BWK7g",stub:"GoodsRecognition-module__stub--tlMcy",spinner:"GoodsRecognition-module__spinner--WtTim",retryBtn:"GoodsRecognition-module__retryBtn--dxdMA",goodWrapper:"GoodsRecognition-module__goodWrapper--OvaVx",goodTitle:"GoodsRecognition-module__goodTitle--xvUzb",goodItems:"GoodsRecognition-module__goodItems--bwLq7",goodItemsGap:"GoodsRecognition-module__goodItemsGap--lAXUG",goodLink:"GoodsRecognition-module__goodLink--KDimB",goodPhoto:"GoodsRecognition-module__goodPhoto--N9Mrs",goodPhotoImg:"GoodsRecognition-module__goodPhotoImg--cqe8Q",goodLinkTitle:"GoodsRecognition-module__goodLinkTitle--EAObE",goodLinkDomain:"GoodsRecognition-module__goodLinkDomain--w_S2M"}},471828:(e,_,i)=>{var o;i.d(_,{CATALOG_API_METHODS:()=>O,CATALOG_AVATAR_SIZE_M:()=>m,CATALOG_AVATAR_SIZE_SM:()=>v,CatalogActionType:()=>s,CatalogBlockDataType:()=>l,CatalogBlockLayoutName:()=>d,CatalogExtendedDataName:()=>a,CatalogType:()=>o,ComponentsType:()=>t,FIRST_VERIFIED_TOOLTIP_SHIFT:()=>P,FRIENDS_BUTTON_ACTIONS:()=>r,FRIENDS_IN_GROUP:()=>p,MARKET_ITEM_AVATAR_SIZE:()=>b,MAX_FRIENDS_IN_GROUP_TO_SHOW:()=>D,MINI_APP_AVATAR_SIZE:()=>u,ONLINE_STATUS:()=>n,OPEN_SEARCH_TAB_ACTION_URL:()=>c,SLIDER_AVATAR_SIZE_M:()=>w,SLIDER_AVATAR_SIZE_SM:()=>E,SLIDER_SCROLL:()=>M,VERIFIED_TOOLTIP_SHIFT:()=>h}),function(e){e.SEARCH="search",e.VIDEO="video",e.GROUPS="groups"}(o||(o={}));const t={MOBILE:"MOBILE",MODAL:"MODAL",VIDEO:"VIDEO"},d={HEADER:"header",HEADER_COMPACT:"header_compact",HEADER_LARGE:"header_large",LARGE_SLIDER:"large_slider",SLIDER:"slider",SLIDER_CARD:"slider_card",SLIDER_EVENT:"slider_event",SEPARATOR:"separator",LIST:"list",LARGE_LIST:"large_list",SMALL_LIST:"small_list",STACKED_LIST:"stacked_list",PLACEHOLDER:"placeholder",PLACEHOLDER_LINE:"placeholder_line",PLACEHOLDER_SMALL:"placeholder_small",PLACEHOLDER_BIG:"placeholder_big",PLACEHOLDER_IMAGE_WARNING:"placeholder_image_warning",PLACEHOLDER_ILLEGAL_QUERY:"placeholder_illegal_query",DOUBLE_STACKED_SLIDER:"double_stacked_slider",DOUBLE_STACKED_LIST:"double_stacked_list",HORIZONTAL_BUTTONS:"horizontal_buttons",TRIPLE_STACKED_SLIDER:"triple_stacked_slider",CHIPS:"chips",TITLE_SUBTITLE_AVATAR:"title_subtitle_avatar",TEXT:"text",BUTTON:"button",BANNER:"banner"},l={GROUPS:"groups",GROUPS_ITEMS:"groups_items",GROUPS_COLLECTION:"groups_collection",ACTION:"action",LINKS:"links",CATALOG_USERS:"catalog_users",MINI_APPS:"mini_apps",MARKET_ITEMS:"market_items",VIDEOS:"videos",ALBUMS:"albums",CATALOG_SEARCH_SUGGESTION:"catalog_search_suggestion",SEARCH_SPELLCHECKER:"search_spellchecker",SEARCH_AUTHORS:"search_authors",MUSIC_AUDIOS:"music_audios",MUSIC_PLAYLISTS:"music_playlists",SEARCH_SUGGESTIONS:"search_suggestions",NEWSFEED_ITEMS:"newsfeed_items",AUDIOS:"audios",GAMES:"games"},s={OPEN_SEARCH_TAB:"open_search_tab",OPEN_SECTION:"open_section",OPEN_URL:"open_url",CLEAR_RECENT_GROUPS:"clear_recent_groups",OPEN_SECTION_SLIDER_CELL:"open_section_slider_cell",ONBOARDING:"onboarding",BLOCK_FILTER:"block_filter",SHOW_FILTERS:"show_filters",PLAY_VIDEOS_FROM_BLOCK:"play_videos_from_block",TOGGLE_ALBUM_SUBSCRIPTION:"toggle_album_subscription",UPLOAD_VIDEO:"upload_video",CREATE_ALBUM:"create_album",START_LIVE:"start_live"},a={GROUPS:"groups",LINKS:"links",CATALOG_USERS:"catalog_users",MINI_APPS:"mini_apps",MARKET_ITEMS:"market_items",VIDEOS:"videos",ALBUMS:"albums",PLACEHOLDERS:"placeholders",PROFILES:"profiles",SUGGESTIONS:"suggestions",SEARCH_SPELLCHECKERS:"search_spellcheckers",NEWSFEED_ITEMS:"newsfeed_items",REACTION_SETS:"reaction_sets",PLAYLISTS:"playlists",AUDIOS:"audios",GROUP_COLLECTION_ITEMS:"group_collection_items",GAMES:"games"},n={ONLINE:"online",MOBILE:"online-mobile"};var r;!function(e){e.ADD_FRIEND="addFriend",e.REMOVE_FRIEND="removeFriend",e.SEND_MESSAGE="sendMessage",e.NO_ACTION="noAction",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.CALL="call"}(r||(r={}));const c={GROUPS:"/search?section=communities",PEOPLE:"/search?section=people",VIDEO:"/search?section=video",SERVICES:"/search?section=services",GAMES:"/search?section=games"},v=40,m=48,u=56,E=56,w=64,b=135,p={NO_ONE:0,ONE:1,TWO:2},D=2,M=120,P=[96,20,5],h=[96,3,3],O={GET_SECTION:"catalog.getSection",SAVE_SELECTION:"catalog.saveSelection",GET_STORIES:"stories.get",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete",CLEAR_RECENT:"search.clearRecents",FAVE_ADD_PRODUCT:"fave.addProduct",FAVE_REMOVE_PRODUCT:"fave.removeProduct",ADD_RECENT:"search.addRecents",REMOVE_VIDEO_SEARCH_RECENT_QUERY:"search.removeVideoSearchRecentQuery",LIKES_ADD:"likes.add",LIKES_DELETE:"likes.delete",ADD_VIDEO:"video.add",DELETE_VIDEO:"video.delete",ADD_VIDEO_TO_FAVE:"fave.addVideo",REMOVE_VIDEO_FROM_FAVE:"fave.removeVideo",ADD_VIDEO_TO_PLAYLIST:"video.addToAlbum",REMOVE_VIDEO_FROM_PLAYLIST:"video.removeFromAlbum",GET_PLAYLISTS_BY_VIDEO:"video.getAlbumsByVideo",GET_PLAYLISTS:"video.getAlbums",SUBSCRIBE_TO_ALBUM:"video.subscribeToAlbum",UNSUBSCRIBE_TO_ALBUM:"video.unsubscribeFromAlbum",REMOVE_VIEWING_HISTORY_RECORDS:"video.removeViewingHistoryRecords",MARK_VIDEO_NOT_INTERESTED:"video.notInterested",FAVE_ADD_POST:"fave.addPost",FAVE_REMOVE_POST:"fave.removePost",ADD_AUDIO:"audio.add",DELETE_AUDIO:"audio.delete",RESTORE_AUDIO:"audio.restore",AGREE_BLUR_RESTRICTION:"photos.agreeBlurRestriction"}},137363:(e,_,i)=>{i.d(_,{ANALYTICS_SCREEN_OTHER:()=>d,ANALYTICS_SCREEN_SETTINGS:()=>t,GroupAdminLevel:()=>o});const o={USER:0,MODERATOR:1,EDITOR:2,ADMINISTRATOR:3,HOST:4,EVENT_CREATOR:5,CREATOR:6,PSEUDO_LEVEL_ADVERTISER:100},t="settings",d="other"},922716:(e,_,i)=>{i.d(_,{isVideoExternal:()=>o});const o=e=>{var _;return Boolean(e&&e.player&&((null==(_=e.files)?void 0:_.external)||"YouTube"===e.platform))}},241525:(e,_,i)=>{i.d(_,{replaceTimeTags:()=>l});var o=i(922716),t=i(168365);const d=/(?:(\d+):)?([0-5]?\d):([0-5]?\d)(?![:\d])/g,l=({getDescriptionTimeTagWrap:e,text:_,video:i})=>{if(!i||(0,o.isVideoExternal)(i)||!i.owner_id||!i.id)return _;const l=(0,t.getVideoUrl)(i);var s;const a=null!=(s=i.duration)?s:0;return _.replaceAll(d,((_,i,o,t)=>{const d=Number(null!=i?i:0),s=Number(null!=o?o:0),n=Number(null!=t?t:0),r=n+60*s+60*d*60;if(r>=0&&r<a){return e(_,r,`${l}?t=${`${d}h${s}m${n}s`}`)}return _}))}},167655:(e,_,i)=>{i.d(_,{VideoModalInfo:()=>w});var o=i(434788),t=i(820224),d=i(785893),l=i(504190),s=i(667294),a=i(86894),n=i(869048),r=i(957874),c=i(881836),v=i(167276),m=i(114198),u=i(816623),E=i(964113);const w=e=>{var{canSubscribeToAuthor:_,canAddToGroups:i,canDeleteVideo:w,canReport:b,canEditVideo:p,canAddToFavorite:D,canViewStatistic:M,isShortVideo:P,isActiveLive:h,moderationVideoInfo:O}=e,I=(0,t._)(e,["canSubscribeToAuthor","canAddToGroups","canDeleteVideo","canReport","canEditVideo","canAddToFavorite","canViewStatistic","isShortVideo","isActiveLive","moderationVideoInfo"]);const g=(0,l.useEvent)(c.videoModalService.setIsLikedEvent),C=(0,l.useEvent)(c.videoModalService.setNumberOfLikesEvent),L=(0,l.useStore)(c.videoModalService.$title),T=(0,l.useEvent)(c.videoModalService.setTitleEvent),y=(0,l.useStore)(c.videoModalService.$description),A=(0,l.useEvent)(c.videoModalService.setDescriptionEvent),R=(0,l.useEvent)(c.videoModalSubscribeService.setCanSubscribeEvent),B=(0,l.useEvent)(c.videoModalService.setCanAddToGroupsEvent),f=(0,l.useEvent)(c.videoModalService.setCanReportEvent),V=(0,l.useEvent)(c.videoModalService.setCanEditVideoEvent),S=(0,l.useEvent)(c.videoModalService.setCanDeleteVideoEvent),W=(0,l.useEvent)(c.videoModalFaveService.setCanAddToFavorite),U=(0,l.useEvent)(c.videoModalService.setCanViewStatisticEvent),x=(0,l.useEvent)(c.videoModalFaveService.setIsFavoriteEvent),K=(0,l.useEvent)(c.videoModalService.setIsShortVideoEvent),k=(0,l.useEvent)(c.videoModalService.setIsActiveLiveEvent),N=(0,l.useEvent)(c.videoModalAlbumsService.resetVideosAlbumsEvent),z=(0,l.useEvent)(c.videoModalSubscribeService.setIsSubscribeEvent);return(0,s.useEffect)((()=>(R(_),B(i),f(b),V(p),S(w),W(D),U(M),k(h),K(P),()=>{N(window.vk.id)})),[]),(0,s.useEffect)((()=>{g(I.isLiked)}),[I.isLiked]),(0,s.useEffect)((()=>{C(I.likes)}),[I.likes]),(0,s.useEffect)((()=>{T(I.title)}),[I.title]),(0,s.useEffect)((()=>{A(I.description)}),[I.description]),(0,s.useEffect)((()=>{x(I.isFavorite)}),[I.isFavorite]),(0,s.useEffect)((()=>{z(I.isSubscribeToAuthor)}),[I.isSubscribeToAuthor]),(0,d.jsxs)(n.AppRootProvider,{children:[(0,d.jsx)(r.HeaderLayout,{aside:O&&(0,d.jsx)(E.VideoModalInfoHeaderAside,{moderationVideoInfo:O}),children:(0,d.jsx)(v.VideoModalInfoTitle,(0,o._)({},I,{title:L||""}))}),(0,d.jsx)(a.Spacing,{size:8}),(0,d.jsx)(m.VideoModalInfoActions,{video:I}),(0,d.jsx)(a.Spacing,{size:12}),(0,d.jsx)(u.VideoModalInfoDescriptionWrapper,{video:I,description:y}),(0,d.jsx)(a.Spacing,{size:24})]})}},612173:(e,_,i)=>{i.d(_,{Actions:()=>M});var o=i(785893),t=i(78750),d=i(380021),l=i(898366),s=i(521829),a=i(849456),n=i(356271),r=i(29271),c=i(543886),v=i(202933),m=i(881836),u=i(504190),E=i(292063),w=i(918155),b=i(667294),p=i(996410),D=i(492806);const M=(0,b.memo)((({video:e})=>{var _;const i=(0,u.useStore)(m.videoModalService.$isLiked),b=(0,u.useStore)(m.videoModalService.$numberOfLikes),M=(0,E.getFormattedBigLikesToShortCase)(b||0),{onToggleLike:P}=(0,p.useMenuItemsHandlers)({videoId:e.id,ownerId:e.owner.id}),h=(0,u.useStore)(m.videoModalAlbumsService.$videoAdded);return(0,o.jsxs)(n.PostFooter,{children:[(0,o.jsx)(n.PostFooter.Action,{icon:i?(0,o.jsx)(t.Icon28LikeCircleFillRed,{width:24,height:24}):(0,o.jsx)(d.Icon24LikeOutline,{}),foregroundColor:i?{light:"var(--vkui--color_accent_red)",dark:"var(--vkui--color_accent_red)"}:{light:"var(--vkui--color_text_secondary)",dark:"var(--vkui--color_text_secondary)"},backgroundColor:i?{light:"var(--vkui--color_background_negative_tint)",dark:"var(--vkui--color_background_negative_tint)"}:{light:"var(--vkui--color_background_secondary)",dark:"var(--vkui--color_background_secondary)"},onClick:P,children:M}),(0,o.jsx)(n.PostFooter.Action,{mode:"secondary",icon:(0,o.jsx)(l.Icon24ShareOutline,{}),onClick:()=>{(0,w.shareVideo)(e.owner.id,e.id)},children:r.getLang("video_share")}),(0,o.jsx)(v.PlaylistPopoverWrapper,{video:e,ownerId:window.vk.id,onShownChange:D.focusVideoPlayerIfExists,children:(0,o.jsx)(n.PostFooter.Action,{mode:"secondary",icon:h?(0,o.jsx)(s.Icon24Done,{}):(0,o.jsx)(a.Icon24AddSquareOutline,{}),children:h?r.getLang("video_card_added_button_label"):r.getLang("video_add_to_your_videos")})}),(0,o.jsx)(c.MoreActionsMenu,{videoId:null==(_=e)?void 0:_.id,owner:e.owner,ordInfo:e.ordInfo})]})}))},859494:(e,_,i)=>{i.d(_,{MoreActionsMenu:()=>P});var o=i(785893),t=i(194408),d=i(376499),l=i(336572),s=i(939564),a=i(36193),n=i(650163),r=i(277659),c=i(17117),v=i(197684),m=i(384627),u=i(356271),E=i(29271),w=i(996410),b=i(881836),p=i(504190),D=i(492806),M=i(159961);const P=({owner:e,videoId:_,ordInfo:i})=>{const{onAddToGroupClick:P,onDeleteVideoClick:h,onEditVideoClick:O,onExportVideoClick:I,onCopyToClipboardVideoLink:g,onToggleFavorite:C,onSendReport:L,onViewVideoStatisticClick:T}=(0,w.useMenuItemsHandlers)({ownerId:e.id,videoId:_}),y=(0,p.useStore)(b.videoModalService.$canReport),A=(0,p.useStore)(b.videoModalService.$canAddToGroups),R=(0,p.useStore)(b.videoModalService.$canEditVideo),B=(0,p.useStore)(b.videoModalService.$canDeleteVideo),f=(0,p.useStore)(b.videoModalFaveService.$canAddToFavorite),V=(0,p.useStore)(b.videoModalService.$canViewStatistic),S=(0,p.useStore)(b.videoModalFaveService.$isFavorite);return(0,o.jsx)(m.DropdownActionSheet,{action:"hover",onShownChange:D.focusVideoPlayerIfExists,content:(0,o.jsxs)(o.Fragment,{children:[V&&(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:T,before:(0,o.jsx)(t.Icon20StatisticsOutline,{}),children:E.getLang("video_statistics")}),R&&(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:O,before:(0,o.jsx)(d.Icon20WriteOutline,{}),children:E.getLang("video_edit")}),(0,o.jsx)(m.DropdownActionSheet.Item,{before:(0,o.jsx)(l.Icon20DownloadOutline,{}),children:E.getLang("video_download_video_from_modal")}),f&&(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:C,before:(0,o.jsx)(s.Icon20BookmarkOutline,{}),children:S?E.getLang("global_remove_from_bookmarks"):E.getLang("global_add_to_bookmarks")}),A&&(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:P,before:(0,o.jsx)(a.Icon20Add,{}),children:E.getLang("video_add_to_group")}),(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:g,before:(0,o.jsx)(n.Icon20CopyOutline,{}),children:E.getLang("video_copy_video_link")}),(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:I,before:(0,o.jsx)(l.Icon20DownloadOutline,{}),children:E.getLang("video_export_action")}),B&&(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:h,before:(0,o.jsx)(r.Icon20DeleteOutline,{}),children:E.getLang("video_delete_button")}),y&&(0,o.jsx)(m.DropdownActionSheet.Item,{onClick:L,before:(0,o.jsx)(c.Icon20ReportOutline,{}),children:E.getLang("global_report_spam")}),(0,o.jsx)(M.OrdTokenActionsMenu,{ordInfo:i})]}),children:(0,o.jsx)(u.PostFooter.Action,{mode:"secondary",icon:(0,o.jsx)(v.Icon28MoreHorizontal,{width:24,height:24}),children:E.getLang("video_more_button_in_video_modal")})})}},159961:(e,_,i)=>{i.d(_,{OrdTokenActionsMenu:()=>n});var o=i(785893),t=i(728405),d=i(650163),l=i(384627),s=i(29271),a=i(191895);const n=({ordInfo:e})=>{var _;return(null==(_=e)?void 0:_.ordUrl)&&0!==e.ordUrl.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.DropdownActionSheet.Item,{target:"_blank",href:e.ordUrl,before:(0,o.jsx)(t.Icon20InfoCircleOutline,{}),children:s.getLang("video_clip_ord_advertiser_info")}),(0,o.jsx)(l.DropdownActionSheet.Item,{onClick:()=>(0,a.handleCopyToClipboardErId)(e.erId),before:(0,o.jsx)(d.Icon20CopyOutline,{}),children:`ERID: ${e.erId}`})]}):null}},543886:(e,_,i)=>{i.d(_,{MoreActionsMenu:()=>o.MoreActionsMenu});var o=i(859494)},855402:(e,_,i)=>{i.d(_,{Actions:()=>o.Actions});var o=i(612173)},254487:(e,_,i)=>{i.d(_,{Owner:()=>D});var o=i(785893),t=i(667294),d=i(29271),l=i(521829),s=i(504190),a=i(881836),n=i(54929),r=i(514995),c=i(832550),v=i(629932),m=i(86894),u=i(385235),E=i(659397),w=i(298956),b=i(996410),p=i(190026);const D=({owner:e,secondaryOwner:_,featuredArtists:i,otherArtists:D})=>{var M,P;const{onSubscribeVideoAuthor:h}=(0,b.useMenuItemsHandlers)({ownerId:null!=(P=null==(M=_)?void 0:M.id)?P:e.id}),O=_||e,I=(0,s.useStore)(a.videoModalSubscribeService.$canSubscribe),g=(0,s.useStore)(a.videoModalSubscribeService.$isSubscribe),{mode:C,children:L,icon:T}=g?{children:d.getLang("video_view_subscribed_msg"),mode:"secondary",icon:(0,o.jsx)(l.Icon24Done,{})}:{children:d.getLang("video_view_subscribe_to_author"),mode:"primary",icon:null};return(0,o.jsx)(n.SimpleCell,{hasActive:!1,hasHover:!1,before:(0,o.jsx)(r.AvatarRich,{size:48,src:O.photo_50,href:O.href||void 0,isNFT:O.is_nft||!1}),after:I&&(0,o.jsx)(c.Button,{className:p.default.subscriptionButton,mode:C,size:"m",before:T,onClick:h,children:L}),badgeAfterTitle:(0,o.jsx)(w.VideoModalVerifiedLabel,{owner:O}),subtitle:O.formattedSubscribersText,children:(0,o.jsxs)(v.TextClamp,{TypographyComponent:m.Headline,weight:"3",lines:1,children:[(0,o.jsx)(u.Link,{href:O.href||void 0,className:(0,E.classNames)(!i.length&&p.default.ownerName),Component:O.href?"a":void 0,children:(0,E.decodeHTMLEntities)(O.name)}),D.map((({id:e,name:_,href:i})=>(0,o.jsxs)(t.Fragment,{children:[", ",(0,o.jsx)(u.Link,{href:i,children:_})]},e))),i.length>0&&d.getLang("video_feature_relation_text"),i.map((({id:e,name:_,href:i},d)=>(0,o.jsxs)(t.Fragment,{children:[!!d&&", ",(0,o.jsx)(u.Link,{href:i,className:p.default.featured,children:_})]},e)))]})})}},379339:(e,_,i)=>{i.d(_,{Owner:()=>o.Owner});var o=i(254487)},199031:(e,_,i)=>{i.d(_,{VideoModalInfoActions:()=>s});var o=i(785893),t=i(855402),d=i(379339),l=i(632299);const s=({video:e})=>(0,o.jsxs)("div",{className:l.default.container,children:[(0,o.jsx)(d.Owner,{owner:e.owner,secondaryOwner:e.secondaryOwner,featuredArtists:e.featuredArtists,otherArtists:e.otherArtists}),(0,o.jsx)(t.Actions,{video:e})]})},114198:(e,_,i)=>{i.d(_,{VideoModalInfoActions:()=>o.VideoModalInfoActions});var o=i(199031)},719985:(e,_,i)=>{i.d(_,{VideoModalInfoDescription:()=>v});var o=i(785893),t=i(86894),d=i(545637),l=i(480442),s=i(629932),a=i(385235),n=i(29271),r=i(12247),c=i(491417);const v=({video:e,description:_})=>{const{onMoreButtonClick:i,onDescriptionClick:v,descriptionWrapper:m,isOverflowed:u,isExpanded:E}=(0,r.useDescriptionExpanded)({video:e,description:_,wrapperClassName:c.default.textWrapper}),w=!u||!E;return(0,o.jsx)(d.Div,{mode:"horizontal",spacing:0,children:(0,o.jsx)(l.Card,{mode:"tint",children:(0,o.jsx)(t.Tappable,{onClick:v,hasActive:w,hasHover:w,children:(0,o.jsxs)(d.Div,{children:[(0,o.jsx)(t.Footnote,{weight:"3",children:(0,o.jsx)(s.TextClamp,{lines:E?0:3,children:m})}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.Spacing,{size:8}),(0,o.jsx)(a.Link,{onClick:i,children:E?n.getLang("video_collapse_extended_description"):n.getLang("video_show_full_video_description")})]})]})})})})}},861511:(e,_,i)=>{i.d(_,{VideoModalInfoDescriptionWrapper:()=>d});var o=i(785893),t=i(719985);const d=({video:e,description:_})=>_?(0,o.jsx)(t.VideoModalInfoDescription,{video:e,description:_}):null},12247:(e,_,i)=>{i.d(_,{useDescriptionExpanded:()=>o.useDescriptionExpanded});var o=i(178761)},178761:(e,_,i)=>{i.d(_,{useDescriptionExpanded:()=>r});var o=i(434788),t=i(785893),d=i(667294),l=i(659397),s=i(241525),a=i(139654);const n=(e,_,i)=>`<a href="${i}" onclick="Videoview.timeTagClick(${_}, 'description', event);">${e}</a>`,r=({video:e,description:_,wrapperClassName:i})=>{const[r,c]=(0,d.useState)(!1),[v,m]=(0,d.useState)(!0),u=(0,d.createRef)(),E=(0,o._)({},e,{owner_id:e.owner.id}),w=(0,s.replaceTimeTags)({video:E,getDescriptionTimeTagWrap:n,text:(0,a.formatTextWithLinks)(_)}),b=(0,d.useMemo)((()=>(0,t.jsx)("div",{className:i,ref:u,dangerouslySetInnerHTML:{__html:(0,l.decodeHTMLEntities)(w)}})),[w]);return(0,d.useEffect)((()=>{if(u.current){const{scrollWidth:e,scrollHeight:_,offsetWidth:i,offsetHeight:o}=u.current;m(e>i||_>o)}}),[]),{onMoreButtonClick:e=>{e.stopPropagation(),c((e=>!e))},onDescriptionClick:()=>{v&&!r&&c(!0)},descriptionWrapper:b,isOverflowed:v,isExpanded:r}}},816623:(e,_,i)=>{i.d(_,{VideoModalInfoDescriptionWrapper:()=>o.VideoModalInfoDescriptionWrapper});var o=i(861511)},701047:(e,_,i)=>{i.d(_,{VideoModalInfoHeaderAside:()=>l});var o=i(785893),t=i(545637),d=i(692634);const l=e=>(0,o.jsx)(t.Div,{children:e.moderationVideoInfo&&(0,o.jsx)(d.VideoModalModerationInfo,{moderationVideoInfo:e.moderationVideoInfo})})},692634:(e,_,i)=>{i.d(_,{VideoModalModerationInfo:()=>u});var o=i(785893),t=i(650163),d=i(771687),l=i(622284),s=i(545637),a=i(331533),n=i(832550),r=i(659397),c=i(222325),v=i(425227),m=i(29271);const u=({moderationVideoInfo:e})=>{const[_]=e;return(0,o.jsx)(l.TextTooltip,{placement:"left",text:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.Div,{mode:"vertical",children:(0,o.jsx)(a.InnerHTML,{children:_.join("<br />")})}),(0,o.jsx)(n.Button,{before:(0,o.jsx)(t.Icon20CopyOutline,{}),onClick:()=>{(0,r.copyTextToClipboard)(_.join("\r\n")),(0,c.showSnackbar)({text:m.getLang("video_moderation_snackbar_copied"),before:{content:(0,v.getIcon20CheckAlt)().icon}})},children:m.getLang("video_moderation_info_copy")})]}),children:(0,o.jsx)(d.Icon24InfoCircleOutline,{})})}},964113:(e,_,i)=>{i.d(_,{VideoModalInfoHeaderAside:()=>o.VideoModalInfoHeaderAside});var o=i(701047);i(692634)},125617:(e,_,i)=>{i.d(_,{VideoModalInfoTitle:()=>E});var o=i(785893),t=i(834585),d=i(659397),l=i(545637),s=i(399639),a=i(629932),n=i(622284),r=i(86894),c=i(385235),v=i(29271),m=i(168755),u=i(298956);const E=({title:e,views:_,date:i,formattedViewsText:E,formattedDateText:w,trendsPosition:b,trendsLink:p,isArchivalContent:D,secondaryOwner:M,owner:P,ordInfo:h})=>{var O;return(0,o.jsxs)(l.Div,{children:[(0,o.jsx)(s.Header,{size:"large",multiline:!0,children:(0,o.jsx)(a.TextClamp,{lines:2,children:(0,d.decodeHTMLEntities)(e)})}),(0,o.jsx)(l.Div,{mode:"horizontal",spacing:0,children:(0,o.jsxs)("div",{className:m.default.container,children:[(0,o.jsx)(n.TextTooltip,{placement:"bottom-start",text:`${_} · ${i}`,appearance:"inversion",children:(0,o.jsx)("div",{children:(0,o.jsxs)(r.Subhead,{className:m.default.info,children:[E," · ",w,M&&P&&(0,o.jsxs)(o.Fragment,{children:[" · ",(0,o.jsxs)(c.Link,{href:P.href||void 0,Component:P.href?void 0:"span",children:[v.getLang("global_by"),(0,d.decodeHTMLEntities)(P.ownerFullNameGenitive),(0,o.jsx)(u.VideoModalVerifiedLabel,{owner:P})]})]})]})})}),D&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:m.default.separator,children:"·"}),(0,o.jsx)(n.TextTooltip,{placement:"bottom",text:v.getLang("video_layer_archival_content_hint"),appearance:"inversion",children:(0,o.jsxs)("div",{className:m.default.wrapper,children:[(0,o.jsx)(t.Icon16ArchiveOutline,{className:m.default.icon}),(0,o.jsx)(r.Subhead,{className:m.default.archive,children:v.getLang("video_layer_archival_content")})]})})]}),b>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:m.default.separator,children:"·"}),(0,o.jsx)(c.Link,{href:p,children:(0,o.jsx)(r.Subhead,{children:v.getLang("video_N_position_in_trends_tab",b)})})]}),(null==(O=h)?void 0:O.hasOrdLabel)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:m.default.separator,children:"·"}),(0,o.jsx)(n.TextTooltip,{maxWidth:175,placement:"bottom",text:v.getLang("video_layer_ord_hint"),appearance:"inversion",children:(0,o.jsx)("div",{children:(0,o.jsx)(r.Subhead,{children:v.getLang("video_ord_title")})})})]})]})})]})}},167276:(e,_,i)=>{i.d(_,{VideoModalInfoTitle:()=>o.VideoModalInfoTitle});var o=i(125617)},483963:(e,_,i)=>{i.d(_,{VideoModalVerifiedLabel:()=>s});var o=i(785893),t=i(508249),d=i(471828),l=i(985342);const s=({owner:e})=>{if(!e.verified&&!e.ownerVerifiedByServices)return null;return(0,o.jsx)("a",{onMouseOver:_=>{const i=_.currentTarget;(0,t.pageVerifiedTip)(i,{oid:e.id,type:e.ownerVerifiedByServices?8:1,shift:d.FIRST_VERIFIED_TOOLTIP_SHIFT,forceNewTab:!0})},"data-verified-container":"true",href:"/verify",children:(0,o.jsx)(l.VerifiedIcon,{icon:e.ownerVerifiedByServices?"esia":"default"})})}},298956:(e,_,i)=>{i.d(_,{VideoModalVerifiedLabel:()=>o.VideoModalVerifiedLabel});var o=i(483963)},818285:(e,_,i)=>{i.d(_,{VideoModalInfo:()=>o.VideoModalInfo,initVideoModalInfo:()=>t.initVideoModalInfo,unmountVideoModalInfo:()=>t.unmountVideoModalInfo});var o=i(167655),t=i(410323)},410323:(e,_,i)=>{i.d(_,{initVideoModalInfo:()=>n,unmountVideoModalInfo:()=>a});var o=i(434788),t=i(785893),d=i(973935),l=i(321850),s=i(167655);const a=e=>{e&&d.unmountComponentAtNode(e)},n=(e,_)=>{e&&(d.render((0,t.jsx)(s.VideoModalInfo,(0,o._)({},_)),e),(0,l.pushNavDestroy)((()=>{a(e)})))}},531319:(e,_,i)=>{i.d(_,{PlayerContext:()=>d});var o=i(785893),t=i(869048);const d=({playlistId:e,ownerId:_})=>(0,o.jsxs)(t.AppRootProvider,{children:[(0,o.jsx)("div",{children:e}),(0,o.jsx)("div",{children:_})]})},945309:(e,_,i)=>{i.d(_,{PlayerContext:()=>o.PlayerContext,initVideoModalPlayerContext:()=>t.initVideoModalPlayerContext,unmountVideoModalPlayerContext:()=>t.unmountVideoModalPlayerContext});var o=i(531319),t=i(987107)},987107:(e,_,i)=>{i.d(_,{initVideoModalPlayerContext:()=>n,unmountVideoModalPlayerContext:()=>a});var o=i(434788),t=i(785893),d=i(531319),l=i(973935),s=i(321850);const a=e=>{e&&l.unmountComponentAtNode(e)},n=(e,_)=>{e&&(l.render((0,t.jsx)(d.PlayerContext,(0,o._)({},_)),e),(0,s.pushNavDestroy)((()=>{a(e)})))}},202933:(e,_,i)=>{i.d(_,{PlaylistPopoverWrapper:()=>v});var o=i(434788),t=i(820224),d=i(785893),l=i(81682),s=i(881836),a=i(504190),n=i(667294),r=i(996410),c=i(362246);const v=e=>{var{video:_,children:i,ownerId:v,onShownChange:m}=e,u=(0,t._)(e,["video","children","ownerId","onShownChange"]);const[E,w]=(0,n.useState)(!1),b=(0,a.useStore)(s.videoModalAlbumsService.$needsRefetch),p=(0,a.useEvent)(s.videoModalAlbumsService.setNeedsRefetch),D=(0,a.useStore)(s.videoModalAlbumsService.$addedToMy),M=(0,r.usePlaylists)(s.videoModalAlbumsService.$playlistEntityStore),P=(0,a.useStore)(s.videoModalAlbumsService.$videoAlbumsLoading),h=(0,a.useEvent)(s.videoModalAlbumsService.fetchPlaylistsEvent),O=(0,a.useEvent)(s.videoModalAlbumsService.setUpstreamPlaylists),I=(0,a.useEvent)(s.videoModalAlbumsService.setOwnerIdEvent),g=(0,a.useEvent)(s.videoModalAlbumsService.setVideoId),C=(0,a.useEvent)(s.videoModalAlbumsService.setVideoOwnerIdEvent),L=(0,a.useEvent)(s.videoModalAlbumsService.setAddedToMyEvent),T=(0,a.useEvent)(s.videoModalAlbumsService.togglePlaylistAddedEvent);return(0,n.useEffect)((()=>{I(v),g(_.id),C(_.owner.id),L(_.addedToMy),O(_.playlists)}),[]),(0,n.useEffect)((()=>{E&&b&&(h(),p(!1))}),[E,b]),(0,d.jsx)(l.PlaylistPopover,(0,o._)({playlists:M,addedToMy:null!=D&&D,videoId:_.id,videoOwnerId:_.owner.id,onToggleVideoAdded:(e,_)=>{T({album_id:_,isAdded:e})},onCreateNewPlaylist:e=>{p(!0),w(!1),(0,c.createPlaylistPopup)(e,v,_.id,_.owner.id)},playlistsLoading:null!=P&&P,onShownChange:e=>{var _;null==(_=m)||_(e),w(e)},width:252,maxWidth:252},u,{children:i}))}},191895:(e,_,i)=>{i.d(_,{handleCopyToClipboardErId:()=>s});var o=i(29271),t=i(222325),d=i(425227),l=i(659397);const s=e=>{e&&0!==e.length&&((0,l.copyTextToClipboard)(e),(0,t.showSnackbarUnsafe)({text:o.getLang("video_moderation_snackbar_copied"),before:{content:(0,d.getIcon20CheckAlt)().icon}}))}},996410:(e,_,i)=>{i.d(_,{useMenuItemsHandlers:()=>t.useMenuItemsHandlers,usePlaylists:()=>o.usePlaylists});var o=i(105807),t=i(784605)},784605:(e,_,i)=>{i.d(_,{useMenuItemsHandlers:()=>s});var o=i(881836),t=i(504190),d=i(393410),l=i(464213);const s=({ownerId:e,videoId:_})=>{const i=(0,t.useStore)(o.videoModalService.$isShortVideo),s=(0,t.useStore)(o.videoModalService.$isActiveLive),a=(0,t.useStore)(o.videoModalFaveService.$isFavorite),n=void 0!==_;return{onAddToGroupClick:()=>{n&&(0,d.handleAddToCommunity)(e,_)},onDeleteVideoClick:()=>{n&&((0,d.handleDeleteVideo)(),a&&(0,d.handleToggleFavorite)(a))},onEditVideoClick:()=>{n&&(0,d.handleEditVideo)(i,s)},onExportVideoClick:()=>{n&&(0,d.handleExportVideo)(i)},onCopyToClipboardVideoLink:()=>{n&&(0,d.handleCopyToClipboardVideoLink)(e,_)},onToggleFavorite:()=>{_&&(0,d.handleToggleFavorite)(a)},onSubscribeVideoAuthor:()=>{(0,d.handleSubscribeVideoAuthor)(e)},onSendReport:i=>{n&&(0,l.sendReportExtended)(i,{id:_,owner_id:e},{withoutCardFeedback:!0})},onToggleLike:()=>{n&&(0,d.handleToggleLike)()},onViewVideoStatisticClick:d.handleViewVideoStatistic}}},105807:(e,_,i)=>{i.d(_,{usePlaylists:()=>t});var o=i(504190);const t=e=>(0,o.useStoreMap)(e,(e=>Object.values(e).filter((e=>Boolean(e)))))},161949:(e,_,i)=>{i.r(_),i.d(_,{PlayerContext:()=>t.PlayerContext,VideoModalInfo:()=>o.VideoModalInfo,initVideoModalInfo:()=>o.initVideoModalInfo,initVideoModalPlayerContext:()=>t.initVideoModalPlayerContext,unmountVideoModalInfo:()=>o.unmountVideoModalInfo,unmountVideoModalPlayerContext:()=>t.unmountVideoModalPlayerContext});var o=i(818285),t=i(945309)},492806:(e,_,i)=>{i.d(_,{focusVideoPlayerIfExists:()=>o});const o=e=>{if(e){var _,i,o;null==(o=null==(_=window.Videoview)?void 0:_.getPlayerObject())||null==(i=o.el)||i.focus()}}},464213:(e,_,i)=>{i.d(_,{sendReport:()=>d,sendReportExtended:()=>t});var o=i(29271);const t=(e,{id:_,owner_id:i},{withoutCardFeedback:t=!1}={})=>{window.stManager.add([window.jsc("web/videoview.js")],(()=>{window.Videoview.showReportVideoForm(i,_,(()=>{t||window.stManager.add([window.jsc("web/video_showcase.js")],(()=>{var e;null==(e=window.VideoShowcase)||e.showCardFeedback(String(i),String(_),o.getLang("global_report_spam"))}))}))}))},d=(e,_)=>t(e,_)},918155:(e,_,i)=>{i.d(_,{shareVideo:()=>t});var o=i(108705);const t=(e,_)=>{window.stManager.add([window.jsc("web/likes.js")],(()=>{window.Likes.share(`video${(0,o.joinRawId)({ownerId:e,itemId:_})}`)}))}},693982:(e,_,i)=>{function o(e){const _=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!_)return null;const[,i,o]=_;return{objectType:i,objectId:o}}i.d(_,{getElementLikeButtonCount:()=>s,getElementLikeButtonIcon:()=>n,getElementLikeButtonLabel:()=>c,likePostObjectId:()=>t,likeReplyObjectId:()=>d,parseLikeObjectId:()=>o});const t=e=>`wall${e}`,d=e=>`wall_reply${e}`;var l;const s=e=>{var _;return null!=(l=null==(_=e)?void 0:_.querySelector(".like_button_count, ._like_button_count"))?l:void 0};var a;const n=e=>{var _;return null!=(a=null==(_=e)?void 0:_.querySelector(".like_button_icon, ._like_button_icon"))?a:void 0};var r;const c=e=>null!=(r=e.querySelector(".like_button_label, ._like_button_label"))?r:void 0},234514:(e,_,i)=>{i.d(_,{LikeButtonTypes:()=>o});const o={like:"like",share:"share",views:"views",comment:"comment"}},148652:(e,_,i)=>{i.d(_,{CATALOG_API_METHODS:()=>o,SEARCH_INPUT_BLUR_TIMEOUT:()=>l,SEARCH_INPUT_ID:()=>t,SEARCH_TOP_MODAL_NON_CLOSING_ATTR:()=>d});const o={GET_SEARCH_TOP:"catalog.getSearchTop",GET_SECTION:"catalog.getSection",GET_STORIES:"stories.get",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete",ADD_RECENT:"search.addRecents",CLEAR_RECENT:"search.clearRecents"},t="SearchTopInput",d="data-search-top-target",l=150},318448:(e,_,i)=>{i.d(_,{showMutePopup:()=>v});var o=i(434788),t=i(785893),d=i(735347),l=i(359639),s=i(816511),a=i(635928),n=i(832550),r=i(368372);const c=({faqLink:e,title:_,text:i,buttonText:o,onClose:c})=>(0,t.jsxs)(s.ModalBox,{children:[(0,t.jsx)(l.MessageBoxDismissButton,{onClick:c}),(0,t.jsx)(a.Placeholder,{icon:(0,t.jsx)(d.Icon56LockOutline,{className:r.default.icon}),header:_,action:(0,t.jsx)(n.Button,{mode:"primary",size:"m",onClick:()=>{window.open(e,"_blank")},children:o}),children:(0,t.jsx)("span",{className:r.default.text,children:i})})]});function v(e){(0,l.showMessageBoxModal)((_=>(0,t.jsx)(c,(0,o._)({},_,e))))}},81682:(e,_,i)=>{i.d(_,{PlaylistPopover:()=>D});var o=i(434788),t=i(820224),d=i(785893),l=i(370252),s=i(545637),a=i(369251),n=i(461629),r=i(622284),c=i(629932),v=i(832550),m=i(29271),u=i(86894),E=i(495774),w=i(789862),b=i(36193),p=i(292063);const D=e=>{var _,i,D,{addedToMy:M,playlists:P,onToggleVideoAdded:h,children:O,action:I="hover",videoId:g,videoOwnerId:C,playlistsLoading:L,onCreateNewPlaylist:T}=e,y=(0,t._)(e,["addedToMy","playlists","onToggleVideoAdded","children","action","videoId","videoOwnerId","playlistsLoading","onCreateNewPlaylist"]);return(0,d.jsx)(l.Popover,(0,o._)({action:I,content:(0,d.jsxs)(s.Div,{children:[(0,d.jsx)(a.Checkbox,{checked:M,onChange:()=>h(M,p.MY_VIDEO_ALBUM_ID),children:m.getLang("video_add_video_to_added_videos_section")}),(Boolean(null==(_=P)?void 0:_.length)||L)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Spacing,{size:8}),(0,d.jsx)(n.Separator,{}),(0,d.jsx)(u.Spacing,{size:4}),(0,d.jsx)(s.Div,{mode:"vertical",spacing:8,children:(0,d.jsx)(u.Footnote,{className:E.default.playlistSubhead,weight:"3",children:m.getLang("video_playlists")})})]}),L&&(0,d.jsx)("div",{className:E.default.scrollHeight,children:(0,d.jsx)(u.Spinner,{})}),Boolean(null==(i=P)?void 0:i.length)&&!L&&(0,d.jsx)(u.CustomScrollView,{className:E.default.scrollHeight,children:null==(D=P)?void 0:D.map((e=>(0,d.jsx)(a.Checkbox,{checked:e.containsVideo,onChange:()=>h(e.containsVideo,e.id),titleAfter:e.isPrivate&&(0,d.jsx)(r.TextTooltip,{placement:"top",appearance:"black",offsetSkidding:-56,offsetDistance:4,text:m.getLang("video_playlist_private_tooltip"),children:(0,d.jsx)(w.Icon16LockOutline,{className:E.default.playlistPrivateIcon})}),children:(0,d.jsx)(c.TextClamp,{lines:1,children:e.title})},e.id)))}),(0,d.jsx)(v.Button,{onClick:T,mode:"tertiary",appearance:"accent-invariable",stretched:!0,align:"left",before:(0,d.jsx)(b.Icon20Add,{}),children:m.getLang("video_add_video_to_new_playlist")})]})},y,{children:O}))}},536789:(e,_,i)=>{i.d(_,{GoodsRecognition:()=>D});var o=i(434788),t=i(785893),d=i(667294),l=i(86894),s=i(869048),a=i(659397),n=i(940592),r=i(504190),c=i(576851),v=i(29271),m=i(572066),u=i(478011),E=i(504867),w=i(62616),b=i(249632),p=i(40256);const D=()=>{const e=(0,r.useStore)(c.$isProcessing),_=(0,r.useStore)(c.$isVisible),i=(0,r.useStore)(c.$queueIsActive),D=(0,r.useStore)(c.$goods),M=(0,r.useStore)(c.$startProcessingData);let P=null;const h=(0,d.useRef)(null),O=e=>{e.data.length?(0,E.statlogsValueEvent)("video_goods_recognition","","success"):(0,E.statlogsValueEvent)("video_goods_recognition","","empty"),(0,c.setGoods)(e.data),(0,c.setIsProcessing)(!1)};(0,d.useEffect)((()=>(i&&(P=new w.GoodsQueue(O),P.start()),()=>{var e;null==(e=P)||e.stop()})),[i]);const I=()=>{(0,c.setVisible)(!1)},g=()=>{(0,E.statlogsValueEvent)("video_goods_recognition","","click_on_good"),(0,p.tmrTrackCustomGoal)("click_on_item")};return(0,d.useEffect)((()=>{var e;const i=document.querySelector("#mv_box");return i&&i.classList.toggle("_has_goods",_),null==(e=window.Videoview)||e.onResize(),()=>{i&&i.classList.remove("_has_goods")}}),[_]),(0,d.useEffect)((()=>{const _=_=>{const{eventType:i}=_.detail;switch(i){case u.CustomEventType.START:e||(o=_.detail.data,(0,c.setStartProcessingData)(o),(0,c.startProcessing)(o),(0,c.setVisible)(!0));break;case u.CustomEventType.HIDE_UI:I()}var o};return window.addEventListener(b.CustomEventName,_),()=>{window.removeEventListener(b.CustomEventName,_)}}),[e]),(0,d.useEffect)((()=>()=>{(0,c.destroyBlock)()}),[]),_?(0,t.jsx)(s.AppRootProvider,{sizeY:l.SizeType.REGULAR,children:(0,t.jsxs)("div",{className:n.default.wrapper,id:"GoodsRecognition",children:[(0,t.jsxs)("div",{className:n.default.header,children:[(0,t.jsx)(l.Headline,{level:"1",weight:"3",className:n.default.headerTitle,children:v.getLang("video_goods_in_frame")}),(0,t.jsx)("div",{className:n.default.headerAction,onClick:I,children:(0,t.jsx)(l.Caption,{level:"1",weight:"2",children:v.getLang("global_close")})})]}),e&&(0,t.jsxs)("div",{className:(0,a.classNames)(n.default.container,n.default.stub),children:[(0,t.jsx)(l.Spinner,{size:"regular",className:n.default.spinner}),(0,t.jsx)("div",{children:v.getLang("video_goods_recognition_in_progress")})]}),!e&&!D.length&&(0,t.jsxs)("div",{className:(0,a.classNames)(n.default.container,n.default.stub),children:[(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:v.getLang("video_goods_recognition_empty_result")}}),(0,t.jsx)("div",{className:n.default.retryBtn,onClick:()=>{if(M){var e,_,i;const t=(null==(i=window.mvcur)||null==(_=i.player)||null==(e=_.curTime)?void 0:e.call(_))||0,d=Math.floor(1e3*t);(0,c.startProcessing)((0,o._)({},M,{frame_time:d||M.frame_time})),(0,E.statlogsValueEvent)("video_goods_recognition","","retry")}},children:v.getLang("video_goods_recognition_try_again")})]}),!e&&D.length>0&&(0,t.jsx)("div",{className:(0,a.classNames)(n.default.container),ref:h,children:(0,t.jsx)(l.CustomScrollView,{boxRef:h,autoHideScrollbar:!0,children:D.map(((e,_)=>(0,t.jsxs)("div",{className:n.default.goodWrapper,children:[(0,t.jsx)(l.Headline,{level:"2",weight:"3",className:n.default.goodTitle,children:(0,v.langReplace)(v.getLang("video_goods_recognition_order"),{order:String(_+1)})}),(0,t.jsx)(l.HorizontalScroll,{arrowSize:"l",showArrows:"always",getScrollToLeft:m.handleScrollToLeft,getScrollToRight:m.handleScrollToRight,children:(0,t.jsxs)("div",{className:n.default.goodItems,children:[(0,t.jsx)("div",{className:n.default.goodItemsGap}),e.items.map(((e,_)=>(0,t.jsxs)("a",{onClick:g,className:n.default.goodLink,href:e.store_url,target:"_blank",children:[(0,t.jsx)("div",{className:n.default.goodPhoto,children:e.image_url&&(0,t.jsx)("img",{className:n.default.goodPhotoImg,src:e.image_url,alt:""})}),(0,t.jsx)("div",{className:n.default.goodLinkTitle,children:e.good_name}),(0,t.jsx)("div",{className:n.default.goodLinkDomain,children:e.store_name})]},_))),(0,t.jsx)("div",{className:n.default.goodItemsGap})]})})]},_)))})})]})}):null}},249632:(e,_,i)=>{i.d(_,{CARD_GAP:()=>t,CARD_WIDTH:()=>o,CustomEventName:()=>d});const o=128,t=12,d="VideoCustomEvent/GoodRecognition"},667804:(e,_,i)=>{i.d(_,{GoodsRecognition:()=>o.GoodsRecognition});var o=i(536789)},58246:(e,_,i)=>{i.d(_,{destroyGoodsBlock:()=>c,hideGoodsBlock:()=>r,renderGoodsRecognitionPanel:()=>n});var o=i(785893),t=i(973935),d=i(667804),l=i(478011),s=i(249632);const a="mv_goods_recognition",n=()=>{const e=document.getElementById(a);e&&t.render((0,o.jsx)(d.GoodsRecognition,{}),e)},r=()=>{window.dispatchEvent(new CustomEvent(s.CustomEventName,{detail:{eventType:l.CustomEventType.HIDE_UI}}))},c=()=>{const e=document.getElementById(a);e&&t.unmountComponentAtNode(e)}},62616:(e,_,i)=>{i.d(_,{GoodsQueue:()=>l});var o=i(599809),t=i(321850),d=i(404145);class l{getUrl(e){return`${this.base}?act=${e}&key=${this.key}&id=${this.userId}&ts=${this.ts}&wait=${this.WAIT_TIMEOUT}`}_subscribe(){this.unsubscribe=()=>{this._unsubscribe(),this.unsubscribe=d.noop};const e=this.getUrl("a_check");return fetch(e).then((e=>e.json())).catch((()=>{this.statusActive=!1}))}_unsubscribe(){const e=this.getUrl("a_release");fetch(e).then((e=>e.json()))}start(){this.statusActive||((0,o.api)("queue.subscribe",{queue_ids:this.QUEUE_NAME}).then((({base_url:e,queues:_})=>{const i=_&&_[0];if(!i)throw new Error("No queue to subscribe");return this.base=e,this.key=i.key,this.ts=i.timestamp,this.subscribe(),!0})).catch((()=>{this.statusActive=!1})),this.statusActive=!0)}stop(){this.destroy()}destroy(){this.statusActive=!1,this.unsubscribe()}subscribe(){this._subscribe().then((e=>{var _;if(this.statusActive){if(!(null==(_=e)?void 0:_.ts))throw new Error("No next ts");this.ts=e.ts,this.subscribe(),this.processEvents(e.events)}}))}processEvents(e){this.statusActive&&e&&e.forEach((e=>{this.processEvent(e)}))}constructor(e){this.userId=window.vk.id,this.WAIT_TIMEOUT=45,this.QUEUE_NAME=`videogoodsrecognition_${this.userId}`,this.unsubscribe=d.noop,this.processEvent=d.noop,this.processEvent=e;const _=()=>{window.removeEventListener("beforeunload",_),this.destroy()};window.addEventListener("beforeunload",_),(0,t.pushNavDestroy)((()=>{window.removeEventListener("beforeunload",_),_()}))}}},576851:(e,_,i)=>{i.d(_,{$goods:()=>u,$isProcessing:()=>r,$isVisible:()=>v,$queueIsActive:()=>E,$startProcessingData:()=>a,destroyBlock:()=>w,setGoods:()=>m,setIsProcessing:()=>n,setStartProcessingData:()=>s,setVisible:()=>c,startProcessing:()=>l});var o=i(798116),t=i(599809);const d=(0,o.createDomain)("GoodsRecognition"),l=d.createEvent("startProcessing"),s=d.createEvent("setFrameData"),a=(0,o.restore)(s,null),n=d.createEvent("setIsProcessing"),r=(0,o.restore)(n,!1),c=d.createEvent("setVisible"),v=(0,o.restore)(c,!1),m=d.createEvent("setGoods"),u=(0,o.restore)(m,[]),E=d.createStore(!0,{name:"queueIsActive"}),w=d.createEvent("destroyBlock");d.onCreateStore((e=>{e.reset([w])}));const b=d.createEffect((e=>(0,t.api)("video.findGoodsInFrameAsync",e)));(0,o.sample)({clock:l,target:b}),(0,o.sample)({clock:l,fn:()=>!0,target:r}),(0,o.sample)({clock:b.doneData,fn:e=>!!e,target:E})},478011:(e,_,i)=>{var o;i.d(_,{CustomEventType:()=>o}),function(e){e.START="START",e.HIDE_UI="HIDE_UI"}(o||(o={}))},572066:(e,_,i)=>{i.d(_,{handleScrollToLeft:()=>t,handleScrollToRight:()=>d});var o=i(249632);const t=e=>e-2*(o.CARD_WIDTH+o.CARD_GAP),d=e=>e+2*(o.CARD_WIDTH+o.CARD_GAP)},203252:(e,_,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 12 12"><path d="M6.75 1.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"/></svg>',name:"add_12"}}i.d(_,{getIcon12Add:()=>o})},513093:(e,_,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="M3.72 5.22a.75.75 0 0 1 1.06 0l2.5 2.5a.75.75 0 1 1-1.06 1.06L5 7.56v1.9c0 .84 0 1.44.04 1.9.04.45.1.71.2.91.22.43.57.77.99.99.2.1.46.17.91.2.46.04 1.06.04 1.91.04h1.2a.75.75 0 0 1 0 1.5H9.02c-.82 0-1.47 0-2-.04a3.85 3.85 0 0 1-1.47-.37 3.75 3.75 0 0 1-1.64-1.64 3.84 3.84 0 0 1-.37-1.47c-.04-.53-.04-1.18-.04-2V7.56L2.28 8.78a.75.75 0 1 1-1.06-1.06zm9.14 1.32c-.46-.04-1.06-.04-1.91-.04h-1.2a.75.75 0 1 1 0-1.5h1.23c.81 0 1.47 0 2 .04.55.05 1.03.14 1.47.37a3.75 3.75 0 0 1 1.64 1.64c.23.44.32.92.37 1.47.04.53.04 1.19.04 2v1.92l1.22-1.22a.75.75 0 0 1 1.06 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0l-2.5-2.5a.75.75 0 0 1 1.06-1.06L15 12.44v-1.89c0-.85 0-1.45-.04-1.9a2.4 2.4 0 0 0-.2-.92 2.25 2.25 0 0 0-.99-.98 2.4 2.4 0 0 0-.91-.21z" clip-rule="evenodd"/></svg>',name:"arrow_2_squarepath_outline_20"}}i.d(_,{getIcon20Arrow2SquarepathOutline:()=>o})},103915:(e,_,i)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M9.76 4.75c0-.2.24-.32.4-.2l6.75 5.25c.13.1.13.3 0 .4l-6.75 5.25a.25.25 0 0 1-.4-.2V12.1a.75.75 0 0 0-.75-.75c-2.46 0-4.34.92-5.83 2.2a6.97 6.97 0 0 1 1.57-3.43 7.16 7.16 0 0 1 4.38-2.22.75.75 0 0 0 .63-.75zm1.33-1.38a1.75 1.75 0 0 0-2.83 1.38v1.8a8.42 8.42 0 0 0-4.64 2.6c-1.35 1.53-2.12 3.67-2.12 6.44a.75.75 0 0 0 1.33.47c1.36-1.65 3.06-2.94 5.43-3.16v2.35a1.75 1.75 0 0 0 2.82 1.38l6.75-5.25c.9-.7.9-2.06 0-2.76z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"share_outline_20"}}i.d(_,{getIcon20ShareOutline:()=>o})},239380:(e,_,i)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="M13.75 4c.2 0 .39.08.53.22l2.5 2.5a.75.75 0 0 1-1.06 1.06L14.5 6.56v8.69a.75.75 0 0 1-1.5 0V6.56l-1.22 1.22a.75.75 0 1 1-1.06-1.06l2.5-2.5a.75.75 0 0 1 .53-.22zm-7.5 0a.75.75 0 0 1 .75.75v8.69l1.22-1.22a.75.75 0 0 1 1.06 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0l-2.5-2.5a.75.75 0 1 1 1.06-1.06l1.22 1.22V4.75A.75.75 0 0 1 6.25 4z" clip-rule="evenodd"/></svg>',name:"sort_outline_20"}}i.d(_,{getIcon20SortOutline:()=>o})},388920:(e,_,i)=>{i.r(_),i.d(_,{ENDED:()=>d,FAILED:()=>l,STARTED:()=>t,UPCOMING:()=>s,WAITING:()=>o});const o=1,t=2,d=3,l=4,s=5},832729:(e,_,i)=>{i.d(_,{TimeCodesList:()=>c});var o=i(103915),t=i(82161),d=i(722082),l=i(795558),s=i(29271),a=i(893106),n=i(953908),r=i(504867);const c={_block:null,curTimeCodeIndex:0,tpl:'\n    <div class="TimeCodesList">\n      <div class="TimeCodesList__header">\n        <div class="TimeCodesList__headerText">%title%</div>\n        <button type="button" class="TimeCodesList__headerAction" onclick="TimeCodesList.close()">\n          %closeText%\n        </button>\n      </div>\n      <div class="TimeCodesList__container">\n        %items%\n      </div>\n    </div>',buildBlock:e=>{const _=c.buildTimeCodesList(e),i=(0,t.trim)(c.tpl),o=(0,l.se)((0,l.rs)(i,{title:s.getLang("video_n_time_codes",e.length,!0),closeText:s.getLang("video_close_time_code_list"),items:_}));return c._block=o,o},blockItemTpl:`\n<div class="TimeCodesList__item" onclick="Videoview.timeTagClick(%time%, 'list', event)">\n  <div class="TimeCodesList__itemThumbWrap">\n    <div class="TimeCodesList__itemThumb" style="\n      width: %imgWidth%px;\n      height: %imgHeight%px;\n      background-image: url(%imgSrc%);\n      background-size: %imgWidth%px %imgHeight%px;\n      background-position: %imgOffsetX%px %imgOffsetY%px">\n    </div>\n    />\n  </div>\n  <div class="TimeCodesList__itemInfo">\n    <div class="TimeCodesList__itemTitle" data-task-mouseover="Video/check_title">%text%</div>\n    <div class="TimeCodesList__itemDurationWrap">\n      <div class="TimeCodesList__itemDuration">%formattedDuration%</div>\n      <div class="TimeCodesList__itemShare" onclick="TimeCodesList.exportEpisode(%time%, event)">\n        <span class="TimeCodesList__itemShareIcon">${(0,o.getIcon20ShareOutline)().icon}</span>\n      </div>\n    </div>\n  </div>\n</div>\n  `,buildTimeCodesList(e){let _="";for(let i=0;i<e.length;i++)_+=this.buildItem(e[i]);return _},buildItem(e){const _=(0,t.trim)(c.blockItemTpl),{imgSrc:i="",imgWidth:o=128,imgHeight:s=72,imgOffsetX:a=0,imgOffsetY:n=0}=Videoview.getThumbFromTime(e.time);return(0,l.rs)(_,{text:e.text,time:e.time,imgSrc:i,imgWidth:o,imgHeight:s,imgOffsetX:a,imgOffsetY:n,formattedDuration:(0,d.formatTime)(e.time)})},getBlock(){return this._block},isShowed(){const e=document.getElementById("mv_box");return!!e&&e.classList.contains("_has_time_codes")},toggleUI:e=>{if(!c._block)return;const _=document.getElementById("mv_box");if(_){const i=_.classList.contains("_has_time_codes");_.classList.toggle("_has_time_codes",!i||e)}},close:()=>{c.toggleUI(),Videoview.onResize()},destroy:()=>{c._block&&((0,l.re)(c._block),c._block=null,c.curTimeCodeIndex=0,(0,l.removeClass)("mv_box","_has_time_codes"))},draw:(e=!1)=>{if(!c._block){const e=Videoview.getTimeCodes(),_=c.buildBlock(e);let i=document.getElementById("mv_main");i&&i.insertBefore(_,i.firstChild)}c.toggleUI(e),c.updateScrollbar()},reDraw:()=>{(0,l.re)(c._block),c._block=null;const e=Videoview.getTimeCodes(),_=c.buildBlock(e);document.getElementById("mv_main").appendChild(_),c.updateScrollbar(),c.updateCurrentTimeCode(c.curTimeCodeIndex)},updateCurrentTimeCode:e=>{const _=c._block;if(!_)return;let i;if([..._.querySelectorAll(".TimeCodesList__item")].forEach(((_,o)=>{_.classList.toggle("TimeCodesList__item--active",o===e),o===e&&(i=_,c.curTimeCodeIndex=e)})),i){const e=(0,l.geByClass1)("TimeCodesList__container",_),o=(0,l.getXY)(i)[1],t=(0,l.getSize)(i)[1],d=(0,l.getXY)(e)[1],s=(0,l.getSize)(e)[1],n=o-d;if(n<0||n+t>s){const _=e.scrollTop+o-d-s/2+t/2;e.scrollTop!==_&&(0,a.animate)(e,{scrollTop:_,transition:a.Fx.Transitions.easeOutCubic},450,c.updateScrollbar)}}},updateScrollbar(){const e=c.getBlock();if(!e)return;const _=(0,l.data)(e,"sb");if(_)_.update(!0,!0);else{const _=(0,l.geByClass1)("TimeCodesList__container",e),i=new Scrollbar(_,{prefix:"mv_tc_",nokeys:!0,padding:0});(0,l.data)(e,"sb",i)}},exportEpisode(e,_){var i;(0,r.statlogsValueEvent)("video_time_codes_share",""),null==(i=window.Videoview)||i.sendVideo(!1,e),(0,n.cancelEvent)(_)}}},108046:(e,_,i)=>{i.d(_,{default:()=>u});var o=i(652027),t=i(29271),d=i(664988),l=i(953908),s=i(82161),a=i(795558),n=i(362246),r=i(404145),c=i(318448),v=i(643897),m=i(839470);const u={resize:function(e,_){},debugLog(...e){e.unshift("video player:"),v.debugLog.apply(null,e)},fullscreen(e){var _,i;null==(_=window.Videoview)||_.onFullscreenChange(e),null==(i=window.ExternalVideo)||i.updateExternalVideoFinishBlock(),cur.storyLayer?(0,a.toggleClass)(cur.storyLayer.layerEl,"_fullscreen",e):window.mvLayer&&(0,a.toggleClass)(mvLayer,"mv_layer--fullscreen",e)},incViewCounter(e,_,i,o,t,d,l){const a={oid:e,vid:_,hash:i,curr_res:o,max_res:t,player:d||"flash",type:l,module:Videoview.getVideoModule(e+"_"+_)};if(cur.videoSearchStats){const e=parseInt(cur.videoSearchPos);isNaN(e)||(a.search_pos=e,cur.videoSearchStats.positions[e]=(0,s.extend)({viewStarted:0},cur.videoSearchStats.positions[e]),cur.videoSearchStats.positions[e].viewStarted++),cur.videoSearchStats.totalViews++}(0,n.idlizeCall)((()=>{ajax.post("al_video.php?act=inc_view_counter",a)}))},rotateVideo(e,_,i,o){ajax.post("al_video.php?act=rotate_video",{oid:e,vid:_,angle:i,hash:o})},onVideoNext(e,_,i){setTimeout((function(){{let o=0;_||e?_&&i?o=5:_&&!i?o=6:e&&(o=7):o=4,Videoview.sendPlayerStats(o,0)}if(VideoPlaylist.getBlock())e&&!_?VideoPlaylist.showVideo(e):VideoPlaylist.nextVideo();else{let _=Videoview.getVideoModule(e);cur.is_showcase&&(_+=":similar"),(0,o.showVideo)(e,"",{autoplay:1,module:_})}}),0)},fetchSuggestions(e,_){if(!e)return;const i=Videoview.getMvData(),o=i.videoRaw;ajax.post("al_video.php?act=fetch_player_suggestions",{oid:i.oid,vid:i.vid,videos:e,prepend_current:_?1:0},{onDone:function(e){const _=Videoview.getMvData();if(_&&_.videoRaw==o){_.playerSuggestions=e;const i=cur.videoInlinePlayer||window.mvcur&&mvcur.player||cur.player;i&&i.setSuggestions(e)}}})},setSuggestions(e){Videoview.playerCallback.fetchSuggestions(e)},onSuggestionsShown(e,_){const i=_?16:12;Videoview.sendPlayerStats(i,0)},onSuggestionClick(e,_,i,t){const d=t?15:11;Videoview.sendPlayerStats(d,0);let l=Videoview.getVideoModule(e);cur.is_showcase&&(l+=":similar"),(0,o.showVideo)(e,"",{autoplay:1,module:l})},onSuggestionsReplayClicked:function(){Videoview.sendPlayerStats(17,0)},onOpenInPopup(e,_,i){Videoview.sendPlayerStats(8,0);const t=cur.videoInlinePlayer&&cur.videoInlinePlayer.canExpand()?cur.videoInlinePlayer:null,d=t&&t.vars&&t.vars.short_video,l=t&&t.vars?t.vars.track_code:null,s=t&&t.vars?t.vars.module:null,n=window._videoLastInlined?(0,a.domData)((0,a.domClosest)("post",window._videoLastInlined[1]),"post-id"):null,r=window._videoLastInlined?(0,a.domData)(window._videoLastInlined[1],"playlist"):null;(0,o.showVideo)(e,_,{shortVideo:d,expandPlayer:t,playlistId:r,autoplay:1,module:s,addParams:{t:i,post_id:n,track_code:l},openInPopup:!0})},onVideoAdEvent(e,_,i,o,t,d,l,s,a){if(i){cur._vadStatQueue=cur._vadStatQueue||{},cur._vadStatQueue[e+"_"+_]=cur._vadStatQueue[e+"_"+_]||{type:"",events:[]};const d=cur._vadStatQueue[e+"_"+_];d.type=t,d.events.push(o),d.pl_type=l,d.app_version=s,d.media_provider=a,clearTimeout(cur._vadStatTimer),cur._vadStatTimer=setTimeout(Videoview.sendVideoAdStat.bind(Videoview,e,_,i),1e3)}},onVideoAdShown(e,_,i,o){ajax.post("al_video.php?act=ad_event",{oid:e,vid:_,type:i,event:o})},onVideoResolutionChanged(e,_,i,o){const t=Videoview.getMvData();t&&(t.resolution=o)},onInitialized(){Videoview.isLayerShown()&&(VideoPlaylist.toggle(!VideoPlaylist.isCollapsed()),mvcur.options&&mvcur.options.focusPlay&&("visible"==document.visibilityState?Videoview.togglePlay(!0):"hidden"==document.visibilityState&&(0,l.addEvent)(window,"focus",(function e(){Videoview.togglePlay(!0),(0,l.removeEvent)(window,"focus",e)}))));const e=window.mvcur&&mvcur.player&&mvcur.player.el||(0,a.ge)("video_player");e&&e.focus()},onVideoPlayProgress(e,_,i,o,t){const d=e+"_"+_;o<5e3&&cur.tnsStart!=d?cur.tnsStart=d:o>t/2&&cur.tnsEnd!=d&&(cur.tnsEnd=d),window.mvcur&&mvcur.adData&&(mvcur.adData.stat_link_start&&!mvcur.adData.view_complete_start&&o>=5e3&&(ajax.post(mvcur.adData.stat_link_start,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_start=!0),mvcur.adData.stat_link_half&&!mvcur.adData.view_complete_half&&o>=t/2&&(ajax.post(mvcur.adData.stat_link_half,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_half=!0),mvcur.adData.stat_link_full&&!mvcur.adData.view_complete_full&&o>=.9*t&&(ajax.post(mvcur.adData.stat_link_full,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_full=!0))},onPlayerTouchedByUser(e=!1){window._videoLastInlined&&(e||(0,a.removeClass)(window._videoLastInlined[1],"page_video_autoplayable"))},onVideoStreamPlaying(e,_){const i=Videoview.getPlayerObject();if(i&&i.isAutoplay&&i.isAutoplay())return;window.Notifier&&setTimeout((function(){Notifier.lcSend("video_start")}),0);const o=window.ap;o&&o.isPlaying()&&(o.pause(),o.pausedByVideo=Date.now())},onVideoPlayStarted(e,_,i,o,t,l,s,a){const c=Videoview.getMvData(),v=Videoview.getVideoModule(e+"_"+_),m=cur.videoInlinePlayer&&cur.videoInlinePlayer.isAutoplay();if(window.mvcur&&(mvcur.viewStartedTimestamp=Date.now(),(0,n.idlizeCall)((()=>{var e,_;null==(e=document.querySelector(".VideoLayout"))||e.classList.remove("VideoLayout--hidden"),null==(_=window.VideoShowcase)||_.updateLayout()}),3e3)),ajax.post("al_video.php?act=video_view_started",{oid:e,vid:_,hash:i,module:v,quality:c?c.resolution:0,autoplay:m?1:0,inline:-1,player_view_type:Videoview.getLayoutType(),ov_id:l,app_version:s,media_provider:a},{}),m&&cur.videoAutoplayStat&&cur.videoAutoplayStat.video==e+"_"+_&&!t&&ajax.post("al_video.php?act=autoplay_stat",{event:"start",start_time:Date.now()-cur.videoAutoplayStat.launched,preloaded:cur.videoAutoplayStat.preloaded?1:0,streaming_method:o,module:Videoview.getVideoModule()},{}),c){const e=`//${(0,r.getHostName)()}/rtrg?r=`;switch(c.l_type){case 1:(0,d.vkImage)().src=`${e}JQ6ueUeOxlSLb8IoA8ToayylOLgRkThaoFV0XVgG5qvS1x1xWrkfqAg73sYWJxwq9PXWucKtMS02J3CsGLZdmOMNj9dv9UCjDN4a3ShJZXcJFMhgfVwSoPWoxp*Y/LAFUnKz5*XBvDCQXeaygAqI*gY9gz*jWTXaOXyT2lSfIPY-`;break;case 2:(0,d.vkImage)().src=`${e}lD4OYmfC8ehvdc/8TL9AsAjM956qNaHyj20XV5mCNiTgYKQ6X*IXgwE8VbgqOf7rdbLJq7uCRBrdnFPTcUU2NjMgy8x4y6NWrYVwQMteNWh62XnLoNVZqobnsMMGm1OyTW09rhEkmiX5jqk3CI3JIIYbIbd8K7EC0ytQ4Kp4Kro-`}}-33118207==e||-78630688==e?(0,d.vkImage)().src="//rs.mail.ru/d23694799.gif":-68420747==e||-121650415==e?(0,d.vkImage)().src="//rs.mail.ru/d25688137.gif":-18479452==e&&((0,d.vkImage)().src="//rs.mail.ru/d25688115.gif")},onVideoPlayFinished(){window.mvcur&&mvcur.mvShown&&(mvcur.finished=!0,mvcur.mousemoved=!0,Videoview.moveCheck(),Videoview.logViewedPercentage()),window.mvcur&&mvcur.mvShown&&mvcur.adData&&(mvcur.adData.stat_link_start&&!mvcur.adData.view_complete_start&&(ajax.post(mvcur.adData.stat_link_start,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_start=!0),mvcur.adData.stat_link_half&&!mvcur.adData.view_complete_half&&(ajax.post(mvcur.adData.stat_link_half,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_half=!0),mvcur.adData.stat_link_full&&!mvcur.adData.view_complete_full&&(ajax.post(mvcur.adData.stat_link_full,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_full=!0))},onVideoPlayError(){Videoview.isLayerShown()&&(0,a.re)("mv_live_gifts_block"),(0,n.idlizeCall)((()=>{var e,_;null==(e=document.querySelector(".VideoLayout"))||e.classList.remove("VideoLayout--hidden"),null==(_=window.VideoShowcase)||_.updateLayout()}),3e3)},onVideoAdsLoadStarted(){},onVideoAdsPlayStarted(){(0,n.idlizeCall)((()=>{var e,_;null==(e=document.querySelector(".VideoLayout"))||e.classList.remove("VideoLayout--hidden"),null==(_=window.VideoShowcase)||_.updateLayout()}),3e3)},onVideoAdsPlayFinished(){},onViewSegmentsChanged(e,_,i,o){if(!i)return;if(cur.segmentsSaveProcess)return;const t="vsegs"+vk.id+"_"+e+"_"+_;let d=ls.get(t);d&&d.ts&&Date.now()-d.ts>864e5&&(d=null,ls.remove(t));const l=d&&d.segments?d.segments.split("|")[2]:"";if(!l||i!=l){cur.segmentsSaveProcess=!0;const l={module:Videoview.getVideoModule(e+"_"+_),vid:_,oid:e,s:i,prev_s:d?d.segments:"",prev_sig:d?d.segmentsSig:"",hash:o},a=parseInt(cur.videoSearchPos);if(isNaN(a)||(l.search_pos=a),ajax.post("al_video.php?act=a_view_segments",l,{onDone:function(e,_,i){if(e<0)return;e&&ls.set(t,{segments:e,segmentsSig:_,ts:Date.now()}),cur.segmentsSaveProcess=!1,i=(0,s.intval)(i);const o=parseInt(cur.videoSearchPos);i>0&&!isNaN(o)&&cur.videoSearchStats&&(cur.videoSearchStats.positions[o]=(0,s.extend)({viewedParts:0},cur.videoSearchStats.positions[o]),cur.videoSearchStats.positions[o].viewedParts++)}}),cur.videoSearchStats&&(cur.videoSearchStats.totalViewedTime||(cur.videoSearchStats.totalViewedTime=0),cur.videoSearchStats.totalViewedTime+=mvcur.mvData.vsegsSize,!isNaN(a))){cur.videoSearchStats.positions[a]=(0,s.extend)({viewedSeconds:0},cur.videoSearchStats.positions[a]);let e=cur.videoSearchStats.positions[a].viewedSeconds;e=Math.min(mvcur.mvData.duration,e+mvcur.mvData.vsegsSize),cur.videoSearchStats.positions[a].viewedSeconds=e}}},onLike(e){Videoview.like(null,!1),Videoview.sendPlayerStats(1,e)},onAdd(e,_,i){Videoview.addSmall(e,_),Videoview.sendPlayerStats(3,i)},onRemove(){Videoview.removeVideo()},onShare(e){Videoview.share(),Videoview.sendPlayerStats(2,e)},onSubscribe(e,_){Videoview.subscribeToAuthor(e,{from:"player"}),Videoview.sendPlayerStats(e?9:10,_)},onDonate(){Videoview.showDonateBox()},onAddBookmark(){const e=(0,m.partConfigEnabled)("video_modal_refactoring_of_info")?0:1;Videoview.bookmarkVideo(!1,e)},onRemoveBookmark(){Videoview.bookmarkVideo(!0)},isInLayer:e=>Videoview.isLayerShown(e),onLiveViewersCountChange(e,_,i){var o;Videoview.isLayerShown(e)&&(null==(o=window.VideoLive)||o.updateLiveViewersCount(_,i));window.Stories&&window.Stories.isLiveShown(e)&&window.Stories.updateLiveViewersCount(_)},onLiveStarted(e){Videoview.isLayerShown(e)&&Videoview.reload()},onLiveEnded(e,_){Videoview.isLayerShown(e)&&((0,a.hide)("mv_publish"),(0,a.hide)("mv_live_gifts_block"),(0,a.val)("mv_views",t.getLang("video_live_finished"))),window.Stories&&window.Stories.isLiveShown(e)&&window.Stories.activeLiveEnded(_)},onAdStat(e,_){window.Wall&&Wall.triggerAdStat(e,_)},showVideoMutePopup(e,_,i,o){(0,c.showMutePopup)({faqLink:e,title:_,text:i,buttonText:o})},openTimeCodesList(e){setTimeout((()=>{Videoview.openTimeCodesList(e)}),100)},updateCurrentTimeCode(e){Videoview.updateCurrentTimeCode(e)}}},306348:(e,_,i)=>{i.d(_,{VideoPlaylist:()=>E});var o=i(795558),t=i(652027),d=i(221780),l=i(664988),s=i(893106),a=i(953908),n=i(82161),r=i(320422),c=i(490093),v=i(513093),m=i(239380),u=i(362246);const E={VIDEOS_LIMIT:30,VIDEO_ITEM_HEIGHT:88,LOADING_PROGRESS_HEIGHT:27,lists:{},disableScrollLoading:!1,module:"",_block:null,blockTpl:`\n<div class="mv_playlist %canSubscribeClass%" id="video_mvpl">\n  <div class="mv_playlist_header clear_fix">\n    <div class="mv_playlist_header_buttons_wrap">\n      <div class="mv_playlist_header_btn %autoplayBtnClass%" onmouseover="VideoPlaylist.showAutoplayTooltip(this);" onclick="VideoPlaylist.toggleAutoplay(this)">\n        ${(0,v.getIcon20Arrow2SquarepathOutline)().icon}\n      </div>\n      <div class="mv_playlist_header_btn" onmouseover="VideoPlaylist.showReverseTooltip(this);" onclick="VideoPlaylist.toggleReverse(this)">\n        <div class="mv_playlist_header_reverse_icon"></div>\n        ${(0,m.getIcon20SortOutline)().icon}\n      </div>\n    </div>\n    <div class="mv_playlist_header_title">%title%</div>\n    <div class="mv_playlist_header_videos_cnt">%size%</div>\n    <a class="mv_playlist_header_subscribe_btn" onclick="VideoPlaylist.toggleSubscription();"></a>\n  </div>\n  <div class="mv_playlist_list">\n    <div class="mv_playlist_load_top"><div class="pr_bt"></div><div class="pr_bt"></div><div class="pr_bt"></div></div>\n    <div class="mv_playlist_list_cont">%items%</div>\n    <div class="mv_playlist_load_bottom %loading%"><div class="pr_bt"></div><div class="pr_bt"></div><div class="pr_bt"></div></div>\n    <div class="mv_playlist_list_subscribe_cont">\n      <div class="mv_playlist_list_subscribe_title">%playlistListSubscribeTitle%</div>\n      <a class="mv_playlist_list_subscribe_btn" onclick="VideoPlaylist.toggleSubscription();"></a>\n    </div>\n  </div>\n</div>\n  `,blockItemTpl:'\n<a class="VideoRecomsItem%itemClass%%restrictionClasses%" id="mv_playlist_video%vid%" onclick="return VideoPlaylist.showVideo(\'%vid%\', \'%hash%\', event);" data-vid="%vid%" href="%link%">\n  <div class="VideoRecomsItem__thumb_wrap">\n    %restrictionBlock%\n    <img src="%thumb%" loading="lazy" width="128"  height="72" class="VideoRecomsItem__thumb%restrictionThumbClass%" alt="%title%" onerror="VideoPlaylist.onImageError(this)"/>\n    <div class="VideoRecomsItem__duration">%duration%</div>\n  </div>\n  <div class="VideoRecomsItem__info">\n    <div class="VideoRecomsItem__title" data-task-mouseover="Video/check_title">%title%</div>\n    <div class="VideoRecomsItem__views">%views%</div>\n  </div>\n</a>\n  ',showReverseTooltip(e){(0,r.showTooltip)(e,{text:d.getLang("video_playlist_reverse_tt"),shift:[7,7,0],showdt:0,black:1})},showAutoplayTooltip(e){const _=E.isAutoplayEnabled()?d.getLang("video_playlist_autoplay_disable_tt"):d.getLang("video_playlist_autoplay_enable_tt");(0,r.showTooltip)(e,{text:_,shift:[7,7,0],showdt:0,black:1})},toggleAutoplay(e){const _=!E.isAutoplayEnabled();(0,o.toggleClass)(e,"_active",_),_?ls.remove("video_playlist_autoplay_disabled"):ls.set("video_playlist_autoplay_disabled",1),window.tooltips.destroy(e),E.showAutoplayTooltip(e)},toggleSubscription(){if(!vk.id)return(0,c.showQuickLoginBox)(),!1;const e=E.getCurList();e&&window.ajax.post("al_video.php?act=playlist_subscribe",{playlist_raw_id:e.id,subscribe:e.is_subscribed?0:1,hash:mvcur.mvData.pl_subscription_hash,ref:Videoview.getVideoModule()},{onDone:e=>{this.setIsSubscribed(e)}})},isAutoplayEnabled:()=>!ls.get("video_playlist_autoplay_disabled"),toggleReverse(e){const _=E.getCurList();if(_){if(_.reversed=!_.reversed,_.shownFirstItemIdx||_.shownLastItemIdx){const e=_.current.split("_"),i=_.list.findIndex((_=>_[0]==e[0]&&_[1]==e[1]));_.shownFirstItemIdx=Math.max(0,i-E.VIDEOS_LIMIT),_.shownLastItemIdx=Math.min(_.list.length,_.shownFirstItemIdx+2*E.VIDEOS_LIMIT)}(0,o.toggleClass)(e,"_active",_.reversed),E.updateBlockList(_.id)}},buildBlock(e,_,i){const t=E.getBlock(),l=!!t&&(0,o.data)(t,"playlist");if(l&&l.id===e&&!i)return t;E.removeBlock();const s=E.getList(e,_);if(!s||s.size<=1&&!s.force_layout)return!1;const a=(0,n.trim)(E.blockTpl),r=E.buildBlockList(s);let c="";if(cur.is_showcase&&E.isStoredPlaylistId(e)){const[_,i]=e.split("_");c=+_!==vk.id&&+i>0?1===s.list.length?"_can_subscribe_list":"_can_subscribe_header":"_can_not_subscribe"}const v=(0,o.se)((0,o.rs)(a,{items:r,title:s.title||"",size:s.size?(0,d.langNumeric)(s.size,d.curLang("video_playlist_size")):"",autoplayBtnClass:E.isAutoplayEnabled()?"_active":"",playlistListSubscribeTitle:d.getLang("video_player_playlist_ask_to_subscribe"),canSubscribeClass:c,loading:s.list.length>0?"":"loading"}));return(0,o.data)(v,"playlist",s),E._block=v,v},formatViewsCount:e=>e>999?(0,u.getFormattedBigViewsToShortCase)(e):d.getLang("video_N_views_list",e||1,!0),buildBlockListItem(e,_){if(!e)return;const i=(0,n.trim)(E.blockItemTpl);let t;if((0,l.isArray)(e)){const i=e[VideoConstants.VIDEO_ITEM_INDEX_OWNER_ID]+"_"+e[VideoConstants.VIDEO_ITEM_INDEX_ID],o=this.formatViewsCount(e[VideoConstants.VIDEO_ITEM_INDEX_VIEWS]);t={vid:i,hash:e[VideoConstants.VIDEO_ITEM_INDEX_LIST_ID]||window.Video&&Video.getDefaultListId(),link:e[VideoConstants.VIDEO_ITEM_INDEX_LINK]||`/video${i}`,thumb:e[VideoConstants.VIDEO_ITEM_INDEX_SMALL_THUMB],title:e[VideoConstants.VIDEO_ITEM_INDEX_TITLE],duration:e[VideoConstants.VIDEO_ITEM_INDEX_DURATION],views:o,itemClass:i===_?" VideoRecomsItem--active":"",restrictionBlock:e[VideoConstants.VIDEO_ITEM_INDEX_RESTRICTION_BLOCK],restrictionClasses:e[VideoConstants.VIDEO_ITEM_INDEX_RESTRICTION_CLASSES]}}else t=(0,n.extend)({link:`/video${e.vid}`},e,{itemClass:e.vid===_?" VideoRecomsItem--active":""});return t.hasOwnProperty("restrictionBlock")&&t.restrictionBlock?(t.itemClass+=" VideoRestriction--onlyIcon",t.restrictionThumbClass=" VideoRestriction__thumb"):(t.restrictionBlock="",t.restrictionClasses="",t.restrictionThumbClass=""),(0,o.rs)(i,t)},buildBlockList(e){let _,i,o;e.shownFirstItemIdx||e.shownLastItemIdx?(_=function(){return e.reversed?e.shownLastItemIdx-1:e.shownFirstItemIdx},i=function(_){return e.reversed?_>=e.shownFirstItemIdx:_<e.shownLastItemIdx},o=function(_){return e.reversed?--_:++_}):(_=function(){return e.reversed?e.list.length-1:0},i=function(_){return e.reversed?_>=0:_<e.list.length},o=function(_){return e.reversed?--_:++_});let t="";for(let d=_();i(d);d=o(d))t+=this.buildBlockListItem(e.list[d],e.current);return t},processScroll(){var e,_,i;if(E.disableScrollLoading)return;const t=(0,o.geByClass1)("mv_playlist_list"),d=(0,o.geByClass1)("mv_playlist_load_top"),l=(0,o.geByClass1)("mv_playlist_load_bottom");let s;if(t.offsetHeight+Math.round(t.scrollTop)>=t.scrollHeight&&!(0,o.isVisible)(l))s=!0;else{if(0!==t.scrollTop||(0,o.isVisible)(d))return;s=!1}let a=this.getCurList();if(!a)return;const n=s&&!a.reversed||!s&&a.reversed;if(void 0!==a.shownFirstItemIdx||void 0!==a.shownLastItemIdx){if(n&&a.loadBottomIsFull&&a.shownLastItemIdx===a.size||!n&&0===a.shownFirstItemIdx)return}else if(n&&a.loadBottomIsFull||!n&&!a.loadFirstItemIdx)return;n&&!a.loadBottomIsFull&&(s?(0,o.show)(l):(0,o.show)(d));let r,c,v,[m]=this.getLoadedPlaylistData(...a.id.split("_"));if(a.list.length<m.length){const e=m.findIndex((e=>{var _,i,o,t;return(null==(_=e)?void 0:_[1])==(null==(t=a.list[a.shownFirstItemIdx])||null==(o=t.vid)||null==(i=o.split("_"))?void 0:i[1])}));a.list=m,a.shownFirstItemIdx=e,a.shownLastItemIdx=Math.min(m.length,a.shownFirstItemIdx+2*E.VIDEOS_LIMIT),a.loadFirstItemIdx=0,a.loadLastItemIdx=m.length}if(this.isStoredPlaylistId(a.id)){let e=[];if(n?(r=a.shownLastItemIdx,c=r+E.VIDEOS_LIMIT,e=m.slice(r,c),a.shownLastItemIdx+=e.length,a.shownFirstItemIdx=Math.max(0,a.shownLastItemIdx-2*E.VIDEOS_LIMIT)):(r=Math.max(0,a.shownFirstItemIdx-E.VIDEOS_LIMIT),c=Math.min(a.shownFirstItemIdx,r+E.VIDEOS_LIMIT),e=m.slice(r,c),a.shownFirstItemIdx-=e.length,a.shownLastItemIdx=Math.min(a.shownLastItemIdx,a.shownFirstItemIdx+2*E.VIDEOS_LIMIT)),e.length){if((0,o.data)(this.getBlock(),"playlist",a),this.addVideosToBlockList(e,s,a.reversed,!0),e.length>=E.VIDEOS_LIMIT)return;n?(r=a.shownLastItemIdx,c=r+E.VIDEOS_LIMIT,a.loadBottomIsFull||(s?(0,o.show)(l):(0,o.show)(d))):(r=Math.max(0,a.shownFirstItemIdx-E.VIDEOS_LIMIT),c=r+Math.min(a.shownFirstItemIdx,E.VIDEOS_LIMIT))}}if(a.id===(null==(e=window.Video)?void 0:e.VIDEO_GLOBAL_SEARCH_TYPE)&&(null==(_=window.Video)?void 0:_.isGlobalSearchMode())&&(null==(i=window.Video)?void 0:i.shouldShowSearchInPlaylistWithSearch())){var u;const e=(0,o.ge)("ui_"+(null==(u=window.Video)?void 0:u.VIDEO_GLOBAL_SEARCH_TYPE)+"_load_more");var w;(0,o.isVisible)(e)?Video.showMore(null==(w=window.Video)?void 0:w.VIDEO_GLOBAL_SEARCH_TYPE,e):this.setCurPlaylistBottomAsFull()}else if(n&&cur.showcaseSection&&cur.catPlaylistId===a.id){const e=(0,o.ge)("ui_"+cur.showcaseSection+"_load_more");(0,o.isVisible)(e)?Video.showMoreShowcase(cur.showcaseSection,e):this.setCurPlaylistBottomAsFull()}else{if(!this.isStoredPlaylistId(a.id))return a.loadBottomIsFull=!0,(0,o.data)(this.getBlock(),"playlist",a),void(s?(0,o.hide)(l):(0,o.hide)(d));v=n?{playlist_raw_id:a.id,offset:Math.max(a.loadLastItemIdx,m.length),limit:8*E.VIDEOS_LIMIT}:{playlist_raw_id:a.id,offset:Math.max(0,a.loadFirstItemIdx-E.VIDEOS_LIMIT),limit:Math.min(a.loadFirstItemIdx,8*E.VIDEOS_LIMIT)},window.ajax.post("al_video.php?act=load_playlist_videos",v,{onDone:(e,_,i)=>{if(a=this.getCurList(),n){if(!e||0===e.length)return a.loadBottomIsFull=!0,(0,o.data)(this.getBlock(),"playlist",a),void(s?(0,o.hide)(l):(0,o.hide)(d));const _=a.list.map((e=>e.vid));for(let i=0;i<e.length&&_.includes(e[i].vid);i++)e.splice(i,1);m.push(...e),a.list=[...a.list,...e],a.loadLastItemIdx=i,a.shownLastItemIdx=Math.min(i,c),a.shownFirstItemIdx=Math.max(0,a.shownLastItemIdx-2*E.VIDEOS_LIMIT),a.loadBottomIsFull=i>=a.size}else m.unshift(...e),a.list=[...e,...a.list],a.loadFirstItemIdx=Math.max(_,0),a.shownFirstItemIdx=Math.max(_,r,0),a.shownLastItemIdx=Math.min(a.shownLastItemIdx,a.shownFirstItemIdx+2*E.VIDEOS_LIMIT);(0,o.data)(this.getBlock(),"playlist",a),this.addVideosToBlockList(m.slice(r,c),s,a.reversed,!0)},onFail:()=>{E.disableScrollLoading=!0,s?(0,o.hide)(l):(0,o.hide)(d),setTimeout((()=>{E.disableScrollLoading=!1}))}})}},loadPlaylistByVideo(e,_){const i=(0,o.geByClass1)("mv_playlist_load_bottom");(0,o.isVisible)(i)||((0,o.show)(i),window.ajax.post("al_video.php?act=load_playlist_videos",{playlist_raw_id:e,video_raw_id:_},{onDone:(_,t,d,l)=>{(0,o.hide)(i);let s=this.getCurList();if(s&&!_)return s.loadBottomIsFull=!0,void(0,o.data)(this.getBlock(),"playlist",s);s.size=l,s.list=_,s.loadFirstItemIdx=t,s.loadLastItemIdx=d,s.shownFirstItemIdx=Math.max(0,Math.floor(_.length/2)-E.VIDEOS_LIMIT),s.shownLastItemIdx=Math.min(_.length,l,s.shownFirstItemIdx+2*E.VIDEOS_LIMIT),s.loadBottomIsFull=s.loadLastItemIdx>=s.size,(0,o.data)(this.getBlock(),"playlist",s),this.updateBlockList(e)},onFail:()=>{(0,o.hide)(i)}}))},setCurPlaylistBottomAsFull(){let e=this.getCurList();e.loadBottomIsFull=!0,e.reversed?(0,o.hide)((0,o.geByClass1)("mv_playlist_load_top")):(0,o.hide)((0,o.geByClass1)("mv_playlist_load_bottom")),(0,o.data)(this.getBlock(),"playlist",e)},addVideosToBlockList(e,_=!0,i=!1,t=!1){var d,l;const s=E.getBlock(),a=(0,o.geByClass1)("mv_playlist_list_cont",s),n=(0,o.geByClass1)("mv_playlist_list");if(_?(0,o.hide)((0,o.geByClass1)("mv_playlist_load_bottom")):(0,o.hide)((0,o.geByClass1)("mv_playlist_load_top")),!(null==(d=e)?void 0:d.length))return;const r=(0,o.data)(s,"playlist");r.id===(null==(l=window.Video)?void 0:l.VIDEO_GLOBAL_SEARCH_TYPE)&&(r.list=[...r.list,...e],(0,o.data)(this.getBlock(),"playlist",r));let c=document.createDocumentFragment();const v=2*E.VIDEOS_LIMIT,m=[...a.children],u=m.length,w=e.length;if(_){const _=u>=v-w?u-v+w:0;if(t)for(let e=_;e<u;e++)c.appendChild(m[e]);if(i)for(let _=e.length-1;_>=0;_--)c.appendChild((0,o.se)(this.buildBlockListItem(e[_])));else for(let _=0;_<e.length;_++)c.appendChild((0,o.se)(this.buildBlockListItem(e[_])));t?(a.innerHTML="",a.appendChild(c),n.scrollTop=n.scrollTop-E.VIDEO_ITEM_HEIGHT*_):a.appendChild(c)}else{if(t){const e=u+w>=v?v-w:u;for(let _=0;_<e;_++)c.appendChild(m[_])}if(i)for(let _=0;_<e.length;_++)c.prepend((0,o.se)(this.buildBlockListItem(e[_])));else for(let _=e.length-1;_>=0;_--)c.prepend((0,o.se)(this.buildBlockListItem(e[_])));t?(a.innerHTML="",a.appendChild(c)):a.prepend(c),n.scrollTop=n.scrollTop+E.VIDEO_ITEM_HEIGHT*e.length}this.updateScrollbar()},updateBlockList(e){const _=E.getCurList();if(!_||_.id!=e)return;const i=E.getBlock(),t=(0,o.geByClass1)("mv_playlist_list_cont",i),d=E.buildBlockList(_);(0,o.val)(t,d);const l=(0,o.data)(i,"sb");l&&l.update(),E.setCurVideo(_.current),E.updateControls()},getBlock:()=>E._block,removeBlock(){const e=(0,o.data)(E._block,"sb");e&&(e.destroy(),(0,a.removeEvent)((0,o.geByClass1)("mv_playlist_list"),"scroll")),(0,o.re)(E._block),(0,o.removeData)(E._block),E._block=null,E.toggleStateClasses(),E.updateControls()},setIsSubscribed(e){const _=E.getBlock();if(!_)return;const i=(0,o.data)(_,"playlist");if(!i)return;void 0!==e&&(i.is_subscribed=!!e);let t=i.is_subscribed?d.getLang("video_player_playlist_subscribed"):d.getLang("video_player_playlist_subscribe");(0,o.geByClass1)("mv_playlist_header_subscribe_btn",_).innerHTML=t,(0,o.geByClass1)("mv_playlist_list_subscribe_btn",_).innerHTML=t,(0,o.toggleClass)(_,"_is_subscribed",i.is_subscribed)},setCurVideo(e,_){const i=E.getBlock();if(!i)return;const t=(0,o.data)(i,"playlist");if(!t)return;e&&(t.current=e);let d=(0,o.domByClass)(i,"VideoRecomsItem--active");if(e&&((0,o.removeClass)(d,"VideoRecomsItem--active"),d=(0,o.ge)("mv_playlist_video"+e),(0,o.addClass)(d,"VideoRecomsItem--active")),d){const t=(0,o.geByClass1)("mv_playlist_list",i),a=(0,o.getXY)(d)[1],n=(0,o.getSize)(d)[1],r=(0,o.getXY)(t)[1],c=(0,o.getSize)(t)[1],v=a-r;if(v<0||v+n>c){const e=t.scrollTop+a-r-c/2+n/2;t.scrollTop!=e&&(_?(0,s.animate)(t,{scrollTop:e,transition:s.Fx.Transitions.easeOutCubic},450,l):(t.scrollTop=e,l()))}(0,u.idlizeCall)((()=>{E._queueNextVideo(e)}),5e3)}function l(){const e=E.getBlock();if(e){const _=(0,o.data)(e,"sb");_&&_.update()}}},isWallPlaylistId:e=>/^wall_-?\d+$/.test(e),isPostPlaylistId:e=>/^post_-?\d+_\d+$/.test(e),isCatPlaylistId:e=>/^cat_(\d|[\w_])+$/.test(e),isStoredPlaylistId:e=>/^-?\d+_-?\d+$/.test(e),getList(e,_){var i,o,t;if(E.VIDEOS_LIMIT=2*Math.floor(window.innerHeight/E.VIDEO_ITEM_HEIGHT)||E.VIDEOS_LIMIT,this.lists[e]&&!(null==(i=cur.currentSortings)?void 0:i[`playlist_${e.split("_")[1]}`])){const i=this.lists[e].list.map((e=>e.vid));if((0,n.inArray)(_,i))return this.lists[e]}if(E.isWallPlaylistId(e))return cur.wallVideos&&cur.wallVideos[e]&&this.uniqList(cur.wallVideos[e]);if(E.isPostPlaylistId(e)||"feed_recommends"===e)return cur.pageVideosList&&cur.pageVideosList[e];if(E.isCatPlaylistId(e))return cur.catVideosList&&cur.catVideosList[e];if(e===(null==(o=window.Video)?void 0:o.VIDEO_GLOBAL_SEARCH_TYPE)&&(null==(t=window.Video)?void 0:t.shouldShowSearchInPlaylistWithSearch())){var l;const _=null==(l=window.Video)?void 0:l.getCurrentGlobalSearchKey();var s;if(_)return{id:e,title:d.getLang("video_search_result_title"),list:(null==(s=cur.globalSearchResults[_])?void 0:s.list)||[],force_layout:!0}}if(!E.isStoredPlaylistId(e))return;const[a,r]=e.split("_");let c,[v,m,u]=this.getLoadedPlaylistData(a,r);if(!v||!v.length)return;if(_)for(let e=0;e<v.length;e++){const i=v[e];i[0]+"_"+i[1]===_&&(c=e)}let w=v.length;cur.videosCount&&cur.videosCount[a]&&cur.videosCount[a][m]&&(w=cur.videosCount[a][m]);let b=0,p=v.length;const D=v.length;v.length>2*E.VIDEOS_LIMIT&&(b=Math.max(0,c-E.VIDEOS_LIMIT),p=Math.min(v.length,b+2*E.VIDEOS_LIMIT));let M=!1;window.mvcur&&void 0!==mvcur.pl_is_subscribed?M=mvcur.pl_is_subscribed:void 0!==cur.isPlaylistSubscribed&&(M=cur.isPlaylistSubscribed);let P={id:e,title:u,list:v,size:w,loadFirstItemIdx:0,loadLastItemIdx:D,shownFirstItemIdx:b,shownLastItemIdx:p,loadBottomIsFull:v.length>=w,force_layout:!(!window.mvcur||!mvcur.forcePlaylistLayout),is_subscribed:M};return void 0===c&&_&&(this.loadPlaylistByVideo(e,_),P.force_layout=!0,P.shownFirstItemIdx=0,P.loadBottomIsFull=!0),P},getLoadedPlaylistData(e,_){let i,o,t=[];return-2==_?(i="all",o=cur.playlistAddedTitle):-1==_?(i="uploaded",o=cur.playlistUploadedTitle):cur.is_showcase?(i="playlist_"+_,o=cur.playlistTitle):(i="album_"+_,o=cur.playlistTitle),(0,n.each)([cur.silentLoaded,cur.pageVideosList],((_,o)=>{if(o&&o[e]&&o[e][i])return t=o[e][i].list||o[e][i],!1})),t&&t.length||!this.lists[i]||(t=this.lists[i]),[t,i,o]},getCurList(){const e=E.getBlock();if(e)return(0,o.data)(e,"playlist")},getCurListId(){const e=E.getCurList();if(e)return e.id},addList(e){e.size=e.size||e.list.length,e.loadFirstItemIdx=0,e.loadLastItemIdx=e.list.length,e.shownFirstItemIdx=0,e.shownLastItemIdx=e.list.length,e.loadBottomIsFull=!1,this.lists[e.id]=e},extendList(e,_){if(!this.lists[e])return!1;const i=this.lists[e].list,o=[],t={};let d=0,l=0;for(;;)if(i[d]&&_[l]&&i[d].vid==_[l].vid)t[i[d].vid]||(o.push(i[d]),t[i[d].vid]=1),++d,++l;else if(i[d])t[i[d].vid]||(o.push(i[d]),t[i[d].vid]=1),++d;else{if(!_[l])break;t[_[l].vid]||(o.push(_[l]),t[_[l].vid]=1),++l}return this.lists[e].list=o,this.lists[e]},uniqList(e){const _={};for(let i,o=0;i=e.list[o];++o)_[i.vid]?e.list.splice(o,1):_[i.vid]=!0;return e},isCollapsed(){const e=E.getBlock();return!(!e||!(0,o.data)(e,"collapsed"))},toggle(e,_){var i;if(void 0===e&&(e=E.isCollapsed()),(null==(i=window.mvcur)?void 0:i.minimized)&&e)return;const t=E.getBlock();return t&&E.isCollapsed()!=!e?((0,o.data)(t,"collapsed",!e),E.toggleStateClasses(),Videoview.playerOnResize(),Videoview.updateReplyFormPos(),e&&setTimeout((()=>{E.updateScrollbar(),E.setCurVideo()})),!1):void 0},toggleStateClasses(){const e=!!E.getBlock(),_=Videoview.isMinimized(),i=E.isCollapsed();(0,o.toggleClass)("mv_box","_has_playlist",e&&!_),(0,o.toggleClass)("mv_box","_hide_playlist",e&&!_&&i);let t="";e&&((0,o.toggleClass)("mv_box","_hide_recomms",!i),t=i?d.getLang("video_aria_expand_playlist"):d.getLang("video_aria_minimize_playlist")),(0,o.attr)("mv_top_pl_toggle","aria-label",t)},updateScrollbar(){const e=E.getBlock();if(!e)return;const _=(0,o.data)(e,"sb");if(_)_.update(!0,!0);else{const _=(0,o.geByClass1)("mv_playlist_list",e),i=new Scrollbar(_,{prefix:"mv_pl_",nokeys:!0,padding:0});(0,o.data)(e,"sb",i),(0,a.addEvent)((0,o.geByClass1)("mv_playlist_list"),"scroll",this.processScroll.bind(this))}},updateControls(){const e=E.getCurList();let _=E.getVideoIndex();e&&e.reversed&&(_=e.list.length-_-1),(0,o.toggle)("mv_pl_prev",!!e&&_>0),(0,o.toggle)("mv_pl_next",!!e&&_<e.list.length-1)},showVideo(e,_,i){if(i&&(0,a.checkEvent)(i))return!0;const o=E.getCurList();if(o){if(E.saveScrollPos(),mvcur.options.params&&"direct"===mvcur.options.params.module&&mvcur.mvPrevLoc&&Videoview.backLocation(),o.loaded&&o.loaded.vid===e){const _=o.loaded;Videoview.show(null,e,_.listId,(0,n.extend)(_.options,{playlistId:o.id})),Videoview.showVideo.apply(Videoview,_.hubData);const i=mvcur.preloadStatsHashes?mvcur.preloadStatsHashes[e]:"";i&&(0,u.idlizeCall)((()=>{ajax.post("al_video.php?act=a_inc_preload_stats",{stat_preload_hash:i})}))}else{const i=E.getVideoIndex(e),l=(o.reversed?o.list.length-1-i:i)<o.list.length-1?1:0;var d;(0,t.showVideo)(e,_,{autoplay:1,playlistId:o.id,addParams:{force_no_repeat:1,show_next:l},module:null!=(d=this.module)?d:Videoview.getVideoModule()})}return!1}},saveScrollPos(){const e=E.getBlock(),_=(0,o.domByClass)(e,"mv_playlist_list");(0,o.data)(e,"savedScrollTop",_.scrollTop)},restoreScrollPos(){const e=E.getBlock(),_=(0,o.domByClass)(e,"mv_playlist_list"),i=(0,o.data)(e,"savedScrollTop");i&&(_.scrollTop=i)},_queueNextVideo(e){const _=E.getCurList();if(!_)return;e=e||_.current;const i=+E._getNextVideoIndex(e);if(-1===i)return;const o=_.list[i],d=(0,l.isArray)(o)?o[VideoConstants.VIDEO_ITEM_INDEX_OWNER_ID]+"_"+o[VideoConstants.VIDEO_ITEM_INDEX_ID]:o.vid,s=(0,l.isArray)(o)?o[VideoConstants.VIDEO_ITEM_INDEX_LIST_ID]:o.hash;if(_.queued===d)return;if(_.loaded&&_.loaded.vid===d)return;_.loaded=!1,_.queued=d;const a=(_.reversed?_.list.length-i:i)<_.list.length-1?1:0;var n;(0,t.showVideo)(d,s,{hidden:function(e,i,o,t){_.queued===t&&(_.loaded={vid:t,hubData:e,options:i,listId:o||window.Video&&Video.getDefaultListId()}),_.queued=!1},module:null!=(n=this.module)?n:Videoview.getVideoModule(d),is_similar:!0,addParams:{autoplay:1,force_no_repeat:1,preload:1,show_next:a,playlist_id:_.id}})},getNextVideos(){const e=[];if(!(E.isAutoplayEnabled()||window.mvcur&&mvcur.player))return e;const _=E.getCurList();let i=E._getNextVideoIndex();if(!_||i<0)return e;for(;e.length<3&&i>=0&&i<_.list.length;){const o=_.list[i];let t;t=(0,l.isArray)(o)?{vid:o[VideoConstants.VIDEO_ITEM_INDEX_OWNER_ID]+"_"+o[VideoConstants.VIDEO_ITEM_INDEX_ID],thumb:o[VideoConstants.VIDEO_ITEM_INDEX_THUMB],views:d.getLang("video_N_views_list",o[VideoConstants.VIDEO_ITEM_INDEX_VIEWS],!0),title:o[VideoConstants.VIDEO_ITEM_INDEX_TITLE],duration:o[VideoConstants.VIDEO_ITEM_INDEX_DURATION]}:o,e.push(t),i+=_.reversed?-1:1}return e},prevVideo(){const e=E.getCurList();if(!e)return;const _=E.getVideoIndex()+(e.reversed?1:-1);if(_<0)return;const i=e.list[_],o=(0,l.isArray)(i)?i[0]+"_"+i[1]:i.vid;E.showVideo(o)},nextVideo(){const e=E.getCurList();if(!e)return;const _=E._getNextVideoIndex();if(_<0)return;const i=e.list[_],o=(0,l.isArray)(i)?i[0]+"_"+i[1]:i.vid;E.showVideo(o)},getVideoIndex(e){const _=E.getCurList();if(!_)return-1;if(e||(e=_.current),!e)return-1;let i=-1;return(0,n.each)(_.list,((_,o)=>{if(((0,l.isArray)(o)?o[0]+"_"+o[1]:o.vid)==e)return i=_,!1})),i},_getNextVideoIndex(e){const _=E.getCurList();if(!_)return-1;const i=E.getVideoIndex(e);if(i<0)return 0;const o=i+(_.reversed?-1:1);return o>=0&&o<_.list.length?o:-1},onImageError(e){e.parentNode.removeChild(e)}}},781863:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _swc_helpers_extends__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(434788),_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(795558),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(301230),_web_lib_video__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(652027),_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(221780),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(504867),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(96756),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10645),_shared_lib_parse__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(265865),_web_lib_date__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(672948),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(953908),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(584356),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(82161),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(659397),_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(725296),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(514986),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(320422),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(643897),_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(664988),_web_lib_fx__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(893106),_web_likes_helpers__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(693982),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(501087),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(839470),_video_playlist__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(306348),_video_initializer__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(397501),_player_callback__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(108046),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(84543),_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(40256),_web_reports_reports__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(965109),_web_index__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(490093),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(385376),_web_video_video_utils__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(362246),_icons_desktop__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(203252),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(854099),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(832729),_shared_groups_constants__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(137363),_web_videoplayer_lib_live_phases__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(388920),_web_likes_likes_constants__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(234514),_shared_lib_throttle__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(662273),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(936134),_web_videoview_GoodsRecognition_init__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(58246),_shared_ranges__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(931917),_web_search_SearchTop_constants__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(148652),_shared_video__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(292063),_web_VideoModal_stores__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(881836),_web_VideoModal_components_Recommendations_Recommendations_hydrate__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(939347),_web_VideoModal__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(161949);const CONTAINER_MIN_WIDTH=960,CONTAINER_SIDE_PADDING=72,CONTAINER_VERTICAL_SIDE_PADDING=15,INFO_HEADER_PADDING_DEFAULT=115,VIDEO_RATIO_DEFAULT=16/9;function getVideoModalBlocks(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,161949))}function getInteractiveVideoOnboardingChunk(){return Promise.all([__webpack_require__.e(98066),__webpack_require__.e(68592),__webpack_require__.e(98651)]).then(__webpack_require__.bind(__webpack_require__,275760))}const __WEBPACK_DEFAULT_EXPORT__={FLASH_MIN_VERSION:24,isFS:!1,playerCallback:_player_callback__WEBPACK_IMPORTED_MODULE_23__.default,onScrollHandler:null,cleanUpStoredVSegs(){if(!window.localStorage)return;const e=Date.now();for(let _ in window.localStorage)if(0===_.indexOf("vsegs")){let i=localStorage.getItem(_);i=JSON.parse(i),e-i.ts>1728e5&&localStorage.removeItem(_)}},getVideoModule(){let e=cur.currentModule?cur.currentModule():cur.module;return cur.storyLayer?"story":window.VideoUpload&&nav.objLoc.hasOwnProperty("section")&&"upload"===nav.objLoc.section?"upload":(window.Video&&Video.isInVideosList()&&(e=_shared_ranges__WEBPACK_IMPORTED_MODULE_35__.Ranges.isGroupId(cur.oid)?"community_videos":cur.oid==vk.id?"profile_own_videos":"profile_videos"),"feed"==e&&"feed_block"==_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getCurListId()&&(e="feed_block"),"feed"==e&&"videos"==cur.section&&(e="feed_videos"),"feed"==e&&"live"==cur.section&&(e="feed_live"),"feed"===e&&"videos_for_you_block"===_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.module&&(e=_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.module),e||"")},getVideoContext(){if("video_search"===Videoview.getVideoModule())return nav.objLoc.q;if("audio"===cur.module){const e=cur.audioPage&&cur.audioPage.getCurrentSection();if(e)return e;if(0===nav.strLoc.indexOf("artist/"))return"artist_page"}return""},getContextPlaylistId(){var e,_;return null==(_=window.mvcur)||null==(e=_.options)?void 0:e.playlistId},getLayoutType(){var e,_;if(null==(_=Videoview.getPlayerObject())||null==(e=_.isFullscreen)?void 0:e.call(_))return"fullscreen";const i=Videoview.getMvData();if(i){if(i.inline)return"inline";if(i.embed)return"embed"}var o,t;return Videoview.isLayerShown()?Videoview.isMinimized()?"minimized":(null==(t=window.mvcur)||null==(o=t.options)?void 0:o.playlistId)?"layer_with_playlist":"layer":cur.storyLayer&&cur.storyLayer.activeStory.isActiveLive()?"story_layer":""},sendPlayerStats(e,_){window.ajax.post("al_video.php?act=a_player_stat",{action:e,type:_})},otherVideosStats(e={}){(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_29__.idlizeCall)((()=>{window.ajax.post("al_index.php?act=a_other_videos_navigation",e)}))},removeVideo(){const e=Videoview.getMvData();e&&e.deleteFromAllAlbumsHash&&(window.ajax.post("al_video.php?act=a_delete_from_all_albums",{vid:e.vid,oid:e.oid,target_id:vk.id,hash:e.deleteFromAllAlbumsHash}),e.playlists&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(e.playlists,((e,_)=>{_.added=!1})),window.mvcur&&Videoview.initAddButton(),e.added=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_finish_add","mv_external_finish"),"selected"))},bookmarkVideo(e=!1,_=1){const i=Videoview.getMvData();if(i&&i.bookmarkHash){const o=cur.is_showcase?"showcase":"";window.bookmark(i.oid,i.vid,i.bookmarkType,i.bookmarkHash,e,i.itemAccessHash,o,"",_);const t=document.querySelector("[data-videoview-bookmarked]");t&&(e=!e,t.innerHTML=e?_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_remove_from_bookmarks"):_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_add_to_bookmarks"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(t,"videoview-bookmarked",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e)))}},bookmarkVideoFromMenu(e){const _=!!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(e,"videoview-bookmarked"));Videoview.bookmarkVideo(_);const i=Videoview.getPlayerObject();i&&i.onBookmarked&&i.onBookmarked()},getNextVideosData:()=>_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getNextVideos().slice(0,3),getSuggestionsData(){const e=Videoview.getMvData();return e&&e.playerSuggestions||[]},getMvData(){var e;return cur.mvOpts||(null==(e=window.mvcur)?void 0:e.mvData)},getPlayerObject(){var e;return(null==(e=window.mvcur)?void 0:e.player)||cur.videoInlinePlayer||document.getElementById("video_yt")&&window.VideoYoutube||null},getTimeCodes(){var e,_,i;return(null==(_=(i=Videoview).getPlayerObject)||null==(e=_.call(i))?void 0:e.getTimeCodes())||[]},setTimeCodes(e){try{const l=JSON.parse(e);var _,i,o,t,d;if(Array.isArray(l))null==(o=(t=Videoview).getPlayerObject)||null==(i=o.call(t))||null==(_=i.updateTimeCodes)||_.call(i,l),null==(d=_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList)||d.reDraw()}catch(e){}},getThumbFromTime(e){const _=Videoview.getPlayerObject();return _?_.ui.getThumbFromTime(e):{}},playerOnAdded(){const e=Videoview.getPlayerObject();e&&e.onAdded&&e.onAdded()},playerOnLiked(e){const _=Videoview.getPlayerObject();_&&_.onLiked&&_.onLiked(e)},playerOnResize(){var e,_;null==(_=window.mvcur)||null==(e=_.player)||e.resize();const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_player"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(i,"VideoPlayer--minimizedSmall",o[0]<500||o[1]<200)},playerNextTimerUpdate(){let e;mvcur.scrolledAway||mvcur.replyFormShown||"visible"!=document.visibilityState||(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)()?(e="nextTimerReset",mvcur.nextTimerStopped=!0):(e="nextTimerStart",mvcur.nextTimerStopped=!1),mvcur.playerPrevTimerFunc!=e&&(mvcur.playerPrevTimerFunc=e,clearTimeout(mvcur.playerTimerDebounce),mvcur.playerTimerDebounce=setTimeout((function(){const _=Videoview.getPlayerObject();_&&_[e]&&_[e](),mvcur.nextTimer&&mvcur.nextTimer[e]&&mvcur.nextTimer[e]()}),0))},togglePlay(e,_){var i,o,t,d;if(document.getElementById("video_yt")&&window.VideoYoutube)return void VideoYoutube.togglePlay(e);if(null==(o=window.mvcur)||null==(i=o.mvData)?void 0:i.restriction)return;const l=(null==(t=window.mvcur)?void 0:t.player)||cur.videoInlinePlayer;if((null==(d=window.mvcur)?void 0:d.player)||cur.videoInlinePlayer){l.isAutoplay()&&!_||l.togglePlay(e)}},sendVideoAdStat(e,_,i){if(!cur._vadStatQueue||!cur._vadStatQueue[e+"_"+_])return;const o=cur._vadStatQueue[e+"_"+_];o.events.length&&(window.ajax.post("al_video.php?act=ads_stat",{ev:o.events.join(","),ad_type:o.type,hash:i,oid:e,vid:_,err:o.err,pl_type:o.pl_type,app_version:o.app_version,module:Videoview.getVideoModule()}),o.events=[])},subscribeToAuthor(e,_={}){const i=Videoview.getMvData(),{authorFirstName:o="",from:t="videoview",subscribeBlockId:d="mv_subscribe_block",subscribedCssClass:l="mv_state_subscribed"}=_;if(e||!i.isClosedGroup&&!i.isFriend)s();else{let e,_;i.isFriend?(e=_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_unfollow_friend_title"),_=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.langStr)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_unfollow_friend_text"),"user",o)):(e=_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_leave_closed_group_title"),_=i.adminLevel>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_32__.GroupAdminLevel.EDITOR?_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_leave_admined_group_text"):_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_leave_closed_group_text"));const t=function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().hide(),s()};(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showFastBox)(e,_,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("box_yes"),t,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("box_no")),Videoview.playerNextTimerUpdate()}function s(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(d,l,e),window.ajax.post("al_video.php?act=a_subscribe",{author_id:i.authorId,video:i.videoRaw,hash:i.subscribeHash,unsubscribe:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(!e),from:t},{}),i.subscribed=e;const _=Videoview.getPlayerObject();_&&_.onSubscribed&&_.onSubscribed(e);const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_finish_subscribe_btn");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(o,e?_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_view_subscribed_msg"):_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_view_subscribe_to_author")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_finish_subscribe","mv_finish_subscribed",e))}e&&_shared_ranges__WEBPACK_IMPORTED_MODULE_35__.Ranges.isUserId(i.oid)&&i.authorNameGenitive&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_friend_subscribe_result_msg").replace("{user_genetive}",i.authorNameGenitive))},showDonateBox(){var e;if(!vk.id)return void(0,_web_index__WEBPACK_IMPORTED_MODULE_27__.showQuickLoginBox)();const _=Videoview.getMvData();_&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("al_video.php?act=donate_box",{video:_.videoRaw},{onDone(e,_){var i;null==(i=window.VideoDonate)||i.init(_)},params:{hideButtons:1,onDestroy:null==(e=window.VideoDonate)?void 0:e.onDestroy},stat:[window.jsc("web/video_donate.js"),window.jsc("web/tooltips.js"),"tooltips.css"]})},showNextTooltip(e){const _=7-Math.floor(e.offsetHeight/2);(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTitle)(e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_player_next_video_tt"),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,_,0],slideX:5,needLeft:1,dir:"right",appendEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_playlist_controls_icon",e)})},showPrevTooltip(e){const _=7-Math.floor(e.offsetHeight/2);(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTitle)(e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_player_prev_video_tt"),"",{className:"tt_black VideoLayerInfo__itemTooltip",shift:[-57,_,0],slideX:5,dir:"left",appendEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_playlist_controls_icon",e)})},showCloseTooltip(e,_=!1){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTitle)(e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_player_close_tt"),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,_?-36:-16,0],slideX:5,needLeft:1,dir:"right"})},showCollapseTooltip(e,_=!1){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTitle)(e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_player_collapse_tt"),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,_?-20:-15,0],slideX:5,needLeft:1,dir:"right"})},showVideoViewTooltip(e){let _="";if(mvcur.chatMode){var i;_="video_player_"+((null==(i=window.VideoChat)?void 0:i.isHidden())?"show":"hide")+"_chat_tt"}else{let e=!0;if(_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getBlock())e=_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.isCollapsed();else{const _=document.getElementById("mv_box");_.classList.contains("_has_recomms")&&(e=_.classList.contains("_hide_recomms"))}_="video_player_"+(e?"show":"hide")+"_video_list_tt"}(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTitle)(e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang(_),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,-14,0],slideX:5,needLeft:1,dir:"right"})},onStickersPurchased(e){const _=Videoview.getPlayerObject();_&&_.onStickersPurchased&&_.onStickersPurchased(e)},addPlaylist(onlyPrivate){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("al_video.php?act=add_playlist_box",{oid:mvcur.mvData.oid,vid:mvcur.mvData.vid,only_private:onlyPrivate?1:0,hash:mvcur.mvData.addedVideoHash},{onDone:function(box){box.removeButtons(),box.addButton(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("Save"),(function(btn){const title=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_video_playlist_edit_title")),privacy=Privacy.getValue("video_playlist");title&&window.ajax.post("al_video.php?act=a_save_playlist",{title,privacy,hash:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("video_playlist_edit_hash"),oid:mvcur.mvData.oid,vid:mvcur.mvData.vid},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.lockButton)(btn),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.unlockButton)(btn),onDone:function(playlistId,text,playlist,video){if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().hide(),text&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(text),mvcur.mvData.playlists.push({id:playlistId,added:!0,title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clean)(title),private:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(privacy)}),Videoview.initAddButton(),window.Video&&playlist){const playlistEvalExpr=`(${playlist})`;try{playlist=eval(playlistEvalExpr)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e,playlistEvalExpr)}if(video){const videoEvalExpr=`(${video})`;try{video=eval(videoEvalExpr)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e,videoEvalExpr)}}}}})}))},stat:[window.jsc("web/privacy.js"),"privacy.css",window.jsc("web/video.js"),"video.css"],containerClass:"VideoPlaylistPopup"}),Videoview.playerNextTimerUpdate()},updateVideo(e,_,i,o,t,d,l,s,a){window.mvcur&&mvcur.mvData.oid==e&&mvcur.mvData.vid==_&&(mvcur.mvData.title=i,mvcur.mvData.desc=o,mvcur.listId=l||mvcur.listId||Video.getDefaultListId(),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_modal_refactoring_of_info")&&(_web_VideoModal_stores__WEBPACK_IMPORTED_MODULE_38__.videoModalService.setTitleEvent(i),_web_VideoModal_stores__WEBPACK_IMPORTED_MODULE_38__.videoModalService.setDescriptionEvent(o)),Videoview.setTitle(),Videoview.setDesc(),Videoview.setTimeCodes(t),a&&Videoview.setPostponePublicationDesc(a),"published"===s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_publish"),d&&(mvcur.mvShown?Videoview.reload():Videoview.recache()))},setAddButtonStateAdded(){var e;(null==(e=window.mvcur)?void 0:e.mvShown)&&(mvcur.mvData.published=!0,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.triggerEvent)("mv_add_button","setAdded"))},initAddButton(){mvcur.addButtonTT&&(mvcur.addButtonTT.destroy(),mvcur.addButtonTT=null);const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_add_button");if(!(e&&e instanceof HTMLElement))return;const _=Videoview.getMvData(),i=_.uploaded,o=_.noPublicAdd;let t=!1;function d(o,d,s){o=i||o;const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_added_icon",e),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_plus_icon",e),c=(0,_web_likes_helpers__WEBPACK_IMPORTED_MODULE_42__.getElementLikeButtonLabel)(e);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(r,"mv_add_icon_curr",!o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(r,"mv_add_icon_down",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(n,"mv_add_icon_curr",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(e,"click",l),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(e,"setAdded",l),o)c.innerHTML=_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_added_to_my_playlist"),d&&a(!1,_.PLAYLIST_ADDED_ID);else{const _=!Videoview._isCurrentVideoPublished()&&_shared_ranges__WEBPACK_IMPORTED_MODULE_35__.Ranges.isGroupId(mvcur.mvData.oid);c.innerHTML=_?_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_add_to_group"):_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_add_to_my_playlist"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(e,"click",l),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(e,"setAdded",l)}s||t==o||Videoview.playerOnAdded(),t=o,_.added=o}function l(e){"click"==e.type&&mvcur.addButtonTT&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(e.target,mvcur.addButtonTT.getContent())||(Videoview._isCurrentVideoPublished()?o&&"click"==e.type||d(!0,!0,"setAdded"==e.type):Videoview.showAddDialog(mvcur.videoRaw))}function s(){let e=!1;return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(mvcur.mvData.playlists,(function(_,i){if(i.added)return e=!0,!1})),e}function a(e,_){let i=!0;if(e){const o=e.currentTarget||e.target;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(o,"disabled"))return;i=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.isChecked)(o),_=+o.getAttribute("data-id")}else mvcur.addButtonTT.getContent()&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("checkbox",mvcur.addButtonTT.getContent()),(function(){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(this,"id")==_)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.checkbox)(this),!1}));(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(mvcur.mvData.playlists,(function(e,o){if(o.id==_)return o.added=i,!1})),window.ajax.post("al_video.php?act=a_add_to_playlist",{oid:mvcur.mvData.oid,vid:mvcur.mvData.vid,hash:mvcur.mvData.playlistAddHash,playlist_id:_,add:+i,info:window.Video&&Video.isInCatalog()?_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getCurListId():"",module:Videoview.getVideoModule(),context:Videoview.getVideoContext()},{onFail:function(){+i&&(window.tooltips&&tooltips.destroyAll(),d(!1))}}),e&&(d(s()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e))}d(i||s(),!1,!0),mvcur.mvData.published&&(mvcur.addButtonTT=mvcur.addButtonTT||new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_24__.ElementTooltip(e,{cls:"mv_add_eltt",autoShow:!0,noHideOnClick:!0,onFirstTimeShow:function(e){let _="";(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(mvcur.mvData.playlists,(function(e,i){if(i.disabled&&!i.added&&i.id==mvcur.mvData.PLAYLIST_UPLOADED_ID)return;const o=i.private?`<span class="mv_tt_playlist_private_icon" onmouseover="showTooltip(this, { black: 1, text: '${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_album_is_private_tt")}', shift: [16, 8, 0] })"></span>`:"";_+=`\n              <div class="mv_tt_playlist">\n                <div class="checkbox ${i.added?"on":""} ${i.disabled?"disabled":""} ${i.private?"private":""}" data-id="${i.id}" onclick="checkbox(this);">${i.title}</div>\n                ${o}\n              </div>\n            `}));const i=o?_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_add_private_playlist"):_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_create_new_playlist_btn");_=`\n            <div id="mv_pl_tt">\n              <div class="mv_tt_private_only ${o?"":"unshown"}">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_only_private_video")}</div>\n              <div class="mv_tt_playlists ${o?" with_border":""}">\n                ${_}\n              </div>\n              <div class="mv_tt_add_playlist" role="link" tabindex="0" onclick="Videoview.addPlaylist(${o})">\n                <span class="mv_tt_plus_icon">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_41__.getIcon12Add)().icon}</span>${i}\n              </div>\n            </div>\n          `,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(e,_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("checkbox",e),(function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(this,"click",a)}));const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(e,"mv_tt_add_playlist");function d(e){const _=mvcur.addButtonTT.getContent();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(_,"mv_add_eltt_add_playlist_hover",e)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(t,"mouseenter",d.pbind(!0)),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(t,"mouseleave",d.pbind(!1)),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_19__.updateAriaCheckboxes)()},onDestroy:function(e){e&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("checkbox",e),(function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(this)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(e,"mv_tt_add_playlist")))}}))},showPlayer(e){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_player");_&&(e||!_.getAttribute("preventhide")||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile)&&(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.msie&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(_,{position:"static",top:0}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(_):_.style.visibility="visible")},hidePlayer(e){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_player");_&&(e||!_.getAttribute("preventhide")||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile)&&(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.msie&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(_,{position:"absolute",top:"-5000px"}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(_):_.style.visibility="hidden")},sendLike(e,_,i,o,t,d){var l;window.ajax.post("like.php",{act:e.liked?"a_do_like":"a_do_unlike",hash:e.likeHash,short_view:1,from:"videoview",object:i,info:o,ref:(null==(l=_)?void 0:l.options.module)||Videoview.getVideoModule(),track_code:(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_29__.getVideoTrackCode)()},{onDone:t,onFail:d})},init(e){window.mvcur={},window.mvLayer?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(window.mvLayer,"mv_layer--vertical",!!e.shortVideo):(window.mvLayer=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{id:"mv_layer"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(window.mvLayer,"mv_layer--vertical",!!e.shortVideo),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window.mvLayer,"mousemove",(function(){mvcur.mousemoved=!0,mvcur.blackout&&Videoview.moveCheck()})),window.mvLayerWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{id:"mv_layer_wrap",className:"fixed layer_wrap"}),window.mvLayerWrap&&window.mvLayerWrap.setAttribute(_web_search_SearchTop_constants__WEBPACK_IMPORTED_MODULE_36__.SEARCH_TOP_MODAL_NON_CLOSING_ATTR,"true"),mvLayerWrap.appendChild(window.mvLayer),document.body.appendChild(mvLayerWrap),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(window.mvLayer,{width:lastWindowWidth-(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.sbWidth)()-2+"px"})),Videoview.onScrollHandler||(Videoview.onScrollHandler=(0,_shared_lib_throttle__WEBPACK_IMPORTED_MODULE_43__.throttle)(Videoview.viewScroll,100),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(mvLayerWrap,"scroll",Videoview.onScrollHandler))},moveCheck(){mvcur.mousemoved?mvcur.blackout&&(mvcur.blackout=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(window.layerBG)?(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_18__.animate)(window.layerBG,{opacity:.8},200):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(window.layerBG,{opacity:.8})):mvcur.blackout||mvcur.finished||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(window.layerBG)||(mvcur.blackout=!0,(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_18__.animate)(window.layerBG,{opacity:.9},5e3)),mvcur.mousemoved=!1},logClick(e){const _=e.target.closest(".mv_recom_item");if(_){const e=_.getAttribute("data-id"),i=[...document.querySelectorAll(".mv_recom_item")].findIndex((_=>_.getAttribute("data-id")===e));-1!==i&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("videoview_recom_click_position","",`pos${i+1}`)}},show(e,_,i,o){var t,d;const l=window.ap;if(l&&l.isPlaying()&&(l.pause(),l.pausedByVideo=Date.now()),o&&o.autoplay&&Videoview.playerCallback.onVideoStreamPlaying(),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("bookmarks_row_type_video",e.target)){const[e,i]=_.split("_");(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"video",item_owner_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e),item_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(i),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_8__.getServerTime)()})}const s=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("video_active_live",e.target);(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("show video "+_),o.fromPreload&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_28__.saveStatlogEvents)({name:"video_showcase_web",value:Math.round(performance.now()),keys:[cur.is_showcase?window.cur.section_id:"","show_video_direct","origin"]});const a=null==(t=window.mvcur)?void 0:t.mvShown,n=null==(d=window.mvcur)?void 0:d.player;if(a&&(Videoview.isFS&&!o.shortVideo?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(`video_box_wrap${mvcur.videoRaw}`,(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__.getProgressHtml)()):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_player_box",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_progress_box"))),window.mvcur&&clearInterval(mvcur.nextTimerUpdateInterval),window.mvcur&&mvcur.minimized){if(!o.nomin)return mvcur.videoRaw=_,mvcur.options=o,mvcur.listId=i,mvcur.mvData=!1,o.videoModalPlayerContextRefactoringEnabled&&o.playlistId?Videoview.buildVideoModalPlayerContext({playlistId:o.playlistId,ownerId:cur.oid}):o.playlistId&&!s?Videoview.initPlaylistBlock(_,o.playlistId,o.catLoadMore):_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.removeBlock(),!0;o.prevLoc&&(mvcur.mvPrevLoc=o.prevLoc),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("unminimizing in show"),Videoview.unminimize(!0,!1,!0)}var r;(o.queue&&((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("pushing in videoview.show"),window.layerQueue.push(),o.queue=!1),!o.noLocChange&&nav.objLoc.z&&/^(video|clip)/.test(nav.objLoc.z)&&(cur.mvHistoryBack=cur.mvHistoryBack||1,cur.mvHistoryBack++),window.forcePauseAudio=!0,a||window.layerQueue.hide(),window.forcePauseAudio=!1,this.init(o),mvcur.showTime=Date.now(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"focus blur",Videoview.onPageFocusChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"keydown",Videoview.onKeyDown),window.mvLayer.removeEventListener("click",Videoview.logClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window,"focus blur",Videoview.onPageFocusChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(document,"keydown",Videoview.onKeyDown),window.mvLayer.addEventListener("click",Videoview.logClick),window.boxQueue.hideAll(),layers.wrapshow(mvLayerWrap,.8),layers.fullhide=Videoview.hide,mvcur.nextTimerUpdateInterval=setInterval(Videoview.playerNextTimerUpdate,1e3),setTimeout((function(){layers.wrapshow(mvLayerWrap,.8),layers.fullhide=Videoview.hide}),0),mvcur.noLocChange=0,o.ad_video&&(o.hideInfo=1,o.noLocChange=1,mvcur.noLocChange=1),mvcur.noHistory=o.noLocChange||o.noHistory,mvcur.blackInterval=setInterval(Videoview.moveCheck,18e4),mvcur.videoRaw=_,mvcur.options=o,mvcur.listId=i,mvcur.mvData=!1,mvcur.mvShown=!0,mvcur.player=n,o.prevLoc?mvcur.mvPrevLoc=o.prevLoc:setTimeout((function(){Videoview.setLocation(o.noLocChange)}),0),e&&e.pageX&&e.pageY&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(mvcur,{mvOldX:e.pageX,mvOldY:e.pageY,mvOldT:Date.now()}),a)?(Videoview.disableLayerContent(),null==(r=window.VideoChat)||r.destroy()):Videoview.buildLayerContent();if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_info","mv_info_invisible",o.hideInfo),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_warning"),cur.is_web_streaming&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_minimize_action_btn"),o.expandPlayer){mvcur.player=o.expandPlayer,o.expandPlayer=1;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("video_box_wrap",mvcur.player.el);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_player_box").appendChild(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_progress_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_player_box"),mvcur.player.onExpanded()}return o.videoModalPlayerContextRefactoringEnabled&&o.playlistId?Videoview.buildVideoModalPlayerContext({playlistId:o.playlistId,ownerId:cur.oid}):o.playlistId&&!s?Videoview.initPlaylistBlock(_,o.playlistId,o.catLoadMore,!a):_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.removeBlock(),Videoview.cleanUpStoredVSegs(),o.minimized&&setTimeout(Videoview.minimize.bind(Videoview),0),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.destroy(),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_goods_recognition")&&(0,_web_videoview_GoodsRecognition_init__WEBPACK_IMPORTED_MODULE_34__.destroyGoodsBlock)(),!1},buildLayerContent(){const e=cur.is_web_streaming?"window.VideoWebStreaming?.hide(event)":"Videoview.hide(true, true, event, true)";document.body.classList.add("Videoview"),window.mvLayer.innerHTML=`\n  <div class="mv_layer_bg" onclick="return ${e};"></div>\n  <div id="mv_container" class="scroll_fix_wrap">\n    <div id="mv_box" class="mv_box">\n      <div id="mv_approve" style="display: none;"></div>\n      <div id="mv_publish" style="display: none;"></div>\n      <div class="mv_min_header">\n        <div class="mv_min_control" onmousedown="return Videoview.hide(false, true);" role="button" tabindex="0" aria-label="${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_close")}">\n          <div class="mv_min_control_close"></div>\n        </div>\n        <div class="mv_min_control" onclick="return Videoview.unminimize();">\n          <div class="mv_min_control_max"></div>\n        </div>\n        <div class="mv_min_title" id="mv_min_title"></div>\n      </div>\n      <div id="mv_main" class="mv_main">\n        <div class="mv_pl_prev_wrap">\n          <div class="mv_playlist_controls" id="mv_pl_prev" onclick="return VideoPlaylist.prevVideo()" onmouseover="Videoview.showPrevTooltip(this)" role="button" aria-label="${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_player_prev_video_tt")}">\n            <div class="mv_playlist_controls_icon"></div>\n          </div>\n        </div>\n        <div class="mv_pl_next_wrap">\n          <div class="mv_playlist_controls" id="mv_pl_next" onclick="return VideoPlaylist.nextVideo()" onmouseover="Videoview.showNextTooltip(this)" role="button" aria-label="${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_player_next_video_tt")}">\n            <div class="mv_playlist_controls_icon"></div>\n          </div>\n        </div>\n        <div id="mv_progress_box">${(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__.getProgressHtml)()}</div>\n        <div id="mv_player_box"></div>\n        <div id="mv_goods_recognition"></div>\n        <div class="VideoLayerInfo__topControlsWrap">\n          <div id="VideoLayerInfo__topControls">\n            <div onclick="return ${e};" onmouseover="Videoview.showCloseTooltip(this)" class="mv_top_button mv_top_close" role="button" tabindex="0" aria-label="${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_close")}">\n              <div class="mv_close_icon"></div>\n            </div>\n            <div id="mv_minimize_action_btn" onclick="return Videoview.minimize(event);" onmouseover="Videoview.showCollapseTooltip(this)" class="mv_top_button mv_top_minimize">\n              <div class="mv_minimize_icon"></div>\n            </div>\n            <div onclick="return Videoview.toggleSideBlock(event);" onmouseover="Videoview.showVideoViewTooltip(this)" class="mv_top_button mv_top_toggle_sideblock" id="mv_top_pl_toggle" role="button" tabindex="0">\n              <div class="mv_toggle_sideblock_icon"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="mv_info" id="mv_info"></div>\n      <div class="mv_warning" id="mv_warning" style="display: none;"></div>\n    </div>\n  </div>\n  <div class="VerticalVideoLayerInfo__topControlsWrap">\n    <div id="VerticalVideoLayerInfo__topControls">\n      <div onclick="return Videoview.hide(false, true, event, true);" class="mv_top_button mv_top_close" onmouseover="Videoview.showCloseTooltip(this, true)" role="button" tabindex="0" aria-label="${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_close")}">\n        <div class="mv_close_icon"></div>\n      </div>\n      <div onclick="return Videoview.minimize(event);" onmouseover="Videoview.showCollapseTooltip(this, true)" class="mv_top_button mv_top_minimize">\n        <div class="mv_minimize_icon"></div>\n      </div>\n    </div>\n  </div>\n    `,Videoview.updateSize()},disableLayerContent(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_info","mv_info_disabled")},initPlaylistBlock(e,_,i,o){var t,d;if(null==(d=window.mvcur)||null==(t=d.options)?void 0:t.shortVideo)return;const l=_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getBlock(),s=!!l,a=_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.buildBlock(_,e,o);if(a&&/^wall_/.test(_)&&_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.lists[_]&&cur.wallVideos&&cur.wallVideos[_]&&(_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.extendList(_,cur.wallVideos[_].list),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.updateBlockList(_)),a){if(a!==l){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_main"),_=e.firstChild;_?e.insertBefore(a,_):e.appendChild(a),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.setIsSubscribed()}const o=_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getCurList().list.length;(window.Video&&Video.isInVideosList()&&vk.id==cur.oid||o<5)&&(s||_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggle(!1)),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.isFunction)(i)&&i(_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.updateBlockList.pbind(_)),setTimeout((function(){_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.restoreScrollPos(),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.updateScrollbar(),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.setCurVideo(e,s),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.updateControls()}),0)}_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggleStateClasses(),Videoview.updateLayoutSizes()},hide(e,_,i,o){var t,d,l,s,a;if(null==(t=document.querySelector(".VideoLayout"))||t.classList.remove("VideoLayout--hidden"),null==(d=window.VideoShowcase)||d.updateLayout(),!window.mvcur||!_&&!mvcur.mvShown)return;if(!_&&mvcur.minimized)return void(mvcur.noLocChange||!0===e||(2===e?nav.setLoc(window.hab.getLoc()):window.layerQueue.count()||Videoview.backLocation()));if(!mvcur.noHistory&&!e){mvcur.noHistory=1,mvcur.forceHistoryHide=_,window.__adsUpdate("very_lazy");const u=cur.mvHistoryBack?-cur.mvHistoryBack:-1;return cur.mvHistoryBack=0,setTimeout((function(){mvcur.mvShown||(Videoview.destroyPlayer(),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.removeBlock())}),10),history.go(u)}if(mvcur.forceHistoryHide&&(_=mvcur.forceHistoryHide,mvcur.forceHistoryHide=!1),mvcur.statusVideo){const E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_like_icon");if(E){const w=E.parentNode.tt;w&&w.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)(w.container),E.parentNode.tt&&delete E.parentNode.tt}}const n=mvcur.minimized;var r;(n&&(Videoview.unminimize(!0,!0,!0),mvcur.minimized=!1,e=!0),null==(l=window.Wall)||l.cancelEdit(!0),mvcur.replyFormShown)&&(null==(r=window.Wall)||r.hideEditReply(mvcur.post));if((mvcur.mvData.duration>60||mvcur.mvData.is_live)&&!_&&!mvcur.finished){if(Date.now()-mvcur.showTime>3e4&&!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile){const b=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showFastBox)({title:_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_are_you_sure_close_title"),bodyStyle:"padding: 20px; line-height: 160%;",onShow:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(document,"keydown",p)},onHide:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"keydown",p)}},_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_are_you_sure_close"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("box_yes"),(function(){b.hide(),Videoview.hide(e,!0)}),_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("box_no"));function p(_){_.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.ENTER&&(b.hide(),Videoview.hide(e,!0))}return!0}}if(cur.vSearchLastActionTime&&(cur.vSearchLastActionTime=Date.now()),mvcur.finished||Videoview.logViewedPercentage(),!window.forcePauseAudio){const D=window.ap;D&&!D.isPlaying()&&D.pausedByVideo&&(Date.now()-D.pausedByVideo<18e4&&D.play(),delete D.pausedByVideo),window.Notifier&&Notifier.lcSend("video_hide")}n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(mvLayerWrap):(layers.wraphide(mvLayerWrap),layers.fullhide=!1),window.tooltips&&tooltips.destroyAll(cur.mvBox),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(document.body,"Videoview"),mvcur.mvShown=!1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"keydown",Videoview.onKeyDown),window.mvLayer.removeEventListener("click",Videoview.logClick),Videoview.onScrollHandler&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(mvLayerWrap,"scroll",Videoview.onScrollHandler),Videoview.onScrollHandler=null),clearInterval(mvcur.nextTimerUpdateInterval),mvcur.addButtonTT&&(mvcur.addButtonTT.destroy(),mvcur.addButtonTT=null),null==(s=window.VideoChat)||s.destroy(),null==(a=window.ExternalVideo)||a.removeExternalVideoFinishBlock(),Videoview.destroyPlayer(),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.destroy(),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_goods_recognition")&&(0,_web_videoview_GoodsRecognition_init__WEBPACK_IMPORTED_MODULE_34__.destroyGoodsBlock)(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_player_box",""),n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(layerWrap)||((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("pop from videoview.hide"),setTimeout(window.layerQueue.pop,0)),mvcur.blackInterval&&clearInterval(mvcur.blackInterval),o&&nav.objLoc.z?(window.layerQueue.skipVideo=!0,delete nav.objLoc.webcast,delete nav.objLoc.preview,delete nav.objLoc.z,delete nav.objLoc.list,delete nav.objLoc.claim,delete nav.objLoc.screen,nav.setLoc(nav.objLoc)):o?Videoview.backLocation():mvcur.noLocChange||!0===e||(2===e?nav.setLoc(window.hab.getLoc()):Videoview.backLocation(),window.__adsUpdate("very_lazy")),window.__adsUpdate(),mvcur.bodyScrollTop=window.scrollNode.scrollTop,setTimeout((function(){if(void 0!==mvcur.bodyScrollTop&&(window.scrollNode.scrollTop=mvcur.bodyScrollTop,delete mvcur.bodyScrollTop),window.cur&&cur.promoVideo&&cur.aid&&"apps"===cur.module){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("apps_promo_video_thumb"+cur.aid);e&&(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_2__.showInlineVideo)(cur.promoVideo,"",{module:"app_promo"},null,e)}}),0);const c=document.querySelector(".js-video-modal-recommendations"),v=document.querySelector(".js-video-modal-player-context"),m=document.querySelector(".js-video-modal-info");return c&&(0,_web_VideoModal_components_Recommendations_Recommendations_hydrate__WEBPACK_IMPORTED_MODULE_39__.unmountVideoModalRecommendations)(c),v&&(0,_web_VideoModal__WEBPACK_IMPORTED_MODULE_40__.unmountVideoModalPlayerContext)(v),m&&(0,_web_VideoModal__WEBPACK_IMPORTED_MODULE_40__.unmountVideoModalInfo)(m),!1},destroyPlayer(){mvcur.player&&(mvcur.player.destroy(),delete mvcur.player),document.getElementById("video_yt")&&window.VideoYoutube&&window.VideoYoutube.destroy()},cmp(e,_){const i=e.length,o=_.length;return i<o?-1:i>o?1:e<_?-1:e>_?1:0},onKeyDown(e){if(!1===e.returnValue)return!1;if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.ESC){if(mvcur.mvEditing)Videoview.cancelInline();else if(cur.is_web_streaming){var _;null==(_=window.VideoWebStreaming)||_.hide(e)}else Videoview.hide();return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e)}},onResize(){var e,_,i;null==(e=window.ExternalVideo)||e.updateExternalVideoFinishBlock(),Videoview.updateReplyFormPos(),null==(_=window.VideoLiveGifts)||_.onLiveGiftsScroll(),Videoview.updateLayoutSizes(),null==(i=window.VideoChat)||i.onResize(),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.updateScrollbar(),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.updateScrollbar(),mvcur.mvData.is_active_live||Videoview.adaptRecomsHeight()},onPageFocusChange(){setTimeout(Videoview.playerNextTimerUpdate,10)},onFullscreenChange(e){var _;(window.Videoview.isFS=e,mvcur.chatMode)&&(null==(_=window.VideoChat)||_.onFullscreenChange(e))},updateLayoutSizes(){var e;if(mvcur.minimized)return;const _=document.documentElement,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_box"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_container"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_main"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_player_box"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_progress_box");let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_mvpl")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_chat",o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_live_preparation",o);const a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_main_info"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_reply_form"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_info_narrow_column",o),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("TimeCodesList",o),v=document.getElementById("GoodsRecognition"),m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("mv_playlist_controls",o);null==(e=i)||e.classList.toggle("_no_video_list",Videoview.isVideoListEmpty());const u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_layer"),"mv_layer--vertical");i.classList.contains("_has_recomms")&&!i.classList.contains("_hide_recomms")&&(s=r),i.classList.contains("_has_time_codes")&&(s=c),i.classList.contains("_has_goods")&&(s=v);const E=s?s.offsetWidth:0;let w=INFO_HEADER_PADDING_DEFAULT;if(a){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(d)?d:l,_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(e)[1]+e.offsetHeight,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(a)[1]+a.offsetHeight-_;i>w&&(w=i)}const b=window.innerWidth||_.clientWidth||document.body.clientWidth,p=window.innerHeight||_.clientHeight||document.body.clientHeight;let D,M=b,P="auto",h=null,O=p;if(u){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("VerticalVideoLayerInfo__scrollWrap"),_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("VerticalVideoLayerInfo__mainInfoWrap"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("VerticalVideoLayerInfo__commentsReply"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_comments_restricted_msg");if(O=p-2*CONTAINER_VERTICAL_SIDE_PADDING,D=O/16*9,h=D,M=D+310,P=O,e){let t=O;_&&(t-=_.offsetHeight),i&&(t-=i.offsetHeight),o&&(t-=o.offsetHeight),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{height:t}),mvcur.uiScroll||(mvcur.uiScroll=new uiScroll(e,{global:!0,theme:"videoview"}))}const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("VerticalVideoLayerInfo__effectsTitle");if(t){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("VerticalVideoLayerInfo__effectsList");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("VerticalVideoLayerInfo__effectWrap").length>3&&new uiScroll(_,{stopScrollPropagation:!1,theme:"thin-dark"}),new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_24__.ElementTooltip(t,{content:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("VerticalVideoLayerInfo__effectsListWrapper"),forceSide:"bottom",appendTo:e})}const d=document.querySelector(".VerticalVideoLayerInfo__underAuthorNameSubtitle"),l=document.querySelector(".VerticalVideoLayerInfo__ordSeparator");d&&l&&d.clientHeight>20&&(l.textContent="")}else{M-=2*CONTAINER_SIDE_PADDING,D=M-E,O=D/VIDEO_RATIO_DEFAULT;const e=p-(CONTAINER_SIDE_PADDING+O+w);e<0&&(O-=Math.abs(e),D=O*VIDEO_RATIO_DEFAULT,M=D+E);const _=a?a.offsetWidth+(r?r.offsetWidth:0):0;(M<CONTAINER_MIN_WIDTH||M<_)&&(M=_<CONTAINER_MIN_WIDTH?CONTAINER_MIN_WIDTH:_,D=M-E,O=D/VIDEO_RATIO_DEFAULT)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(o,{height:P,width:M}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(t,{width:h}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(d,{height:O}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(l,{height:O}),o.style.setProperty("--player-height",`${O}px`),o.style.setProperty("--player-width",`${D}px`),m.length){const e=O/2;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(m,(function(_,i){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,{paddingBottom:e,paddingTop:e})}))}if(!Videoview.isVideoListEmpty()&&!u&&n){const e=M-(r?r.offsetWidth:0),_=(e-(a?a.offsetWidth:0))/-2;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(n,{marginLeft:Math.ceil(_),width:e}),Videoview.updateReplyFormPos()}},updateSize(){if(mvcur.minimized)return!1;window.onBodyResize(),Videoview.onResize()},getPrevLoc(){mvcur.mvPrevLoc={};for(let e in nav.objLoc)"z"==e&&0==!nav.objLoc[e].indexOf(`video${mvcur.videoRaw}`)||(mvcur.mvPrevLoc[e]=nav.objLoc[e])},setLocation(e){if(mvcur.options.fromPreload){if(cur.is_showcase){const e=mvcur.listId?mvcur.listId.replace("/video",""):"";mvcur.mvPrevLoc={0:"video"+e}}else{const e=mvcur.listId.match(/([a-z]*)([0-9\-]*)/),_=parseInt(e[2]);mvcur.mvPrevLoc={0:"videos"+_},"videos"!=e[1]&&(mvcur.mvPrevLoc.section=e[1])}const e=mvcur.listId.match(/claim=([0-9]+)/);e&&e[1]&&(mvcur.mvPrevLoc.claim=e[1])}else e?mvcur.mvPrevLoc="z":Videoview.getPrevLoc();if(e)return;let _=(mvcur.options.shortVideo?"clip":"video")+mvcur.videoRaw;mvcur.listId&&(_+="/"+mvcur.listId),mvcur.options.playlistId&&(_+="/pl_"+mvcur.options.playlistId);const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(nav.objLoc,{z:_});var o,t;/^video-?\d+/.test(nav.objLoc[0])&&((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_navigation_fix")&&i.z?(delete i.z,null==(o=document.querySelector(".VideoLayout"))||o.classList.remove("VideoLayout--hidden"),null==(t=window.VideoShowcase)||t.updateLayout()):i[0]="videos"+cur.oid);nav.strLoc!=nav.toStr(i)&&(nav.setLoc(i),(mvcur.options||{}).fromQueue&&(mvcur.noHistory=1)),mvcur.options&&(mvcur.options.fromQueue=!1)},backLocation(){if("z"==mvcur.mvPrevLoc||!mvcur.mvPrevLoc&&nav.objLoc.z){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clone)(nav.objLoc);delete e.z,delete e.claim,nav.setLoc(e)}else if(mvcur.mvPrevLoc){mvcur.mvPrevLoc[0]&&mvcur.mvPrevLoc[0].match(/^videos-?\d+/)&&mvcur.mvData&&mvcur.mvData.artistHref?nav.setLoc({0:mvcur.mvData.artistHref.replace(/^\//,"")}):nav.setLoc(mvcur.mvPrevLoc)}else("video"==nav.objLoc[0]||nav.objLoc[0].match(/^video-?\d+_\d+/))&&nav.setLoc({0:"video"});mvcur.options.prevTitle&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setDocumentTitle)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.stripHTML)(mvcur.options.prevTitle)),delete mvcur.options.prevTitle),mvcur.noHistory=1},highlightComment(e){if(!(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(e)))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"VideoLayerInfo__commentHighlighting");const _=()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"VideoLayerInfo__commentHighlighting"),setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"VideoLayerInfo__commentHighlighting")}),1e3)},i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(e,!0)[1];if(i<0||i>lastWindowHeight-200){const e=mvLayerWrap.scrollTop+i-50;(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_18__.animate)(mvLayerWrap,{scrollTop:e},300,_)}else _()},showComment(e){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post"+e);return _?Videoview.highlightComment(_):Videoview.moreComments(e),!1},commActionDone(commId,from,text,del,script){const node=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post"+commId.split("_").join("video_")+from);if(!node)return;const comment=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(node,"reply_wrap"),msg=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(node,"dld");if(!text)return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)(msg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(comment),"mv"==from&&(++mvcur.mvData.commcount,++mvcur.mvData.commshown),void Videoview.updateCommentsHeader(from);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(comment),node.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)(text)),del?("mv"==from&&(--mvcur.mvData.commcount,--mvcur.mvData.commshown),Videoview.updateCommentsHeader(from)):"mv"==from&&Videoview.recache(),script)try{eval(script)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e,script)}"review"!==from&&Videoview.updateReplyFormPos()},commAction(e,_,i,o,t){if("spam"===e)return void this.showReportVideoCommentForm(_,i);const d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post"+_+"video_"+i+t),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(d,"post_actions"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("reply_"+e+_+"video_"+i+t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(d,"data-action",e),s&&tooltips.hide(s),window.ajax.post("al_video.php",{act:e+"_comment",comment:_+"_"+i,hash:o,videoview:1,from:t},{onDone:Videoview.commActionDone.pbind(_+"_"+i,t),showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass.pbind(l,"post_actions_progress"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass.pbind(l,"post_actions_progress"),stat:[window.jsc("web/privacy.js"),"privacy.css"]})},moreComments(e){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)("mv_comments_header")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_comments_header")),"pr"))return;if(e&&Videoview.cmp((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_comments")).id,"post"+e)<0)return;const _=Videoview.getMvData();window.ajax.post("al_video.php?act=video_comments",{offset:_.commshown,video:_.videoRaw,view_hash:_.itemAccessHash},{onDone:function(_,i){Videoview.receiveComms(_,i,!0,e),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post"+e)&&Videoview.showComment(e),Videoview.adaptRecomsHeight()},showProgress:function(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_comments_header");mvcur.mvCommInfo=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(e,""),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.showProgress)(e)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_comments_header",mvcur.mvCommInfo)}})},updateCommentsHeader(e){if("review"===e)return;const _=Videoview.getMvData();let i="";_.commcount>_.commshown&&(i=_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_show_previous_comments",_.commcount-_.commshown)),_.commcount&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_comments_summary",_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_comments_summary",_.commcount)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_comments_summary",{display:_.commcount?null:"none"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_comments_header","mv_comments_expanded",!i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_comments_summary","mv_comments_expanded",!i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_comments_header",i),Videoview.recache()},onShowEditReply(){mvcur.replyFormShown=!0,Videoview.updateReplyFormPos(),Videoview.playerNextTimerUpdate()},onHideEditReply(){mvcur.replyFormShown=!1,mvcur.mvReplyTo=!1,Videoview.updateReplyFormPos(),setTimeout(Videoview.updateReplyFormPos,0),Videoview.playerNextTimerUpdate()},commentClick(e,_,i,o){var t;(null==(t=window.Wall)?void 0:t.checkReplyClick(e,_))||(mvcur.mvReplyTo=[i,o],Wall.replyTo(mvcur.post,o,i))},receiveComms(e,_,i,o){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{innerHTML:e}),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_comments"),l=Videoview.getMvData();let s,a,n=s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domLC)(d),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(s,!0)[1];for(;a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domLC)(t);){for(;s&&Videoview.cmp(s.id,a.id)>0;)s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPS)(s);s&&!Videoview.cmp(s.id,a.id)?(d.replaceChild(a,s),s=a):(s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domNS)(s)?d.insertBefore(a,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domNS)(s)):!s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)(d)?i?d.insertBefore(a,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)(d)):(--l.commshown,t.removeChild(a)):d.appendChild(a),i||++l.commcount,++l.commshown)}o&&n&&(mvLayerWrap.scrollTop+=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(n,!0)[1]-r),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(mvcur.mvReplyNames,_),window.updateWndVScroll&&window.updateWndVScroll(),Videoview.updateCommentsHeader(),Videoview.updateReplyFormPos()},sendComment(e,_,i){var o;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("reply_field"+e),d=t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"composer"),l=(mvcur.mvReplyNames[(mvcur.mvReplyTo||{})[0]]||[])[1],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("reply_button"+e);let a;const n=(i=i||{}).stickerId;if(n)a={message:"",attach1_type:"sticker",attach1:n,sticker_referrer:i.sticker_referrer};else{if(a=d?Composer.getSendParams(d,Videoview.sendComment):{message:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t))},a.delayed)return;if(!a.attach1_type&&(!a.message||l&&!l.indexOf(a.message)))return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)}var r;window.ajax.post("al_video.php?act=post_comment",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(null!=(r=null==(o=window.Wall)?void 0:o.fixPostParams(a))?r:a,{video:mvcur.mvData.videoRaw,hash:mvcur.mvData.hash,item_access_hash:mvcur.mvData.itemAccessHash,videoviewer:1,from_oid:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_submit_post_box",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("reply_as_group"+mvcur.post)),"from-oid"),reply_to:(mvcur.mvReplyTo||{})[1]}),{onDone:function(_,i){var o,t;(Videoview.receiveComms(_,i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_comments_summary",_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_comments_summary",mvcur.mvData.commcount)),Composer.reset(d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("reply_warn"+e),null==(o=window.Wall)||o.cancelReplyTo(e),mvLayerWrap.scrollTop=9e9,mvcur.player&&mvcur.player.vars.short_video)&&(null==(t=window.Wall)||t.hideEditReply(mvcur.post),mvcur.uiScroll&&mvcur.uiScroll.scrollBottom());mvcur.player&&mvcur.player.vars.stats_tmr&&(0,_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_25__.tmrTrackCustomGoal)("comment_in_sport_broadcast")},onFail:function(e){if(t)return(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTooltip)(t,{text:e,showdt:200,forcetodown:0,slide:15}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.lockButton)(s),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.unlockButton)(s)})},addVideo(videoRaw,hash,obj,gid,accessHash,from){var _window_mvcur;let url,params;return(null==(_window_mvcur=window.mvcur)?void 0:_window_mvcur.statusVideo)?(params={status:videoRaw,hash,from:from||"videoviewer"},url="al_video_external.php?act=external_add"):(params={video:videoRaw,hash,from:from||"videoviewer",module:Videoview.getVideoModule(),context:Videoview.getVideoContext(),info:window.Video&&Video.isInCatalog()?_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getCurListId():""},gid&&(params.gid=gid),url="al_video.php?act=a_add"),accessHash&&(params.access_hash=accessHash),window.ajax.post(url,params,{onDone:function(text,row,hash,shareHash){if(obj&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(obj),text),!(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.isArray)(row))try{row=eval("("+row+")")}catch(e){}window.mvcur&&(mvcur.mvData&&mvcur.mvData.afterAdd?mvcur.mvData.afterAdd(row[0]+"_"+row[1],shareHash):row&&(mvcur.mvData.addedVideo=row[0]+"_"+row[1],mvcur.mvData.addedVideoHash=hash,mvcur.mvData.addedVideoShareHash=shareHash));const videoEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_cont"+videoRaw);videoEl&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(videoEl,"video_row_added"),"list"===from&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(text),Videoview.setAddButtonStateAdded()}}),!1},likeUpdate(e,_,i,o){var t;_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(_);const d=Videoview.getMvData();d.likes=_,d.liked=e,window.Likes.update(((null==(t=window.mvcur)?void 0:t.statusVideo)?"wall":"video")+d.videoRaw,{like_num:_,like_my:e});const l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_like_wrap"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(l,"_count");if(!s)return;const a=l.tt||{},n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.clone)(a.opts||{}),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(a.container,"_value"),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(a.container,"_content"),v=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(a.container,"_title");i&&v&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(v,i),r&&(r.value=_),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_18__.animateCount)(s,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(l,"my_like",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(l,"no_likes",!_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(c,"me_hidden",!e),_?o||!a.el||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(a.container)||i||tooltips.show(a.el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(n,{showdt:0})):a.el&&a.hide()},_isCurrentVideoPublished(){const e=Videoview.getMvData();return e&&e.published},addSmall(e,_,i,o){if(Videoview._isCurrentVideoPublished()){var t;(null==(t=window.mvcur)?void 0:t.mvShown)?Videoview.setAddButtonStateAdded():Videoview.addVideo(e,_,!1,i,o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("video_add_action_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_like_line"),"VideoCard--videoAdded"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_finish_add","mv_external_finish"),"selected");Videoview.getMvData().added=!0}else Videoview.showAddDialog(e)},showAddDialog(e){if(cur._recentAddedVideos=cur._recentAddedVideos||{},cur._recentAddedVideos[e])return;const _=Videoview.getMvData();(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("al_video.php?act=show_add_video_box",{oid:_.oid,vid:_.vid},{onDone:function(i,o){o&&(i.removeButtons(),i.addButton(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("Save"),(function(i){const t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_video_add_title"));if(!t)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.notaBene)("mv_video_add_title");window.ajax.post("al_video.php?act=a_add_publish_video",{title:t,video_privacy:Privacy.getValue("video_add"),videocomm_privacy:Privacy.getValue("videocomm_add"),hash:o,oid:_.oid,vid:_.vid},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.lockButton)(i),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.unlockButton)(i),onDone:function(){cur._recentAddedVideos[e]=!0,Videoview.hide(!0,!0),Videoview.recache(e),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_2__.showVideo)(e,mvcur.listId)}})})))}})},share(e,_,i){if(!vk.id)return;const o=Videoview.getMvData();return o&&!o.addedVideo&&(o.addedVideo=o.videoRaw),(o||e)&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("like.php?act=publish_box",{object:"video"+(o.addedVideo||e),action_type:i},{onDone:function(){Videoview.isLayerShown()&&Videoview.playerNextTimerUpdate()}}),!1},like(e,_){var i,o;if(!vk.id)return;const t=Videoview.getMvData();if(!t)return;const{mvcur:d}=window;let l="video";t.shortVideo?l="clip":(null==(i=d)?void 0:i.statusVideo)&&(l="wall"),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_modal_refactoring_of_info")&&"video"===l&&_web_VideoModal_stores__WEBPACK_IMPORTED_MODULE_38__.videoModalService.toggleLikesEvent({params:{type:l,owner_id:t.oid,item_id:t.vid}});const s=l+t.videoRaw;let a="";(null==(o=window.Video)?void 0:o.isInCatalog())&&(a=_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getCurListId());const n=t.liked,r=Videoview.likeUpdate.pbind(!n);Videoview.sendLikeDebounced||(Videoview.sendLikeDebounced=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_44__.debounce)(Videoview.sendLike,150)),Videoview.sendLikeDebounced(t,d,s,a,r,(()=>{window.Likes.clientUpdate(s,_web_likes_likes_constants__WEBPACK_IMPORTED_MODULE_33__.LikeButtonTypes.like,n?1:-1,n)})),_||Videoview.playerOnLiked(!n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_finish_like","mv_external_finish"),"selected",!n),window.Likes.clientUpdate(s,_web_likes_likes_constants__WEBPACK_IMPORTED_MODULE_33__.LikeButtonTypes.like,n?-1:1,!n),Videoview.recache()},showEditBox(e,_,i,o,t=!1,d=!1){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("al_video.php?act=edit_box",{vid:e,oid:_,is_publish:+o,is_short_video:+t,is_web_streaming:+d},{containerClass:"video_edit",stat:[window.jsc("web/privacy.js"),"privacy.css",window.jsc("web/video.js"),"video.css",window.jsc("web/video_upload.js"),"video_edit.css",window.jsc("web/upload.js"),"video_showcase.css"]})},restoreVideo(e,_,i,o,t){const d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_warning");return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(d,""),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.showProgress)(d,"","pr_medium"),window.ajax.post("al_video.php?act=restore_video",{vid:e,oid:_,hash:i,from:o||"videoviewer"},{onDone:function(i){if("list"==o&&cur.restoreRaw&&cur.restoreRaw[_+"_"+e]){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(`video_row${_}_${e}`);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(i,cur.restoreRaw[_+"_"+e]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(i,"video_row_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(i,"video_row_deleted"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("video_row_icon_delete",i),{opacity:.8})}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_warning"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)("mv_info","mv_info_invisible"),cur.videoEditItem){const e=cur.videoEditItem;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,e.classList.contains("VideoCard")?"VideoCard--deleted":"video_deleted_now");let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"restoreTO");clearTimeout(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_video_restore",e))}cur.claimedVideoText&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("video_player",cur.claimedVideoText),cur.claimedVideoText="")},onFail:function(e){return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showFastBox)({title:_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e).hide,5e3),!0}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(t)},publish(e,_,i,o,t=!1){o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(o,"loading")||Videoview.showEditBox(_,e,null,!0,t)},stopStreaming(e,_){Videoview.stopStreamingWarning((function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().hide(),window.ajax.post("al_video.php?act=live_stop_streaming",{owner_id:mvcur.mvData.oid,video_id:mvcur.mvData.vid,hash:_},{showProgress:()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_30__.FlatButton.lock(e),hideProgress:()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_30__.FlatButton.unlock(e),onFail:e=>((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showFastBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error"),e||_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error_occured")),!0)})}))},stopStreamingWarning(e,_){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showFastBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_are_you_sure_stop_streaming_title"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_are_you_sure_stop_streaming"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("box_yes"),e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("box_no"),_)},deleteVideo(e,_,i,o,t,d,l){d&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(d,"loading")||window.ajax.post("al_video.php?act=delete_video",{vid:e,oid:_,hash:i,from:t,sure:o?1:0},{onDone:function(o,s,a,n,r,c){if(Videoview.recache(_+"_"+e),"sure"===o){Videoview.hidePlayer();const o=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showFastBox)({title:s,bodyStyle:"padding: 20px; line-height: 160%;"},a);o.setOptions({onHide:function(){Videoview.showPlayer()}}),o.removeButtons(),o.addButton(r,o.hide,"no"),o.addButton(n,(function(){o.showProgress(),Videoview.deleteVideo(e,_,i,!0,t,d,o.hide)}),"yes")}else if("result"===o){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_playlist_page_redesign")){const i={videoId:e,ownerId:_};window.dispatchEvent(new CustomEvent("video_deleted",{detail:i}))}if(l&&l(a),cur.videoEditItem&&c){const e=cur.videoEditItem;e.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)(c)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,e.classList.contains("VideoCard")?"VideoCard--deleted":"video_deleted_now"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_video_restore_act",e))}if("videoviewer"===t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_info")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_info","mv_info_invisible"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_warning",a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_warning"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_publish")),window.Video&&Video.isInVideosList())return!0}},showProgress:!!d&&_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass.pbind(d,"loading"),hideProgress:!!d&&_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass.pbind(d,"loading")})},deleteVideoOnClaim(e,_,i,o,t,d){Videoview.deleteVideo(e,_,i,o,t,d,(function(e){"videoviewer"==t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_info","mv_info_invisible"),cur.claimedVideoText=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("video_player"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("video_player",e))}))},recache(e){var _;!e&&(null==(_=window.mvcur)?void 0:_.mvData.videoRaw)&&(e=mvcur.mvData.videoRaw);const i=window.ajaxCache;for(let _ in i)_.match(/^\/al_video\.php\?act=show/)&&_.match(new RegExp("&video="+e+"([^0-9]|$)",""))&&delete i[_]},setStyle(e,_,i){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(_),mvcur.restoreStyles||(mvcur.restoreStyles={});for(let o in i)i.hasOwnProperty(o)&&(mvcur.restoreStyles[e]||(mvcur.restoreStyles[e]={}),mvcur.restoreStyles[e][o]=_.style[o],_.style[o]=i[o])},restoreStyle(e,_){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(_,mvcur.restoreStyles[e])},showVideo(videoRaw,title,html,js,desc,opt){var _window_Wall;if(!mvcur.mvShown||videoRaw!=mvcur.videoRaw)return;if(!vk.id&&!html&&!mvcur.options.expandPlayer)return void setTimeout((function(){Videoview.hide(!1,!0),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(title)}),500);if(title&&!html&&!mvcur.options.expandPlayer)return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_player_box",'<div class="mv_video_unavailable_message_wrap"><div class="mv_video_unavailable_message">'+title+"</div></div>"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_progress_box"),void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_info","mv_info_invisible");opt=opt||{},cur.share_timehash=cur.share_timehash||opt.share_timehash,cur.preparationEnabled=opt.preparation_enabled||cur.webcast_preview,mvcur.post=opt.post,mvcur.maxReplyLength=opt.maxReplyLength,mvcur.maxChatReplyLength=opt.maxChatReplyLength,mvcur.maxDescriptionLength=opt.maxDescriptionLength,mvcur.mvData=opt.mvData,mvcur.videoRaw=opt.mvData.videoRaw,mvcur.commentsTpl=opt.commentsTpl,mvcur.mvMediaTypes=opt.media,mvcur.mvMediaShare=opt.share,mvcur.mvReplyNames=opt.names||{},mvcur.rmedia_types=opt.rmedia_types,mvcur.pl_is_subscribed=opt.pl_is_subscribed,mvcur.chatMode=!!opt.chatMode,mvcur.wallTpl=opt.wallTpl,mvcur.finished=!1,mvcur.preparationBlock=!1,mvcur.forcePlaylistLayout=opt.forcePlaylistLayout,mvcur.chatBlock=opt.chatBlock,mvcur.chatForceStickerPack=opt.chatForceStickerPack,mvcur.noStickers=!!opt.noStickers,opt.lang&&(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.addLangKeys)(opt.lang,!0),opt.queueParams&&(mvcur.queueKey=opt.queueParams.key,mvcur.qversion=opt.qversion),null==(_window_Wall=window.Wall)||_window_Wall.cancelEdit(!0);let needRemin=!0;if(!mvcur.options.expandPlayer){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)("mv_player_box","video_box_wrap");if(!opt.player_unavailable&&opt.is_vk_player&&mvcur.player&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("video_box_wrap",mvcur.player.el)===e)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(e,"id","video_box_wrap"+videoRaw),needRemin=!1;else if(mvcur.player&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)(mvcur.player.el),Videoview.isFS&&!mvcur.mvData.shortVideo&&e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(e,"id","video_box_wrap"+videoRaw);const _=new DOMParser,i=_.parseFromString(html,"text/html");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(e,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("video_box_wrap",i).innerHTML)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_player_box",html);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_progress_box")}if(opt.player){const{type:e,params:_}=opt.player,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)("mv_player_box","video_box_wrap");if(cur.is_web_streaming&&_[0].live!==_web_videoplayer_lib_live_phases__WEBPACK_IMPORTED_MODULE_45__.ENDED){const{module:e,autoplay:i,oid:o,vid:t,action_hash:d,viewer_id:l}=_[0];mvcur.webcast_params={module:e,autoplay:i,oid:o,vid:t,actionHash:d,viewerId:l},window.VideoWebStreaming.init()}else _video_initializer__WEBPACK_IMPORTED_MODULE_22__.default.initPlayer(i,e,_);mvcur.options.fromPreload&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_28__.saveStatlogEvents)({name:"video_showcase_web",value:Math.round(performance.now()),keys:[cur.is_showcase?window.cur.section_id:"","init_player_direct","origin"]})}if(document.getElementById("mv_info").innerHTML=desc,opt.videoModalInfoData){const{ordInfo:e,trendsPosition:_,trendsLink:i,ownerName:o,ownerSubscribersCount:t,views:d,date:l,isArchivalContent:s,ownerVerified:a,isFavorite:n,canAddToFavorite:r,secondaryOwner:c,ownerVerifiedByServices:v,ownerId:m,ownerFullNameGenitive:u,canSubscribeToAuthor:E,isSubscribeToAuthor:w,moderationVideoInfo:b,featuredArtists:p,otherArtists:D}=opt.videoModalInfoData;getVideoModalBlocks().then((({initVideoModalInfo:M})=>{var P,h,O,I,g,C,L,T,y,A,R,B,f,V;const S={id:opt.mvData.vid,likes:opt.mvData.likes,duration:opt.mvData.duration,videoId:opt.mvData.vid,isLiked:opt.mvData.liked,title:opt.mvData.title,description:opt.mvData.desc,ordInfo:e,trendsPosition:_,trendsLink:i,isArchivalContent:s,views:(0,_shared_video__WEBPACK_IMPORTED_MODULE_37__.getFormattedFullVideoViews)(d),formattedViewsText:(0,_shared_video__WEBPACK_IMPORTED_MODULE_37__.getFormattedBigViewsToShortCase)(d),date:(0,_shared_video__WEBPACK_IMPORTED_MODULE_37__.getFormattedVideoDate)(l),formattedDateText:(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_29__.getFormattedUpdatedTime)(l),canSubscribeToAuthor:E,isSubscribeToAuthor:w,canAddToGroups:Boolean(null==(h=mvcur)||null==(P=h.mvData)?void 0:P.canAddToGroups),canReport:Boolean(null==(I=mvcur)||null==(O=I.mvData)?void 0:O.canReport),canEditVideo:Boolean(null==(C=mvcur)||null==(g=C.mvData)?void 0:g.editHash),canDeleteVideo:Boolean(null==(T=mvcur)||null==(L=T.mvData)?void 0:L.deleteHash),canAddToFavorite:Boolean(r),canViewStatistic:Boolean(!isNaN(Number(null==(R=mvcur)||null==(A=R.mvData)||null==(y=A.stats)?void 0:y.stat_vid))&&!isNaN(Number(null==(V=mvcur)||null==(f=V.mvData)||null==(B=f.stats)?void 0:B.stat_oid))),isFavorite:Boolean(n),isActiveLive:Boolean(opt.mvData.is_active_live),isShortVideo:opt.mvData.shortVideo,addedToMy:opt.mvData.added,playlists:opt.mvData.playlists,owner:{id:m,screen_name:opt.mvData.authorHref,photo_50:opt.mvData.authorPhoto,href:opt.mvData.authorHref,name:o,verified:a,ownerFullNameGenitive:u,ownerVerifiedByServices:v,formattedSubscribersText:t>0?(0,_shared_video__WEBPACK_IMPORTED_MODULE_37__.getFormattedBigSubscribersToShortCase)(t):""},moderationVideoInfo:b,featuredArtists:p,otherArtists:D};c&&(S.secondaryOwner=(0,_swc_helpers_extends__WEBPACK_IMPORTED_MODULE_46__._)({},c,{formattedSubscribersText:(0,_shared_video__WEBPACK_IMPORTED_MODULE_37__.getFormattedBigSubscribersToShortCase)(t)})),M(document.getElementById("mv_main_info"),S)}))}if(opt.videoModalPlayerContextRefactoringEnabled&&mvcur.options.playlistId)Videoview.buildVideoModalPlayerContext({playlistId:mvcur.options.playlistId,ownerId:cur.oid});else{if(opt.pl_list&&!mvcur.mvData.shortVideo&&!mvcur.mvData.is_active_live){const e=JSON.parse(opt.pl_list);(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(e,((e,_)=>{_.is_subscribed=mvcur.pl_is_subscribed,_.force_layout=mvcur.forcePlaylistLayout,_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.addList(_)})),Videoview.initPlaylistBlock(mvcur.videoRaw,mvcur.options.playlistId)}_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggleStateClasses(),Videoview.toggleRecommsColumn(!0)}if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_goods_recognition")&&(0,_web_videoview_GoodsRecognition_init__WEBPACK_IMPORTED_MODULE_34__.renderGoodsRecognitionPanel)(),opt.interactiveVideoOnboardingData&&getInteractiveVideoOnboardingChunk().then((({showOnboarding:e})=>{e(opt.interactiveVideoOnboardingData)})),js){const jsExpr=`(function(){${js}})()`;try{eval(jsExpr)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e,jsExpr)}}if(opt.publishAction){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_publish");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(e,opt.publishAction),cur.is_web_streaming||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(e),setTimeout((()=>{document.getElementById("mv_layer_wrap").scroll({top:0,behavior:"smooth"})}),150)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_publish");Videoview.initAsyncComment();const mvMain=document.getElementById("mv_main");var _mvMain;if(opt.livePreparationBlock)_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.removeBlock(),mvcur.preparationBlock=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)(opt.livePreparationBlock),null==(_mvMain=mvMain)||_mvMain.appendChild(mvcur.preparationBlock);else if(mvcur.chatMode){var _mvMain1;_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.removeBlock();const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)(opt.chatBlock);var _document_getElementById;if(null==(_mvMain1=mvMain)||_mvMain1.appendChild(e),window.VideoChat)if(window.VideoChat.init(e,{forceStickerPack:opt.chatForceStickerPack,noStickers:!!opt.noStickers,chatRefactoring:!!opt.chatRefactoring,stickerRefactoring:!!opt.stickerRefactoring,messageData:opt.messageData,chatActionHash:opt.chatActionHash}),window.VideoChat.toggleStateClasses(),window.VideoChat.updateScroll(),opt.publishAction)null==(_document_getElementById=document.getElementById("mv_chat_block"))||_document_getElementById.classList.add("mv_chat--no-rounding")}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_box","_has_preparation",!!mvcur.preparationBlock&&!mvcur.minimized),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_layer","mv_layer--vertical",!!mvcur.mvData.shortVideo),mvcur.mvData.shortVideo?window.mvLayer.setAttribute("scheme","vkcom_dark"):window.mvLayer.removeAttribute("scheme"),mvcur.mvData.shortVideo&&(_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.removeBlock(),mvcur.onReplyFormSizeUpdate=mvcur.onMediaChanged=()=>{Videoview.updateLayoutSizes()},mvcur.scrollBottom=()=>{mvcur.uiScroll.scrollBottom(0,!0)});const replyField=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("reply_field"+mvcur.post);if(replyField&&(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_5__.placeholderInit)(replyField,{editable:1}),mvcur.minimized&&needRemin&&Videoview.minimizePlayer(),mvcur.statusVideo){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("like_count"+mvcur.mvData.videoRaw);if(e){const _=e.parentNode.tt;_&&_.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)(_.container),e.parentNode.tt&&delete e.parentNode.tt}}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_player_box"),opt.player_unavailable&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_player")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("video_player").focus(),window.updateWndVScroll&&window.updateWndVScroll(),(mvcur.options||{}).scroll&&(mvLayerWrap.scrollTop=mvcur.options.scroll,mvcur.options.scroll=0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_info","mv_info_invisible",!!(mvcur.options.hideInfo&&mvcur.mvData.noControls&&mvcur.minimized)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)("mv_info","mv_info_disabled"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_warning"),!mvcur.mvData.noControls){const e=!!mvcur.minimized&&mvcur.minSize.wrap.w;Videoview.setTitle(e),Videoview.initAddButton(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_edit_button"),mvcur.mvData.editHash&&!mvcur.mvData.hideEdit&&!mvcur.mvData.editFromDropdown)}var _window_VideoLive;(mvcur.mvData.is_active_live||Videoview.adaptRecomsHeight(),Videoview.updateSize(),opt.queueParams&&window.stManager.add(window.jsc("web/notifier.js"),(function(){Videoview.queueCheckUpdates(opt.queueParams)})),mvcur.mvData.uploaded||Videoview.recache(),mvcur.mvData.is_live)&&setTimeout(null==(_window_VideoLive=window.VideoLive)?void 0:_window_VideoLive.checkOtherLives.pbind(videoRaw),6e4);Videoview.isVideoListEmpty()&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_box","_no_video_list"),Videoview.viewScroll())},buildVideoModalPlayerContext(e){const _=document.getElementById("mv_main"),i=document.createElement("div"),o=_.firstChild;i.setAttribute("id","video_mvpl"),i.classList.add("mv_playlist","js-video-modal-player-context");document.getElementById("mv_box").classList.add("_has_playlist"),_.insertBefore(i,o),getVideoModalBlocks().then((({initVideoModalPlayerContext:_})=>{_(i,e)}))},adaptRecomsHeight:(0,_shared_lib_throttle__WEBPACK_IMPORTED_MODULE_43__.throttle)((()=>{var e,_;const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_info_wrapper","mv_info"),o=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_modal_refactoring_of_recommendations")?null:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("mv_info_narrow_column","mv_info");if(!i||!o)return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("mv_recom_item",o);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(...t);const d=null==(e=document.querySelector("#mv_box"))?void 0:e.classList.contains("_has_recomms"),l=null==(_=document.querySelector("#mv_box"))?void 0:_.classList.contains("_hide_recomms"),s=document.getElementById("react_rootVideoMarketItemsCarousel"),a=document.querySelector(".VideoLayerInfo__recommended");if(d&&!a)return;const n=null!==s?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(s)[1]:0,r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(o)[1]-n;let c=t.length;const v=mvcur.mvData.isMusicVideo?2:3;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(t.reverse(),((e,_)=>{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(o)[1],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(i)[1],n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(a)[1];if(d&&!l){if(n<=r&&t<=s||c===v)return!1}else if(t<=s||c===v)return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(_),c--}))}),50),queueCheckUpdates(e){var _;window.mvcur&&mvcur.mvShown&&mvcur.queueKey===e.key&&!(null==(_=window.VideoChat)?void 0:_.isHidden())&&!window.Videoview.isFS&&(window.Notifier&&Notifier.addKey(e,Videoview.queueReceiveUpdates),setTimeout(Videoview.queueCheckUpdates.pbind(e),25e3))},queueReconnect(e){const _=Videoview.getMvData(),i=_.oid,o=_.vid,t=i+"_"+o;e?window.ajax.post("al_video.php?act=get_queue_params",{oid:i,vid:o,hash:_.hash},{onDone:function(e){e&&Videoview.isLayerShown(t)&&(mvcur.queueKey=e.key,Videoview.queueCheckUpdates(e))},onFail:function(){return!0}}):(mvcur.queueReconnectDelay=mvcur.queueReconnectDelay?2*mvcur.queueReconnectDelay:500,mvcur.queueReconnectTimeout&&clearTimeout(mvcur.queueReconnectTimeout),mvcur.queueReconnectTimeout=setTimeout((()=>{window.Videoview.isLayerShown(t)&&window.Videoview.queueReconnect(!0),mvcur.queueReconnectTimeout=null}),mvcur.queueReconnectDelay))},queueReceiveUpdates(e,_){if(window.mvcur&&mvcur.mvShown&&mvcur.queueKey===e&&_){if(_.failed)return(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("video queue failed",_),mvcur.queueKey=null,void Videoview.queueReconnect();delete mvcur.queueReconnectDelay,mvcur.queueBatchId=(mvcur.queueBatchId||0)+1,_.events&&_.events.length&&_.events.forEach((e=>{const _=e.split("<!>"),o=Number(_[0]),t=_[1];if(o===mvcur.qversion)switch(t){case"new_reply":mvcur.chatMode||(Videoview.appendNewComment.apply(Videoview,_.slice(2)),Videoview.updateCommentsHeader(),Videoview.updateReplyFormPos());break;case"new_reply_chat":{const e=+_[10],i=!!_[11];var d;if(mvcur.chatMode)null==(d=window.VideoChat)||d.receiveMessage.apply(window.VideoChat,_.slice(2));i&&!e&&mvcur.player&&mvcur.player.pushDonation("comment",{senderId:_[4],senderName:_[5],senderPhoto:_[6],senderHref:_[7],senderSex:_[8],commentText:_[9]})}break;case"edit_reply":{const e=_[2],o=_[3],t=_[4],d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("wpt"+i(e,o));d&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(d,"data-action")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(d,t),Videoview.updateReplyFormPos())}break;case"del_reply":{const e=_[2],o=_[3];if(mvcur.chatMode){var l;null==(l=window.VideoChat)||l.receiveDelete(e,o)}else{const _=document.getElementById("post"+i(e,o));_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(_,"data-action")||(mvcur.mvData.commcount--,mvcur.mvData.commshown--,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)(_)):mvcur.mvData.commcount--,Videoview.updateCommentsHeader(),Videoview.updateReplyFormPos()}}break;case"like_reply":{const e=_[2],o=_[3],t=+_[4],d=+_[5],l=_[6],s=document.getElementById("wpe_bottom"+i(e,o));if(s){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(s,"_like_wrap"),_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(e,"_count");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(_,t>0?t:""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"no_likes",!t),d==vk.id&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"my_like",!l)}}break;case"like":{const e=_[4],i=_[5];mvcur.chatMode&&!i&&window.VideoChat&&window.VideoChat.appendSticker("like",e)}break;case"sticker":{const e=_[3],i=_[4];mvcur.chatMode&&window.VideoChat&&window.VideoChat.appendSticker(e,i)}break;case"video_view":var s;null==(s=window.VideoLive)||s.updateLiveViewersCount(_[2]);break;case"gift":mvcur.player&&mvcur.player.pushDonation("gift",{senderId:_[2],senderName:_[3],senderPhoto:_[4],senderHref:_[5],senderSex:_[6],giftId:_[7]});break;case"end_live":{const e=document.querySelector("#mv_publish .mv_stop_streaming_button");e&&(_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_30__.FlatButton.setLabel(e,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_live_finished")),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_30__.FlatButton.setDisabled(e,!0))}break;case"live_midroll":if(mvcur.player){const e=_[2];mvcur.player.pushLiveMidroll(e)}break;case"set_action_button":{const e=(0,_shared_lib_parse__WEBPACK_IMPORTED_MODULE_7__.parseJSON)(_[2]);mvcur.player.setActionButton(e)}break;case"pin_comment":if(mvcur.chatMode&&window.VideoChat){const e=_[2],i=_[3],o=_[4],t=_[5],d=_[6],l=_[7],{canDeleteComment:s,canReportComment:a,canPinComment:n}=VideoChat.getMessageAccessFlags(e,i);window.VideoChat.showPinnedMessage(e,i,o,t,d,l,n,s,a)}break;case"unpin_comment":mvcur.chatMode&&window.VideoChat&&window.VideoChat.hidePinnedMessage();break;default:(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("unhandled video event",_)}}))}function i(e,_){return e+"video_"+_+"mv"}},appendNewComment(e,_,i,o,t,d,l,s,a,n,r){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("post"+e+"video_"+_+"mv"))return;const{adminLevel:c,canDeleteComments:v}=Videoview.getMvData();let m="";c>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_32__.GroupAdminLevel.USER||v||e==vk.id||i==vk.id?m+=mvcur.commentsTpl.del_reply:e!=i&&(m+=mvcur.commentsTpl.spam_reply),(c>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_32__.GroupAdminLevel.MODERATOR&&e==i||o==vk.id)&&(m+=mvcur.commentsTpl.edit_reply),m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(mvcur.commentsTpl.actions,{actions:m});const u=langDate(1e3*s,_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("global_short_date_time","raw"),0,[]),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.rs)(mvcur.commentsTpl.reply,{actions:m,post_oid:e,reply_id:e+"video_"+_+"mv",reply_msg_id:_,from_id:i,name:o,photo:t,href:d,message:l,date:u,to_link:a,likes:window.Likes.makeTemplate(mvcur.commentsTpl.likes,{object_raw:`${e}_${_}`})});mvcur.mvReplyNames[i]=[n,r],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_comments").insertAdjacentHTML("beforeend",E),mvcur.mvData.commcount++,mvcur.mvData.commshown++},reload(){const{videoRaw:e,shortVideo:_}=Videoview.getMvData();Videoview.hide(!0,!0),Videoview.recache(e),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_2__.showVideo)(e,mvcur.listId,{autoplay:1,shortVideo:_?1:0})},onVideoShared(e,_,i){"publish"!=e||Videoview._isCurrentVideoPublished()||(Videoview.hide(!0,!0),setTimeout((function(){0==_.indexOf("video")&&(_=_.substr(5)),Videoview.recache(_),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_2__.showVideo)(_,i)}),100))},_onAddToCommunity(e=mvcur.mvData.oid,_=mvcur.mvData.vid){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("al_video.php?act=add_to_club_pl_box",{oid:e,vid:_})},_onEdit(e=!1,_=!1){const{oid:i,vid:o}=Videoview.getMvData();Videoview.showEditBox(o,i,null,!1,e,_)},_onDelete(){const{oid:e,vid:_,deleteHash:i}=Videoview.getMvData();Videoview.deleteVideo(_,e,i,!1,"videoviewer")},_onExport(e){Videoview.sendVideo(e)},_onViewStats(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("al_stats.php",{act:"video_stat",oid:mvcur.mvData.stats.stat_oid,vid:mvcur.mvData.stats.stat_vid},{params:{width:795,bodyStyle:"padding: 0"}})},addToClubPlaylistCheckboxChanged(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.checkbox)(e);let _=!1;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("mv_add_to_club_albums_list_item"),((e,i)=>{if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.isChecked)(i))return _=!0,!1}));const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_add_to_club_albums_save");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.disableButton)(i,!1),_||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.disableButton)(i,!0)},addToClubPlaylistBoxInit(e,_,i){WideDropdown.deinit("add_to_pl_club_dd"),mvcur.addToClubPl=WideDropdown.init("add_to_pl_club_dd",{defaultItems:_,noResult:_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("search_nothing_found"),introText:"choose",onChange:function(e,_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_add_to_club_albums"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_add_to_club_albums_list",""),-1==e)return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_add_to_club_gid",""),void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.disableButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_add_to_club_albums_save"),!0);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_add_to_club_albums_progress"),window.ajax.post("al_video.php?act=a_get_club_playlists",{gid:_,oid:mvcur.mvData.oid,vid:mvcur.mvData.vid},{onDone:function(e){let i="",o=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)(e,(function(_,t){const d=t.added||1===e.length;d&&o++,i+=`<div class="mv_add_to_club_albums_list_item checkbox ${d?"on":""}" data-id="${t.id}" onclick="Videoview.addToClubPlaylistCheckboxChanged(this)">${t.title}</div>`})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_add_to_club_albums_list",i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_add_to_club_gid",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_add_to_club_albums_progress"),e.length>1&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_add_to_club_albums");const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_add_to_club_albums_save");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.disableButton)(t,!1),o||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.disableButton)(t,!0)}})}}),setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus.pbind("add_to_pl_club_dd_input"),0),e.removeButtons();const o=e.addButton(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("Save"),(function(e){const _=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)("mv_add_to_club_albums_list_item"),(function(e,i){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.isChecked)(i)&&_.push((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(i,"data-id"))})),window.ajax.post("al_video.php?act=a_add_to_playlist",{hash:i,gid:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_add_to_club_gid"),oid:mvcur.mvData.oid,vid:mvcur.mvData.vid,playlists:_.length?_:"0",module:Videoview.getVideoModule(),context:Videoview.getVideoContext()},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.lockButton)(e),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.unlockButton)(e),onDone:function(e,_){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)().hide(),_.added.length?(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_add_to_playlist_added")):(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_add_to_playlist_error"))}})}),null,!0);o.id="mv_add_to_club_albums_save",(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.disableButton)(o,!0)},setTitle(e){const _=mvcur.mvData.title||"",i=mvcur.mvData.subtitle||"";e=e||590,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_min_title",Videoview._isCurrentVideoPublished()?(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.stripHTML)(_):""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_min_title",{maxWidth:Math.max(0,e-70)});const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_title");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(o,_+i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(o,{display:"block"}),o.scrollHeight>o.offsetHeight&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.attr)(o,"title",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.stripHTML)(_))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(o,{display:""}))},timeTagClick(e,_,i){const o=Videoview.getPlayerObject();if(o){o.seekTo(e,!1,!0,"episode"),o.play();const i=o.el.getBoundingClientRect();i.top<.5*-i.height&&(mvLayerWrap.scrollTop+=i.top),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("video_time_codes_seek","",_)}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(i)},expandDescr(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_descr_field",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)("mv_desc_full_text")),Videoview.cleanExpandDescrEls(),Videoview.onResize()},cleanExpandDescrEls(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("mv_desc_full_text"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("mv_descr_expand_toggle")},setDesc(){const e=document.getElementById("mv_descr_field");e&&(e.innerHTML=mvcur.mvData.desc||"")},setPostponePublicationDesc(e){const _=document.querySelector(".mv_title_info");_&&e&&(_.innerHTML=_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_postponed_publication")+": "+e)},getContSize:()=>(mvcur.contSize||(mvcur.contSize=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)("mv_box")),mvcur.contSize),getContPlace(e){let _=0;const i=Videoview.getContSize(),o=e.clientX-mvcur.minSize.wrap.l,t=e.clientY-mvcur.minSize.wrap.t;return t<6&&(_+=1),o>i[0]-20&&(_+=2),t>i[1]-10&&(_+=4),o<10&&(_+=8),1==_&&o>i[0]-55&&(_=0),!_&&t<25&&o<i[0]-55&&(_+=16),_},changeCursor(e){if(Videoview.isFS)return;const _=Videoview.getContPlace(e);let i="default";if(_&&mvcur.minimized){let e="";1&_&&(e+="n"),4&_&&(e+="s"),2&_&&(e+="e"),8&_&&(e+="w"),i=e+"-resize",16&_&&(i="move")}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_box",{cursor:i})},getMinSize(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_player_box")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_progress_box");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(mvcur.minSize,{wrap:{t:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(mvLayerWrap.style.top),l:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(mvLayerWrap.style.left),w:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(mvLayerWrap.style.width),h:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(mvLayerWrap.style.height)},player:{w:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e.style.width),h:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.intval)(e.style.height)}})},startDrag(e){if(Videoview.isFS||e.button&&1!==e.button)return;const _=Videoview.getContPlace(e);if(!_)return;const i=Date.now();Videoview.getMinSize(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(mvcur.minSize,{x:e.clientX,y:e.clientY}),mvcur.resizeDiff=0;const o=!_||16&_?Videoview.onMinMove:Videoview.onMinResize;mvcur.resizeMask=_;const t=function(e){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"mouseup",t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"mousemove",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"drag",o);const d=Date.now();return Videoview.getMinSize(),mvcur.resizeDiff<8&&d-i<400&&(16&_||1==_)&&Videoview.unminimize(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(mvLayerWrap,"mv_resizing"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)("mv_player_box","no_events"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)("mv_box","mousemove",Videoview.changeCursor),ls.set("mv_minSize",mvcur.minSize),!1};return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(mvLayerWrap,"mv_resizing"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_player_box","no_events"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(document,"mouseup",t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(document,"mousemove",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(document,"drag",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)("mv_box","mousemove",Videoview.changeCursor),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e)},onMinMove(e){let _=0,i=0;return e&&(i=e.clientY-mvcur.minSize.y,_=e.clientX-mvcur.minSize.x),mvcur.minSize.wrap.t+i>mvcur.minSize.ch-mvcur.minSize.wrap.h-15&&(i=mvcur.minSize.ch-mvcur.minSize.wrap.h-mvcur.minSize.wrap.t),mvcur.minSize.wrap.l+_>mvcur.minSize.cw-mvcur.minSize.wrap.w-15&&(_=mvcur.minSize.cw-mvcur.minSize.wrap.w-mvcur.minSize.wrap.l),mvcur.minSize.wrap.t+i<15&&(i=-mvcur.minSize.wrap.t),mvcur.minSize.wrap.l+_<15&&(_=-mvcur.minSize.wrap.l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(mvLayerWrap,{top:mvcur.minSize.wrap.t+i+"px",left:mvcur.minSize.wrap.l+_+"px"}),mvcur.resizeDiff=Math.max(Math.abs(_),Math.max(Math.abs(i),mvcur.resizeDiff)),!!e&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e)},onMinResize(e){var _;const i=mvcur.resizeMask;let o=0,t=0,d=1&i||4&i?e.clientY-mvcur.minSize.y:0,l=2&i||8&i?e.clientX-mvcur.minSize.x:0;4&i&&mvcur.minSize.wrap.t+d>mvcur.minSize.ch-mvcur.minSize.wrap.h&&(d=mvcur.minSize.ch-mvcur.minSize.wrap.h-mvcur.minSize.wrap.t),1&i&&mvcur.minSize.wrap.t+d<0&&(d=-mvcur.minSize.wrap.t),2&i&&mvcur.minSize.wrap.l+l>mvcur.minSize.cw-mvcur.minSize.wrap.w-14&&(l=mvcur.minSize.cw-mvcur.minSize.wrap.w-mvcur.minSize.wrap.l-14),8&i&&mvcur.minSize.wrap.l+l<0&&(l=-mvcur.minSize.wrap.l),8&i&&(o=l,l=-l),1&i&&(t=d,d=-d),mvcur.minSize.wrap.w+l<307&&(l=307-mvcur.minSize.wrap.w,8&i&&(o=-l)),mvcur.minSize.wrap.h+d<200&&(d=200-mvcur.minSize.wrap.h,1&i&&(t=-d)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(mvLayerWrap,{left:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.positive)(mvcur.minSize.wrap.l+o)+"px",top:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_17__.positive)(mvcur.minSize.wrap.t+t)+"px",width:mvcur.minSize.wrap.w+l+"px",height:mvcur.minSize.wrap.h+d+"px"});const s={width:mvcur.minSize.player.w+l+"px",height:mvcur.minSize.player.h+d+"px"};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_player_box",s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_progress_box",s);const a=Math.abs(l)+Math.abs(d);return mvcur.resizeDiff=Math.max(a,mvcur.resizeDiff),mvcur.contSize=!1,Videoview.setTitle(mvcur.minSize.wrap.w+l),Videoview.playerOnResize(),null==(_=window.ExternalVideo)||_.updateExternalVideoFinishBlock(),!1},minimize(e){var _,i;if(e&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e),mvcur.minimized)return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_min_header"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_info","mv_info_invisible"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("VerticalVideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("VideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)("mv_approve")?(mvcur.needShowApprove=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_approve")):mvcur.needShowApprove=!1,null==(_=window.Wall)||_.cancelEdit(!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(mvLayerWrap,"mv_minimized"),mvcur.minSize||(mvcur.minSize=ls.get("mv_minSize")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(document.body,"Videoview"),layers.fullhide=!1,mvcur.minSize&&Videoview.enabledResize()&&mvcur.minSize.wrap.w||(mvcur.minSize={wrap:{w:307,h:200}}),mvcur.mvData.shortVideo&&(mvcur.minSize={wrap:{w:307,h:520}},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_main"),{width:"auto"}));const o=mvcur.minSize.wrap;mvcur.minSize.player={w:o.w-12,h:o.h-34},Videoview.setStyle("mvContainer","mv_container",{height:"auto",marginTop:0,marginBottom:0,width:"auto"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(window.mvLayer,{width:"auto"}),Videoview.minimizePlayer(),window.tooltips&&tooltips.destroyAll("mv_container"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(document,"keydown",Videoview.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window,"resize",Videoview.minResize),Videoview.enabledResize()?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)("mv_box","mousedown",Videoview.startDrag),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)("mv_box","mousemove",Videoview.changeCursor),mvcur.minDestroy=function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)("mv_box","mousedown",Videoview.startDrag),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)("mv_box","mousemove",Videoview.changeCursor),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_box",{cursor:"default"})}):((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_min_title"),"click",Videoview.unminimize),mvcur.minDestroy=function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)("mv_min_title","click",Videoview.unminimize)}),Videoview.setTitle(o.w),Videoview.minResize(),Videoview.setStyle("mvLayerWrap",mvLayerWrap,{width:mvcur.minSize.wrap.w+"px",height:mvcur.minSize.wrap.h+"px"}),mvcur.minimized=!0,layers.wraphide(),setTimeout(Videoview.playerOnResize,10);let t=window.layerQueue.count();return mvcur.noLocChange||(Videoview.backLocation(),mvcur.noHistory=1),window.layerQueue.skipVideo=!0,t&&((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)("pop from minimize"),window.layerQueue.pop()),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggleStateClasses(),window.VideoChat&&(window.VideoChat.toggleStateClasses(),Videoview.toggleRecommsColumn()),mvcur.preparationBlock&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)("mv_box","_has_preparation"),null==(i=window.ExternalVideo)||i.updateExternalVideoFinishBlock(),!1},isLayerShown:e=>!(!window.mvcur||!mvcur.mvShown||null!=e&&mvcur.videoRaw!=e),isMinimized:()=>!!(window.mvcur&&mvcur.mvShown&&mvcur.minimized),getRelatedVideos(e,_){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)(e,"mv_info");return i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass)(_,i):[]},getOtherVideosCount:()=>Videoview.getRelatedVideos("mv_info_narrow_column","mv_recom_item").length,getRecommendationsCount:()=>Videoview.getRelatedVideos("mv_playlist_list_cont","VideoRecomsItem").length,isVideoListEmpty:()=>0===Videoview.getOtherVideosCount()&&0===Videoview.getRecommendationsCount(),enabledResize:()=>!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile,minimizePlayer(){const e={width:mvcur.minSize.player.w+"px",height:mvcur.minSize.player.h+"px"};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_player_box",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_progress_box",e),Videoview.playerOnResize()},minResize(){mvcur.minSize.ch=window.innerHeight||htmlNode.clientHeight||document.body.clientHeight,mvcur.minSize.cw=window.innerWidth||htmlNode.clientWidth||document.body.clientWidth;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_layout"));void 0===mvcur.minSize.wrap.t&&(mvcur.minSize.wrap.t=mvcur.minSize.ch-mvcur.minSize.wrap.h),void 0===mvcur.minSize.wrap.l&&(mvcur.minSize.wrap.l=Math.max(String(e[0]-mvcur.minSize.player.w/2),30)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(mvLayerWrap,{left:mvcur.minSize.wrap.l+"px",top:mvcur.minSize.wrap.t+"px"}),Videoview.onMinMove(),mvcur.minimized&&Videoview.getMinSize()},unminimize(e,_,i){var o;if(!mvcur.minimized)return;const t=window.wkcur,d=window.WkView;return t&&"story"==t.type&&window.Stories&&d.hide(!1,!0),i||window.layerQueue.push(),_||(window.layerQueue.hide(),setTimeout((function(){mvcur.noHistory=1,window.layerQueue.noHistory(),layers.wrapshow(mvLayerWrap,.7),layers.fullhide=Videoview.hide}),0)),Videoview.hidePlayer(!0),mvcur.minimized=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(mvLayerWrap,"mv_minimized"),Videoview.restoreStyle("mvLayerWrap",mvLayerWrap),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_info","mv_info_invisible",!!(mvcur.options.hideInfo&&mvcur.mvData.noControls&&mvcur.minimized)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_min_header"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("VerticalVideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("VideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(document.body,"Videoview"),mvcur.needShowApprove&&(mvcur.needShowApprove=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_approve")),Videoview.restoreStyle("mvContainer","mv_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_player_box",{width:"",height:""}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)("mv_progress_box",{width:"",height:""}),Videoview.updateSize(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(document,"keydown",Videoview.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"resize",Videoview.minResize),mvcur.minDestroy&&mvcur.minDestroy(),mvcur.noLocChange||!0===e||Videoview.setLocation(),window.onBodyResize(!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(mvLayerWrap,{left:"0px",top:"0px"}),Videoview.showPlayer(!0),Videoview.setTitle(),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggleStateClasses(),mvcur.chatMode&&window.VideoChat&&(window.VideoChat.toggleStateClasses(),window.VideoChat.updateScroll()),mvcur.preparationBlock&&!cur.is_web_streaming&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)("mv_box","_has_preparation"),Videoview.toggleRecommsColumn(),Videoview.viewScroll(),Videoview.playerOnResize(),Videoview.updateLayoutSizes(),mvcur.mvData.is_active_live&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)("mv_box","_has_recomms")||Videoview.adaptRecomsHeight(),mvcur.chatMode&&!(null==(o=window.VideoChat)?void 0:o.isHidden())&&window.Videoview.queueReconnect(),!1},toggleSideBlock(e){let _=!1;if(mvcur.chatMode&&window.VideoChat)window.VideoChat.toggle();else if(_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getBlock())_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggle();else{const e=document.getElementById("mv_box");if(e.classList.contains("_has_recomms")){const i=e.classList.contains("_hide_recomms");e.classList.toggle("_hide_recomms",!i),_=!0}}return(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("video_goods_recognition")&&(0,_web_videoview_GoodsRecognition_init__WEBPACK_IMPORTED_MODULE_34__.hideGoodsBlock)(),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.isShowed()&&_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.close(),Videoview.updateLayoutSizes(),_&&Videoview.adaptRecomsHeight(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e)},sendVideo(e,_=0){Videoview.hidePlayer();const i={stat:[window.jsc("web/page.js"),"page.css",window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")],params:{}};e&&(i.params.width=686);(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_14__.showBox)("like.php?act=publish_box",{object:"video"+mvcur.videoRaw,list:mvcur.listId,is_export:!0,from_time:_},i).setOptions({onHideAttempt:function(){return Videoview.showPlayer(),!0}}),Videoview.playerNextTimerUpdate()},showReportVideoForm(e=mvcur.mvData.oid,_=mvcur.mvData.vid,i){i=i&&"function"==typeof i?i:()=>{},(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_26__.showReportForm)("video",e,_,i)},showReportVideoCommentForm(e,_){(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_26__.showReportForm)("video_comment",e,_,(()=>(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_26__.afterCommentReportSubmit)("video",e,_)))},reportComment(e,_,i){window.stManager.add([window.jsc("web/privacy.js"),"privacy.css"],(function(){return Privacy.show(e,_,"report_"+i)}))},descTT:e=>(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_15__.showTooltip)(e,{text:_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_edit_desc"),black:1,shift:[0,7,0],showdt:0,appendEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e)}),viewScroll(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)("mv_main",!0)[1],_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)("mv_player_box")[1];let i=e-6;i=i<0?-i:0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("VideoLayerInfo__topControls","VideoLayerInfo__topControls--fixed",i>0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_pl_prev","fixed",i>0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_pl_next","fixed",i>0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)("mv_top_pl_toggle","hidden",i>_),mvcur.scrolledAway=i>_/3,Videoview.playerNextTimerUpdate(),Videoview.updateReplyFormPos()},updateReplyFormPos(){var e;if(null==(e=mvcur.mvData)?void 0:e.shortVideo)return;const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_reply_form");if(!_)return;const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_comments_wrap"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_reply_form_wrap"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.clientHeight)(),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(_),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(mvLayerWrap)[1],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i)[1]-l,[a,n]=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(i);if(t<s+n+d[1]&&n>0){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(_,"mv_reply_form_fixed");const{marginRight:e,marginLeft:i}=getComputedStyle(_),l=isNaN(parseInt(i,10))?0:parseInt(i,10),n=isNaN(parseInt(e,10))?0:parseInt(e,10);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(_,{width:a-l-n+"px",bottom:Math.min(t-s-d[1],0)+"px"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(o,{height:d[1]+"px"})}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(_,"mv_reply_form_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(_,{width:null,bottom:null}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(o,{height:null})},editInline(e){if(e&&"A"==e.target.tagName||!window.mvcur||mvcur.mvEditing||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_description"))return;const _=mvcur.videoRaw,i=mvcur.mvShown,o=mvcur.mvData,t=function(e){if(!mvcur.mvShown||mvcur.videoRaw!=_||mvcur.mvShown!=i||mvcur.mvEditing)return;Videoview.cleanExpandDescrEls(),mvcur.mvEditing=_;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{id:"mv_edit_text_wrap",innerHTML:`\n          <textarea id="mv_edit_text" onkeydown="onCtrlEnter(event, Videoview.saveInline)" onkeyup="checkTextLength(mvcur.maxDescriptionLength, this, ge('mv_caption_warn'));" placeholder="${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_edit_desc_intro")}">${e}</textarea>\n          <div id="mv_caption_warn"></div>\n        `});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_description").appendChild(o);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_edit_text");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(t,{width:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_description").offsetWidth+"px"}),(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_5__.placeholderInit)(t),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__.autosizeSetup)(t,{minHeight:26,addHeight:2}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(t,"keyup change",Videoview.onResize),setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(t,"blur",Videoview.saveInline),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("mv_descr_field")}),1)};!o.desc?t(""):window.ajax.post("al_video.php?act=edit_desc",{oid:o.oid,vid:o.vid},{onDone:t,progress:"mv_inline_edit_pr"})},cancelInline(){mvcur.mvEditing=!1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)("mv_edit_text","blur"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)("mv_descr_field"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("mv_edit_text_wrap")},saveInline(){if(!mvcur.mvEditing)return;(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)("mv_edit_text","blur");const e=mvcur.mvEditing,_=Videoview.getMvData(),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_edit_text");window.ajax.post("al_video.php?act=save_desc",{oid:_.oid,vid:_.vid,hash:_.editHash,desc:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(i)},{onDone:function(o,t){if(_.desc=o,!Videoview.isLayerShown(e))return;mvcur.mvEditing=!1;const d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("mv_descr_field");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(d,o||`<span class="mv_desc_edit">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_edit_desc")}</span>`),d.onmouseover=o?Videoview.descTT.pbind(d):null,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeData)(i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.re)("mv_edit_text_wrap"),Videoview.setTimeCodes(t),Videoview.onResize()},progress:"mv_inline_edit_pr"})},logViewedPercentage(){var e;if((null==(e=window.mvcur)?void 0:e.mvData)&&mvcur.mvData.videoRaw&&mvcur.mvData.duration){const{videoRaw:e,duration:_}=mvcur.mvData,i=Date.now(),o=mvcur.viewStartedTimestamp;if(!o)return!1;delete mvcur.viewStartedTimestamp;const t=Math.min(Math.round((i-o)/1e3),_);window.ajax.post("al_video.php?act=a_viewed_percentage",{video_raw:e,viewed_time:t,duration:_})}},toggleRecommsColumn:e=>{const _=Videoview.getMvData(),i=document.getElementById("mv_box");if(!_||_.shortVideo||!_.autoplay_other_videos||Videoview.isVideoListEmpty())return void i.classList.remove("_has_recomms");if(e){const e=document.querySelector(".VideoLayerInfo__recommendedTitleAction");e&&e.classList.toggle("_active",_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.isAutoplayEnabled())}const o=!!_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.getBlock(),t=Videoview.isMinimized();i.classList.toggle("_has_recomms",!o&&!mvcur.chatMode&&!t)},openTimeCodesList:e=>{var _;Videoview.isMinimized()&&(Videoview.unminimize(),e=!0),_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.isCollapsed()||_video_playlist__WEBPACK_IMPORTED_MODULE_21__.VideoPlaylist.toggle(!1);const i=document.getElementById("mv_box");(null==(_=i)?void 0:_.classList.contains("_has_recomms"))&&i.classList.add("_hide_recomms"),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.draw(e),Videoview.onResize(),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("video_time_codes_open","")},updateCurrentTimeCode:e=>{_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_31__.TimeCodesList.updateCurrentTimeCode(e)},initAsyncComment:()=>{const e=Videoview.getMvData();var _,i;if(!e.asyncCommentsEnabled)return void((null==(i=window.mvcur)||null==(_=i.options)?void 0:_.replyId)&&window.Videoview.showComment(window.mvcur.options.replyId));const o=document.querySelector(".VideoLayerInfo__commentsRoot--empty");o&&window.ajax.post("al_video.php?act=async_video_comments",{video:e.videoRaw,view_hash:e.itemAccessHash},{onDone:(_,i,t,d)=>{if(_){var l,s;o.innerHTML=_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_11__.extend)(mvcur.mvReplyNames,i);const a=document.getElementById("reply_field"+mvcur.post);a&&(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_5__.placeholderInit)(a,{editable:1}),e.commcount=t,e.commshown=d,(null==(s=window.mvcur)||null==(l=s.options)?void 0:l.replyId)&&window.Videoview.showComment(window.mvcur.options.replyId),setTimeout((()=>{Videoview.onResize()}),50)}},showProgress:()=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.showProgress)(o,"","VideoLayerInfo__commentsLoader")},hideProgress:()=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_13__.hideProgress)(o)}})},copyToClipboard(e){(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_12__.copyTextToClipboard)(e).then((()=>{(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.showDoneBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang("video_erid_copied"))}))}}}}]);try{stManager.done("dist/68f5edce94d9ec498a71208255068043.165dfd167885b3330639.js")}catch(e){}