(()=>{"use strict";var __webpack_modules__={96715:(e,t,o)=>{o.d(t,{Icon16Verified:()=>i});var i=(0,o(28178).makeIcon)("Icon16Verified","verified_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="verified_16"><path fill="currentColor" d="M4.5 9.586 2.957 8.043a1 1 0 0 0-1.414 1.414l2.25 2.25a1 1 0 0 0 1.414 0l5.25-5.25a1 1 0 0 0-1.414-1.414L4.5 9.586Z" /></symbol>',16,16,!1,void 0)},378448:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"Popup-module__container--cF098",inner:"Popup-module__inner--kGW4v",innerIn:"Popup-module__innerIn--BfDNl"}},387750:(e,t,o)=>{o.d(t,{default:()=>i});const i={iframeContainer:"CheckValidationPhone-module__iframeContainer--Anx8i"}},246164:(e,t,o)=>{o.d(t,{default:()=>i});const i={content:"PageBlock-module__content--Kz7Ae"}},137363:(e,t,o)=>{o.d(t,{ANALYTICS_SCREEN_OTHER:()=>s,ANALYTICS_SCREEN_SETTINGS:()=>n,GroupAdminLevel:()=>i});const i={USER:0,MODERATOR:1,EDITOR:2,ADMINISTRATOR:3,HOST:4,EVENT_CREATOR:5,CREATOR:6,PSEUDO_LEVEL_ADVERTISER:100},n="settings",s="other"},501461:(e,t,o)=>{o.d(t,{KEY:()=>i,isMainClick:()=>n,preventLinkOpening:()=>s});const i={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16,META_LEFT:91,META_RIGHT:93};function n(e){return!("click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)}const s=e=>new Promise((t=>{n(e instanceof MouseEvent?e:e.nativeEvent)&&(e.stopPropagation(),e.preventDefault(),t())}))},517366:(e,t,o)=>{var i,n,s,r,a;o.d(t,{StoryBlockType:()=>r,StoryEntryPoint:()=>n,StoryListName:()=>a,StorySource:()=>s,StoryType:()=>i}),function(e){e.PHOTO="photo",e.VIDEO="video",e.LIVE="live"}(i||(i={})),function(e){e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar"}(n||(n={})),function(e){e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar",e.MY_QUESTIONS="question_story"}(s||(s={})),function(e){e.stories="stories",e.appGroupedStories="app_grouped_stories",e.discover="discover"}(r||(r={})),function(e){e.feed="feed",e.apps="apps",e.discover="discover"}(a||(a={}))},103912:(e,t,o)=>{o.d(t,{getPerformanceStatsEventMomentData:()=>n});var i=o(121677);const n=()=>{var e,t;const o=null==(e=(t=performance).now)?void 0:e.call(t);if(void 0===o)return;return{eventTime:o,network:i.default.getConnectionEffectiveType()}}},593568:(e,t,o)=>{o.d(t,{getPerformanceStatsTools:()=>a});var i=o(11010),n=o(434788),s=o(103912),r=o(745163);function a(){return l.apply(this,arguments)}function l(){return(l=(0,i._)((function*({module:e=r.navigationStat.getModule(),page:t,entity:i,cooldownRecord:a}={}){if(!window.performance||"visible"!==window.document.visibilityState)return;const l=(0,s.getPerformanceStatsEventMomentData)();return l?Promise.all([o.e(68592),o.e(59240)]).then(o.bind(o,642440)).then((({configurePerformanceStatsUtils:o,navigationStat:s,PerformanceStatsEventName:r,AuxiliaryPerformanceStatsEventName:c,LeavingFeedEventName:d})=>{if(!s.getModule)return;const{storePerformanceStats:u,sendStoredPerformanceStats:_,readMetricValue:h}=o((0,n._)({},l,{module:e,page:t,entity:i,cooldownRecord:a}));return h(r.load_performance_stats_chunk)||(u(r.load_performance_stats_chunk,!0),_()),{storePerformanceStats:u,sendStoredPerformanceStats:_,readMetricValue:h,PerformanceStatsEventName:r,AuxiliaryPerformanceStatsEventName:c,LeavingFeedEventName:d}})):void 0}))).apply(this,arguments)}},59985:(e,t,o)=>{o.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>i,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>d,REACTION_ID_DEFAULT:()=>s,REACTION_ID_MAX:()=>r,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>l,REACTION_SET_ITEMS_MIN_COUNT:()=>c,SHOW_TOOLTIP_TIMEOUT:()=>n});const i=600,n=140,s=0,r=7,a=0,l=void 0,c=2,d=s},457972:(e,t,o)=>{o.d(t,{isDebugEnabled:()=>s});var i=o(531730);let n;const s=()=>(void 0!==n||(n=!!i.ls.get("reactions.debug_enabled")),n)},192441:(e,t,o)=>{o.d(t,{reactionCountsBrandUnwrap:()=>n,reactionCountsBrandWrap:()=>s});var i=o(640971);const n=e=>(0,i.unwrap)(e),s=e=>(0,i.wrap)(e)},698216:(e,t,o)=>{o.d(t,{reactionLogError:()=>s});var i=o(970978);const n="reactions";function s({error:e,reportError:t=!1}){t&&(0,i.logError)(e,{environment:n}),console.error(e)}},822715:(e,t,o)=>{o.d(t,{areCountersEqual:()=>T,calcCounters:()=>b,calcCountersSum:()=>k,calcCountersWeightedSum:()=>y,counterForReactionId:()=>E,getDefaultReaction:()=>c,getDefaultReactionTitle:()=>d,getReaction:()=>l,hasReactionsForCounts:()=>S,isReactionIdSet:()=>h,isReactionIdUnset:()=>p,isUnknownObject:()=>a,isValidReactionId:()=>f,parseReactionId:()=>g,parseReactionIdOrUnset:()=>m,parseReactionMenuConfig:()=>v,prepareReactionMenuSet:()=>_,validateReactionSetPayloaditems:()=>w});var i=o(59985),n=o(192441),s=o(659397);const r=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),a=e=>null!==e&&"object"==typeof e,l=(e,t)=>e.itemsById[t],c=e=>l(e,i.REACTION_ID_DEFAULT),d=e=>{var t;return null==(t=c(e))?void 0:t.title},u=(e,t)=>0===e.length?"":((e,t,o=!0)=>e.reduce(((e,i)=>{const n=t(i),s=t(e);return s===n?o?e:i:s<n?e:i})))(e,(e=>Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)),!1).url,_=(e,t,o)=>{const i=t.map((({asset:e,color_sets:t,id:i,score:n,title:s})=>{var r,a;return{animationURL:e.animation_url||void 0,backgroundColor:null==(r=t)?void 0:r.background,id:i,imageMenuURL:u(e.images,o.imageMenuSize),imagePreviewURL:"imagePreviewSize"in o?u(e.images,o.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in o?u(e.images,o.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in o?u(e.images,o.imageStoryPreviewSize):void 0,score:n,title:s,titleColor:null==(a=t)?void 0:a.foreground}})),n={};return i.forEach((e=>{n[e.id]=e})),{id:e,items:i,itemsById:n}},h=e=>e!==i.REACTION_ID_UNSET,p=e=>e===i.REACTION_ID_UNSET,f=e=>r(e)&&e>=i.REACTION_ID_MIN&&e<=i.REACTION_ID_MAX,g=e=>{const t=parseInt(e,10);return f(t)?{isValid:!0,value:t}:{isValid:!1}},m=e=>{const t=g(e);return t.isValid?t.value:i.REACTION_ID_UNSET},w=(e,t)=>{if(e.length<i.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},v=e=>{if(!a(e))return;const t={},{animationShowStaticAfterEnd:o,menuShowDelay:n,openedDefaultReactionId:s,reportJsErrors:r}=e;return"number"!=typeof n&&void 0!==n||(t.menuShowDelay=n),"boolean"==typeof o&&(t.animationShowStaticAfterEnd=o),"boolean"==typeof r&&(t.reportJsErrors=r),"number"==typeof s||null===s?null===s?t.openedDefaultReactionId=void 0:f(s)&&(t.openedDefaultReactionId=s):t.openedDefaultReactionId=i.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},b=(e,t)=>{const o=(0,n.reactionCountsBrandWrap)({});return Object.entries((0,n.reactionCountsBrandUnwrap)(e)).forEach((([e,i])=>{var n,s,r;const a=e;var l;const c=null!=(l=null==(r=t)||null==(s=r.itemsById)||null==(n=s[a])?void 0:n.score)?l:1;o[a]=c*(i||0)})),o},k=e=>Object.values((0,n.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),y=e=>k((0,n.reactionCountsBrandWrap)(e)),S=e=>k(e)>0;var C;const E=(e,t)=>null!=(C=e[t])?C:void 0,T=(e,t)=>e&&t?(0,s.isEqual)(e,t):e===t},640971:(e,t,o)=>{o.d(t,{unwrap:()=>i,wrap:()=>n});const i=e=>e,n=e=>e},874162:(e,t,o)=>{o.d(t,{DEFAULT_CACHE:()=>l,ORDER_ERRORS:()=>d,ORDER_ITEM_ERRORS:()=>u,SAMPLE_RECIPIENT_ID:()=>c,STICKER_ANIMATION:()=>a,STICKER_IMAGE:()=>r,STICKER_PACK_ICON:()=>n,STICKER_PACK_THUMB:()=>s});var i=o(899033);const n={square_png:{id:"square.png",width:104,height:104},square_15x_png:{id:"square_1.5x.png",width:156,height:156},square_2x_png:{id:"square_2x.png",width:208,height:208},square_3x_png:{id:"square_3x.png",width:312,height:312},square_4x_png:{id:"square_4x.png",width:416,height:416}},s={"102_png":{id:"102.png",width:102,height:102,theme:i.Theme.LIGHT},"51_png":{id:"51.png",width:51,height:51,theme:i.Theme.LIGHT},"68_png":{id:"68.png",width:68,height:68,theme:i.Theme.LIGHT},"34_png":{id:"34.png",width:34,height:34,theme:i.Theme.LIGHT},"60_png":{id:"60.png",width:60,height:60,theme:i.Theme.LIGHT},"30_png":{id:"30.png",width:30,height:30,theme:i.Theme.LIGHT},"102b_png":{id:"102b.png",width:102,height:102,theme:i.Theme.DARK},"51b_png":{id:"51b.png",width:51,height:51,theme:i.Theme.DARK},"68b_png":{id:"68b.png",width:68,height:68,theme:i.Theme.DARK},"34b_png":{id:"34b.png",width:34,height:34,theme:i.Theme.DARK},"60b_png":{id:"60b.png",width:60,height:60,theme:i.Theme.DARK},"30b_png":{id:"30b.png",width:30,height:30,theme:i.Theme.DARK},"44_png":{id:"44.png",width:44,height:44},"22_png":{id:"22.png",width:22,height:22}},r={"64_png":{id:"64.png",width:64,height:64,theme:i.Theme.LIGHT},"128_png":{id:"128.png",width:128,height:128,theme:i.Theme.LIGHT},"256_png":{id:"256.png",width:256,height:256,theme:i.Theme.LIGHT},"352_png":{id:"352.png",width:352,height:352,theme:i.Theme.LIGHT},"512_png":{id:"512.png",width:512,height:512,theme:i.Theme.LIGHT},"64b_png":{id:"64b.png",width:64,height:64,theme:i.Theme.DARK},"128b_png":{id:"128b.png",width:128,height:128,theme:i.Theme.DARK},"256b_png":{id:"256b.png",width:256,height:256,theme:i.Theme.DARK},"352b_png":{id:"352b.png",width:352,height:352,theme:i.Theme.DARK},"512b_png":{id:"512b.png",width:512,height:512,theme:i.Theme.DARK}},a={[i.Theme.LIGHT]:"animation.json",[i.Theme.DARK]:"animation.b.json"},l={products:(0,i.createProductsMap)([]),productIdsQueue:new Set,productsPromise:void 0,productPromises:new Map,stickers:new Map},c=-1;var d,u;!function(e){e.NOT_SIGNED_IN="not_signed_in",e.NO_VALID_ITEMS="no_valid_items"}(d||(d={})),function(e){e.DUPLICATE_PRODUCT="duplicate_product"}(u||(u={}))},899033:(e,t,o)=>{var i;o.d(t,{ProductsByType:()=>_,Theme:()=>i,UserProductStateKey:()=>a,createProductsMap:()=>r,imageSizeCache:()=>s,imageSizesIndex:()=>n,isBasePack:()=>l,isPackProduct:()=>d,isStyleProduct:()=>c}),function(e){e.LIGHT="light",e.DARK="dark",e.DEFAULT="light"}(i||(i={}));const n=Symbol(),s=Symbol(),r=e=>new Map(e);var a;!function(e){e.IsNew="is_new"}(a||(a={}));const l=e=>void 0!==e.sticker_ids,c=e=>void 0!==e.base_id,d=e=>l(e)&&!c(e);var u;!function(e){e.Pack="pack",e.Style="style"}(u||(u={}));class _{add(e){e&&(d(e)?this.pack.add(e):c(e)&&this.style.add(e))}getPack(){return this.pack.values().next().value}getStyles(){return Array.from(this.style.values())}getCount(){return this.pack.size+this.style.size}constructor(e=[]){this.pack=new Set,this.style=new Set,e.forEach((e=>this.add(e)))}}},457299:(e,t,o)=>{o.d(t,{getStickerAnimationUrl:()=>d,getStickerImageUrl:()=>c,getStickerPackIconUrl:()=>u,getStickersKitModule:()=>h,isSampleOrderItem:()=>_,logStickersError:()=>p});var i=o(899033),n=o(874162),s=o(970978);const r=(e,t,o,n=i.Theme.DEFAULT)=>{const s=window.devicePixelRatio,r=[t*=s,o*=s,n].toString();let a=e[i.imageSizeCache];if(a&&a.has(r)){const e=a.get(r);if(e)return e}a||(a=new Map,e[i.imageSizeCache]=a);const l=(e=>{let t=e[i.imageSizesIndex];return t||(t=Object.values(e).sort(((e,t)=>e.width-t.width||e.height-t.height)),e[i.imageSizesIndex]=t),t})(e).filter((e=>!e.theme||e.theme===n)),c=l.find((e=>e.width>=t&&e.height>=o))||l[l.length-1];return a.set(r,c),c},a=(e,t,o=i.Theme.DEFAULT)=>r(n.STICKER_IMAGE,e,t,o),l=(e,t)=>e.image.base_url+"/"+t.id+(e.image.version?`?${e.image.version}`:"");function c(e,t,o,n=i.Theme.DEFAULT){var s;if(null==(s=e.render)?void 0:s.images){const{images:i}=e.render;let s;i.sort(((e,t)=>e.width-t.width||e.height-t.height));for(const e of i)if(e.width>=t&&e.height>=o){if(e.theme===n)return e.url;s=e}if(s)return s.url}return l(e,a(t,o,n))}const d=(e,t=i.Theme.DEFAULT)=>e.animation?e.animation.base_url+"/"+n.STICKER_ANIMATION[t]+(e.animation.version?`?${e.animation.version}`:""):"",u=(e,t,o,s=i.Theme.DEFAULT)=>((e,t)=>e.icon.base_url+"/"+t.id+(e.thumb.version?`?${e.thumb.version}`:""))(e,((e,t,o=i.Theme.DEFAULT)=>r(n.STICKER_PACK_ICON,e,t,o))(t,o,s)),_=e=>e.recipient_id===n.SAMPLE_RECIPIENT_ID,h=()=>o.e(51162).then(o.bind(o,406857)),p=e=>{(0,s.logError)(new Error(`Stickers: ${e}`),{environment:"stickers"})}},301951:(e,t,o)=>{o.d(t,{initReactApp:()=>n});var i=o(973935);function n(e,t,o){var n;e&&(i.render(t,e),o||null==(n=window.cur.destroy)||n.push((()=>{e&&i.unmountComponentAtNode(e)})))}},506948:(e,t,o)=>{o.d(t,{CheckValidationPhone:()=>p});var i=o(785893),n=o(667294),s=o(988882),r=o(869048),a=o(294463),l=o(86427),c=o(382893),d=o(829082),u=o(502274),_=o(234186),h=o(387750);const p=({app_id:e,preventCheck:t=(()=>!1)})=>{const[o,p]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[m,w]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!0),[k,y]=(0,n.useState)(null),S=(0,n.useRef)(null),C=()=>{(0,d.validatePhoneCheck)().then((({status:e,sid:o})=>{if(e===a.ValidationStatus.NEED_VALIDATE||e===a.ValidationStatus.LAST_CHANCE_VALIDATE){const i=e!==a.ValidationStatus.LAST_CHANCE_VALIDATE,n={name:"auth_validation_phone",params:{status:i?"1":"0"}};o&&(n.params.sid=o),p({url:window.location.origin,scheme:(0,_.getCurrentScheme)(),action:n}),b(i),t()||w(!0)}})).catch((()=>{}))},E=(0,n.useCallback)((()=>{k&&k.sendMessage({handler:s.UserEvents.VALIDATION_PHONE_CLOSE,params:{},type:"vk-sak-sdk"})}),[k]);return(0,n.useEffect)((()=>{t()||C()}),[]),(0,n.useEffect)((()=>{const e=()=>{document.hidden||m||f||t()||C()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[m,t,f]),(0,n.useEffect)((()=>{const t=S.current;if(m&&t&&o){(0,u.setConfig)({appId:e});const i=new s.User({container:t});i.on(s.UserEvents.VALIDATION_PHONE_CLOSE,(e=>{e.status===l.ValidationProceedStatus.IS_VALIDATED&&g(!0),w(!1),e.redirectUrl&&""!==e.redirectUrl&&(window.location.href=e.redirectUrl)})),i.on(s.UserEvents.CONTENT_IN_HEIGHT,(e=>{t.style.height=e.height+"px"})),i.open(o).then((()=>y(i))).catch((()=>{}))}}),[m,o]),(0,i.jsx)(r.AppRootProvider,{children:(0,i.jsx)(c.Popup,{isOpen:m,canClose:v,handleClose:E,children:(0,i.jsx)("div",{ref:S,className:h.default.iframeContainer})})})}},514166:(e,t,o)=>{o.d(t,{CheckValidationPhoneFallback:()=>p});var i=o(785893),n=o(667294),s=o(988882),r=o(869048),a=o(294463),l=o(86427),c=o(382893),d=o(829082),u=o(502274),_=o(234186),h=o(387750);const p=({app_id:e,isValidModule:t=!1,onInit:o})=>{const[p,f]=(0,n.useState)(null),[g,m]=(0,n.useState)(t),[w,v]=(0,n.useState)(!1),[b,k]=(0,n.useState)(!1),[y,S]=(0,n.useState)(!0),[C,E]=(0,n.useState)(null),T=(0,n.useRef)(null),L=()=>{(0,d.validatePhoneCheck)().then((({status:e,sid:t})=>{if(e===a.ValidationStatus.NEED_VALIDATE||e===a.ValidationStatus.LAST_CHANCE_VALIDATE){const o=e!==a.ValidationStatus.LAST_CHANCE_VALIDATE,i={name:"auth_validation_phone",params:{status:o?"1":"0"}};t&&(i.params.sid=t),f({url:window.location.origin,scheme:(0,_.getCurrentScheme)(),action:i}),S(o),k(!0)}})).catch((()=>{}))},P=(0,n.useCallback)((()=>{C&&C.sendMessage({handler:s.UserEvents.VALIDATION_PHONE_CLOSE,params:{},type:"vk-sak-sdk"})}),[C]);return(0,n.useEffect)((()=>{o&&o(m)}),[o]),(0,n.useEffect)((()=>{g&&L()}),[g]),(0,n.useEffect)((()=>{const e=()=>{document.hidden||b||w||!g||L()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[b,g,w]),(0,n.useEffect)((()=>{const t=T.current;if(b&&t&&p){(0,u.setConfig)({appId:e});const o=new s.User({container:t});o.on(s.UserEvents.VALIDATION_PHONE_CLOSE,(e=>{e.status===l.ValidationProceedStatus.IS_VALIDATED&&v(!0),k(!1),e.redirectUrl&&""!==e.redirectUrl&&(window.location.href=e.redirectUrl)})),o.on(s.UserEvents.CONTENT_IN_HEIGHT,(e=>{t.style.height=e.height+"px"})),o.preload(p).then((()=>E(o))).catch((()=>{}))}}),[b,p]),(0,i.jsx)(r.AppRootProvider,{children:(0,i.jsx)(c.Popup,{isOpen:b,canClose:y,handleClose:P,children:(0,i.jsx)("div",{ref:T,className:h.default.iframeContainer})})})}},382893:(e,t,o)=>{o.d(t,{Popup:()=>a});var i=o(785893),n=o(667294),s=o(86894),r=o(378448);const a=({children:e,handleClose:t,isOpen:o=!1,canClose:a=!0})=>((0,s.useScrollLock)(o),(0,n.useEffect)((()=>{const e=e=>"Escape"===e.key?t():null;if(o)return a&&document.body.addEventListener("keydown",e),()=>{document.body.removeEventListener("keydown",e)}}),[t,a,o]),o?(0,i.jsx)(s.PopoutWrapper,{className:r.default.container,onClick:()=>a&&t(),children:(0,i.jsxs)("div",{className:r.default.inner,children:[(0,i.jsx)("div",{className:r.default.innerIn,children:e}),a&&(0,i.jsx)(s.ModalDismissButton,{onClick:t})]})}):null)},86427:(e,t,o)=>{var i;o.d(t,{ValidationProceedStatus:()=>i}),function(e){e[e.IS_VALIDATED=1]="IS_VALIDATED"}(i||(i={}))},294463:(e,t,o)=>{var i;o.d(t,{ValidationStatus:()=>i}),function(e){e[e.NEED_VALIDATE=3]="NEED_VALIDATE",e[e.LAST_CHANCE_VALIDATE=5]="LAST_CHANCE_VALIDATE"}(i||(i={}))},829082:(e,t,o)=>{o.d(t,{validatePhoneCheck:()=>s});var i=o(434788),n=o(599809);const s=e=>{const{apiDomain:t}=window.vk.apiConfigDomains;return(0,n.api)("auth.validatePhoneCheck",{is_auth:0,mode:1},(0,i._)({domain:t},e))}},234186:(e,t,o)=>{o.d(t,{getCurrentScheme:()=>s});var i=o(68003),n=o(910907);const s=()=>{const e=i.colorScheme.getScheme();return(0,n.normalizeScheme)(e)}},910907:(e,t,o)=>{o.d(t,{normalizeScheme:()=>n});var i=o(68003);const n=e=>{switch(e){case i.ColorSchemeName.WebDark:case i.ColorSchemeName.Dark:return i.ColorSchemeName.Dark;default:return i.ColorSchemeName.Light}}},502274:(e,t,o)=>{o.d(t,{setConfig:()=>r});var i=o(434788),n=o(988882),s=o(872629);const r=(e={})=>{const{loginDomain:t,connectDomain:o}=window.vk.apiConfigDomains;n.Config.init((0,i._)({appId:s.AuthAppId.VK,loginDomain:t,connectDomain:o},e))}},222285:(e,t,o)=>{o.d(t,{BADGES_BOX_WIDTH:()=>i,BADGE_COMMENT_SELECTOR:()=>l,BadgesEventRef:()=>r,BadgesObjectType:()=>a,DONUT_BADGE_ID:()=>u,DONUT_FORM_STATUSES:()=>d,ERRORS:()=>s,LINK_TO_HELP_FOR_AUTHORS:()=>n,LoadingStatus:()=>c});const i=640,n="/@authors-badges";var s,r,a;!function(e){e[e.ERROR_PARAM=100]="ERROR_PARAM",e[e.NEED_CONFIRMATION=24]="NEED_CONFIRMATION",e[e.BALANCE=504]="BALANCE"}(s||(s={})),function(e){e.TAB="tab",e.SENDER_LIST="sender_list",e.POST_BTN="post_btn"}(r||(r={})),function(e){e[e.WALL=11]="WALL"}(a||(a={}));const l="BadgeComment";var c;!function(e){e[e.pending=0]="pending",e[e.loaded=1]="loaded",e[e.failed=2]="failed"}(c||(c={}));const d={waiting:"waiting",initial:"initial",error:"error",waiting_timeout:"waiting_timeout",payment_cancel:"payment_cancel"},u=38},286118:(e,t,o)=>{o.d(t,{storyPublisherInitAsync:()=>n});var i=o(584356);function n(e){(function(e){const t=!0,o=(0,i.showBoxLoader)();return e.then((e=>t&&(0,i.isBoxLoadingCancelled)(o)?s:((0,i.isBoxLoadingCancelled)(o)||(0,i.hideBoxLoader)(),e)),(e=>((0,i.hideBoxLoader)(),Promise.reject(e))))})(window.stManager.add([window.jsc("web/story_publisher.js")])).then((t=>{(function(e){return e===s})(t)||window.StoryPublisher.init(...e)}))}const s="showBoxLoaderForPromise cancelled"},975577:(e,t,o)=>{o.d(t,{OwnersListPageBlock:()=>f});var i=o(434788),n=o(820224),s=o(785893),r=o(86894),a=o(96715),l=o(399639),c=o(963937),d=o(54929),u=o(514995),_=o(545637),h=o(832550),p=o(885693);const f=e=>{var{title:t,href:o,items:f,button:g}=e,m=(0,n._)(e,["title","href","items","button"]);return f.length?(0,s.jsxs)(p.PageBlock,(0,i._)({},m,{header:(0,s.jsx)(l.Header,{href:o,children:t}),separator:"hide",children:[(0,s.jsx)(r.Spacing,{size:4}),(0,s.jsx)(c.SpacedList,{spacing:2,children:f.map((e=>(0,s.jsx)(d.SimpleCell,{href:e.href,before:(0,s.jsx)(u.AvatarRich,{size:48,src:e.photo,isNFT:e.is_nft,imgAlt:e.title}),badgeAfterTitle:e.is_verified&&(0,s.jsx)(a.Icon16Verified,{}),subtitle:e.subtitle,children:e.title},e.id)))}),g?(0,s.jsx)(_.Div,{children:(0,s.jsx)(h.Button,{mode:"secondary",size:"s",stretched:!0,href:o,children:g})}):(0,s.jsx)(r.Spacing,{size:8})]})):null}},885693:(e,t,o)=>{o.d(t,{PageBlock:()=>l});var i=o(434788),n=o(820224),s=o(785893),r=o(513724),a=o(246164);const l=e=>{var{children:t}=e,o=(0,n._)(e,["children"]);return(0,s.jsx)(r.Group,(0,i._)({},o,{padding:"m",mode:"card",children:(0,s.jsx)("div",{className:a.default.content,children:t})}))}},398986:(e,t,o)=>{var i,n,s,r=o(630260),a=o(286109),l=o(839470);(null==(n=window.vk)||null==(i=n.pe)?void 0:i.static_manager_dynamic_imports)&&(null==(s=window.vk)?void 0:s.stDomain)&&(o.p=window.vk.stDomain+"/dist/"),window.feed=r.Feed,window.Feed=r.Feed,(0,l.partConfigEnabled)("web_navigation_listeners")&&window.nav.addNavigationStartListener(a.onNavigationStart);try{window.stManager.done(window.jsc("web/feed.js"))}catch(e){}},131735:(e,t,o)=>{o.d(t,{PhotoCarouselBlock:()=>r});var i=o(115979),n=o(767722),s=o(428518);class r{initListeners(){this.post.addEventListener("click",this.onPostClick)}deInitListener(){this.post.removeEventListener("click",this.onPostClick)}createItems(e){var t;const o=Array.from(e.querySelectorAll(`.${s.PHOTO_CAROUSEL_ITEM_CLASS}`)),i={};return(null==(t=this.blockOptions)?void 0:t.sendAnalytic)&&(i.sendAnalytic=(e,t)=>{var o,i;(null==(o=this.blockOptions)?void 0:o.sendAnalytic)&&(null==(i=this.blockOptions)||i.sendAnalytic(e,this.post,t))}),o.map((e=>new n.PhotoCarouselBlockItem(e,i)))}getCarouselOptions(){var e;const t=null==(e=this.blockOptions)?void 0:e.sendAnalytic;return{onPrevClick:e=>{t&&t("click_previous",this.post,e)},onNextClick:e=>{t&&t("click_next",this.post,e)}}}constructor(e,t){var o;this.isDestroyed=!1,this.destroy=()=>{this.isDestroyed||(this.deInitListener(),this.carousel.destroy(),this.items.forEach((e=>e.destroy())),this.isDestroyed=!0)},this.onPostClick=e=>{var t;const o=e.target;(null==(t=this.blockOptions)?void 0:t.sendAnalytic)&&(o.classList.contains("post_img")||o.classList.contains("author")||o.classList.contains("mem_link")||o.classList.contains(s.PHOTO_CAROUSEL_AVATAR_CLASS)?this.blockOptions.sendAnalytic("open_user",this.post,e):o.classList.contains(s.PHOTO_ELEMENT_CLASS)||o.classList.contains(s.PHOTO_NO_SIZE_ELEMENT_CLASS)||o.classList.contains("page_post_thumb_wrap")?this.blockOptions.sendAnalytic("open_photo",this.post,e):o.classList.contains(s.PHOTO_CAROUSEL_HIDE_BTN_CLASS)&&this.blockOptions.sendAnalytic("hide",this.post,e))},this.post=e,this.blockOptions=t;const n=this.getCarouselOptions();this.items=this.createItems(e),this.carousel=new i.PhotoCarousel(e,this.items,n),this.initListeners(),null==(o=window.cur.destroy)||o.push(this.destroy)}}},767722:(e,t,o)=>{o.d(t,{PhotoCarouselBlockItem:()=>l});var i=o(509366),n=o(705758),s=o(827652),r=o(953908),a=o(95432);class l extends i.PhotoCarouselItem{destroy(){this.deInitListeners()}initListeners(){this.shareBtn&&this.shareBtn.addEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.addEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.addEventListener("click",this.onLikeClick),this.photo.addEventListener("click",this.onPhotoClick)}deInitListeners(){this.shareBtn&&this.shareBtn.removeEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.removeEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.removeEventListener("click",this.onLikeClick),this.photo.removeEventListener("click",this.onPhotoClick)}showPhoto(e,t=this.photoViewOptions){(0,a.showPhoto)(this.photoRawId,this.photoContext,t,e),(0,r.cancelEvent)(e)}constructor(e,t){super(e),this.onPhotoClick=e=>{var t;e.ctrlKey||e.metaKey||(this.showPhoto(e),(null==(t=this.options)?void 0:t.sendAnalytic)&&this.options.sendAnalytic("open_photo"))},this.onShareClick=e=>{var t;if(!this.objectRawId)return;const o=null==(t=this.options)?void 0:t.sendAnalytic;o&&(o("click_to_sharing",e),window.cur.sbOnShare=()=>{o("repost",e)}),s.Likes.share(this.objectRawId,this.shareOptions),(0,r.cancelEvent)(e)},this.onCommentsClick=e=>{var t;const o=this.photoViewOptions||{};o.commentFocusInit=!0,this.showPhoto(e,o);const i=null==(t=this.options)?void 0:t.sendAnalytic;i&&i("click_to_comment",e)},this.onLikeClick=e=>{var t;if(!(this.likeBtn&&this.objectRawId&&this.likeHash))return;const o=this.isLiked()?"unlike":"like",i=null==(t=this.options)?void 0:t.sendAnalytic;i&&i(o,e),s.Likes.toggle(this.likeBtn,e,this.objectRawId,this.likeHash)},this.isLiked=()=>this.likeBtn&&this.likeBtn.classList.contains("active"),this.options=t,this.shareBtn=e.querySelector("._share"),this.commentsBtn=e.querySelector("._comment"),this.likeBtn=e.querySelector("._like"),this.objectRawId=e.dataset.objectRawId,this.likeHash=e.dataset.likeHash;const o=e.dataset.shareOptions||"";this.shareOptions=o&&(0,n.parseJSON)(o),this.initListeners()}}},135617:(e,t,o)=>{o.d(t,{initPhotoBlockInPost:()=>a});var i=o(131735),n=o(428518),s=o(45203),r=o(970978);function a(e,t){const o=e.querySelector(`.${n.PHOTO_CAROUSEL_CLASS}`);if(o)try{if(o.classList.contains("PhotoCarousel--recognize"))return new s.PhotoRecognizeBlock(e);const n={sendAnalytic:t};return new i.PhotoCarouselBlock(e,n)}catch(e){console.error(e),(0,r.logError)(e)}}},9747:(e,t,o)=>{o.d(t,{initFeedRightBlocks:()=>d});var i=o(434788),n=o(785893),s=o(86894),r=o(659397),a=o(869048),l=o(975577),c=o(301951);const d=e=>{e=(0,r.decodeHTMLEntitiesDeep)(e);const t=document.querySelector("#feed_right_blocks_root");(0,c.initReactApp)(t,(0,n.jsxs)(a.AppRootProvider,{children:[(0,n.jsx)(s.Spacing,{size:15}),(0,n.jsx)(l.OwnersListPageBlock,(0,i._)({},e))]}))}},215460:(e,t,o)=>{var i;o.d(t,{BlockTypeIds:()=>i}),function(e){e.YoulaRecommendationsCarousel="block_youla-recommendations-carousel",e.AliExpressRecommendationsCarousel="block_aliexpress-recommendations-carousel",e.PhotoRecognize="tags_suggestions",e.RecommendedNarratives="recommended_narratives",e.BookmarkGame="bookmark_game",e.AchievementGame="achievement_game",e.VideosForYou="videos_for_you",e.VideoPostcard="video_postcard",e.UXPollBlock="uxpoll_block"}(i||(i={}))},688756:(e,t,o)=>{o.d(t,{LEAVING_FEED_STATS:()=>i});const i="leaving_feed_stats"},718254:(e,t,o)=>{o.d(t,{feedLoadingStats:()=>c});var i=o(11010),n=o(839470),s=o(593568),r=o(286109),a=o(688756);function l(){return(l=(0,i._)((function*(){const e=yield(0,s.getPerformanceStatsTools)({module:"feed",entity:a.LEAVING_FEED_STATS});if(!e)return;const{storePerformanceStats:t,sendStoredPerformanceStats:o,readMetricValue:i,LeavingFeedEventName:n}=e;window.setTimeout((()=>{Object.keys(n).some(i)||(t(n.stay_in_feed,!0),o(),window.nav.removeNavigationStartListener(r.onNavigationStart))}),12e4)}))).apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=(0,i._)((function*({collect_stats:e,is_skeleton_rendered:t}){if(!e||!(0,n.partConfigEnabled)("feed_web_performance_stats"))return;(0,n.partConfigEnabled)("web_navigation_listeners")&&function(){l.apply(this,arguments)}();const o=yield(0,s.getPerformanceStatsTools)({module:"feed"});if(!o)return;const{storePerformanceStats:i,sendStoredPerformanceStats:r,PerformanceStatsEventName:a,AuxiliaryPerformanceStatsEventName:c}=o;i(a.render_content),i({metricName:a.render_content_without_ttfb,basisMetricName:a.render_content,auxiliaryMetricName:c.TTFB}),t?(i(a.render_content_after_skeleton),i({metricName:a.render_content_after_skeleton_without_ttfb,basisMetricName:a.render_content_after_skeleton,auxiliaryMetricName:c.TTFB}),i({metricName:a.render_content_after_skeleton_without_skeleton,basisMetricName:a.render_content_after_skeleton,auxiliaryMetricName:a.render_skeleton})):(i(a.render),i({metricName:a.render_without_ttfb,basisMetricName:a.render,auxiliaryMetricName:c.TTFB})),r()})),d.apply(this,arguments)}},941468:(e,t,o)=>{o.d(t,{feedLogFilteredRow:()=>s});var i=o(385376),n=o(290266);function s({filterReason:e,ref:t,row:o,rowsContainer:s,section:r}){var a,l;const c={contentId:null==(a=o.firstElementChild)?void 0:a.id,feedRowsCount:s.childElementCount,filterReason:e,ref:t,rowFlags:(0,n.formatStringValueBooleans)([Boolean(null==(l=o.firstElementChild)?void 0:l.id),Boolean(o.firstElementChild)]),section:r};(0,i.saveStatlogEvents)({name:"feed_pagination_item_filtered",value:c})}},175426:(e,t,o)=>{function i(e){const t=window.cur;t.feedScrollCheckIntervalID&&clearInterval(t.feedScrollCheckIntervalID);const o=setInterval((function(){"feed"===window.cur.module?e():i()}),500);function i(){clearInterval(o)}t.feedScrollCheckIntervalID=o,setTimeout(i,5e3)}o.d(t,{feedPaginationIntervalCheckInit:()=>i})},523408:(e,t,o)=>{o.d(t,{shouldFilterPaginatedRow:()=>l});const i=/^post(-?\d+_\d+)$/,n=e=>!!e.id&&i.test(e.id),s=e=>!!e.id&&e.id.startsWith("feedback_row"),r={shouldFilter:!1},a={shouldFilter:!0,filterReason:"empty"};function l({row:e}){const t=e.firstElementChild;return t?function(e){const t=n(e),o=s(e);if(!t&&!o)return r;const i=!!e.id&&null!==document.querySelector(`#${e.id}`);if(!i)return r;return{shouldFilter:!0,filterReason:c({isNotification:o,isPost:t})}}(t):a}function c(e){return e.isNotification?"duplicate_notification":e.isPost?"duplicate_post":"duplicate_unknown"}},864424:(e,t,o)=>{o.d(t,{isFeedPostDurationStatsFixEnabled:()=>n});var i=o(839470);const n=()=>(0,i.partConfigEnabled)("feed_posts_duration_stats_fix")},944615:(e,t,o)=>{o.d(t,{isAdWithLongImpression:()=>c,isAdWithLongImpressionOnly:()=>d,isAdWithShowOff:()=>u,isAutoplayAd:()=>l,isElemViewable:()=>h,postsGetRaws:()=>a});var i=o(280598),n=o(795558),s=o(82161),r=o(809053);const a=e=>{if(!(e instanceof HTMLElement))return{};let t=(0,s.indexOf)((0,n.domPN)(e).children,e),o=e.firstElementChild;if(!(o instanceof HTMLElement))return{};for(;o&&o.id.startsWith("moat");)o=(0,n.domNS)(o);if(!(o instanceof HTMLElement))return{};let i,a,l,c=/^post(-?\d+_\d+)$/,d={};if("ads_feed_placeholder"===o.id)return d;const u=window.cur;d={module:(0,r.resolveRef)(u.module,u.section,u.subsection),index:t},"feed"===u.module&&"search"===u.section&&(d.q=u.q);let _=o.getAttribute("data-ad-view");_&&(d["ad_"+_]=1);let h=o.getAttribute("post_view_hash");h&&(d.hash=h);let p=o.getAttribute("data-post-track-code");if(p&&!_&&(d.trackCode=p),"block_"===o.id.substr(0,6)){d[o.id]=1,d.block=o.id.substr(6);let e=(0,n.attr)(o,"data-contain");e&&e.split(",").forEach((function(e){const t=e.split(":");d[t[0]]=(0,s.intval)(t[1])||1}))}else if(a=o.id.match(c))d[a[1]]=1;else if(a=o.id.match(/^post(adsite.*)$/))d[a[1]]=1;else{var f;if(i=o.className,a=i.match(/feed_reposts_wrap(-?\d+_\d+)/)){if(l=(0,n.domFC)(o),(0,n.hasClass)((0,n.domFC)(l),"post_copy")&&(d[a[1]]=-1),(a=null==(f=(0,n.domFC)(l))?void 0:f.id.match(c))&&(d[a[1]]=1),(0,n.isVisible)(l=(0,n.domNS)(l)))for(l=(0,n.domFC)(l);l;l=(0,n.domNS)(l)){var g;(a=null==(g=l)?void 0:g.id.match(c))&&(d[a[1]]=1)}}else if(a=i.match(/feed_repost(-?\d+_\d+)/)){if(l=(0,n.domFC)(o),!l)return d;(0,n.hasClass)(l,"post_copy")&&(d[a[1]]=-1),(a=l.id.match(c))&&(d[a[1]]=1)}else{let e=o.id;if((0,n.hasClass)(o,"post_photos")){var m,w,v;l=(0,n.geByClass1)("post_image",o,"a");const t=null==(v=l)||null==(w=v.querySelector)||null==(m=w.call(v,"[data-post-id]"))?void 0:m.getAttribute("data-post-id");t&&(a=t.match(/^(-?\d+_p?\d+)$/),a&&(e=a[1]))}d[e]=1}}return d},l=e=>{const t=e&&(0,n.domFC)(e);return t&&t.hasAttribute("data-ad-video-autoplay")},c=e=>{const t=e&&(0,n.domFC)(e);return t&&(t.hasAttribute("data-ad-stat-impression_long")||t.hasAttribute("data-ad-disabled-stat-impression_long"))},d=e=>{let t=e&&(0,n.domFC)(e);return t&&t.hasAttribute("data-ad-views-long-only")},u=e=>{let t=e&&(0,n.domFC)(e);return t&&t.hasAttribute("data-ad-stat-show_off")},_=(0,i.memoizeFirstTruthy)((()=>(0,n.ge)("page_header").offsetHeight)),h=(e,t,o,i)=>{let n=_(),s=o+n,r=o+i,a=e.offsetHeight,l=e.offsetTop+n,c=l+a;return(c>s&&l<r?(Math.min(r,c)-Math.max(s,l))/a:0)>=t}},42575:(e,t,o)=>{o.d(t,{initCheckValidationPhone:()=>_});var i=o(785893),n=o(973935),s=o(293579),r=o(321850),a=o(872629),l=o(584356),c=o(839470),d=o(506948),u=o(514166);const _=()=>{const e="CheckValidationPhone";(0,s.registerReactApplication)(e,(()=>{const t=(0,s.getReactRootEl)(e);if(t){const e=(0,c.partConfigEnabled)("vkc_cvp_non_intersection")?(0,i.jsx)(d.CheckValidationPhone,{app_id:a.AuthAppId.VK,preventCheck:()=>(0,l.curBox)()}):(0,i.jsx)(u.CheckValidationPhoneFallback,{app_id:a.AuthAppId.VK,isValidModule:!0});n.render(e,t),(0,r.pushNavDestroy)((()=>{n.unmountComponentAtNode(t)}))}}))}},286109:(e,t,o)=>{o.d(t,{onNavigationStart:()=>c});var i=o(11010),n=o(981254),s=o(593568),r=o(93983),a=o(543020),l=o(688756);function c(e,t){return d.apply(this,arguments)}function d(){return(d=(0,i._)((function*(e,t){try{if(window.nav.objLoc[0]===n.FeedPath.feed&&t[0]!==window.nav.objLoc[0]&&1===window.PageID){const e=yield(0,s.getPerformanceStatsTools)({module:"feed",entity:l.LEAVING_FEED_STATS});if(!e)return;const{storePerformanceStats:t,sendStoredPerformanceStats:o,LeavingFeedEventName:i,readMetricValue:n}=e;if(n(i.navigation_from_feed))return;t(i.navigation_from_feed),(0,r.getFeedPageSkeletonStorage)().hasSkeleton?t(i.navigation_from_feed_skeleton_on):t(i.navigation_from_feed_skeleton_off),window.cur.isFeedLoading?t(i.navigation_from_feed_before_page_load):t(i.navigation_from_feed_after_page_load),o(),window.nav.removeNavigationStartListener(c)}}catch(e){console.error("leaving feed navigation stats error"),(0,a.logUnknownError)(e)}}))).apply(this,arguments)}},290266:(e,t,o)=>{function i(e){return e.map((e=>e?"1":"0")).join("_")}o.d(t,{formatStringValueBooleans:()=>i})},693982:(e,t,o)=>{function i(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,o,i]=t;return{objectType:o,objectId:i}}o.d(t,{getElementLikeButtonCount:()=>a,getElementLikeButtonIcon:()=>c,getElementLikeButtonLabel:()=>u,likePostObjectId:()=>n,likeReplyObjectId:()=>s,parseLikeObjectId:()=>i});const n=e=>`wall${e}`,s=e=>`wall_reply${e}`;var r;const a=e=>{var t;return null!=(r=null==(t=e)?void 0:t.querySelector(".like_button_count, ._like_button_count"))?r:void 0};var l;const c=e=>{var t;return null!=(l=null==(t=e)?void 0:t.querySelector(".like_button_icon, ._like_button_icon"))?l:void 0};var d;const u=e=>null!=(d=e.querySelector(".like_button_label, ._like_button_label"))?d:void 0},234514:(e,t,o)=>{o.d(t,{LikeButtonTypes:()=>i});const i={like:"like",share:"share",views:"views",comment:"comment"}},469943:(e,t,o)=>{function i(e){var t,o;if(null!==(o=t=e)&&"object"==typeof o&&("queue"in t||"key"in t&&"string"==typeof t.key))return e.queue||e.key}o.d(t,{subscriptionObjectStableId:()=>i})},498275:(e,t,o)=>{o.d(t,{friendsRecommGetTrackCode:()=>f,friendsRecommLogClear:()=>u,friendsRecommLogGet:()=>d,friendsRecommLogOnFail:()=>p,friendsRecommLogSave:()=>c,friendsRecommLogSend:()=>_,getRef:()=>l,onViewFriendRecomm:()=>g});var i,n=o(531730),s=o(82161),r=o(363444),a=o(795558);!function(e){e.friends_recomm="friends_recomm"}(i||(i={}));const l=()=>{var e;return"feed"===window.cur.module&&window.Feed?null==(e=window.Feed)?void 0:e.getModuleRef():window.cur.module};function c(e,t=!1){const o=d();o.push(e),n.multiAccountLs.set("friends_recomm",o),_(t)}function d(e=!1,t,o=!1){const i=n.multiAccountLs.get("friends_recomm");let r=Array.isArray(i)?i:[];return t&&(r=r.filter((e=>(o?e[1]!==t:e[1]===t)&&(0,s.inArray)(e[0],["show_user_rec","open_user"])))),e&&(r=r.map((e=>e.join("|")))),r}function u(e){if(e){const t=d(!1,e,!0);t.length?n.multiAccountLs.set("friends_recomm",t):n.multiAccountLs.remove("friends_recomm")}else n.multiAccountLs.remove("friends_recomm")}function _(e=!1){var t,o,i;!(null==(t=window.cur)?void 0:t.friendsRecommLogIdle)&&(null==(i=window)||null==(o=i.curNotifier)?void 0:o.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=()=>{clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(_)),clearTimeout(window.cur.friendsRecommLog),e?h():window.cur.friendsRecommLog=window.setTimeout(h,1e4)}function h(){if(window.cur.friendsRecommProcess)return;const e=d(!0);e.length&&(window.cur.friendsRecommProcess=!0,u(),r.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:()=>{delete window.cur.friendsRecommProcess},onFail:()=>(p(e),delete window.cur.friendsRecommProcess,!0)}))}function p(e){let t=d();t=e.map((e=>e.split("|"))).concat(t),n.multiAccountLs.set("friends_recomm",t)}function f(e){let t,o=(0,a.domData)(e,"code");return o||(t=(0,a.gpeByClass)("ui_gallery",e),o=(0,a.domData)(t,"code")),o||""}function g(e,t,o){if(e.viewed||!(0,a.hasClass)(e,"ui_gallery_item"))return;const i=+(0,a.domData)(e,"uid"),n=l(),s=f(e);c(["show_user_rec",i,Date.now(),t,n,o,s]),e.viewed=!0}},420778:(e,t,o)=>{o.d(t,{blockInstanceSetForFeedRowContent:()=>r,feedInitialViewRecommendedGroupsTrigger:()=>s});var i=o(459474);const n="__RecommendedGroups";function s(e,t){const o=e.querySelector(".js-feed_groups_recomm"),s=e.querySelector(".ui_gallery");if(!o||!s)return void console.error(new Error("RecommendedGroups: missing block container for view"),o,s);const r=s.getAttribute("data-code")||"",a=null!=(l=o[n])?l:void 0;var l;if(!a)return void console.error(new Error("RecommendedGroups: missing block instance"),o,s);const c="number"==typeof t?t:void 0;a.viewBlock(r,c);const d=(0,i.uiGetGallery)(s);d&&d.getVisibleItems().forEach((e=>{a.onViewGroup(e[0])})),s.visible=!0}function r(e,t){e[n]=t}},533919:(e,t,o)=>{o.d(t,{highlightModule:()=>d});var i=o(145637),n=o(10645),s=o(438221),r=o(795558),a=o(321850);let l,c;function d(e){const t=document.getElementById(e.module);if(!t||!t.classList.contains("module"))return;window.cur.__narrowBarForceNotFixed=!0;const o=e.speed?e.speed:300;(0,s.scrollToY)((0,r.getXY)(t)[1]-100,o);const d=()=>{l&&(l.hideTT(),(0,s.enableBodyScroll)(),delete window.cur.__narrowBarForceNotFixed,(0,n.updateNarrow)(),e.onClose&&e.onClose())};l=new i.default(t,e.text,{highlight:!0,width:250,offset:[0,-17],side:"bottom",withCloseButton:!0,onBGClick:d,onCloseButtonClick:d}),l.show(),(0,s.disableBodyScroll)(),e.autoCancelDelay&&(c=setTimeout((()=>{d(),c=null}),e.autoCancelDelay),(0,a.pushNavDestroy)((()=>{c&&clearTimeout(c)})))}},687437:(e,t,o)=>{o.d(t,{PROFILE_MEDIA_NARROW_BLOCK_ID:()=>i});const i="profile_media_narrow_block"},898298:(e,t,o)=>{o.d(t,{isIntentPreviewHidden:()=>l,isIntentPreviewInActionStatusBar:()=>a,isIntentPreviewUseCurrent:()=>c,isVariantHidden:()=>s,isVariantInActionStatusBar:()=>n,parsePreviewVariant:()=>u,previewVisibilityIntentForVariant:()=>d,previewVisibilityUseCurrent:()=>r});var i=o(580151);const n=e=>e===i.PreviewVariantActionStatusBar,s=e=>e===i.PreviewVariantHidden,r={kind:"useCurrent"},a=e=>e.kind===i.PreviewVariantActionStatusBar,l=e=>e.kind===i.PreviewVariantHidden,c=e=>"useCurrent"===e.kind,d=e=>e?{kind:e}:r,u=e=>i.PreviewVariants.includes(e)?e:void 0},580151:(e,t,o)=>{o.d(t,{PreviewVariantActionStatusBar:()=>i,PreviewVariantHidden:()=>n,PreviewVariants:()=>s});const i="action_status_bar",n="hidden",s=[i,n]},682951:(e,t,o)=>{o.d(t,{REACTIONS_COUNTS_RESPONSE_FIELD:()=>l,SIZE_128:()=>a,SIZE_32:()=>n,SIZE_40:()=>s,SIZE_96:()=>r,SUPPORTED_OBJECT_TYPES:()=>i,WK_SECTION_PREFIX_REACTIONS:()=>c});const i={wall:"wall",wall_reply:"wall_reply"},n={width:32,height:32},s={width:40,height:40},r={width:96,height:96},a={width:128,height:128},l="reactions_counts",c="reactions"},512637:(e,t,o)=>{o.d(t,{ENABLED_IN_POST_REPLY:()=>n,isDebugEnabled:()=>i.isDebugEnabled});var i=o(457972);const n=!1},403702:(e,t,o)=>{o.d(t,{reactionLogError:()=>s});var i=o(698216),n=o(908088);const s=({error:e})=>{var t;var o;const s=null!=(o=null==(t=(0,n.getReactionConfig)())?void 0:t.reportJsErrors)&&o;(0,i.reactionLogError)({error:e,reportError:s})}},908088:(e,t,o)=>{o.d(t,{getReactionConfig:()=>f,getReactionSet:()=>h,storageAddSets:()=>_,storageSetConfig:()=>p});var i=o(434788),n=o(659397),s=o(822715),r=o(367431),a=o(403702),l=o(682951),c=o(512637);const d=(0,r.makeSharedState)("reactions-storage",(()=>new Map),{version:0}),u=(0,r.makeSharedState)("reactions-config",(()=>({config:void 0})),{version:0}),_=e=>{(0,c.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((([e,t])=>{const o=(0,s.validateReactionSetPayloaditems)(t,e);if(o)return void(0,a.reactionLogError)({error:o.error});const r=t.map((e=>(0,i._)({},e,{title:(0,n.decodeHTMLEntities)(e.title)})));d().set(e,(0,s.prepareReactionMenuSet)(e,r,{imageMenuSize:l.SIZE_96,imagePreviewSize:l.SIZE_32,imageStoryPanelSize:l.SIZE_128,imageStoryPreviewSize:l.SIZE_40}))}))},h=e=>{const t=d().get(e);if(t)return t;{const t=new Error(`Reaction set not found: ${e}`);(0,a.reactionLogError)({error:t})}},p=e=>{(0,c.isDebugEnabled)()&&console.log(e);const t=(0,s.parseReactionMenuConfig)(e);t?u().config=t:console.warn("Reactions: invalid menu config passed",e)},f=()=>{var e;return null==(e=u())?void 0:e.config}},84852:(e,t,o)=>{o.d(t,{getReactionsButtonPostTemplate:()=>h,getReactionsButtonReplyTemplate:()=>p,likeDataReactionsFields:()=>m});var i=o(839470),n=o(795558),s=o(682951),r=o(908088),a=o(822715),l=o(192441),c=o(222285);const d=(e,t,o)=>{var i,s,l;const d=null==(i=(e=>{try{const t=JSON.parse(e);if(null!==t&&"object"!=typeof t)return;return t}catch(e){return}})(e))?void 0:i.set_id,u="string"==typeof d?d:void 0;if(!t||!u)return;const _=(0,r.getReactionSet)(u);return _?{likeClassName:"like_btn--hidden PostBottomAction--hidden",template:(0,n.rs)(t,{reactions_button_title:(0,a.getDefaultReactionTitle)(_)||"",reactions_set_id:u,badges_object_type:c.BadgesObjectType.WALL,badges_object_owner_id:(null==(s=o)?void 0:s.objectOwnerId)||0,badges_object_id:(null==(l=o)?void 0:l.objectId)||0,badges_ref:c.BadgesEventRef.POST_BTN})}:void 0},u=(e,t)=>t.length>e,_=e=>{const t=e[2],[o,i]=t.split("_");return{objectOwnerId:Number(o),objectId:Number(i)}},h=(e,t)=>{var o,i;const n=_(e),s=null==(i=t)||null==(o=i.wallTpl)?void 0:o.post_likes_reactions,r=u(14,e)?e[14]:void 0;if("string"==typeof r)return d(r,s,n)},p=(e,t)=>{var o,n;const s=_(e),r=null==(n=t)||null==(o=n.wallTpl)?void 0:o.reply_likes_reactions;if(!(0,i.partConfigEnabled)("reactions_enabled_post_replies"))return;const a=u(14,e)?e[14]:void 0;return"string"==typeof a?d(a,r,s):void 0},f=e=>{let t=JSON.parse(e);if(null===t||"object"==typeof t||Array.isArray(t)){if(Array.isArray(t)){t=(0,l.reactionCountsBrandWrap)((o=t,Object.assign({},o)))}var o;return t}},g=e=>{const t=u(5,e)?e[5]:void 0;if("string"!=typeof t)return;const o=(e=>{const t=e.indexOf(";"),o=e.substr(0,t),i=e.substr(t+1);if("1"===o)return f(i)})(t);return o?{counts:o}:void 0},m=e=>{var t;const o=g(e);return{[s.REACTIONS_COUNTS_RESPONSE_FIELD]:null==(t=o)?void 0:t.counts}}},109454:(e,t,o)=>{o.d(t,{isReactionsFullUpdatePayload:()=>r,reactionsCountsOnlyUpdatePayload:()=>a,reactionsCountsUpdatePayload:()=>s});var i=o(434788),n=o(900641);const s=(e,t)=>(0,i._)({kind:n.PayloadKindFull},e,{reactionIdState:{reactionId:t.id}}),r=e=>e.kind===n.PayloadKindFull,a=e=>(0,i._)({kind:n.PayloadKindCountsOnly},e)},900641:(e,t,o)=>{o.d(t,{PayloadKindCountsOnly:()=>i,PayloadKindFull:()=>n});const i="counts_only",n="counts_with_current_reaction"},999237:(e,t,o)=>{o.d(t,{triggerReactionsUpdate:()=>a});var i=o(693982),n=o(682951),s=o(505426),r=o(109454);const a=(e,t,o,a)=>{const l=(0,i.parseLikeObjectId)(e);l&&l.objectType===n.SUPPORTED_OBJECT_TYPES.wall&&l.objectId?(0,s.emitEvent)(s.WallDataEvents.post_reactions_counts_update,function(e,t,o,i){var n,s,a;const l={counts:e,isFromWkLayer:null==(n=t)?void 0:n.isFromWkLayer,isPrimaryLikeButtonClick:null==(s=t)?void 0:s.isPrimaryLikeButtonClick,isQueueUpdate:null==(a=t)?void 0:a.isQueueUpdate,isUserAction:t.isUserAction,postFullId:o.objectId,previewVisibility:t.previewVisibility,reactionIdState:i?{reactionId:i.id}:void 0,suggestSubscribe:t.suggestSubscribe};return i?(0,r.reactionsCountsUpdatePayload)(l,i):(0,r.reactionsCountsOnlyUpdatePayload)(l)}(t,a,l,o)):l&&l.objectType===n.SUPPORTED_OBJECT_TYPES.wall_reply&&l.objectId?(0,s.emitEvent)(s.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:l.objectId,reactionIdState:o?{reactionId:o.id}:void 0}):console.warn("Unsupported reactions object update",e)}},727931:(e,t,o)=>{var i;o.d(t,{REGULAR_SIZES:()=>s,SIZE_512:()=>n,StickerSize:()=>i}),function(e){e[e.SMALL=128]="SMALL",e[e.MIDDLE=168]="MIDDLE",e[e.BIG=208]="BIG"}(i||(i={}));const n=512,s=[64,128,256,352,n]},991243:(e,t,o)=>{o.d(t,{findClosestStickerSize:()=>w,getBoxLayerWrap:()=>_,getLangCode:()=>m,getPurchaseResult:()=>f,hideLoader:()=>p,showLoader:()=>h,updateStickersFromQueue:()=>g});var i=o(221780),n=o(29271),s=o(68003),r=o(795558),a=o(584356),l=o(899033),c=o(727931),d=o(457299);function u(){return document.querySelector("#box_loader")}function _(){return document.querySelector("#box_layer_wrap")}function h(){const e=u();(0,a.boxRefreshCoords)(e),(0,r.show)(e),(0,r.show)(_())}function p(){(0,r.hide)(u())}function f(e){const t=new l.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),o=t.getPack(),s=t.getStyles();if(o)return s.length?(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_pack_and_styles",s.length),"pack_title",o.title,"n",s.length):(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_pack"),"title",o.title);if(s.length)switch(s.length){case 1:return(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_1_style"),"title",s[0].title);case 2:return(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_2_styles"),"title1",s[0].title,"title2",s[1].title);case 3:return(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_3_styles"),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title);case 4:return(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title);default:const e=s.length-3;return(0,i.langStr)(n.getLang("purchases_stickers_purchase_result_3_styles_and_n_more",e),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title,"n",e)}return null}function g(e){!function(e){const t=s.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light";e.querySelectorAll(`.sticker_img[${t}]`).forEach((e=>{const o=e.getAttribute(t);o&&(e.src=o)}))}(e)}const m=()=>window.vk.lang||"ru",w=e=>e>c.SIZE_512?((0,d.logStickersError)("Нет размера стикера больше 512px"),c.SIZE_512):c.REGULAR_SIZES.find((t=>t>=e))},880660:(e,t,o)=>{o.d(t,{highlightNarrativeBlock:()=>g,prepareStoriesForPublishing:()=>p,updateNarrativeBlock:()=>f,updateNarrativeSnippetsFromQueueByPost:()=>m});var i=o(795558),n=o(584356),s=o(533919),r=o(29271),a=o(664988),l=o(687437),c=o(964262),d=o(970978),u=o(839470),_=o(931917);const h="NarrativeSnippet";function p(e){return e.map((e=>e.id)).join(",")}function f(e=!1){const t=(0,a.intval)(window.cur.oid);if(window.cur.narrativeBlock)window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:t},{onDone:e=>{const t=(0,a.intval)(window.cur.oid),o=document.getElementById(`narratives_module${t}_wrapper`);if(o)if(e)(0,i.domReplaceEl)(o,e),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new window.NarrativeBlock);else{var n,s;const e=o.parentElement;var r;if((null==(n=e)?void 0:n.children.length)&&(null==(s=e)?void 0:s.children.length)>1)o.remove();else null==(r=e)||r.remove();window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),delete window.cur.narrativeBlock}(0,c.removeStoryList)(`narratives${t}`)}});else if(_.Ranges.isUserId(t)&&"profile"===window.cur.module){const e=document.getElementById(l.PROFILE_MEDIA_NARROW_BLOCK_ID),o=!e;window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:t,need_wrap_block:(0,a.intval)(o)},{onDone:o=>{if(e)e.insertAdjacentHTML("afterbegin",o);else{const e=document.getElementById("narrow_column");if(!e)return;e.insertAdjacentHTML("beforeend",o)}window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new window.NarrativeBlock,window.cur.narrativeBlock.showOnboardTooltipIfNeeded()),(0,c.removeStoryList)(`narratives${t}`)}})}else e&&function(e){window.boxQueue.hideAll();const t=document.querySelector("#box_layer_wrap"),o=document.querySelector("#box_loader");window.nav.reload({onDone:()=>{e&&e()},showProgress:()=>{(0,i.show)(t),(0,i.show)(o),(0,n.boxRefreshCoords)(o)},hideProgress:()=>{(0,i.hide)(t),(0,i.hide)(o)}})}((()=>{window.cur.needNarrativeOnboard=!0}))}function g(e){if(!e)return;const t=`narratives_module${window.vk.id}`;(0,s.highlightModule)({module:t,text:r.getLang("stories_narrative_block_onboarding_text"),onClose:()=>{delete window.cur.needNarrativeOnboard,window.ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"profile_narrative"})},autoCancelDelay:1e4,speed:600})}function m(e){if(!window.vk.id)return;if(!(0,u.partConfigEnabled)("update_private_snippets_by_queue"))return;const t=Array.from(e.querySelectorAll(`.${h}`));if(!t.length)return;const o=[];t.forEach((e=>{if(!window.vk.id||!e.dataset.needUpdate)return;const t=e.dataset.narrativeRawId;t&&o.push({narrative_raw_id:t,snippet_type:e.dataset.snippetType,from:e.dataset.from})})),o.length&&window.ajax.post("al_stories.php",{act:"get_narrative_snippets",narrative_snippets:JSON.stringify(o)},{onDone:e=>{t.forEach((t=>{t.dataset.narrativeRawId&&e[t.dataset.narrativeRawId]&&(t.outerHTML=e[t.dataset.narrativeRawId])}))},onFail:()=>((0,d.logError)(new Error("Fail: updateNarrativeSnippetFromQueueByPost")),!0)})}},964262:(e,t,o)=>{o.d(t,{createUserStackMaskIfNeeded:()=>f,fetchDiscover:()=>_,getStoryBlockKey:()=>p,getStoryList:()=>c,getVolume:()=>a,isDiscoverLoading:()=>h,isNewDesignEnabled:()=>g,preloadDiscoverList:()=>u,removeStoryList:()=>d,setVolume:()=>l});var i=o(517366),n=o(795558),s=o(839470),r=o(321850);function a(){const e=window.ls.get("video_volume");return"number"==typeof e?Math.min(1,Math.max(0,e)):1}function l(e){window.ls.set("video_volume",e)}function c(e){return window.cur[`stories_list_${e}`]}function d(e){delete window.cur[`stories_list_${e}`]}function u(e=!1){if(window.cur.storiesDiscoverFetchingPromise)return window.cur.storiesDiscoverFetchingPromise;let t,o;const n=c(i.StoryListName.feed);return n&&(o=n.find((e=>e.type===i.StoryBlockType.discover)),o&&(t=o.track_code)),window.cur.storiesDiscoverFetchingPromise=_("",t,e).then((([e,t])=>(o&&(o.grouped=e,o.next_from=t),e))).finally((()=>{delete window.cur.storiesDiscoverFetchingPromise})),window.cur.storiesDiscoverFetchingPromise}function _(e="",t="",o=!1,i=15){return new Promise(((n,s)=>{window.ajax.post("al_stories.php",{act:"get_discover",start_from:e,count:i,track_code:t},{loader:o,onDone:(e,t)=>{n([e,t])},onFail:e=>(s(e),!0)})}))}function h(){return Boolean(window.cur.storiesDiscoverFetchingPromise)}function p(e){var t,o,i,n,s;return(null==(o=e)||null==(t=o.author)?void 0:t.id)&&(null==(n=e)||null==(i=n.narrative)?void 0:i.id)?`${e.author.id}narrative${null==(s=e.narrative)?void 0:s.id}`:`${e.id}`}function f(){const e="users_stack_stories_mask";let t=document.getElementById(e);t||(t=(0,n.se)(`\n        <svg width="0" height="0">\n          <defs>\n            <clipPath id="${e}">\n              <path transform="translate(1.5 0)" d="M1.20772 8C1.20772 6.32671 0.768742 4.75626 0 3.39821C1.44342 1.34278 3.8277 0 6.52463 0C10.9293 0 14.5 3.58172 14.5 8C14.5 12.4183 10.9293 16 6.52463 16C3.8277 16 1.44342 14.6572 0 12.6018C0.768742 11.2437 1.20772 9.6733 1.20772 8Z"></path>\n            </clipPath>\n          </defs>  \n        </svg>  \n      `),t&&(document.body.appendChild(t),(0,r.pushNavDestroy)((()=>{var e;null==(e=t)||e.remove()}))))}function g(){return(0,s.partConfigEnabled)("story_reactions_sending_feature_web")}},749721:(e,t,o)=>{o.d(t,{clickUXPollsBlock:()=>s,viewUXPollsBlock:()=>n});var i=o(504867);function n(e){(0,i.statlogsValueEvent)("uxpolls_view",e)}function s(e){(0,i.statlogsValueEvent)("uxpolls_click",e)}},505426:(e,t,o)=>{o.d(t,{WallDataEvents:()=>r,emitEvent:()=>u,registerNonGlobalNonUniqueListener:()=>d,registerUniqueListener:()=>c});var i=o(434788),n=o(980602),s=o(367431);const r={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},a=(0,s.makeSharedState)("wall-data",(()=>({emitter:new n.default,keyedListeners:Object.create(null)})),{version:0}),l=(e,t,o)=>{var n,s;const r=a(),l=null==(s=r.keyedListeners)||null==(n=s[e])?void 0:n[t];return l&&r.emitter.removeListener(e,l),((e,t,o)=>{const n=a();return n.emitter.addListener(e,o),n.keyedListeners[e]=(0,i._)({},n.keyedListeners[e],{[t]:o}),()=>{var i,s;n.emitter.removeListener(e,o),(null==(i=n.keyedListeners[e])?void 0:i[t])===o&&(null==(s=n.keyedListeners[e])||delete s[t])}})(e,t,o)},c=(e,t,o)=>l(t,e,o),d=(e,t)=>((e,t)=>{const o=a();return o.emitter.addListener(e,t),()=>{o.emitter.removeListener(e,t)}})(e,t),u=(e,t)=>{a().emitter.emit(e,t)}},228411:(e,t,o)=>{o.d(t,{updateAriaLabelCounter:()=>s});var i=o(29271),n=o(234514);const s=(e,t,o)=>{if(!("number"==typeof t&&e instanceof HTMLElement&&e.classList.contains("PostBottomAction")))return;const s=(e=>{let t;switch(e){case n.LikeButtonTypes.comment:t=i.getLang("likes_comments_N_aria_short","raw");break;case n.LikeButtonTypes.like:t=i.getLang("likes_likes_N_aria_short","raw");break;case n.LikeButtonTypes.share:t=i.getLang("likes_shares_N_aria_short","raw")}return t})(o);if(!s)return;const r=(0,i.langNumeric)(t,s,!1);e.setAttribute("aria-label",r)}},198186:(e,t,o)=>{o.d(t,{highlightUpdatedPost:()=>n,highlightUpdatedPostContent:()=>s});var i=o(75272);const n=e=>{(0,i.triggerAnimationClass)(e,"post_highlight_updated",3e3)},s=e=>{(0,i.triggerAnimationClass)(e,"post_highlight_updated_content",3e3)}},280598:(e,t,o)=>{o.d(t,{memoizeFirstTruthy:()=>i});const i=e=>((e,t)=>{let o,i=!1;return(...n)=>(!0===i||(o=e(...n),i=t(o)),o)})(e,(e=>!!e))},630260:(e,t,o)=>{o.d(t,{Feed:()=>ae});var i=o(434788),n=o(962983),s=o(839470),r=o(9480),a=o(301230),l=o(718254),c=o(175426),d=o(577552),u=o(652027),_=o(29271),h=o(643897),p=o(10645),f=o(849222),g=o(95432),m=o(584356),w=o(562112),v=o(953908),b=o(438221),k=o(459474),y=o(795558),S=o(719645),C=o(96756),E=o(725296),T=o(514986),L=o(320422),P=o(215066),I=o(82161),A=o(469943),R=o(498275),B=o(420778),O=o(84852),N=o(54413),x=o(854099),D=o(936134),M=o(664988),H=o(120425),j=o(198186),F=o(709291),V=o(944615),U=o(215460),q=o(385295),G=o(135617),W=o(862736),z=o(880660),K=o(90692),Y=o(941468),$=o(523408),Q=o(991243),X=o(137363),Z=o(9747),J=o(749721),ee=o(42575),te=o(931917),oe=o(428518),ie=o(531232),ne=o(321850),se=o(864424),re=o(286118);const ae={sectionUpdateExceptions:["search","notifications","photos_search","mentions","articles","articles_search","likes","recommended","live","topics"],blockHideReason:function e(t,o){if(e.progress)return!1;e.progress=!0;let i="block_"+t,n=(0,y.ge)(i);delete cur.feedEntriesHTML[i],ajax.post("al_feed.php",{act:"a_block_hide_reason",block_id:t,reason:0|o,hash:(0,y.attr)(n,"data-hash"),ref:ae.getModuleRef(),pos:(0,y.attr)(n,"data-pos")},{onDone:function(t){e.progress=!1,t?(0,y.val)(n,t):(0,y.hide)(n)},hideProgress:function(){e.progress=!1}})},blockRestore:function(e){let t="block_"+e,o=(0,y.ge)(t);cur.feedEntriesHTML[t]&&(0,y.val)(t,cur.feedEntriesHTML[t]),ajax.post("al_feed.php",{act:"a_block_restore",block_id:e,hash:(0,y.attr)(o,"data-hash"),ref:ae.getModuleRef(),pos:(0,y.attr)(o,"data-pos")})},blockHide:function(e,t){if((0,E.actionsMenuItemLocked)(t))return;(0,E.lockActionsMenuItem)(t);let o="block_"+e,i=(0,y.ge)(o),n=(0,y.geByClass1)("ui_actions_menu_wrap",i);ajax.post("al_feed.php",{act:"a_block_hide",block_id:e,hash:(0,y.attr)(i,"data-hash"),ref:ae.getModuleRef(),pos:(0,y.attr)(i,"data-pos")},{onDone:function(e){uiActionsMenu.toggle(n,!1),cur.feedEntriesHTML[o]=(0,y.val)(i),(0,y.val)(i,e)},hideProgress:E.unlockActionsMenuItem.pbind(t)})},videoRecomsBlockHideCancel:function(){ajax.post("/al_feed.php",{act:"a_video_recom_hide_cancel"}),ae.restorePost("video_recoms")},videoRecomsBlockHideReason:function(e,t){(0,y.re)((0,y.geByClass1)("feed_rb_video_reason_wrap")),(0,y.show)((0,y.geByClass1)("feed_rb_video_reason_thankyou")),ajax.post("/al_feed.php",{act:"a_video_recom_hide_reason",reason:t,reason_hash:e})},expandVideosPost:function(e,t){let o=(0,y.geByClass1)("page_post_sized_thumbs",(0,y.domPN)(t)),i=0;(0,I.each)(o.children,(function(){if(!(0,y.isVisible)(this)&&((0,y.show)(this),i++,i>5))return!1})),(0,y.toggle)(t,!(0,y.isVisible)(o.children[o.children.length-1]))},update:function(e){if(cur.feedUpdateLoading)return;if(window.Notifier&&cur.add_queues&&cur.add_queues.length&&(cur.add_queues.forEach((function(e){Notifier.addKey(e,ae.updated)})),"news"!=cur.section))return;if("feed"!==cur.module||"top"==cur.subsection||(0,I.inArray)(cur.section,ae.sectionUpdateExceptions)||cur.isDisabledFeedAutoupdate)return;let t=Math.random();if("news"!=cur.section&&"comments"!=cur.section&&t>.3||"news"==cur.section&&(e||t>.05))return;cur.feedUpdateLoading=!0;let o=ae.getSectionParams(cur.section);(0,I.extend)(o,cur.navParams),ajax.post("al_feed.php?au_"+cur.section,(0,I.extend)(o,{timestamp:cur.timestamp,posted:e?1:"",queue:cur.add_feed_queue?1:0}),{onDone:function(t,o,i){if(cur.feedUpdateLoading=!1,1==e&&(!o||-1==o.indexOf(vk.id+"")))return void setTimeout(ae.update.pbind(2),2e3);if("feed"!==cur.module||t.section!=cur.section||t.timestamp<cur.timestamp||i<cur.timestamp)return;(0,P.statlogsValueEvent)("feed_check_update",!!o),t.count+=cur.count;let n,s,r,a,l=cur.rowsCont,c=(0,y.ce)("div"),d=0;if("news"==cur.section){if(a=(0,b.scrollGetY)(),o){for(c.innerHTML=o;c.lastChild;)n=c.lastChild,l.insertBefore(n,l.firstChild),ae.onPostLoaded(n,!0);(0,I.each)((0,y.geByClass)("ts"+i,l),(function(e,t){var o,i;d+=this.offsetHeight;const n=null==(i=t)||null==(o=i.querySelector)?void 0:o.call(i,".post");n&&(0,j.highlightUpdatedPost)(n),cur.feedUnreadCount++}))}d&&a>100&&(0,b.scrollToY)(a+d,0,!1,!0)}else if(o)for(c.innerHTML=o;n=c.lastChild;)if("DIV"==n.tagName)if("podcasts_recommended_block"!==n.id)if(r=n.firstChild.id.substr(4),r&&cur.wallLayer==r)c.removeChild(n);else if(s=(0,y.ge)("post"+r)){if(!(0,y.hasClass)(s.parentNode,"feed_row"))return;const e=(0,y.ge)("replies"+r);let t=e.nextSibling,o=0;if((0,I.each)([].slice.call((0,y.geByClass)("reply",n,"div")),(function(){(0,y.ge)(this.id)||((0,y.addClass)(this,"new_reply"),e.appendChild(this),o++)})),o){let i=s.parentNode.offsetHeight,n=(0,y.geByClass)("new_reply",e,"div").length;t&&"replies_open"==t.className||(t=(0,y.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(r),role:"button",tabIndex:0}),e.parentNode.insertBefore(t,e.nextSibling)),t.innerHTML=_.getLang("wall_x_new_replies_more",Math.min(100,n)),t.newCnt=n;let a=(0,b.scrollGetY)(),c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=(0,y.getXY)(t)[1],u=s.parentNode.offsetHeight;i=u-i,(0,I.inArray)(r,cur.feedUnread)||cur.feedUnread.unshift(r),!cur.idleManager.isIdle&&d>a+100&&d<a+c+100?(l.insertBefore((0,y.ge)("post_ph"+r)||(0,y.ce)("div",{id:"post_ph"+r}),l.firstChild),(0,I.inArray)(r,cur.feedToSort)||cur.feedToSort.push(r)):((0,y.re)(s.parentNode),l.insertBefore(s.parentNode,l.firstChild),d>a+c+100&&(i=u),i&&(0,b.scrollToY)((0,b.scrollGetY)()+i,0,!1,!0)),cur.feedUnreadCount+=o}c.removeChild(n)}else a=(0,b.scrollGetY)(),l.insertBefore(n,l.firstChild),ae.onPostLoaded(n,!0),d=n.offsetHeight,a>100&&(0,b.scrollToY)(a+d,0,!1,!0);else c.removeChild(n);else c.removeChild(n);ae.applyOptions(t),ae.updateTitle()},onFail:function(){return cur.feedUpdateLoading=!1,!1},showProgress:function(){cur.feedUpdateLoading=!0},hideProgress:function(){cur.feedUpdateLoading=!1}})},getNewQKey:function(e){let t={act:"a_get_key",only_update:cur.add_feed_queue?1:0,need_ignore:(0,M.isArray)(cur.ignore_owners)?0:1},o={onDone:function(o,i,s){if(cur.section!=n)return;if(cur.add_feed_queue=s,o)cur.add_queues=o,setTimeout(ae.update.pbind(0),0);else if(!t.only_update){let t=i;return void(cur.timestamp=(t||(0,M.vkNow)()/1e3)-e)}(0,M.isArray)(i)&&(cur.ignore_owners=i)},local:1},n=cur.section;ajax.post("al_feed.php",(0,i._)({},ae.getSectionParams(cur.section),t,{queue:1}),o)},updated:function(e,t){cur.queueTO=cur.queueTO||(0,M.irand)(0,5e3),setTimeout(ae.handleQueueEvent.pbind(e,t),cur.queueTO)},handleQueueEvent:function(e,t){if("search"!=cur.section&&"news"!=cur.section&&cur.section||!(0,M.isArray)(cur.add_queues))return;const o=cur.add_queues.find((t=>(0,A.subscriptionObjectStableId)(t)===e));if(!o)return;if(t.failed){cur.add_queues=!1,cur.add_feed_queue=null;let e=curNotifier.error_timeout||1;return clearTimeout(cur.lp_error_to),void(cur.lp_error_to=setTimeout(ae.getNewQKey.bind(ae).pbind(e),1e3*e))}if(!(0,M.isArray)(t.events)||!t.events.length)return;o.ts=t.ts,t.key&&(o.key=t.key);let i=(0,b.scrollGetY)(),n=0;(0,I.each)(t.events,(function(){if((0,M.isObject)(this))return Wall.processQueueEvent(this);n+=ae.pushEvent(this.split("<!>"),i+(0,y.getSize)("page_header_cont")[1])}));let s=(0,b.scrollGetY)();n&&Math.abs(i-s)<100&&(cur.leftMenuDelta=n,(0,b.scrollToY)(s+n,0,!1,!0)),ae.updateTitle(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()},needScrollPost:function(e,t){return e+80>(0,y.getXY)(t)[1]||cur.storyLayer||window.mvcur&&mvcur.mvShown||window.pvcur&&cur.pvShown},pushEvent:function(e,t){let o=e[0],n=e[1],s=e[2],a=(0,y.ge)("post"+s),l=cur.section,c="search"!=l?(0,I.intval)(e.pop()):0,d=0,h=function(e){return(0,I.intval)((0,y.getStyle)((0,y.domByClass)(e,"page_block"),"marginTop"))||(0,I.intval)((0,y.getStyle)((0,y.domByClass)((0,y.domNS)(e),"page_block"),"marginTop"))||15};if(!cur.options||o!=cur.options.qversion)return 0;switch((Wall.isArchiveWall()?"archive_post"===n:"reveal_post"===n)&&(n="res_post"),(Wall.isArchiveWall()?"reveal_post"===n:"archive_post"===n)&&(n="del_post"),n){case"new_post":{if(a)break;let o=X.GroupAdminLevel.USER;if((0,I.intval)(e[11])&&(0,I.intval)(e[11])!=vk.id)return ajax.post("al_feed.php",{act:"a_need_own_reply",oid:(0,I.intval)(e[11])},{onDone:function(o){o&&(e[11]=0,ae.pushEvent(e,t))}}),0;if("search"!=l){let t=s.split("_")[0];e[8]=(0,I.intval)(e[8])>0&&4==(4&c)?"1":"0",te.Ranges.isGroupId(t)&&(o=8&c?X.GroupAdminLevel.EDITOR:2&c?X.GroupAdminLevel.MODERATOR:X.GroupAdminLevel.USER)}"search"==l&&(0,P.statlogsValueEvent)("feed_switch",0,"search_update",cur.options.q&&"#"==cur.options.q.charAt(0)?"hashtag":"");let i=cur.rowsCont,n=i.childNodes,u=Wall.getNewPostHTML(e,o,ae.feedPostRepl);if(!u)break;let p,f,g,m,w,v,b=e[12],k="search"!=l&&(window._wf<=0||(0,y.hasClass)(cur.feedEls.wrap,"feed_has_new")||ae.needScrollPost(t,i)),S=cur.storyLayer;S&&(k=!0);let C=!1,E=u;if(k&&(u=Wall.updatePostImages(u)),b){if(cur.ignore_owners.length&&(0,I.inArray)((0,I.intval)(b),cur.ignore_owners))break;if(f=(0,y.geByClass1)("feed_reposts_wrap"+b,i,"div"))g=(0,y.geByClass1)("feed_reposts_first",f,"div").firstChild,m=(0,y.geByClass1)("feed_reposts_group",f,"div"),w=(0,y.geByClass1)("feed_reposts_more_link",f),ae.needScrollPost(t,g)&&(d-=g.offsetHeight+h(g)),g.parentNode.replaceChild(p=(0,y.se)(E),g),m.insertBefore(g,m.firstChild),(0,y.isVisible)(m)||x.FlatButton.setLabel(w,_.getLang("news_show_X_reposts",m.childNodes.length)),f=f.parentNode,i.firstChild!=f&&i.insertBefore(f,i.firstChild),ae.needScrollPost(t,f)&&(d+=f.offsetHeight+h(f)),f.bits=0;else if((v=(0,y.geByClass)("feed_repost"+b,i,"div"))&&v.length){u=(0,y.rs)(cur.wallTpl.grouped_posts,{place:b,random:(0,M.irand)(1e8,2e8),first:u,other:"",label:_.getLang("news_show_X_reposts",v.length)});let e=(0,y.se)('<div class="feed_row'+(k?"_unshown":"")+'">'+u+"</div>");i.insertBefore(e,i.firstChild),!k&&ae.needScrollPost(t,e)&&(d+=e.offsetHeight+h(e)),C=!0,f=e.firstChild,p=(0,y.geByClass1)("feed_reposts_first",f,"div"),m=(0,y.geByClass1)("feed_reposts_group",f,"div"),(0,I.each)((0,I.clone)(v),(function(){ae.needScrollPost(t,this)&&(d-=this.offsetHeight+h(this)),(0,y.re)(this.parentNode),m.appendChild(this.firstChild)}))}else p=(0,y.se)('<div class="feed_row'+(k?"_unshown":"")+'"><div class="feed_repost'+b+'">'+u+"</div></div>"),i.insertBefore(p,i.firstChild),C=!0,!k&&ae.needScrollPost(t,p)&&(d+=p.offsetHeight+h(p))}else p=(0,y.se)('<div class="feed_row'+(k?"_unshown":"")+'">'+u+"</div>"),i.insertBefore(p,i.firstChild),C=!0,!k&&ae.needScrollPost(t,p)&&(d+=p.offsetHeight+h(p));const T=(0,y.geByClass1)("post",p);0==e[8]&&(0,y.addClass)(T,"closed_comments"),cur.deepRepliesActive&&(0,y.addClass)(T,"deep_active"),k&&C&&(cur.newPostsCount=cur.newPostsCount?cur.newPostsCount+1:1,cur.feedEls.newPosts.innerHTML=_.getLang("news_new_posts",cur.newPostsCount),(0,y.addClass)(cur.feedEls.wrap,"feed_has_new"),1==cur.newPostsCount&&ae.needScrollPost(t,cur.feedEls.newPosts)&&!S&&(d+=(0,y.getSize)(cur.feedEls.newPosts)[1])),r.AudioUtils.updateQueueReceivedPost(p),(0,z.updateNarrativeSnippetsFromQueueByPost)(p),(0,K.updateArticleSnippetsFromQueueByPost)(p),cur.feedUnreadCount++,"search"!=l&&T&&(0,j.highlightUpdatedPost)(T),n.length>300?i.removeChild(n[300]):n.length<=1&&(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty"),Wall.updateMentionsIndex();break}case"new_post_reply":{if(a)break;const o=cur.rowsCont,i=o.childNodes,n=Wall.getNewPostHTML(e,!1,ae.feedPostRepl);if(!n)break;const s=(0,y.se)('<div class="feed_row">'+n+"</div>");o.insertBefore(s,o.firstChild),ae.needScrollPost(t,s)&&(d+=s.offsetHeight+h(s)),(0,z.updateNarrativeSnippetsFromQueueByPost)(s),(0,K.updateArticleSnippetsFromQueueByPost)(s),(0,Q.updateStickersFromQueue)(s),cur.feedUnreadCount++,i.length>300?o.removeChild(i[300]):i.length<=1&&(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty");break}case"edit_post":{const o=(0,y.ge)("wpt"+s);let i;if(!(0,y.isVisible)(a)||!o)break;let n=(0,y.geByClass1)("wall_post_more",o);n&&(n=(0,y.isVisible)((0,y.domNS)(n))),(i=ae.needScrollPost(t,o))&&(d-=o.offsetHeight);let r=(0,y.rs)(e[3],{poll_hash:cur.wallTpl.poll_hash});const l=(0,y.ge)("post"+s);l&&!(0,y.isVisible)(l.parentNode)&&(r=Wall.updatePostImages(r)),(0,y.val)(o,r),n&&(n=(0,y.geByClass1)("wall_post_more",o),n&&n.onclick()),i&&(d+=o.offsetHeight),(0,z.updateNarrativeSnippetsFromQueueByPost)(o),(0,K.updateArticleSnippetsFromQueueByPost)(o),(0,j.highlightUpdatedPostContent)(o),window.Wall&&Wall.updatePostAuthorData(s);break}case"edit_reply":{let t=e[3];const o=(0,y.ge)("wpt"+t);if(!(0,y.isVisible)("post"+t)||!o)break;let i=(0,y.geByClass1)("wall_reply_more",o);i&&(i=(0,y.isVisible)((0,y.domNS)(i)));let n=e[4];(0,y.val)(o,n),i&&(i=(0,y.geByClass1)("wall_reply_more",o),i&&i.onclick()),(0,z.updateNarrativeSnippetsFromQueueByPost)(o),(0,K.updateArticleSnippetsFromQueueByPost)(o),(0,Q.updateStickersFromQueue)(o),(0,F.highlightUpdatedReplyContent)(o);break}case"post_parsed_link":{if(!a)break;let t=(0,y.geByClass1)("wall_postlink_preview_btn_disabled",a);if(!t)break;let o=e[3];if("1"===o)(0,y.removeClass)(t,"wall_postlink_preview_btn_disabled");else if("0"===o)(0,y.re)(t);else if(o){(0,y.removeClass)(t,"wall_postlink_preview_btn_disabled");let o=(0,y.geByClass1)("flat_button",t);o&&(o.setAttribute("href",e[3]),o.removeAttribute("onclick"))}break}case"del_post":if(a){let e=(0,y.domClosest)("feed_row",a)||(0,y.domClosest)("feed_row_unshown",a)||a;cur.wallMyDeleted[s]||(ae.needScrollPost(t,a)&&(d-=a.offsetHeight+h(a)),(0,u.revertLastInlineVideo)(a),(0,y.re)(e)),cur.options.offset--,(0,y.hasClass)(cur.feedEls.wrap,"feed_has_new")&&!(0,y.isVisible)(e)&&(cur.newPostsCount--,cur.newPostsCount?cur.feedEls.newPosts.innerHTML=_.getLang("news_new_posts",cur.newPostsCount):(0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"))}break;case"res_post":a&&cur.options.offset++;break;case"new_reply":{if(!a||cur.wallMyReplied[s]||(0,y.ge)("post"+e[3]))break;if((0,y.hasClass)((0,y.ge)("post"+s),"deep_active")){const t=Wall.addNewReply(e);d+=t[0];break}let o=(0,y.ge)("replies"+s),i=(0,y.ge)("replies_wrap"+s),n=a.offsetHeight;const r=s.split("_")[0],l=te.Ranges.isGroupId(r)?8&c?X.GroupAdminLevel.EDITOR:2&c?X.GroupAdminLevel.MODERATOR:X.GroupAdminLevel.USER:X.GroupAdminLevel.USER;let u=Wall.getNewReplyHTML(e,l);if(!u)break;let h,p=!1,f=!1;if((0,y.isVisible)(o)&&(0,y.isVisible)(i)&&!(0,y.isVisible)("reply_link"+s)){h=o.nextSibling;let e=(0,y.geByClass)("new_reply",o,"div").length+1;if(cur.wallMyOpened[s]){h&&"replies_open"==h.className&&(0,y.re)(h),f=!0;let e=(0,y.geByClass1)("wr_header",o,"a"),t=(0,y.geByClass)("reply",o,"div").length+1,i=t;e&&(i=(0,I.intval)(e.getAttribute("offs").split("/")[1])+1),(i>5||t<i)&&(e||o.insertBefore(e=(0,y.ce)("a",{className:"wr_header"}),o.firstChild),Wall.updateRepliesHeader(s,e,t,i))}else u=Wall.updatePostImages(u),p=(0,y.se)(u),(0,y.addClass)(p,"new_reply"),h&&"replies_open"==h.className||(h=(0,y.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(s),role:"button",tabIndex:0}),o.parentNode.insertBefore(h,o.nextSibling)),h.innerHTML=_.getLang("wall_x_new_replies_more",Math.min(100,e)),h.newCnt=e}else(0,y.re)("reply_link"+s),(0,y.show)(i,o),f=!0;s.split("_")[0]==vk.id&&cur.feedUnreadCount++,p||(p=(0,y.se)(u)),o.appendChild(p),ae.needScrollPost(t,f?p:h)&&(d+=a.offsetHeight-n),p instanceof HTMLElement&&((0,z.updateNarrativeSnippetsFromQueueByPost)(p),(0,K.updateArticleSnippetsFromQueueByPost)(p),(0,Q.updateStickersFromQueue)(p)),f&&(0,F.highlightUpdatedReply)(p),Wall.repliesSideSetup(s),Wall.updateMentionsIndex(),Likes.update("wall"+s,{comment_num:e[13]});break}case"del_reply":if(!cur.wallMyDeleted[s]&&a){if((0,y.hasClass)((0,y.gpeByClass)("post",a),"deep_active")){const t=Wall.removeDeepReply(e);d+=t[0];break}ae.needScrollPost(t,a)&&(d-=a.offsetHeight);let o=a.parentNode.id.match(/replies(-?\d+_\d+)/);(0,u.revertLastInlineVideo)(a),(0,y.re)(a),o&&Wall.repliesSideSetup(o[1])}break;case"view_post":Likes.update("wall"+s,{views_num:Wall.formatCount((0,I.intval)(e[3]))});break;case"like_post":case"like_reply":{if(!a)break;let t="like_reply"==n?"wall_reply"+s:s,o=a&&(0,y.domByClass)(a,"_like_wrap"),r=a&&(0,y.domByClass)(a,"_share_wrap");const l=(0,O.likeDataReactionsFields)(e);Wall.likeFullUpdate(o,t,(0,i._)({isQueueUpdate:!0,like_my:o&&(0,y.hasClass)(o,"my_like"),like_num:e[3],like_title:!1,share_my:r&&(0,y.hasClass)(r,"my_share"),share_num:e[4],share_title:!1},l));break}}return d},feedPostRepl:function(e,t){e.replies=cur.wallTpl.post_replies;let o={full_id:t[2],item_id:"wall_"+t[2],sec_name:(0,M.stripHTML)(t[3]),date:Wall.getNowRelTime(),del:cur.wallTpl.spam};if("search"==cur.section&&cur.q){let i=e.text||"",n=cur.q.toLowerCase().split(/[\s.,:;!?()]/),s=[];i=i.replace(/<(.|\n)+?>/g,(function(e){return s.push(e),""}));let r,a,l,c=i.toLowerCase();for(r=n.length-1;r>=0;r--)if(l=n[r],(0,I.trim)(l))for(a=0;-1!=(a=c.indexOf(l,a));)i.charAt(a-1)!=String.fromCharCode(2)?(i=i.substr(0,a)+""+r+""+i.substr(a+l.length),c=c.substr(0,a)+""+r+""+c.substr(a+l.length)):a+=2;i=i.replace(/\x02(\d+)\x02/g,(function(e,t){return'<span class="highlight">'+n[t]+"</span>"})),i=i.replace(/\x01/g,(function(){return s.shift()||""})),o.text=i,"new_post_reply"==t[1]&&(o.date_postfix=t[7])}return o},reSortItems:function(){cur.feedToSort&&cur.feedToSort.length&&((0,I.each)(cur.feedToSort,(function(e,t){let o=(0,y.ge)("post_ph"+t),i=(0,y.ge)("post"+t).parentNode;o&&i&&(o.parentNode.insertBefore(i,o),(0,y.re)(o))})),cur.feedToSort=[],(0,b.scrollToY)(0,0))},showNewPosts:function(){(0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0;let e=(0,y.ge)("feed_rows");Wall.loadPostImages(e),(0,I.each)((0,y.geByClass)("feed_row_unshown",e,"div"),(function(){(0,y.replaceClass)(this,"feed_row_unshown","feed_row")}))},updateTitle:function(){cur.idleManager&&(cur.idleManager.isIdle||(cur.feedUnreadCount=0),(0,y.setDocumentTitle)((cur.feedUnreadCount?"("+cur.feedUnreadCount+") ":"")+cur.feedInitialTitle))},toggleTabsMenuTab:function(e,t){let o=(0,y.geByClass1)("feed_section_"+e,cur.feedEls.rmenu);o&&(0,y.toggleClass)(o,"ui_rmenu_item_hidden",!t)},toggleTabsMenu:function(e,t){let o=(0,y.ge)("feed_add_list_icon");return void 0===t&&(t=!(0,y.hasClass)(o,"shown")),a.browser.mozilla&&(0,y.setStyle)("page_body",{overflow:t?"visible":""}),uiActionsMenu.toggle(o,t),t&&(0,v.addEvent)(document,"mousedown",(function e(t){ae.toggleTabsMenu(!1,0),(0,v.removeEvent)(document,"mousedown",e)})),e&&(0,v.cancelEvent)(e)},checkTabsFilter:function(e,t){let o,i,n,s=t==cur.section,r=cur.my_feed_types.tabs;switch(t){case"news":return!1;case"newlist":return ae.addList();default:if(n=t.match(/list(\d+)/))return ae.editList(n[1])}o=-1!=(i=(0,I.indexOf)(r,t)),(0,y.toggleClass)(e,"checked",!o),o?(r.splice(i,1),s&&(cur.onSaveTabs=function(e,t){ae.toggleTabsMenu(null,!1),ae.switchSection("news")}.pbind(t,o))):r.push(t),cur.my_feed_types.tabs=r,ae.toggleTabsMenuTab(t,!o||s),clearTimeout(cur.saveTabsTO),cur.saveTabsTO=setTimeout(ae.saveTabs,500)},hasSearchParams:function(e){let t=!1;return(0,I.each)(e,(function(e,o){if((!e.indexOf("c[")&&"c[section]"!==e||"q"==e)&&o)return t=!0,!1})),t},getSectionParams:function(e){let t={section:e};switch(e){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"podcasts":case"articles":void 0===(t.subsection=cur.subsections[e])&&delete t.subsection;break;case"owner":(t.owner=cur.owner)||delete t.section;break;case"source":case"notifications":(t.source=cur.source)||delete t.source;break;case"list":void 0===(t.subsection=cur.subsections["list"+cur.list])&&delete t.subsection,(t.list=cur.list)||delete t.list;break;case"search":const o=(0,y.ge)("search_filters_form");if(o){let e=(0,I.serializeForm)(o)||{};for(let t in e)e[t]&&"0"!=e[t]||delete e[t];(0,I.extend)(t,e)}t["c[q]"]=(0,I.trim)((0,y.val)(cur.feedEls.search));break;case"photos_search":(t.q=(0,I.trim)((0,y.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,I.intval)(cur.search_sort_value))||delete t.sort;break;case"trends_search":window.nav.objLoc.trend_id&&(t.trend_id=window.nav.objLoc.trend_id),(t.q=(0,I.trim)((0,y.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,I.intval)(cur.search_sort_value))||delete t.sort;break;case"articles_search":(t.q=(0,I.trim)((0,y.val)(cur.feedEls.search)))||(t.section="articles");break;case"comments":cur.reposts&&(t.reposts=cur.reposts);break;case"mentions":const i=new URLSearchParams(location.search);i.delete("ref"),history.replaceState(null,"","?"+i+location.hash),cur.mentionObj&&cur.mentionObj!=vk.id&&(t.obj=cur.mentionObj)}return t},switchNotifyList:function(e,t){uiRightMenu.go((0,y.geByClass1)("feed_section_"+e),!1,!1),ae.go(t)},switchSubSection:function(e,t,o){if(t&&(0,v.checkEvent)(t))return!0;let i=cur.section;"list"===cur.section&&(i="list"+cur.list),cur.subsection=cur.subsections[i]=e;let n=ae.getSectionParams(cur.section);n.hash=o,delete cur.feedUpdateLoading,delete cur.isFeedLoading,nav.go((0,I.extend)(n||{},{0:"feed"})),uiRightMenu.showProgress(cur.feedEls.rmenu)},switchSection:function(e,t,o){if(t&&(0,v.checkEvent)(t))return!0;if((0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,"photos_search"==e&&!(0,I.trim)((0,y.val)(cur.feedEls.search))){if("photos_search"!=cur.section)return!1;e="photos"}"comments"==e&&(cur.reposts=cur.options.reposts=""),(0,P.statlogsValueEvent)("feed_switch",0,e),ae.setSection(e,1);let i=ae.getSectionParams(e||"news");delete cur.feedUpdateLoading,delete cur.isFeedLoading;let n=!o&&(0,I.extend)(i||{},{0:"feed"});return uiRightMenu.go((0,y.geByClass1)("feed_section_"+e),!1,n),!1},setSection:function(e,t,o){if(t=t||0,cur.prevSection=cur.section,!(e==cur.section&&t<2)&&e){if(uiRightMenu.hideProgress(cur.feedEls.rmenu),cur.feedEls.search&&uiSearch.hideProgress(cur.feedEls.search),t>1){Page.playVkFestBanner&&Page.playVkFestBanner(),(0,y.toggleClass)(cur.feedEls.wrap,"feed_submit_shown",(0,I.inArray)(e,cur.options.feed_types.tabs.concat(["list","likes"]))),(0,y.toggleClass)(cur.feedEls.wrap,"feed_submit_only_shown",~["recommended","search","updates","comments"].indexOf(e));let t=(0,I.inArray)(e,["articles_search","articles","search","photos_search","photos","trends","trends_search"]);(0,y.toggleClass)(cur.feedEls.wrap,"feed_search_shown",t),t&&(0,y.elfocus)(cur.feedEls.search),"search"===e&&o.stories_block_show?(0,y.addClass)(cur.feedEls.wrap,"feed_submit_shown_stories"):(0,y.removeClass)(cur.feedEls.wrap,"feed_submit_shown_stories"),cur.section&&(0,y.val)(cur.feedEls.search,"")}2==t&&window.Stories&&Stories.updateFeedStories(e,o),cur.my_feed_types&&(~(0,I.indexOf)(cur.my_feed_types.optional_tabs,cur.section)&&!~(0,I.indexOf)(cur.my_feed_types.tabs,cur.section)&&ae.toggleTabsMenuTab(cur.section,!1),~(0,I.indexOf)(cur.my_feed_types.optional_tabs,e)&&!~(0,I.indexOf)(cur.my_feed_types.tabs,e)&&ae.toggleTabsMenuTab(e,!0)),cur.section=e,4!=t?(cur.editingHide=("notifications"==e||"replies"==e)&&ae.notifyCheckHideReply,cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()):ae.searchUpdate()}},applyOptions:function(e,t){t=t||0,e.no_left_ads&&(cur.no_left_ads=!0),e.owner&&(cur.owner=e.owner),cur.subsection=e.subsection||"",ae.setSection(e.section,t,e),cur.options||(cur.options={reply_names:{}}),(0,I.extend)(cur.options.reply_names,e.reply_names),delete e.reply_names,(0,I.extend)(cur,e);let o=cur.section;if("list"===cur.section&&(o="list"+e.list),cur.subsections[o]=cur.subsection,e.loc&&2==t&&nav.setLoc(e.loc),e.section&&"news"==e.section&&e.subsection&&"top"==e.subsection&&(0,P.statlogsValueEvent)("feed_switch",0,"top_news",t),void 0!==e.filters){let t=(0,y.ge)("search_filters_minimized"),o=t&&(0,y.hasClass)(t,"ui_rmenu_item_expanded"),i=!!t;(0,y.val)("feed_filters",e.filters),window.searcher&&i&&N.searcher.toggleMinimizedFilters((0,y.ge)("search_filters_minimized"),o,!0)}if(e.script&&(0,S.evalWithLogging)(e.script),e.htitle&&(cur.feedInitialTitle=document.title=(0,M.replaceEntities)((0,M.stripHTML)(e.htitle))),void 0!==e.add_feed_queue&&null!==e.add_feed_queue?(cur.add_feed_queue=!1,e.add_feed_queue=!1,ae.getNewQKey(0),!0!==e.add_queue&&(cur.add_queue=e.add_queue)&&setTimeout(ae.update.pbind(0),0)):t&&"search"!=cur.section&&"news"!=cur.section&&cur.section&&(cur.add_feed_queue=!1,e.add_feed_queue=!1),e.add_queues&&(cur.add_queues=e.add_queues,setTimeout(ae.update.pbind(0),0)),e.q){(0,y.val)(cur.feedEls.search,(0,M.replaceEntities)(e.q));let t=e.q;t.length>30&&(t=(0,I.trim)(t.substr(0,30))+"...")}e.last_view&&(cur.options.last_view=e.last_view),void 0!==e.feedback_list&&(cur.options.feedback_list=e.feedback_list),ae.searchUpdate(),"comments"!=cur.section||cur.reposts||(0,y.toggle)("comments_filters",!cur.reposts),(0,M.isString)(cur.all_shown_text)&&(0,y.val)("all_shown",cur.all_shown_text),(0,M.isString)(cur.show_more_text)&&(0,y.val)("show_more_link",cur.show_more_text),cur.empty_text&&(0,y.val)("feed_empty",cur.empty_text),cur.count>=0&&(0,y.re)("feed_error_wrap");let i=!((0,y.geByClass1)("feed_row",cur.rowsCont,"div")||!1),n=(0,y.ge)("feed_rows_next");if(i?((0,y.toggleClass)(cur.feedEls.wrap,"feed_is_empty",!(0,y.isVisible)("feed_error_wrap")),(0,y.hide)("all_shown"),(0,y.toggle)("show_more_link",cur.count>0&&!cur.all_shown)):!cur.all_shown||n&&n.firstChild?((0,y.hide)("all_shown"),(0,y.show)("show_more_link"),(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty")):((0,y.hide)("show_more_link"),(0,y.show)("all_shown"),(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty"),(0,y.re)(n)),e.playlistsData&&(e.playlistsData=JSON.parse(e.playlistsData),cur.pageVideosList=(0,I.extend)(cur.pageVideosList||{},e.playlistsData)),("notifications"==cur.section||"replies"==cur.section)&&cur.notify){let e=(0,y.ge)("feedback_row"+cur.notify);e&&e.onclick&&(setTimeout((function(){e.onclick(),(0,b.scrollToY)((0,y.getXY)(e)[1],0)}),a.browser.msie?100:0),delete cur.notify)}cur.feedSection&&cur.feedSection(e.section,e.subsection)},showMore:function(){if(cur.isFeedLoading)return;cur.disableAutoMore=!1;let e,t=(0,y.ge)("feed_rows_next");if(t){if(t.firstChild)for(;t.firstChild;)e=t.firstChild,cur.rowsCont.insertBefore(e,t),ae.onPostLoaded(e,!0);(0,y.re)(t)}"live"==cur.section&&(cur.all_shown=!0);let o=(0,y.ge)("show_more_link");if(cur.all_shown&&((0,y.hide)(o),(0,y.show)("all_shown")),"live"==cur.section)return;let i=!1,n=function(e){e.keyCode==v.KEY.ESC&&(i=!0)};(0,v.addEvent)(document,"keyup",n);let r=ae.getSectionParams(cur.section||"news");(0,I.extend)(r,{offset:cur.offset,from:cur.from,part:1,more:1,last_view:cur.options.last_view,games_news_items_allowed:cur.isGamesInRightBlock?0:1}),(0,I.extend)(r,cur.navParams),cur.options.feedback_list&&(r.list=cur.options.feedback_list),nav.objLoc.situational_suggest_id&&(r.situational_suggest_id=nav.objLoc.situational_suggest_id);let a=cur.section;ajax.post("al_feed.php?sm_"+cur.section,r,{onDone:function(e,t){if((0,v.removeEvent)(document,"keyup",n),a==cur.section)if(i)cur.disableAutoMore=!0;else{if(t){let e,i=(0,y.ce)("div");for(i.innerHTML=t;e=i.firstElementChild;){const t=(0,$.shouldFilterPaginatedRow)({row:e});var o;if(t.shouldFilter)console.info("Feed: skipping loaded row",e),i.removeChild(e),(0,s.randEnabled)(null!=(o=window.cur.feed_pagination_filtering_log_prob)?o:.01)&&(0,Y.feedLogFilteredRow)({filterReason:t.filterReason,ref:ae.getModuleRef(),row:e,rowsContainer:cur.rowsCont,section:cur.section});else cur.rowsCont.appendChild(e),ae.onPostLoaded(e,!0)}}(0,d.shortCurrency)(),ae.applyOptions(e),setTimeout(ae.scrollCheck,200)}},showProgress:function(){(0,E.lockButton)(o),cur.isFeedLoading=!0},hideProgress:function(){if((0,E.unlockButton)(o),cur.isFeedLoading=!1,o.seen){let e=Math.ceil((Date.now()-o.seen)/1e3),t=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,P.statlogsValueEvent)("feed_load_more_seen_time",e,t),o.seen=!1}},cache:1})},getTypesSection:function(){return"owner"===cur.section?te.Ranges.isUserId(cur.owner)?"person":"group":cur.section},checkFilter:function(e,t){let o,i,n=ae.getTypesSection(),s=cur.my_feed_types[n],r=cur.feed_types[n];"notifications"!=n?(!0===s&&(s=(0,I.clone)(r)),o=-1!=(i=(0,I.indexOf)(s,t)),o?s.splice(i,1):(s.push(t),s.length==r.length&&(s=!0)),(0,E.checkbox)(e),cur.my_feed_types[n]=s,ae.updateTypesCookie(),ae.setFiltersUpdatePage(),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)):ae.setNotifyFilter(e,t)},setFilter:function(e,t){let o=ae.getTypesSection(),i=(0,y.ge)(o+"_type_filter"),n=!0;"notifications"!=o&&((0,I.each)((0,y.geByClass)("_feed_filter_row",i,"div"),(function(){if((0,E.isChecked)(this)&&this!=e)return n=!1})),n?(cur.my_feed_types[o]=!0,(0,I.each)((0,y.geByClass)("_feed_filter_row",i,"div"),(function(){(0,E.checkbox)(this,!0)}))):((0,I.each)((0,y.geByClass)("_feed_filter_row",i,"div"),(function(){(0,E.checkbox)(this,!1)})),cur.my_feed_types[o]=[t],(0,E.checkbox)(e,!0)),ae.updateTypesCookie(),ae.setFiltersUpdatePage({force_expand_filters:1}),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu))},setFiltersUpdatePage:function(e){e=e||{};let t=nav.strLoc;if("updates"===cur.section){t.match(/\&filters\_expanded\=1/)||(0,y.ge)("updates_show_all_filters")&&!e.force_expand_filters||(t+="&filters_expanded=1"),t=t.replace(/\&filters\_shown\=([a-z\,]+)/,"");let o=(0,y.geByClass)("_feed_filter_row","feed_filters"),i=[];for(let e=0;e<o.length;e++)(0,y.hasClass)(o[e],"hide")||i.push(o[e].id.replace("filter_updates",""));t+="&filters_shown="+i.join(",")}nav.go(t)},setNotifyFilter:function(e,t){(0,E.checkbox)(e),cur.notifyPrefs||(cur.notifyPrefs={}),cur.notifyPrefs[t]=(0,E.isChecked)(e),clearTimeout(cur.saveNotifyPrefsTO),cur.saveNotifyPrefsTO=setTimeout((function(){let e=[];(0,I.each)(cur.notifyPrefs,(function(t,o){e.push((o?"":"-")+t)})),e=e.join(","),ajax.post("/al_feed.php",{act:"a_set_notify_prefs",prefs:e,feed:1,hash:cur.topNotifyHash},{onDone:function(e){(0,I.addTemplates)({top_notify_prefs:e}),(0,y.toggleClass)("top_notify_pref_"+t,"checked",cur.notifyPrefs[t]),cur.notifyPrefs={},window.TopNotifier&&TopNotifier.invalidate(),nav.go(nav.strLoc),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)}})}),500)},updateTypesCookie:function(){let e=[];(0,I.each)(cur.my_feed_types,(function(t,o){"tabs"!=t&&e.push(!0===o?"*":o.join(","))})),(0,w.setCookie)("remixfeed",e.join("."),365)},toggleFeedTop:function(e,t,o){let i=(0,y.geByClass1)("_ui_toggler",e),n="top";switch((0,y.toggleClass)(i,"on"),cur.section){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"list":n=(0,y.hasClass)(i,"on")?"top":"recent";break;case"articles":n=(0,y.hasClass)(i,"on")?"suggested":"top";break;case"podcasts":n=(0,y.hasClass)(i,"on")?"recent":"top"}ae.switchSubSection(n,t,o)},switchList:function(e){cur.prevList=cur.list,cur.list=e,ae.setSection("list",1),uiRightMenu.go((0,y.geByClass1)("feed_section_list"+e),!1,!1),ae.go(ae.getSectionParams(cur.section))},setSearchSort:function(e){cur.search_sort_value=e,ae.submitSearch()},_activateReplyBox:function(e,t,o){(t||{}).cancelBubble=!0;let i=(0,y.ge)("reply_box"+e);if(cur.editing&&cur.editing!=e&&cur.notifyReplyData&&cur.notifyReplyData[cur.editing].disabled&&ae.notifyCheckHideReply(cur.editing,(window.event||{}).target),i&&(0,y.isVisible)(i))return void ae.notifyCheckHideReply(e,!1);if(void 0===cur.notifyReplyData&&(cur.notifyReplyData={}),cur.notifyReplyData[e]=o,o.disabled){if(i)(0,y.show)(i);else{(0,y.ge)("feedback_row"+e).appendChild((0,y.se)((0,y.rs)(cur.options.feedback_dis,{item:e,text:o.disabled})))}return void setTimeout((function(){cur.editing=e}),0)}(0,y.show)(i),Wall.showEditReply(e,t);let n=(0,y.ge)("reply_field"+e);n.setAttribute("placeholder",o.ph),window.Emoji&&Emoji.val(n,o.greet.replace(/ $/,"&nbsp;")),(0,y.data)(n,"send",ae.notifySendReply),(0,y.removeClass)("reply_box"+e,"clear_fix")},notifyClick:function(e,t,o){let i=(0,y.ge)("feedback_row"+e);Wall.checkPostClick(i,t)&&ae._activateReplyBox(e,t,o)},blindNotifyReply:function(e,t,o){ae._activateReplyBox(e,t,o)},notifySendReply:function(e,t,o){let i=cur.notifyReplyData[e];if(!i||i.sending)return;let n,s=(0,y.ge)("reply_field"+e),r=(0,y.ge)("reply_button"+e),a=(0,y.ge)("feedback_row"+e),l=s&&(0,y.data)(s,"composer");if(o.stickerId)n={message:"",attach1_type:"sticker",attach1:o.stickerId};else{if(n=l?Composer.getSendParams(l,ae.notifySendReply.pbind(e)):{message:(0,I.trim)(Emoji.editableVal(s))},n.delayed)return;if(!n.attach1_type&&(!n.message||i.greet&&!i.greet.indexOf(n.message)))return void Emoji.editableFocus(s,!1,!0)}(0,I.extend)(n,{act:"post",from:"feedback",item:e},i.params||{});let c=(0,y.ge)("reply_as_group"+e);c&&(0,y.isVisible)((0,y.domPN)(c))&&(n.from_oid=(0,y.domData)((0,y.domClosest)("_submit_post_box",c),"from-oid")),i.sending=1,ajax.post("al_wall.php",Wall.fixPostParams(n),{onDone:function(t,o){if(delete i.sending,l?Composer.reset(l):window.Emoji&&Emoji.val(s,""),s.autosize&&s.autosize.update(),ae.notifyHideReply(e),o){let e=(0,y.geByClass1)("_answer_wrap",a);(0,y.val)(e,o),(0,y.show)(e)}else t&&(0,m.showDoneBox)(t)},onFail:function(){delete i.sending},showProgress:()=>(0,E.lockButton)(r),hideProgress:()=>(0,E.unlockButton)(r)})},notifyCheckHideReply:function(e,t){let o=cur.notifyReplyData&&cur.notifyReplyData[e];if(o&&!o.sending&&(0,y.isVisible)("reply_box"+e)){if(cur.editing=!1,!o.disabled){let t=(0,y.ge)("reply_field"+e),i=(0,I.trim)(window.Emoji?Emoji.editableVal(t):""),n=Wall.hasComposerMedia(t);if(!t||n||i&&!o.greet||o.greet.indexOf(i))return}ae.notifyHideReply(e)}},notifyHideReply:function(e){cur.editing==e&&(cur.editing=!1);let t=(0,y.ge)("feedback_row"+e);(0,y.removeClass)(t,"reply_box_open"),(0,y.hide)("reply_box"+e);let o=cur.replySubmitSettings;o&&o.tt&&o.tt.el&&o.tt.destroy()},notifyPostTooltip:function(e,t,o,i){let n=(o||{}).reply,s="al_wall.php";t.indexOf("topic_comment")?t=t.replace("wall_reply","").replace("wall",""):(s="al_board.php",t=t.replace("topic_comment","")),i=i||{},(0,L.showTooltip)(e,(0,I.extend)({url:s,params:(0,I.extend)({act:"post_tt",post:t,self:1,from:"feedback"},o||{}),slide:15,shift:[!n||n%2?27:329,6],ajaxdt:100,showdt:400,hidedt:800,dir:"auto",className:"rich wall_tt wall_module _feed_notification feed_notification",appendParentCls:"scroll_fix_wrap"},i))},getModuleRef:function(){let e=cur.module||"feed_other";return"feed"==cur.module&&(e="news"==cur.section?cur.subsection?"feed_news_"+cur.subsection:"feed_news":"podcasts"===cur.section?e+"_"+cur.section+("recent"===cur.subsection?"_my":""):cur.section?e+"_"+cur.section:"feed_other"),e},ignoreItem:function(e,t,o,i,n,s=0,r="",a=!0){let l;switch(e){case U.BlockTypeIds.UXPollBlock:case U.BlockTypeIds.VideosForYou:case U.BlockTypeIds.VideoPostcard:case U.BlockTypeIds.PhotoRecognize:case U.BlockTypeIds.RecommendedNarratives:case U.BlockTypeIds.BookmarkGame:case U.BlockTypeIds.AchievementGame:case U.BlockTypeIds.YoulaRecommendationsCarousel:case U.BlockTypeIds.AliExpressRecommendationsCarousel:l=(0,y.ge)(e);break;default:l=(0,y.ge)("post"+e)}if(!l)return;let c=l.getAttribute("data-ad"),d=(0,y.geByClass1)("ui_actions_menu_wrap",l),_=ae.getModuleRef();return d&&uiActionsMenu.toggle(d,!1),(0,u.revertLastInlineVideo)(l),a&&(t.includes("caption")?cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)(l):cur.feedEntriesHTML[e]=(0,y.val)(l)),new Promise(((d,u)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:e,feed_raw:t,caption_type:i,uids:n,hash:o,ad_data:c,ref:_,session_id:cur.feed_session_id,module:ae.getModuleRef(),position:(0,I.indexOf)((0,y.domPN)((0,y.domPN)(l)).children,(0,y.domPN)(l)),reason_id:s,track_code:r},{onDone:function(e,t){ae.destroyPhotoCarouselByPost(l),a&&((0,y.val)(l,e),(0,S.evalWithLogging)(t)),d()},onFail:()=>(u(),!0),stat:[window.jsc("web/privacy.js"),"privacy.css"]})}))},unignoreItem:function(e,t,o,i){let n=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_item",post_raw:e,feed_raw:t,hash:o,ref:n},{onDone:function(){t.includes("caption")?(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):ae.restorePost(e)},showProgress:i&&E.lockButton.pbind(i),hideProgress:i&&E.unlockButton.pbind(i)})},reportIgnoredItem:function(e,t){ajax.post("al_wall.php",{act:"spam",post:e,hash:t},{onDone:function(t){let o=(0,y.ge)("post"+e),i=o&&(0,y.geByClass1)("feed_post_report",o,"div");(0,y.val)(i,t)}})},ignoreOwner:function(e,t,o,i,n){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)("post"+e));let s="list"==cur.section&&cur.list||0,r=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,type:o,hash:i,list:s,ref:r},{onDone:function(o){(0,y.val)("post"+e,o),(0,I.each)((0,y.geByClass)("post",cur.rowsCont),(function(o,i){let n=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);n&&n[1]!=e&&(!n[4]&&n[2]==t||n[4]&&n[3]==t)&&((0,u.revertLastInlineVideo)(this),(0,y.hide)(this.parentNode))}))},showProgress:()=>x.FlatButton.lock(n),hideProgress:()=>x.FlatButton.unlock(n)})},unignoreOwner:function(e,t,o,i){let n="list"==cur.section&&cur.list||0,s=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,hash:o,list:n,ref:s},{onDone:function(o){e?(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,y.val)("ignore_row"+t,o),(0,I.each)((0,y.geByClass)("post",cur.rowsCont),(function(e,o){let i=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);i&&(!i[4]&&i[2]==t||i[4]&&i[3]==t)&&(0,y.show)(this.parentNode)}))},showProgress:()=>x.FlatButton.lock(i),hideProgress:()=>x.FlatButton.unlock(i)})},ignoreGroupWall:function(e,t,o,i){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)("post"+e));let n=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,ignore_type:"group_wall",hash:o,ref:n},{onDone:function(t){(0,y.val)("post"+e,t)},showProgress:()=>x.FlatButton.lock(i),hideProgress:()=>x.FlatButton.unlock(i)})},unignoreGroupWall:function(e,t,o,i){let n=ae.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,ignore_type:"group_wall",hash:o,ref:n},{onDone:function(o){e?(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,y.val)("ignore_row"+t,o)},showProgress:()=>x.FlatButton.lock(i),hideProgress:()=>x.FlatButton.unlock(i)})},ignoreLiveOwner:function(e,t,o,i){let n=(0,y.ge)("post"+e),s=(0,y.geByClass1)("ui_actions_menu_wrap",n);s&&uiActionsMenu.toggle(s,!1),(0,u.revertLastInlineVideo)(n),cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)("post"+e),ajax.post("al_feed.php?act=a_ignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,y.val)("post"+e,t)},showProgress:i&&E.lockButton.pbind(i),hideProgress:i&&E.unlockButton.pbind(i)})},unignoreLiveOwner:function(e,t,o,i){ajax.post("al_feed.php?act=a_unignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"])},showProgress:i&&E.lockButton.pbind(i),hideProgress:i&&E.unlockButton.pbind(i)})},unsubscribe:function(e,t,o){(0,v.triggerEvent)((0,y.ge)("post_delete"+e),"mouseout"),cur.feedEntriesHTML[e]=(0,y.ge)("post"+e).innerHTML;let i=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);i&&ajax.post("al_feed.php",{act:"unsubscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[i[2]],owner_id:i[1],place_id:i[3],hash:t,feed:1},{onDone:function(t){(0,y.ge)("post"+e).innerHTML=t.replace("%post_raw%",e)},showProgress:o&&E.lockButton.pbind(o),hideProgress:o&&E.unlockButton.pbind(o)})},subscribe:function(e,t,o){let i=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);i&&ajax.post("al_feed.php",{act:"subscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[i[2]],owner_id:i[1],place_id:i[3],hash:t,feed:1},{onDone:ae.restorePost.pbind(e),showProgress:o&&E.lockButton.pbind(o),hideProgress:o&&E.unlockButton.pbind(o)})},restorePost:function(e){let t;if(e===U.BlockTypeIds.PhotoRecognize)t=(0,y.ge)(e);else t=(0,y.ge)("post"+e);if(!t)return;t.innerHTML=cur.feedEntriesHTML[e],ae.initPhotoCarouselInPost(t);let o=(0,y.geByClass1)("input_back",t,"div"),i=(0,y.geByTag1)("textarea",t);i&&(i.placeholder=o.innerHTML,o.parentNode.removeChild(o),(0,C.placeholderSetup)(i))},toggleReposts:function(e,t,o,i){if((0,v.checkEvent)(i))return!0;let n=(0,y.ge)("feed_reposts_more"+t+"_"+o),s=(0,y.ge)("feed_reposts"+t+"_"+o),r=0,a=(0,b.scrollGetY)(),l=(0,y.isVisible)(s);if(s)return l?r-=s.offsetHeight+(0,I.intval)((0,y.getStyle)(e,"marginTop")):((0,y.domPN)((0,y.domPN)(s))||{}).bits=0,(0,y.toggle)(s,!l),x.FlatButton.setLabel(n,l?_.getLang("news_show_X_reposts",s.childNodes.length):_.getLang("news_hide_reposts")),r&&(0,b.scrollToY)(a+r+(0,y.getSize)("page_header")[1],0),!1;n&&(0,y.re)(n.parentNode.parentNode)},editHidden:function(){return(0,T.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")]}),cur.onOListSave=ae.onHiddenSave,!1},onHiddenSave:function(e,t,o,i){let n=(0,m.curBox)(),r={act:"a_ignore_olist",no_reposts:(0,y.ge)("feed_list_reposts")&&!(0,E.isChecked)("feed_list_reposts")?1:0,hash:i.hash};return(0,s.partConfigEnabled)("use_only_black_list_param_to_process_owners")?r.Black=t.join(","):e.length<t.length?r.White=e.join(","):r.Black=t.join(","),ajax.post("al_feed.php",r,{onDone:function(e,t){n.hide(),ae.switchSection("photos"==cur.section?"photos":"news")},showProgress:E.lockButton.pbind(n.btns.ok[0]),hideProgress:E.unlockButton.pbind(n.btns.ok[0])}),!1},addList:function(){return ae.editList(-1)},editList:function(e){return ae.toggleTabsMenu(!1,0),(0,T.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",list_id:e,height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")],onFail:function(e){return setTimeout((0,T.showFastBox)({title:_.getLang("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e,_.getLang("global_close")).hide,4500),!0}}),cur.onOListSave=ae.onListSave.pbind(e),!1},onListSave:function(e,t,o,i,n){let s=(0,y.val)("feed_list_name");if(!(0,I.trim)(s))return(0,E.notaBene)("feed_list_name"),!1;if(!t.length)return!1;let r=(0,m.curBox)();return ajax.post("al_feed.php",{act:"a_save_list",hash:cur.tabs_hash,White:t.join(","),title:s,list_id:e,no_reposts:(0,y.ge)("feed_list_reposts")&&!(0,E.isChecked)("feed_list_reposts")?1:0},{onDone:function(t){let o=(0,y.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu),i=(0,y.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu);const n=uiRightMenu.selectLabelNode(o);(0,y.val)(n,(0,I.clean)(s)),(0,y.val)((0,y.geByClass1)("ui_actions_menu_item_label",i),(0,I.clean)(s)),r.hide(),e>0?ae.switchList(e):nav.go({0:"feed",section:"list",list:t},null,{nocur:!0})},onFail:function(e){return(0,y.val)("feed_list_error",e),(0,y.show)("feed_list_error_wrap"),!0},showProgress:E.lockButton.pbind(r.btns.ok[0]),hideProgress:E.unlockButton.pbind(r.btns.ok[0])}),!1},deleteList:function(e,t,o,i){if(i&&(0,v.cancelEvent)(i),e<=0)return!1;if(!o){ae.toggleTabsMenu(!1,0);const o=(0,T.showFastBox)({title:_.getLang("news_delete_list_sure_title"),bodyStyle:"padding: 20px; line-height: 160%;"},_.getLang("news_delete_list_sure").replace("{list}",t),_.getLang("global_delete"),(function(){ae.deleteList(e,t,!0)}),_.getLang("global_cancel"),(function(){o.hide()}));return}const n=(0,m.curBox)();ajax.post("al_feed.php",(0,I.extend)({act:"a_delete_list",list_id:e,hash:cur.tabs_hash}),{onDone:function(){(0,y.re)((0,y.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu)),(0,y.re)((0,y.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu)),boxQueue.hideAll(),"list"==cur.section&&cur.list==e&&ae.switchSection("news")},showProgress:E.lockButton.pbind(n.btns.ok[0]),hideProgress:E.unlockButton.pbind(n.btns.ok[0])})},saveTabs:function(){ajax.post("al_feed.php",{act:"a_save_tabs",hash:cur.tabs_hash,tabs:cur.my_feed_types.tabs.join(",")},{hideProgress:function(){(0,M.isFunction)(cur.onSaveTabs)&&cur.onSaveTabs(),cur.onSaveTabs=null}})},statsShow:function(e,t){return(0,g.showWiki)({w:"stats"+(cur.source||"")},!1,e)},editLiveBlacklist:function(e){(0,v.cancelEvent)(e),(0,T.showBox)("al_video.php?act=live_blacklist_box",{},{onDone:function(e,t){H.default.init(e,t)},stat:[window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/indexer.js")]})},scrollCheck:(0,D.debounce)((function(e){if("scroll"!=(e=e||{}).type&&(!cur.idleManager||cur.idleManager.isIdle))return;let t,o,i,n,r,a,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=(0,b.scrollGetY)(),d=0,u=[];if(!cur.isFeedLoading&&!cur.disableAutoMore){const e=(0,y.ge)("show_more_link");(0,y.isVisible)(e)&&c+l+1e3>e.offsetTop&&ae.showMore()}if((0,y.domPN)(cur.topRow)==cur.rowsCont&&"feed_rows_next"!=(cur.topRow||{}).id||(cur.topRow=(0,y.domFC)(cur.rowsCont)),!vk.id||!cur.topRow||"feed_rows_next"==cur.topRow.id||((window.curNotifier||{}).idle_manager||{}).is_idle&&"init"!=e.type)return;let _=[];for(n=(0,y.domPS)(cur.topRow);n;n=(0,y.domPS)(n))cur.topRow.offsetTop>c&&(cur.topRow=n),n.unseen||(n.unseen=!0,_.push((0,V.postsGetRaws)(n)),(0,V.isAdWithShowOff)(n)&&Wall.triggerAdStat((0,y.domFC)(n),"show_off"));for(Page.postsUnseen(_),n=cur.topRow;n&&(t=d||n.offsetTop,!(t>=c+l));n=r)if(r=(0,y.domNS)(n),"feed_rows_next"==(r||{}).id&&(r=null),d=r?r.offsetTop:t+n.offsetHeight,d<c&&r&&(cur.topRow=r),LongView&&LongView.register(n,"feed"),q.longView.registerElement(n),a=n.bits||0,!(a>=3)){var h,p;if(cur.feedSeenPostHeight>0)cur.feedPostHeaderHeight=cur.feedPostHeaderHeight||(0,y.getH)(null==(p=n)||null==(h=p.querySelector)?void 0:h.call(p,".post_header, .js-PostHeader")),o=t+cur.feedPostHeaderHeight,i=o+cur.feedSeenPostHeight,n.postBottom||(n.postBottom=o+(0,y.getH)((0,y.geByClass1)("wall_text",n))),i=Math.min(i,n.postBottom),(0,y.geByClass1)("feed_friends_recomm",n)&&(0,s.partConfigEnabled)("friends_recommendations_old_fix_show_user_rec")&&(i+=.35*n.clientHeight),a|=(o>=c&&o<c+l?1:0)|(i>=c&&i<c+l?2:0);else a|=(t>=c&&t<c+l?1:0)|(d>=c&&d<c+l?2:0);if(a&&(n.bits=a,3==a)){let e=(0,V.postsGetRaws)(n);var f;if((0,V.isAdWithLongImpressionOnly)(n)||(0,V.isAutoplayAd)(n)?Wall.triggerAdStat((0,y.domFC)(n),"impression"):u.push(e),(0,y.geByClass1)("VideosForYouGallery",n))null==(f=window.FeedVideosForYou)||f.viewBlock();else if((0,y.geByClass1)("FeedVideoPostcard",n)){var g;null==(g=window.FeedVideoPostcard)||g.viewBlock()}else if(n.querySelector(".UxpollsBlock")){const e=n.querySelector(".UxpollsBlock").dataset.trackCode;(0,J.viewUXPollsBlock)(e)}else if((0,y.geByClass1)("feed_friends_recomm",n)){let t=(0,y.geByClass1)(k.UI_GALLERY_CLASSNAME,n);const o=(0,y.domData)(t,"from");let i=(0,y.domData)(t,"code")||"";(0,R.friendsRecommLogSave)(["view_block",o,e.index,(0,M.vkNow)(),e.module,i],!0);const r=(0,k.uiGetGallery)(t);var m;if((0,s.partConfigEnabled)("friends_recommendations_old_fix_show_user_rec"))null==(m=r)||m.setGalleryViewed();else r&&r.getVisibleItems().forEach((function(e){(0,R.onViewFriendRecomm)(e[0],e[1],o)})),t.visible=!0}else if((0,y.geByClass1)("js-feed_groups_recomm",n))(0,B.feedInitialViewRecommendedGroupsTrigger)(n,e.index);else if(n.querySelector("#feed_mini_apps_recomm"))window.RecommendedMiniApps.viewBlock();else if(n.querySelector(`#${oe.FEED_RECOGNIZE_PHOTO_POST_ID}`)){var w;null==(w=(0,ie.recognizeBlockState)().block)||w.viewBlock()}}}u=u.concat(q.longView.process(c,l)),LongView&&LongView.onScroll(c,l),Page.postsSeen(u);let v=(0,y.ge)("show_more_link"),S=v.offsetTop;if(!v.seen&&S>=c&&S<c+l){v.seen=Date.now();let e=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,P.statlogsValueEvent)("feed_load_more_seen",(0,E.isButtonLocked)(v),e)}}),20),searchUpdate:function(){if(cur.feedEls.search&&_.getLang("news_search")){let e;e=cur.section.indexOf("photos")?cur.section.indexOf("articles")?_.getLang("news_search"):_.getLang("news_articles_search"):_.getLang("news_photo_search"),cur.feedEls.search.setAttribute("placeholder",(0,I.clean)((0,M.unclean)(e))),(0,C.placeholderInit)(cur.feedEls.search,{reload:!0})}},go:function(e,t,o){if(e=e||{},cur._back_local){let w=cur._back_local;w.back?(0,f.showBackLink)(w.back[0],w.back[1],w.back[2]):(0,f.showBackLink)(!1),cur._back_local=!1}if(cur.feedReq)try{cur.feedReq.abort()}catch(v){(0,h.debugLog)(v)}cur.feedReqObj=null;let i=1,s=function(){cur.isFeedLoading=!1};(a.browser.msie||o)&&(i=!1,s=cur.onFrameBlocksDone),cur.wasScroll=!!o&&(0,b.scrollGetY)();let r=window.event&&window.event.target;if(r&&"search"===e.section&&!e._post){let k=nav.getPostParams(r);if(k.post_id&&k.post_click_type){function C(t,o){t&&!e[o]&&(e[o]=t)}C(k.post_id,"_post"),C(k.post_click_type,"_post_click_type"),C(k.post_click_url,"_post_click_url"),C(k.post_click_mention_id,"_post_click_mention_id"),C(k.post_click_cc_key,"_post_click_cc_key"),C(k.ad_data,"_post_ad_data"),C(k.ad_block_unique_id,"_post_ad_block_unique_id")}}let l=cur.feedReqObj={},c={},_=0;const g=()=>{if(!cur.feedReqObj||cur.feedReqObj!==l)return;if(++_>500)return;let e=!0,t={};(0,I.each)(c,(function(o){let i=(0,y.ge)(o);if(i&&(0,y.hasClass)(i,"feed_row"))return i.firstChild?void ae.onPostLoaded(i,!0):(t[o]=!0,void(e=!1))})),e||(c=t,setTimeout(g,100))},m=+new Date;cur.feedReq=ajax.post("al_feed.php",(0,I.extend)(e,{part:1}),{onDone:function(o,s,r,a,l){if(!cur.feedEls)return;if((0,u.revertLastInlineVideo)(),(0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,window.tooltips&&tooltips.destroyAll((0,y.ge)("feed_rows")),boxQueue.hideAll(),layers.fullhide&&!cur.storyLayer&&layers.fullhide(!0),i&&ajax._framenext(),window.wall&&Wall.cancelEdit(),boxQueue.hideAll(),t?t(s||""):(0,y.val)(cur.rowsCont,s||""),ae.applyOptions(o,2),!e.norecom&&"notifications"!==e.section){(0,y.val)("feed_recommends",o.recommends||""),(0,y.toggle)("feed_recommends",!!o.recommends);let e="/al_feed.php#"+(0,n.toQueryString)({act:"recom"});ajaxCache[e]&&delete ajaxCache[e],(0,y.toggleClass)(cur.feedEls.wrap,"feed_asc_shown",(0,y.geByClass1)("feed_asc_block","feed_recommends"))}let _;if(r&&(0,S.evalWithLogging)(r),(0,p.checkPageBlocks)(),(0,b.scrollToTop)(0),(0,d.shortCurrency)(),cur.feedEls.wall)switch(_="clear_fix",cur.section){case"updates":_+=" page_block feed_updates";break;case"photos_search":_+=" page_block feed_found_photos";break;case"notifications":_+=" page_block feed_notifications";break;case"coronavirus":case"stayhome":_+=" feed_wall--with-header"}if((0,y.ge)("feed_wall").className=_,(0,y.toggle)("feed_recommends",(0,I.inArray)(cur.section,["news","recommended","videos"])),(0,y.val)("feed_app_widget",a||""),(0,y.toggle)("feed_app_widget",a),a&&l&&(0,S.evalWithLogging)(l),cur.rowsCont&&cur.rowsCont.children&&((0,I.each)(cur.rowsCont.children,(function(){let e=this;(0,y.hasClass)(e,"feed_row")&&(!e.id||e.firstChild?ae.onPostLoaded(e,!0):c[e.id]=!0)})),(0,M.isEmpty)(c)||setTimeout(g,10)),cur.q){const e="photos_search"===cur.section?P.servicePhotos:P.serviceNews,t=+new Date-m;(0,P.saveSearchAttemptStats)(e,0,cur.count,(0,y.val)(cur.feedEls.search),0,0,t,"",P.blockNameEmpty,"",!1,0,null,cur.sort),(0,W.updateCounters)(location.href,document.referrer)}setTimeout(ae.scrollCheck,200)},onFail:function(){return!1},showProgress:function(){cur.isFeedLoading=!0},frame:i,ads:1,hideProgress:s})},onFeedSearch:function(e,t,o,i){t||(0,P.removeSearchPositionTracker)("photos");let n,s,r=i||cur.section;if(r.indexOf("photos")?r.indexOf("trends")?r.indexOf("articles")?(n="search",s="news"):(n="articles_search",s="articles"):(n="trends_search",s="trends"):(n="photos_search",s="photos"),"search"==n||ae.hasSearchParams(ae.getSectionParams(n))){n!=cur.section&&ae.setSection(n,1);let o=ae.getSectionParams(n);cur.disableSort&&(o.disable_sort=1),ae.go(o),window.searcher&&N.searcher.highlightHotHashtag(t||(0,y.val)(e))}else ae.go(ae.getSectionParams(s));uiSearch.onChanged(e),uiSearch.showProgress(e)},onSearchChange:function(){return setTimeout(ae.onFeedSearch.pbind(cur.feedEls.search),0),!1},init:function(e){(0,l.feedLoadingStats)(e),setTimeout((function(){(0,I.each)((0,y.geByTag)("textarea",cur.rowsCont),(function(){(0,C.placeholderSetup)(this)})),cur.q&&(0,P.saveSearchAttemptStats)("photos_search"===cur.section?P.servicePhotos:P.serviceNews,0,cur.count,(0,y.val)(cur.feedEls.search),"0",0,"0","",P.blockNameEmpty,"",!1,0,null,cur.sort)}),200),(0,I.extend)(cur,{oid:e.user_id,postTo:e.user_id,phCache:{},phShown:{},subsections:{},feed_session_id:e.feed_session_id||"na",module:"feed",isFeedLoading:!1,customSearchChange:ae.onSearchChange,navParams:e.nav_params||{},isGamesInRightBlock:e.is_games_in_right_block,wallPostCb:function(){"news"==cur.section?setTimeout(ae.update.pbind(1),1e3):setTimeout(ae.switchSection.pbind("news"),1e3)},idleManager:function(){let e,t,o;const i={isIdle:!1,onIdle:null,onUnIdle:null,stop:function(){(0,v.removeEvent)(document,"mousemove keydown",e),(0,v.removeEvent)(window,"focus blur",o)},start:function(){a.browser.mobile||(e=function(){cur.idleManager&&i.isIdle&&(i.isIdle=!1,i.onUnIdle&&i.onUnIdle())},t=function(){cur.idleManager&&(i.isIdle=!0,i.onIdle&&i.onIdle())},o=function(o){"focus"==o.type?e():t()},(0,v.addEvent)(window,"focus blur",o))}};return i}(),currentModule:function(){return"videos"==cur.section?"feed_videos":cur.module},onFrameBlocksDone:function(){cur.isFeedLoading=!1,(0===cur.wasScroll||cur.wasScroll>0||!1===cur.wasScroll&&"search"==cur.section&&cur.q&&"#"==cur.q.substr(0,1))&&(cur.wasScroll=!1)},feedEntriesHTML:{},feedUnreadCount:0,feedInitialTitle:"",feedUnread:[],feedToSort:[],feedEls:{wrap:(0,y.ge)("main_feed"),wall:(0,y.ge)("feed_wall"),search:(0,y.ge)("search_query"),rmenu:(0,y.ge)("feed_rmenu"),newPosts:(0,y.ge)("feed_new_posts")}}),cur.nav.push((function(e,t,o,i){if(void 0!==e[0])return;let n=(0,I.clone)(o);if(delete n[0],void 0===e.section||(0,I.inArray)(cur.section,["notifications","replies"])==(0,I.inArray)(e.section,["notifications","replies"])){if("notifications"==cur.section)return ae.switchNotifyList(o.list||"all",(0,I.extend)(n,i.params||{})),!1;if(e.list)return ae.switchList(e.list),!1;if(void 0!==e.section&&ae.switchSection(e.section||"news",!1,!0),e.notify)return!1;if(e.q)return(0,y.val)(cur.feedEls.search,e.q),ae.onFeedSearch(cur.feedEls.search),!1;if(delete e.subsection,(0,M.isEmpty)(e)){let e=(0,y.geByClass1)("feed_section_"+(t.section||"news")+(t.list||""));e&&uiRightMenu.go(e,!1,!1)}return cur.likesTabTT&&cur.likesTabTT.destroy(),(0,se.isFeedPostDurationStatsFixEnabled)()&&ae.onFeedPageLeaveHandler(),ae.go((0,I.extend)(n,i.params||{})),!1}})),cur.idleManager.onUnIdle=ae.updateTitle,cur.idleManager.onIdle=ae.reSortItems,cur.options=cur.options||{},(0,I.extend)(cur.options,e),ae.applyOptions(e,3),cur.rowsCont=e.wallCont=(0,y.ge)("feed_rows"),Wall.init(e),cur.rowsCont&&cur.rowsCont.children&&(0,I.each)(cur.rowsCont.children,(function(){let e=this;(0,y.hasClass)(e,"feed_row")&&e.firstChild&&ae.onPostLoaded(e,!0)})),cur._back={text:_.getLang("news_return_to_news"),show:[ae.startEvents],hide:[function(){clearInterval(cur.updateInt),(0,v.removeEvent)(window,"scroll",ae.scrollCheck),(0,v.removeEvent)(window,"resize",ae.scrollCheck),(0,se.isFeedPostDurationStatsFixEnabled)()&&ae.onFeedPageLeaveHandler(),cur.idleManager.stop(),clearTimeout(cur.lp_error_to),window.cur.feedScrollCheckIntervalID&&clearInterval(window.cur.feedScrollCheckIntervalID)}],loc:!1},ae.startEvents(e),(0,ee.initCheckValidationPhone)(),(0,R.friendsRecommLogSend)(!0),setTimeout((function(){ae.scrollCheck({type:"init"})}),200);try{const e=nav.objLoc.storybox;if(e){const t=JSON.parse(atob(e));t&&(0,re.storyPublisherInitAsync)([(0,i._)({photoUrl:t.url?t.url:t.blob,stickers:t.stickers,attachment:t.attachment,serviceInfo:t.service_info},t)])}}catch(e){console.log(e)}},startEvents:function(){var e,t;cur.idleManager.start(),cur.updateInt=setInterval((function(){ae.update(0)}),2e4),(0,v.addEvent)(window,"scroll",ae.scrollCheck),(0,v.addEvent)(window,"resize",ae.scrollCheck),(null==(t=cur)||null==(e=t.options)?void 0:e.pagination_time_interval_check_enabled)&&(0,c.feedPaginationIntervalCheckInit)((function(){ae.scrollCheck()}))},onFeedPageLeaveHandler:()=>{window.cur.topRow&&Page.postsUnseen([(0,V.postsGetRaws)(window.cur.topRow)])},mentionClick:function(e,t){let o=e,i=((e.getAttribute("mention")||"").match(/^bp(-?\d+_\d+)$/)||{})[1];if(!i)return nav.go(e,t);for(i=i.split("_");e;e=e.parentNode){let n=(e.id||"").match(/^replies(-?\d+_topic\d+)$/);if(n){if(n[1].split("_")[0]==i[0])return Wall.showReply(o,n[1],i[0]+"topic_"+i[1],t);break}}return nav.go(e,t)},toggleCustomFeedTab:function(e,t){return(0,y.hasClass)(e,"feed_tab_link_hidden")?((0,y.removeClass)(e,"feed_tab_link_hidden"),(0,w.setCookie)("remixcustom_feed_added",t)):(0,E.lockButton)(e),ae.checkTabsFilter((0,y.geByClass1)("_feed_custom_"+t),t)},recomSubscribe:function(e,t,o){let i,n,s=o?t:(0,y.domPS)(t),r=o?(0,y.domNS)(t):t;o?(i="/al_feed.php",n={act:"subscr",oid:e,from:nav.objLoc.section,hash:(0,y.val)("feed_recom_hash")}):(i="/al_fans.php",n={act:"unsub",oid:e,hash:(0,y.val)("feed_recom_hash"),no_response:1}),ajax.post(i,n,{onDone:function(){(0,y.toggle)(s,!o),(0,y.toggle)(r,!!o),"recommended"!=nav.objLoc.section&&nav.go(nav.objLoc,!1,{params:{norecom:1}})},showProgress:()=>(0,E.lockButton)(t),hideProgress:()=>(0,E.unlockButton)(t)})},clickBlogReminder:function(e,t,o,i,n,s){if(ajax.post("blog.php",{act:"click_reminder",hash:i,nid:t,accept:1,target:s},{onDone:function(){}}),"_blank"!==(0,y.attr)(e,"target"))return(0,v.cancelEvent)(n),nav.go(o)},hideBlogReminder:function(e,t,o,i){o&&(0,v.cancelEvent)(o),(0,y.re)("feed_blog_reminder"),ajax.post("blog.php",{act:"hide_reminder",hash:e,nid:t,accept:0,target:i},{onDone:function(){}})},preloadVideos:function(e){function t(e){let t=new XMLHttpRequest;t.open("GET",e),t.send()}e&&cur.videoAutoplayScrollHandler&&(cur.videoAutoplayPreloaded=cur.videoAutoplayPreloaded||{},(0,I.each)(e,(function(e,o){t(o.index_url),t(o.index_url.replace(/index-(.+).m3u8/,"seg-1-$1.ts")),cur.videoAutoplayPreloaded[o.video]=o.quality})))},expandJoinedGroups:function(e,t){return(0,v.cancelEvent)(t),(0,y.show)((0,y.geByClass1)("feed_groups_hidden_list",e.parentNode)),(0,y.re)(e),!1},showAllFilters:function(e){(0,y.re)(e);let t=(0,y.geByClass)("hide",e.parentNode);for(let e=0;e<t.length;e++)(0,y.removeClass)(t[e],"hide")},toggleSubscription:function(e,t,o,i,n){let s=(0,y.domClosest)("_ui_menu_wrap",e);s&&uiActionsMenu.toggle(s,!(0,y.hasClass)(s,"shown")),Page.toggleSubscription(e,t,o,i,n,(function(e,t){(0,y.geByClass)("post",cur.rowsCont).forEach((function(o){let n=o.id.split("_"),s=+n[n.length-2].replace("post","");if(i!==s)return;let r=(0,y.geByClass1)("page_action_subscribe",o);(0,y.val)(r,e),(0,y.domData)(r,"act",t)}))}))},onPostLoaded:function(e,t){Wall.onPostLoaded(e,t),this.initPrettyCardGallery(e),t&&!(0,y.hasClass)(e,"_post")&&ae.initPhotoCarouselInPost((0,y.geByClass1)("_post",e))},openPostSuggest:function(e,t,o){if(t&&null!=t.type)switch(t.type){case 1:const n=t.postData,s=t.notHideByClick;let r=(0,y.ge)("post_field");return void((r?(0,I.trim)(r.innerHTML).replace("<br>",""):"")||cur.wallAddMedia&&cur.wallAddMedia.attachCount()?(0,T.showFastBox)({title:_.getLang("news_suggest_alert_title")},_.getLang("news_suggest_alert_text"),_.getLang("global_yes"),(function(){(0,m.curBox)().hide(),i(n,s)}),_.getLang("global_cancel")):i(n,s));case 4:return window.open(t.link),void ae.suggestionEvent(e,"open",o,t.notHideByClick)}function i(t,i=!1){cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),cur.options&&(cur.options.situational_suggest_id=e),t[0]=t[0].replace(/<br>/g,"\n");let n=cur.editing;delete cur.editing,Wall.setDraft(t),ae.suggestionEvent(e,"open",o,i),cur.editing=n}},suggestionEvent:(e,t,o,i)=>(ajax.post("al_feed.php",{act:"suggestion_event",suggest_id:e,event_type:t,not_hide_by_click:(0,I.intval)(i)}),i||(0,y.re)((0,y.geByClass1)("_post_suggest")),(0,v.cancelEvent)(o)),closePostSuggest(e,t,o){ae.suggestionEvent(e,t,o,!1)},hideRightBlock:function(e,t,o){let i=(0,y.domCA)(e,".page_block");return(0,y.re)(i),cur.isGamesInRightBlock=!1,ajax.post("al_feed.php",{act:"a_hide_right_block",block_type:t,app_id:e.dataset.app_id||0,hash:o}),!1},initPrettyCardGallery:function(e){if(!(0,y.geByClass1)("pretty-cards",e))return!1;window.PrettyCardGallery&&new window.PrettyCardGallery(e)},initPhotoCarouselInPost(e){if(!e)return;const t=(0,G.initPhotoBlockInPost)(e,ae.sendPhotoCarouselEvent.bind(ae));(0,y.data)(e,"photo_carousel",t),(0,ne.pushNavDestroy)((()=>{(0,y.removeData)(e,"photo_carousel")}))},destroyPhotoCarouselByPost(e){const t=(0,y.data)(e,"photo_carousel");t&&t.destroy()},sendPhotoCarouselEvent(e,t,o=null){if(!t)return;const i=t.querySelector(".post_img"),n=i&&i.getAttribute("data-post-id");if(!n)return;let s="",r="";const a=n.match(/(-?\d+)_p(\d+)/);if(!a||!a[1]||!a[2])return;s=a[1],r=a[2];let l=t.getAttribute("data-photo-raw-id");const c=t.getAttribute("data-pseudopost-type"),d=t.getAttribute("data-post-creation-timestamp");if(!l&&"photo_group"===c&&o){const e=o.target;if(e&&e.href){const t=e.href.match(/\/photo(-?\d+_\d+)/);l=t&&t[1]}}const u={event_type:e,content_type:c,post_owner_id:s,post_id:r,photo_raw_id:l,timestamp:d,ref:ae.getModuleRef()};(0,P.statlogsValueEvent)("feed_new_carousel_stat",u)},disablePhotoRecognizeBlock(e){const t=document.getElementById(`${U.BlockTypeIds.PhotoRecognize}`);t&&(cur.feedEntriesHTML[`${U.BlockTypeIds.PhotoRecognize}_ignored`]=(0,y.val)(t),ajax.post("al_feed.php",{act:"disable_recognize_block",hash:e},{onDone:e=>{(0,y.val)(t,e)}}))},enablePhotoRecognizeBlock(e){const t=document.getElementById(`${U.BlockTypeIds.PhotoRecognize}`);t&&ajax.post("al_feed.php",{act:"enable_recognize_block",hash:e},{onDone:()=>{(0,y.val)(t,cur.feedEntriesHTML[`${U.BlockTypeIds.PhotoRecognize}_ignored`])}})},initRightBlocks:e=>{(0,Z.initFeedRightBlocks)(e)}}},385295:(e,t,o)=>{o.d(t,{longView:()=>a});var i=o(944615),n=o(795558),s=o(82161);let r={tracking:[],viewed:{}};const a={process:(e,t)=>{const{tracking:o,viewed:a}=r;if(0===o.length)return[];let l=[];return(0,s.each)(o,(function(o,r){var c;let d=(0,n.domFC)(r),u=null==(c=d)?void 0:c.id;if(!d||!u)return;let _=(0,n.domData)(d,"ad-block-uid"),h=""+u;if(_&&(h+="_"+_),!a[h]&&document.body.contains(r))if((0,i.isElemViewable)(r,.5,e,t)){let e=Date.now();r.longViewStartedAt?e-r.longViewStartedAt>=1e3&&(a[h]=!0,l.push((0,s.extend)({},(0,i.postsGetRaws)(r),{long:1}))):r.longViewStartedAt=Date.now()}else r.longViewStartedAt=null})),l},registerElement:e=>!!e&&(!!e.longViewTracking||!e.longViewRegistered&&(e.longViewRegistered=!0,e.longViewTracking=(0,i.isAutoplayAd)(e)||(0,i.isAdWithLongImpression)(e)||(0,i.isAdWithLongImpressionOnly)(e),!!e.longViewTracking&&(r.tracking.push(e),!0)))}},145637:(e,t,o)=>{o.d(t,{ON_BOARDING_BG_RECT_ID:()=>l,default:()=>u});var i=o(795558),n=o(953908),s=o(438221),r=o(23087),a=o(84543);const l="onboarding_bg_rect",c="page_header_cont",d="onboarding";class u{initOnboardingBG(){if(!window.onboardingBG){let e='\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" class="GroupOnboardingBgClip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ',t=(0,i.se)(e);(0,i.domInsertBefore)(t,window.layerBG),window.onboardingBGHeader=(0,i.ge)("onboarding_bg_header"),window.onboardingBG=(0,i.ge)("onboarding_bg"),window.onboardingBGRect=(0,i.ge)(l),window.onboardingBGClip=(0,i.ge)("onboarding_bg_clip"),window.cur.destroy.push((()=>{(0,i.hide)(window.onboardingBG),(0,i.hide)(window.onboardingBGHeader),(0,i.removeClass)((0,i.ge)(c),d),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&(0,n.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick)}))}this.opts.onBGClick&&(0,n.addEvent)(window.onboardingBG,"click",this.opts.onBGClick)}showTT(){const[,e]=(0,i.getXY)(this.el);this.tt=new a.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();const t=this.tt.getContent();(0,r.isElementInViewport)(this.el)&&(0,r.isElementInViewport)(t)||(0,s.scrollToY)(e-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&((0,n.removeEvent)(window,"scroll"),(0,n.removeEvent)(window,"resize")),this.opts.onBGClick&&window.onboardingBG&&(0,n.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick),this.opts.onHide&&this.opts.onHide())}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),(0,n.addEvent)(window,"scroll",this.onScrollTT.bind(this)),(0,n.addEvent)(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){let e=this.el.offsetWidth,t=this.el.offsetHeight,o=(0,i.getXY)(this.el);(0,i.attr)(window.onboardingBGClip,"width",e+this.border[1]+this.border[3]),(0,i.attr)(window.onboardingBGClip,"height",t+this.border[0]+this.border[2]),(0,i.attr)(window.onboardingBGClip,"x",o[0]-this.border[1]),(0,i.attr)(window.onboardingBGClip,"y",o[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){let e=this.getPageHeight();window.onboardingBG.height!=e&&this.setDartToFullHeight()}setDartToFullHeight(){(0,i.attr)(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){(0,i.attr)(window.onboardingBG,"width",this.getPageWidth()),(0,i.attr)(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){(0,i.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),(0,i.show)(window.onboardingBG),(0,i.isVisible)(window.onboardingBGHeader)||((0,i.show)(window.onboardingBGHeader),(0,i.addClass)((0,i.ge)(c),d)))}removeDarkens(){this.hideDarkness&&((0,i.hide)(window.onboardingBG),(0,i.hide)(window.onboardingBGHeader),(0,i.removeClass)((0,i.ge)(c),d))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){const e=document.documentElement,t=document.body;return Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,t.clientWidth,e.clientWidth)}getPageHeight(){const e=document.documentElement,t=document.body;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)}constructor(e,t,o={}){this.el=e,this.text=t,this.hideDarkness=!0,this.oldColor=!1;var i;let n={autoShow:!1,noAutoHideOnWindowClick:null==(i=o.noAutoHideOnWindowClick)||i,content:t instanceof HTMLElement?t:`${t}`,cls:`feature_intro_tt tutorial_tip_tt ${(()=>{var e;const t=null!=(e=o.class)?e:"";return o.tooltipWhite?t:t+" feature_intro_blue_tt"})()}`,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:o.scrollOffset||0,align:o.align||a.ElementTooltip.ALIGN_CENTER};o.side&&(n.forceSide=o.side),o.offset&&(n.offset=o.offset),o.width&&(n.width=o.width),o.shift&&(n.centerShift=o.shift),o.border?this.border=o.border:this.border=[10,10,10,10],o.ttOnHide&&(n.onHide=o.ttOnHide),o.withCloseButton&&(n.withCloseButton=o.withCloseButton,n.onCloseButtonClick=o.onCloseButtonClick),o.align&&(n.align=o.align),this.ttParams=n,this.opts=o,this.initOnboardingBG()}}},23087:(e,t,o)=>{function i(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}o.d(t,{isElementInViewport:()=>i})},719645:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{evalWithLogging:()=>evalWithLogging});var _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(643897);const evalWithLogging=evalString=>{try{return eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__.logEvalError)(e,evalString)}}},827652:(e,t,o)=>{o.d(t,{Likes:()=>y});var i=o(434788),n=o(795558),s=o(953908),r=o(320422),a=o(82161),l=o(893106),c=o(95432),d=o(664988),u=o(514986),_=o(29271),h=o(693982),p=o(234514),f=o(682951),g=o(898298),m=o(999237),w=o(878021),v=o(228411),b=o(362246),k=o(809053);const y={toggle(e,t,o,i){if((0,s.cancelEvent)(t),(0,d.isObject)(window.cur)&&(0,d.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();const r=(0,n.hasClass)(e,"active");(0,n.addClass)(e,"animate"),this.clientUpdate(o,p.LikeButtonTypes.like,r?-1:1,!r);const a=o.match(/^(video)(?!(_comment))(.*)/)?(0,b.getVideoTrackCode)():void 0,l={act:r?"a_do_unlike":"a_do_like",object:o,hash:i,list:cur.pvListId,wall:2,from:this._getReference(o),from_widget:vk.widget?1:0,track_code:a},c=()=>((0,n.toggleClass)(e,"active",r),this.clientUpdate(o,p.LikeButtonTypes.like,r?1:-1,r),!1);window.ajax.post("like.php",l,{onDone:t=>{if(t.unauth_action_box)return c(),void w.UnauthActionBox.show(t.unauth_action_box);this.update(o,t);const i=o.match(/^(wall|market)(.*)/);i&&cur.onLike&&cur.onLike(e,i[1],i[2],r)},onFail:c});(0,d.intval)((0,n.domData)(e,"count"))>0?y.showLikes(e,o,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?`feed_${cur.subsection?cur.subsection:cur.section}`:"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):(0,a.inArray)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):`feed_${cur.section}`:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e,t={},o=void 0){if(vk.widget&&!vk.id)return window.Widgets.oauth();if((0,d.isObject)(window.cur)&&(0,d.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(window.cur){const e=(0,k.getTrackCodeFromPost)(o);window.cur.shareButtonTrackCode=e}const{objectType:n,objectId:s}=(0,h.parseLikeObjectId)(e);(vk.widget?window.showBox:u.showBox)("like.php",(0,i._)({act:"publish_box",object:e,from_widget:vk.widget?1:0},t),{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),w.UnauthActionBox.show(t.unauth_action_box))},stat:[window.jsc("web/page.js"),"page.css",window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===n&&window.Wall&&window.Wall.triggerAdPostStat(s,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>y.update(e,window.cleanObj(t)))},clientUpdate(e,t,o,i){const s=this._getButtonsByType(e,t);if(!s.length)return;const r=(0,d.intval)((0,n.domData)(s[0],"count"))+o;this._updateDom(e,t,r,i),this.updateExternalIndex(e,{type:t,count:r,isActive:i})},update(e,t){if(!isNaN(parseInt(t.like_num))){const o=(0,d.isUndefined)(t.like_my)?void 0:!!(0,d.intval)(t.like_my);this._updateDom(e,p.LikeButtonTypes.like,t.like_num,o,t.like_title),this.updateExternalIndex(e,{type:p.LikeButtonTypes.like,count:t.like_num,isActive:o})}if(!isNaN(parseInt(t.share_num))){const o=(0,d.isUndefined)(t.share_my)?void 0:!!(0,d.intval)(t.share_my);this._updateDom(e,p.LikeButtonTypes.share,t.share_num,o,t.share_title),this.updateExternalIndex(e,{type:p.LikeButtonTypes.share,count:t.share_num})}if((0,a.isNumeric)(t.views_num)&&this._updateDom(e,p.LikeButtonTypes.views,t.views_num,void 0,t.views_title),(0,a.isNumeric)(t.comment_num)&&this._updateDom(e,p.LikeButtonTypes.comment,t.comment_num),t[f.REACTIONS_COUNTS_RESPONSE_FIELD]){const o=!!t.isQueueUpdate;(0,m.triggerReactionsUpdate)(e,t[f.REACTIONS_COUNTS_RESPONSE_FIELD],void 0,{isQueueUpdate:o,isUserAction:!1,previewVisibility:g.previewVisibilityUseCurrent})}},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,o,i,s){var r;const c=this._getButtonsByType(e,t),u=t===p.LikeButtonTypes.views;if(!(null==(r=c)?void 0:r.length))return;let f="";u?f=o:o>0&&(f=vk.widget?(0,a.formatCount)(o):(0,_.langNumeric)(o,"%s",!0)),u||(o=(0,d.intval)(o));for(let e=0;e<c.length;e++){const r=c[e];if((0,n.hasClass)(r,"no_counter"))continue;const a=u?c[e]:(0,h.getElementLikeButtonCount)(c[e]);var g,m,w;if((0,l.animateCount)(a,f,{str:"auto",noWrapWidth:!u,noSpaceIfEmpty:!0}),(0,n.toggleClass)(r,"empty",o<=0),"boolean"==typeof i&&(0,n.toggleClass)(r,"active",i),(0,n.attr)(c[e],"data-count",o),(0,v.updateAriaLabelCounter)(r,o,t),u)null==(w=r)||null==(m=w.closest)||null==(g=m.call(w,".like_views"))||g.setAttribute("title",s||"");const _=c[e].tt;if(_){const e=(0,n.domByClass)(_.container,"_content"),a=(0,n.domByClass)(_.container,"_value"),l=(0,n.domByClass)(_.container,"_title"),c=(0,d.intval)((0,n.val)(a));(0,n.val)(a,o),s&&(0,n.val)(l,s),(0,d.isObject)(_)&&(_.likeInvalidated=!0),(c!==o&&c<7||!1===s)&&(t===p.LikeButtonTypes.like?r.needReinitLikesTT=!0:t===p.LikeButtonTypes.share&&(r.needReinitShareTT=!0)),t===p.LikeButtonTypes.like&&(0,n.toggleClass)(e,"me_hidden",!i),!1===s&&_.destroy&&_.destroy()}}},_getButtonsByType:(e,t)=>(0,n.domQuery)(`._like_${e} ._${t}, ._like_${e} [data-like-button-type="${t}"]`),showLikes(e,t,o={}){var i;if(!e||!(e instanceof HTMLElement)||e.postDontShowLikes)return;if(vk.widget&&vk.show_external_auth_box)return;let s=o.views?{views:1}:o.share?{published:1}:{};o.listId&&(s.list=o.listId),o.like_hash&&(s.like_hash=o.like_hash),o.like_stats_params&&Object.assign(s,o.like_stats_params);const l=!!(0,n.geByClass1)("share",(0,n.gpeByClass)("like_wrap",e));let c=document.body,u=!1;const _=getComputedStyle(e),p=(0,d.intval)(_.getPropertyValue("padding-left").replace("px","")),f=(0,d.intval)(_.getPropertyValue("padding-top").replace("px","")),g=(0,h.getElementLikeButtonIcon)(e);let m=40;"wpost"===o.from&&(m=24);const w=[m-(0,n.getSize)(g)[0]/2-p,10-f];let v=o.cl||"";if(o.share)v+="likes_tt_share";else if(v+="likes_tt_like","widget_community"===o.from)w[0]=6;else if("wcomments"===o.from||"widget_comments"===cur.wallType){const t=16,o=10;w[0]=(0,n.getSize)(e)[0]+t-(0,n.getSize)(g)[0]/2-o}else"photo_carousel"===o.from&&(w[1]=10);if(!!(null==(i=o)?void 0:i.isFromReactionsPreview)){const t=e.querySelector("._ReactionsPreview__itemsContainer");if(t){const e=t.querySelector(".ReactionsPreviewItem"),o=(0,n.getXYRect)(e,!1),i=(o.width||0)/2;let s=i;c=t;o.left+o.width/2>window.innerWidth/2&&(u=!0,s=t.offsetWidth-i),w[0]=-s+m}}let b,k;o.share?(b="needReinitLikesTT",k="resetLikesTTTimer"):(b="needReinitShareTT",k="resetShareTTTimer"),clearTimeout(e[k]),(0,r.showTooltip)(e,{url:"/like.php",params:(0,a.extend)({act:"a_get_stats",object:t,has_share:l?1:""},s),appendEl:c,slide:15,shift:w,ajaxdt:o.fast?0:100,showdt:o.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,needLeft:u,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{y.showLikes(e,t,o)}},typeClass:"like_tt",className:v,onHide:()=>{clearTimeout(e[k]),e[b]&&(e[k]=setTimeout((()=>{delete e[b],e.tt&&e.tt.destroy&&e.tt.destroy()}),200))}})},showShare:function(e,t,o){y.showLikes(e,t,(0,a.extend)(o,{share:1}))},updateViews:(e,t)=>{vk.widget&&vk.show_external_auth_box||window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,o){const i=(0,n.ce)("div",{innerHTML:o});y._updateDom(e,p.LikeButtonTypes.views,t,void 0,i.innerText||i.textContent)}})},makeTemplate(e,t){if(!e)return"";(t=(0,a.extend)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",[f.REACTIONS_COUNTS_RESPONSE_FIELD]:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?(0,_.langNumeric)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?(0,_.langNumeric)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty";const o=t[f.REACTIONS_COUNTS_RESPONSE_FIELD],i=!!o&&Object.values(o).some((e=>!!e));return t.reactions_class_name+=i?"":" PostBottomAction--empty",(0,n.rs)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e,t={}){const{objectType:o,objectId:i}=(0,h.parseLikeObjectId)(e);switch(o){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==i)return;const e=cur.pvListId,o=cur.pvIndex,n=cur.pvData[e][o];t.type===p.LikeButtonTypes.like?(n.likes=t.count,n.liked=t.isActive,cur.pvCommsLikes[n.id][1]=t.count):t.type===p.LikeButtonTypes.share&&(n.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===i&&t.type===p.LikeButtonTypes.like){const e=window.Videoview.getMvData();e.likes=t.count,void 0!==t.isActive&&(e.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}break;case"clip":t.type===p.LikeButtonTypes.like&&window.Videoview.playerOnLiked(t.isActive)}},showLikesList(e,t){cur.viewAsBox||(0,n.hasClass)((0,n.gpeByClass)("like_btn",e),"no_counter")||(0,c.showWiki)({w:"likes/"+(0,a.clean)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||(0,n.hasClass)((0,n.gpeByClass)("like_btn",e),"no_counter")||(0,c.showWiki)({w:"shares/"+(0,a.clean)(t)},!1,!1,{queue:1})}}},120425:(e,t,o)=>{o.d(t,{default:()=>u});var i=o(725296),n=o(221780),s=o(584356),r=o(82161),a=o(953908),l=o(795558),c=o(404145),d=o(672132);const u={init(e,t){let o,u,_,h=(0,l.ge)("video_live_blacklist_search"),p=(0,l.ge)("video_live_blacklist_wrap"),f=(0,l.domByClass)(p,"olist");const g={};function m(e){const i=e;if((e=(0,r.trim)(e).replace(/\s+/g," ").toLowerCase())===u)return;u=e;const s=e?o.search(e):t.list;let a="";if(s.length){const t=new RegExp(e,"i");for(let o,i=0;i<s.length;i++)o=s[i],a+=(0,r.getTemplate)("video_live_blacklist_item",{id:o.id,href:o.href,photo:o.photo,name:e?o.name.replace(t,"<em>$&</em>"):o.name,class:g[o.id]?" olist_item_wrap_on":""})}else a=(0,r.getTemplate)("video_live_blacklist_empty",{text:(0,n.langStr)(n.getLang("global_search_not_found"),"search","<b>"+(0,r.clean)(i)+"</b>")});(0,l.val)(f,a)}e.setOptions({bodyStyle:"padding:0;",onDestroy:function(){uiSearch.destroy(h),_&&_.destroy(),e=o=_=p=h=null}}),t.list.length&&(e.removeButtons().addButton(n.getLang("global_save"),(function(o){ajax.post("al_video.php?act=save_live_blacklist",{exclude:Object.keys(g).join(","),hash:t.save_hash},{onDone:function(t){e.hide(),t&&(0,s.showDoneBox)(t)},showProgress:()=>(0,i.lockButton)(o),hideProgress:()=>(0,i.unlockButton)(o)})})).addButton(n.getLang("global_cancel"),null,"no"),_=new uiScroll(p),m(""),p.onclick=function(e){const t=(0,l.domClosest)("olist_item_wrap",e.target);if(!t)return;(0,a.cancelEvent)(e);const o=(0,l.domData)(t,"id");(0,l.toggleClass)(t,"olist_item_wrap_on")?g[o]=1:delete g[o]},h&&(o=new d.vkIndexer(t.list,(function(e){return e.name+" https://"+(0,c.getHostName)()+e.href})),uiSearch.init(h,{onChange:m}),uiSearch.focus(h)))}}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,o,i)=>{if(!t){var n=1/0;for(l=0;l<deferred.length;l++){for(var[t,o,i]=deferred[l],s=!0,r=0;r<t.length;r++)(!1&i||n>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[r])))?t.splice(r--,1):(s=!1,i<n&&(n=i));if(s){deferred.splice(l--,1);var a=o();void 0!==a&&(e=a)}}return e}i=i||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>i;l--)deferred[l]=deferred[l-1];deferred[l]=[t,o,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var n=2&t&&e;"object"==typeof n&&!~leafPrototypes.indexOf(n);n=getProto(n))Object.getOwnPropertyNames(n).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(o,i),o},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,o)=>(__webpack_require__.f[o](e,t),t)),[])),__webpack_require__.u=e=>25394===e?"AudioLongtapModal.2932c6e9c6120eff2657.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.3ea04534d06cb6d38e2c.js":96816===e?"web-audio-lyrics-modal.218229d2232b2e3d93fb.js":9375===e?"voice_message_player.e464fba002f2d3244773.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.81e354f9bd61dfd364b5.js":96248===e?"feed-skeleton.add07457f9a9b141ed5a.js":51162===e?"StickersKit.7b7673c72a73454cf039.js":59240===e?"performance-stats.4b38c82ee7bdbd67bf4a.js":38288===e?"lottie.5e4758c39f106eab733a.js":void 0,__webpack_require__.miniCssF=e=>e+"."+{25394:"6af57e1b0cf5a74f9a87",57468:"35be3dfa1e90e3cdd0a1",75980:"5bbee2c9f3e189193a73"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,o,i)=>{if(inProgress[e])inProgress[e].push(t);else{var n,s;if(void 0!==o)for(var r=document.getElementsByTagName("script"),a=0;a<r.length;a++){var l=r[a];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+o){n=l;break}}n||(s=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack","vk:"+o),n.src=e),inProgress[e]=[t];var c=(t,o)=>{n.onerror=n.onload=null,clearTimeout(d);var i=inProgress[e];if(delete inProgress[e],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((e=>e(o))),t)return t(o)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=c.bind(null,n.onerror),n.onload=c.bind(null,n.onload),s&&document.head.appendChild(n)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,o)=>{var i=__webpack_require__.miniCssF(e),n=__webpack_require__.p+i;if(((e,t)=>{for(var o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var n=(r=o[i]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var s=document.getElementsByTagName("style");for(i=0;i<s.length;i++){var r;if((n=(r=s[i]).getAttribute("data-href"))===e||n===t)return r}})(i,n))return t();((e,t,o,i)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=s=>{if(n.onerror=n.onload=null,"load"===s.type)o();else{var r=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=a,n.parentNode.removeChild(n),i(l)}},n.href=t,document.head.appendChild(n)})(e,n,t,o)})),installedCssChunks={12495:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{25394:1,57468:1,75980:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={12495:0};__webpack_require__.f.j=(t,o)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else if(75980!=t){var n=new Promise(((o,n)=>i=e[t]=[o,n]));o.push(i[2]=n);var s=__webpack_require__.p+__webpack_require__.u(t),r=new Error;__webpack_require__.l(s,(o=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",r.name="ChunkLoadError",r.type=n,r.request=s,i[1](r)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var i,n,[s,r,a]=o,l=0;if(s.some((t=>0!==e[t]))){for(i in r)__webpack_require__.o(r,i)&&(__webpack_require__.m[i]=r[i]);if(a)var c=a(__webpack_require__)}for(t&&t(o);l<s.length;l++)n=s[l],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(c)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[75514,98066,56990,24509,76400,40885,68592,88656,70486],(()=>__webpack_require__(398986)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();