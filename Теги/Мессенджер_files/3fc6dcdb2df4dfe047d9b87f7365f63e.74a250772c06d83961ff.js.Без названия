(self.webpackChunkvk=self.webpackChunkvk||[]).push([[31350],{474582:(e,n,t)=>{"use strict";let r;t.d(n,{default:()=>_,from_client_text:()=>v,from_server_text:()=>b});const i=new Array(128).fill(void 0);function o(e){return i[e]}i.push(void 0,null,!0,!1);let a=i.length;function s(e){const n=o(e);return function(e){e<132||(i[e]=a,a=e)}(e),n}const c="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&c.decode();let d=null;function u(){return null!==d&&0!==d.byteLength||(d=new Uint8Array(r.memory.buffer)),d}function l(e,n){return e>>>=0,c.decode(u().subarray(e,e+n))}function f(e){a===i.length&&i.push(i.length+1);const n=a;return a=i[n],i[n]=e,n}let m=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},p="function"==typeof h.encodeInto?function(e,n){return h.encodeInto(e,n)}:function(e,n){const t=h.encode(e);return n.set(t),{read:e.length,written:t.length}};function g(e,n,t){if(void 0===t){const t=h.encode(e),r=n(t.length,1)>>>0;return u().subarray(r,r+t.length).set(t),m=t.length,r}let r=e.length,i=n(r,1)>>>0;const o=u();let a=0;for(;a<r;a++){const n=e.charCodeAt(a);if(n>127)break;o[i+a]=n}if(a!==r){0!==a&&(e=e.slice(a)),i=t(i,r,r=a+3*e.length,1)>>>0;const n=u().subarray(i+a,i+r);a+=p(e,n).written}return m=a,i}function v(e){const n=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),t=m;return s(r.from_client_text(n,t))}function b(e){const n=g(e,r.__wbindgen_malloc,r.__wbindgen_realloc),t=m;return s(r.from_server_text(n,t))}function k(){const e={wbg:{}};return e.wbg.__wbindgen_object_drop_ref=function(e){s(e)},e.wbg.__wbindgen_error_new=function(e,n){return f(new Error(l(e,n)))},e.wbg.__wbindgen_number_new=function(e){return f(e)},e.wbg.__wbindgen_bigint_from_i64=function(e){return f(e)},e.wbg.__wbindgen_object_clone_ref=function(e){return f(o(e))},e.wbg.__wbindgen_string_new=function(e,n){return f(l(e,n))},e.wbg.__wbg_set_841ac57cff3d672b=function(e,n,t){o(e)[s(n)]=s(t)},e.wbg.__wbg_new_898a68150f225f2e=function(){return f(new Array)},e.wbg.__wbg_new_b51585de1b234aff=function(){return f(new Object)},e.wbg.__wbg_set_502d29070ea18557=function(e,n,t){o(e)[n>>>0]=s(t)},e.wbg.__wbindgen_throw=function(e,n){throw new Error(l(e,n))},e}function y(e,n){return r=e.exports,w.__wbindgen_wasm_module=n,d=null,r}async function w(e){if(void 0!==r)return r;void 0===e&&(e=new URL(t(732052),t.b));const n=k();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:i,module:o}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await e,n);return y(i,o)}const _=w},997864:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._=e}var i=r.prototype;function o(e,n){for(var t=0;t<e;t++)n(t)}function a(e,n,t){return function(e,n){o(n.length,(function(t){e(n[t],t,n)}))}((function(t,r,i){n=e(n,t,r,i)}),t),n}function s(e,n){return a((function(n,t,r,i){return n.concat([e(t,r,i)])}),[],n)}function c(e,n){var t={v:0,buf:n};return o(e,(function(){var e;t={v:t.v<<1|(e=t.buf,e[0]>>7),buf:function(e){var n=a((function(e,n,t,r){return e.concat(t===r.length-1?Buffer.from([n,0]).readUInt16BE(0):r.readUInt16BE(t))}),[],e);return Buffer.from(s((function(e){return(e<<1&65535)>>8}),n))}(t.buf)}})),t}function d(){return"undefined"!=typeof Buffer}function u(){if(!d())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function l(e){u();var n=a((function(e,n){return e+n}),0,e);if(n%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+n+" which is not an even number of bytes; the total should be divisible by 8");var t,i=n/8,o=(t=function(e){return e>48},a((function(e,n){return e||(t(n)?n:e)}),null,e));if(o)throw new Error(o+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r((function(n,t){var r=i+t;return r>n.length?_(t,i.toString()+" bytes"):w(r,a((function(e,n){var t=c(n,e.buf);return{coll:e.coll.concat(t.v),buf:t.buf}}),{coll:[],buf:n.slice(t,r)},e).coll)}))}function f(e,n){return new r((function(t,r){return u(),r+n>t.length?_(r,n+" bytes for "+e):w(r+n,t.slice(r,r+n))}))}function m(e,n){if("number"!=typeof(t=n)||Math.floor(t)!==t||n<0||n>6)throw new Error(e+" requires integer length in range [0, 6].");var t}function h(e){return m("uintBE",e),f("uintBE("+e+")",e).map((function(n){return n.readUIntBE(0,e)}))}function p(e){return m("uintLE",e),f("uintLE("+e+")",e).map((function(n){return n.readUIntLE(0,e)}))}function g(e){return m("intBE",e),f("intBE("+e+")",e).map((function(n){return n.readIntBE(0,e)}))}function v(e){return m("intLE",e),f("intLE("+e+")",e).map((function(n){return n.readIntLE(0,e)}))}function b(e){return e instanceof r}function k(e){return"[object Array]"==={}.toString.call(e)}function y(e){return d()&&Buffer.isBuffer(e)}function w(e,n){return{status:!0,index:e,value:n,furthest:-1,expected:[]}}function _(e,n){return k(n)||(n=[n]),{status:!1,index:-1,value:null,furthest:e,expected:n}}function C(e,n){if(!n)return e;if(e.furthest>n.furthest)return e;var t=e.furthest===n.furthest?function(e,n){if(function(){if(void 0!==r._supportsSet)return r._supportsSet;var e="undefined"!=typeof Set;return r._supportsSet=e,e}()&&Array.from){for(var t=new Set(e),i=0;i<n.length;i++)t.add(n[i]);var o=Array.from(t);return o.sort(),o}for(var a={},s=0;s<e.length;s++)a[e[s]]=!0;for(var c=0;c<n.length;c++)a[n[c]]=!0;var d=[];for(var u in a)({}).hasOwnProperty.call(a,u)&&d.push(u);return d.sort(),d}(e.expected,n.expected):n.expected;return{status:e.status,index:e.index,value:e.value,furthest:n.furthest,expected:t}}var x={};function E(e,n){if(y(e))return{offset:n,line:-1,column:-1};e in x||(x[e]={});for(var t=x[e],r=0,i=0,o=0,a=n;a>=0;){if(a in t){r=t[a].line,0===o&&(o=t[a].lineStart);break}("\n"===e.charAt(a)||"\r"===e.charAt(a)&&"\n"!==e.charAt(a+1))&&(i++,0===o&&(o=a+1)),a--}var s=r+i,c=n-o;return t[n]={line:s,lineStart:o},{offset:n,line:s+1,column:c+1}}function I(e){if(!b(e))throw new Error("not a parser: "+e)}function M(e,n){return"string"==typeof e?e.charAt(n):e[n]}function N(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function S(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function R(e){if("string"!=typeof e)throw new Error("not a string: "+e)}var A=2,T=3,P=8,j=5*P,U=4*P,D="  ";function O(e,n){return new Array(n+1).join(e)}function L(e,n,t){var r=n-e.length;return r<=0?e:O(t,r)+e}function q(e,n,t,r){return{from:e-n>0?e-n:0,to:e+t>r?r:e+t}}function G(e,n){var t,r,i,o,c,d=n.index,u=d.offset,l=1;if(u===e.length)return"Got the end of the input";if(y(e)){var f=u-u%P,m=u-f,h=q(f,j,U+P,e.length),p=s((function(e){return s((function(e){return L(e.toString(16),2,"0")}),e)}),function(e,n){var t=e.length,r=[],i=0;if(t<=n)return[e.slice()];for(var o=0;o<t;o++)r[i]||r.push([]),r[i].push(e[o]),(o+1)%n==0&&i++;return r}(e.slice(h.from,h.to).toJSON().data,P));o=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/P,to:Math.floor(e.to/P)}}(h),r=f/P,t=3*m,m>=4&&(t+=1),l=2,i=s((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),p),(c=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(c=2)}else{var g=e.split(/\r\n|[\n\r\u2028\u2029]/);t=d.column-1,r=d.line-1,o=q(r,A,T,g.length),i=g.slice(o.from,o.to),c=o.to.toString().length}var v=r-o.from;return y(e)&&(c=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(c=2),a((function(n,r,i){var a,s=i===v,d=s?"> ":D;return a=y(e)?L((8*(o.from+i)).toString(16),c,"0"):L((o.from+i+1).toString(),c," "),[].concat(n,[d+a+" | "+r],s?[D+O(" ",c)+" | "+L("",t," ")+O("^",l)]:[])}),[],i).join("\n")}function B(e,n){return["\n","-- PARSING FAILED "+O("-",50),"\n\n",G(e,n),"\n\n",(t=n.expected,1===t.length?"Expected:\n\n"+t[0]:"Expected one of the following: \n\n"+t.join(", ")),"\n"].join("");var t}function $(e){return void 0!==e.flags?e.flags:[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.unicode?"u":"",e.sticky?"y":""].join("")}function F(){for(var e=[].slice.call(arguments),n=e.length,t=0;t<n;t+=1)I(e[t]);return r((function(t,r){for(var i,o=new Array(n),a=0;a<n;a+=1){if(!(i=C(e[a]._(t,r),i)).status)return i;o[a]=i.value,r=i.index}return C(w(r,o),i)}))}function z(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var n=e.pop();return S(n),F.apply(null,e).map((function(e){return n.apply(null,e)}))}function H(){var e=[].slice.call(arguments),n=e.length;if(0===n)return X("zero alternates");for(var t=0;t<n;t+=1)I(e[t]);return r((function(n,t){for(var r,i=0;i<e.length;i+=1)if((r=C(e[i]._(n,t),r)).status)return r;return r}))}function W(e,n){return V(e,n).or(Q([]))}function V(e,n){return I(e),I(n),z(e,n.then(e).many(),(function(e,n){return[e].concat(n)}))}function K(e){R(e);var n="'"+e+"'";return r((function(t,r){var i=r+e.length,o=t.slice(r,i);return o===e?w(i,o):_(r,n)}))}function Y(e,n){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var n=$(e),t=0;t<n.length;t++){var r=n.charAt(t);if("i"!==r&&"m"!==r&&"u"!==r&&"s"!==r)throw new Error('unsupported regexp flag "'+r+'": '+e)}}(e),arguments.length>=2?N(n):n=0;var t=function(e){return RegExp("^(?:"+e.source+")",$(e))}(e),i=""+e;return r((function(e,r){var o=t.exec(e.slice(r));if(o){if(0<=n&&n<=o.length){var a=o[0],s=o[n];return w(r+a.length,s)}return _(r,"valid match group (0 to "+o.length+") in "+i)}return _(r,i)}))}function Q(e){return r((function(n,t){return w(t,e)}))}function X(e){return r((function(n,t){return _(t,e)}))}function J(e){if(b(e))return r((function(n,t){var r=e._(n,t);return r.index=t,r.value="",r}));if("string"==typeof e)return J(K(e));if(e instanceof RegExp)return J(Y(e));throw new Error("not a string, regexp, or parser: "+e)}function Z(e){return I(e),r((function(n,t){var r=e._(n,t),i=n.slice(t,r.index);return r.status?_(t,'not "'+i+'"'):w(t,null)}))}function ee(e){return S(e),r((function(n,t){var r=M(n,t);return t<n.length&&e(r)?w(t+1,r):_(t,"a character/byte matching "+e)}))}function ne(e,n){arguments.length<2&&(n=e,e=void 0);var t=r((function(e,r){return t._=n()._,t._(e,r)}));return e?t.desc(e):t}function te(){return X("fantasy-land/empty")}i.parse=function(e){if("string"!=typeof e&&!y(e))throw new Error(".parse must be called with a string or Buffer as its argument");var n,t=this.skip(ae)._(e,0);return n=t.status?{status:!0,value:t.value}:{status:!1,index:E(e,t.furthest),expected:t.expected},delete x[e],n},i.tryParse=function(e){var n=this.parse(e);if(n.status)return n.value;var t=B(e,n),r=new Error(t);throw r.type="ParsimmonError",r.result=n,r},i.assert=function(e,n){return this.chain((function(t){return e(t)?Q(t):X(n)}))},i.or=function(e){return H(this,e)},i.trim=function(e){return this.wrap(e,e)},i.wrap=function(e,n){return z(e,this,n,(function(e,n){return n}))},i.thru=function(e){return e(this)},i.then=function(e){return I(e),F(this,e).map((function(e){return e[1]}))},i.many=function(){var e=this;return r((function(n,t){for(var r=[],i=void 0;;){if(!(i=C(e._(n,t),i)).status)return C(w(t,r),i);if(t===i.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");t=i.index,r.push(i.value)}}))},i.tieWith=function(e){return R(e),this.map((function(n){if(function(e){if(!k(e))throw new Error("not an array: "+e)}(n),n.length){R(n[0]);for(var t=n[0],r=1;r<n.length;r++)R(n[r]),t+=e+n[r];return t}return""}))},i.tie=function(){return this.tieWith("")},i.times=function(e,n){var t=this;return arguments.length<2&&(n=e),N(e),N(n),r((function(r,i){for(var o=[],a=void 0,s=void 0,c=0;c<e;c+=1){if(s=C(a=t._(r,i),s),!a.status)return s;i=a.index,o.push(a.value)}for(;c<n&&(s=C(a=t._(r,i),s),a.status);c+=1)i=a.index,o.push(a.value);return C(w(i,o),s)}))},i.result=function(e){return this.map((function(){return e}))},i.atMost=function(e){return this.times(0,e)},i.atLeast=function(e){return z(this.times(e),this.many(),(function(e,n){return e.concat(n)}))},i.map=function(e){S(e);var n=this;return r((function(t,r){var i=n._(t,r);return i.status?C(w(i.index,e(i.value)),i):i}))},i.contramap=function(e){S(e);var n=this;return r((function(t,r){var i=n.parse(e(t.slice(r)));return i.status?w(r+t.length,i.value):i}))},i.promap=function(e,n){return S(e),S(n),this.contramap(e).map(n)},i.skip=function(e){return F(this,e).map((function(e){return e[0]}))},i.mark=function(){return z(re,this,re,(function(e,n,t){return{start:e,value:n,end:t}}))},i.node=function(e){return z(re,this,re,(function(n,t,r){return{name:e,value:t,start:n,end:r}}))},i.sepBy=function(e){return W(this,e)},i.sepBy1=function(e){return V(this,e)},i.lookahead=function(e){return this.skip(J(e))},i.notFollowedBy=function(e){return this.skip(Z(e))},i.desc=function(e){k(e)||(e=[e]);var n=this;return r((function(t,r){var i=n._(t,r);return i.status||(i.expected=e),i}))},i.fallback=function(e){return this.or(Q(e))},i.ap=function(e){return z(e,this,(function(e,n){return e(n)}))},i.chain=function(e){var n=this;return r((function(t,r){var i=n._(t,r);return i.status?C(e(i.value)._(t,i.index),i):i}))},i.concat=i.or,i.empty=te,i.of=Q,i["fantasy-land/ap"]=i.ap,i["fantasy-land/chain"]=i.chain,i["fantasy-land/concat"]=i.concat,i["fantasy-land/empty"]=i.empty,i["fantasy-land/of"]=i.of,i["fantasy-land/map"]=i.map;var re=r((function(e,n){return w(n,E(e,n))})),ie=r((function(e,n){return n>=e.length?_(n,"any character/byte"):w(n+1,M(e,n))})),oe=r((function(e,n){return w(e.length,e.slice(n))})),ae=r((function(e,n){return n<e.length?_(n,"EOF"):w(n,null)})),se=Y(/[0-9]/).desc("a digit"),ce=Y(/[0-9]*/).desc("optional digits"),de=Y(/[a-z]/i).desc("a letter"),ue=Y(/[a-z]*/i).desc("optional letters"),le=Y(/\s*/).desc("optional whitespace"),fe=Y(/\s+/).desc("whitespace"),me=K("\r"),he=K("\n"),pe=K("\r\n"),ge=H(pe,he,me).desc("newline"),ve=H(ge,ae);r.all=oe,r.alt=H,r.any=ie,r.cr=me,r.createLanguage=function(e){var n={};for(var t in e)({}).hasOwnProperty.call(e,t)&&function(t){n[t]=ne((function(){return e[t](n)}))}(t);return n},r.crlf=pe,r.custom=function(e){return r(e(w,_))},r.digit=se,r.digits=ce,r.empty=te,r.end=ve,r.eof=ae,r.fail=X,r.formatError=B,r.index=re,r.isParser=b,r.lazy=ne,r.letter=de,r.letters=ue,r.lf=he,r.lookahead=J,r.makeFailure=_,r.makeSuccess=w,r.newline=ge,r.noneOf=function(e){return ee((function(n){return e.indexOf(n)<0})).desc("none of '"+e+"'")},r.notFollowedBy=Z,r.of=Q,r.oneOf=function(e){for(var n=e.split(""),t=0;t<n.length;t++)n[t]="'"+n[t]+"'";return ee((function(n){return e.indexOf(n)>=0})).desc(n)},r.optWhitespace=le,r.Parser=r,r.range=function(e,n){return ee((function(t){return e<=t&&t<=n})).desc(e+"-"+n)},r.regex=Y,r.regexp=Y,r.sepBy=W,r.sepBy1=V,r.seq=F,r.seqMap=z,r.seqObj=function(){for(var e,n={},t=0,i=(e=arguments,Array.prototype.slice.call(e)),o=i.length,a=0;a<o;a+=1){var s=i[a];if(!b(s)){if(k(s)&&2===s.length&&"string"==typeof s[0]&&b(s[1])){var c=s[0];if(Object.prototype.hasOwnProperty.call(n,c))throw new Error("seqObj: duplicate key "+c);n[c]=!0,t++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===t)throw new Error("seqObj expects at least one named parser, found zero");return r((function(e,n){for(var t,r={},a=0;a<o;a+=1){var s,c;if(k(i[a])?(s=i[a][0],c=i[a][1]):(s=null,c=i[a]),!(t=C(c._(e,n),t)).status)return t;s&&(r[s]=t.value),n=t.index}return C(w(n,r),t)}))},r.string=K,r.succeed=Q,r.takeWhile=function(e){return S(e),r((function(n,t){for(var r=t;r<n.length&&e(M(n,r));)r++;return w(r,n.slice(t,r))}))},r.test=ee,r.whitespace=fe,r["fantasy-land/empty"]=te,r["fantasy-land/of"]=Q,r.Binary={bitSeq:l,bitSeqObj:function(e){u();var n={},t=0,r=s((function(e){if(k(e)){var r=e;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(R(r[0]),N(r[1]),Object.prototype.hasOwnProperty.call(n,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return n[r[0]]=!0,t++,r}return N(e),[null,e]}),e);if(t<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var i=s((function(e){return e[0]}),r);return l(s((function(e){return e[1]}),r)).map((function(e){return a((function(e,n){return null!==n[0]&&(e[n[0]]=n[1]),e}),{},s((function(n,t){return[n,e[t]]}),i))}))},byte:function(e){if(u(),N(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var n=(e>15?"0x":"0x0")+e.toString(16);return r((function(t,r){var i=M(t,r);return i===e?w(r+1,i):_(r,n)}))},buffer:function(e){return f("buffer",e).map((function(e){return Buffer.from(e)}))},encodedString:function(e,n){return f("string",n).map((function(n){return n.toString(e)}))},uintBE:h,uint8BE:h(1),uint16BE:h(2),uint32BE:h(4),uintLE:p,uint8LE:p(1),uint16LE:p(2),uint32LE:p(4),intBE:g,int8BE:g(1),int16BE:g(2),int32BE:g(4),intLE:v,int8LE:v(1),int16LE:v(2),int32LE:v(4),floatBE:f("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:f("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:f("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:f("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=r}])},95154:(e,n,t)=>{"use strict";t.d(n,{API_DEFAULT_TIMEOUT:()=>o,API_GET_INFO_FIELDS:()=>f,API_GROUP_FIELDS:()=>l,API_MAX_RETRY_TIMEOUT:()=>d,API_MIN_RETRY_TIMEOUT:()=>c,API_USER_FIELDS:()=>u,CALL_JOIN_LINK_URL_BASE:()=>U,CHANNELS_GLPH_TIMEOUT:()=>E,CHANNELS_PER_PAGE:()=>h,CHAT_INVITE_LINK_URL_BASE:()=>P,CLIENT_ID:()=>r,COMMENTS_PER_PAGE:()=>v,COMMENTS_REFRESH_INTERVAL:()=>s,CONVOS_PER_PAGE:()=>m,ENGINE_VERSION:()=>i,HELPDESK_MINIAPP_ID:()=>L,ID_VK_COM_BASE:()=>G,INVITE_TO_CHAT_VISIBLE_MESSAGES_COUNT:()=>T,ISOLATED_CALL_JOIN_LINK_URL_BASE:()=>O,LIKE_PEERS_FIRST_LOAD:()=>C,LIKE_PEERS_PER_PAGE:()=>_,MAX_MESSAGES_FORWARD_LEVEL:()=>I,MAX_MESSAGE_ATTACHES:()=>A,MAX_MESSAGE_SIZE:()=>R,MAX_VIDEO_FORWARD_LEVEL:()=>M,MESSAGES_PER_PAGE:()=>p,POSTS_PER_PAGE:()=>g,REACTIONS_REFRESH_INTERVAL:()=>a,SEARCH_CONVOS_COUNT:()=>y,SEARCH_DEBOUNCE_MS:()=>w,SEARCH_MESSAGES_COUNT:()=>k,SFERUM_DOMAIN:()=>H,SFERUM_VERIFICATION_LINK:()=>W,STORAGE_APP_UNAVAILABLE_KEY:()=>F,STORAGE_DB_NAME:()=>q,STORAGE_OWNER_ID_KEY:()=>B,STORAGE_VIEWER_ID_KEY:()=>$,THREAD_COMMENTS_COUNT:()=>b,TYPING_EXPIRATION_TIME:()=>x,UGC_STICKERS_APP_ID:()=>S,VKME_APP_INSTALL_LINK:()=>D,VKME_CHAT_INVITE_LINK_URL_BASE:()=>j,VK_PAY_APP_ID:()=>N,VK_TERMS_URL:()=>z});const r=7694673,i=19,o=1e4,a=15e3,s=15e3,c=500,d=2e4,u=["id","first_name","first_name_gen","first_name_acc","last_name","last_name_gen","last_name_acc","sex","has_photo","photo_id","photo_50","photo_100","photo_200","contact_name","occupation","bdate","city","screen_name","online_info","verified","blacklisted","blacklisted_by_me","can_call","can_write_private_message","can_send_friend_request","can_invite_to_chats","friend_status","followers_count","profile_type","contacts","employee_mark"],l=["id","name","screen_name","type","photo_id","photo_50","photo_100","members_count","member_status","verified","is_closed","can_message","deactivated","activity","ban_info","is_messages_blocked","can_post_donut","site","reposts_disabled","description"],f=["messages_recommendation_list_hidden","show_only_not_muted_messages","messages_multiline_input","messages_auto_unarchive","messages_transcript_auto_show","business_notify","messages_show_banner_teacher_verification"],m=20,h=20,p=30,g=20,v=50,b=2,k=20,y=100,w=500,_=30,C=6,x=5e3,E=3e4,I=2,M=4,N=7131443,S=51538586,R=4096,A=10,T=250,P="https://vk.me/join/",j="https://web.vk.me/#/join/",U="https://vk.com/call/join/",D="https://vk.me/app",O="https://web.vk.me/#/call/join/",L=6126832,q="reforged-storage-db-v1",G="https://id.vk.com",B="reforged-owner-id",$="reforged-viewer-id",F="reforged-app-unavailable",z="https://vk.com/terms",H="sferum.ru",W=`https://${H}/?s=me`},197934:(e,n,t)=>{"use strict";t.d(n,{addAttach:()=>d,count:()=>g,generatePollBackgroundGradientStyle:()=>h,ids:()=>s,isCallJoinLink:()=>f,isChatInviteLink:()=>l,kindsCount:()=>p,last:()=>c,preview:()=>a,rearrangeAttaches:()=>m,removeAttach:()=>u,resolveMiniAppId:()=>o});var r=t(89131),i=t(95154);const o=e=>e;function a(e,n=0,t=0,r=!1){var i;const o=["o","p","q","r"];if("Story"===e.kind)if(e.photo)e=e.photo;else{if(!e.video)return null;e=e.video}if("Video"===e.kind||"Gift"===e.kind||"PollBackgroundPhoto"===e.kind||"VideoMessage"===e.kind||"MiniApp"===e.kind){const r="MiniApp"===e.kind?e.images:e.image;return r.find((({width:e,height:r})=>e>=n&&r>=t))||r.reduce(((e,n)=>!e||n.width*n.height>e.width*e.height?n:e))||null}const a="Photo"===e.kind?e.sizes:e.image;return a?r?(null==(s=Array.from(a.entries()).find((([e,{width:r,height:i}])=>o.includes(e)&&r>=n&&i>=t)))?void 0:s[1])||a.get("r")||a.get("q")||a.get("p")||a.get("o")||null:(null==(i=Array.from(a.entries()).find((([e,{width:r,height:i}])=>!o.includes(e)&&r>=n&&i>=t)))?void 0:i[1])||a.get("w")||a.get("z")||a.get("y")||a.get("x")||a.get("m")||a.get("s")||null:null;var s}function s(e){const n=[];for(const t of e.photos||[])n.push(`photo${t.ownerId}_${t.id}`);for(const t of e.videos||[])n.push(`video${t.ownerId}_${t.id}`);for(const t of e.audios||[])n.push(`audio${t.ownerId}_${t.id}`);for(const t of e.audioPlaylists||[])n.push(`audio_playlist${t.ownerId}_${t.id}`);e.podcast&&n.push(`podcast${e.podcast.ownerId}_${e.podcast.id}`),e.market&&n.push(`market${e.market.ownerId}_${e.market.id}`);for(const t of e.docs||[])n.push(`doc${t.ownerId}_${t.id}`);return e.voice&&n.push(`doc${e.voice.ownerId}_${e.voice.id}`),e.wall&&n.push(`wall${e.wall.ownerId}_${e.wall.id}`),e.wallReply&&n.push(`wall_reply${e.wallReply.ownerId}_${e.wallReply.id}`),e.poll&&n.push(`poll${e.poll.ownerId}_${e.poll.id}`),e.story&&n.push(`story${e.story.ownerId}_${e.story.id}`),e.donutLink&&n.push(`donut_link${e.donutLink.ownerId}`),e.widget&&n.push(`widget${e.widget.id}`),e.ugcSticker&&n.push(`ugc_sticker${e.ugcSticker.item.owner_id}_${e.ugcSticker.id}`),n}function c(e){return 0===Object.keys(e).length?null:e.widget||e.wallReply||e.wall||e.poll||e.donutLink||e.moneyTransfer||e.moneyRequest||e.miniApps&&e.miniApps.slice(-1)[0]||e.article||e.audioPlaylists&&e.audioPlaylists.slice(-1)[0]||e.podcast||e.audios&&e.audios.slice(-1)[0]||e.voice||e.docs&&e.docs.slice(-1)[0]||e.geo||e.story||e.market||e.inviteLink||e.link||e.graffiti||e.videos&&e.videos.slice(-1)[0]||e.photos&&e.photos.slice(-1)[0]||e.videoMessage||e.ugcSticker||e.sticker||e.finishedCall||e.activeCall||e.gift||null}function d(e,n){n.photos&&(e.photos=[...e.photos||[],...n.photos]),n.videos&&(e.videos=[...e.videos||[],...n.videos]),n.audios&&(e.audios=[...e.audios||[],...n.audios]),n.docs&&(e.docs=[...e.docs||[],...n.docs]),n.voice&&(e.voice=n.voice),n.poll&&(e.poll=n.poll)}function u(e,n){switch(n.kind){case"Audio":if(!e.audios)break;const t=(0,r.toNonEmpty)(e.audios.filter((e=>e.id!==n.id)));t?e.audios=t:delete e.audios;break;case"Doc":if(!e.docs)break;const i=(0,r.toNonEmpty)(e.docs.filter((e=>e.id!==n.id)));i?e.docs=i:delete e.docs;break;case"Photo":if(!e.photos)break;const o=(0,r.toNonEmpty)(e.photos.filter((e=>e.id!==n.id)));o?e.photos=o:delete e.photos;break;case"Video":if(!e.videos)break;const a=(0,r.toNonEmpty)(e.videos.filter((e=>e.id!==n.id)));a?e.videos=a:delete e.videos;break;case"Voice":e.voice&&delete e.voice;break;case"Poll":e.poll&&delete e.poll;break;default:(0,r.exhaustivenessCheck)(n)}}function l(e){return e.startsWith(i.CHAT_INVITE_LINK_URL_BASE)||e.startsWith(i.VKME_CHAT_INVITE_LINK_URL_BASE)}function f(e){return e.startsWith(i.CALL_JOIN_LINK_URL_BASE)}function m(e,{currentPosition:n,newPosition:t},i){switch(i){case"photos":const o=e[i];if(!o)return;const a=o[n];if(!a)return;o.splice(n,1),o.splice(t,0,a),e[i]=o;break;case"videos":const s=e[i];if(!s)return;const c=s[n];if(!c)return;s.splice(n,1),s.splice(t,0,c),e[i]=s;break;case"audios":const d=e[i];if(!d)return;const u=d[n];if(!u)return;d.splice(n,1),d.splice(t,0,u),e[i]=d;break;case"docs":const l=e[i];if(!l)return;const f=l[n];if(!f)return;l.splice(n,1),l.splice(t,0,f),e[i]=l;break;default:(0,r.exhaustivenessCheck)(i)}}function h(e){const n=e.angle-90,{points:t}=e,r=[];for(let e=0;e<t.length;e++){const n=t[e],i=100*e/(t.length-1);r.push(`${n} ${i}%`)}return`linear-gradient(${n}deg, ${r.join(", ")})`}function p(e){return Object.keys(e).length}function g(e){return Object.values(e).reduce(((e,n)=>e+(Array.isArray(n)?n.length:1)),0)}},839963:(e,n,t)=>{"use strict";t.d(n,{CHANNELS_BASE_PATH:()=>d,appendPost:()=>w,cleanup:()=>I,deletePost:()=>C,findPostByCmid:()=>y,historyAround:()=>k,insertPosts:()=>E,isChannelId:()=>u,isEmpty:()=>h,isHidden:()=>g,isUnread:()=>p,lastPost:()=>b,link:()=>v,merge:()=>m,readUntil:()=>M,replacePost:()=>_,resolveId:()=>l,restorePost:()=>x,safeGet:()=>P,setArchived:()=>N,setMembership:()=>R,setMuted:()=>S,setPhotos:()=>T,setSortId:()=>A,toRealGroupId:()=>f});var r=t(434788),i=t(723062),o=t(89131),a=t(96190),s=t(168465),c=t(95154);const d="/channels";function u(e){return i.Ranges.isGroupId(e)}function l(e){return u(e)||(e=0),e}function f(e){return a.toRealId(a.resolveId(e))}function m(e,n){if(e.id!==n.id)throw new Error("Channel.merge вызван на 2 разных каналах");const t=n.history;return n.history=e.history,E(n,t.confirmed),n}function h(e){return s.isEmpty(e.history)}function p(e){return e.unreadCount>0}function g(e){return e.majorSortId<=0&&e.minorSortId<=0}function v(e){return e.screenName?`/${e.screenName}`:`/club${Math.abs(e.id)}`}function b({channel:e,withPending:n}){var t;return null==(t=s.lastNode({history:e.history,withPending:n,withDeleted:!1}))?void 0:t.item}function k(e,n){return s.around(e.history,n)}function y(e,n){var t,r;const i=s.findNodeByCmid(e.history,n);if("Node"===(null==(t=i.node)?void 0:t.kind)||"DeletedNode"===(null==(r=i.node)?void 0:r.kind))return i.node}function w(e,n,t){const r=s.findNodeByCmid(e.history,n.cmid),i=s.lastCmid(e.history);void 0!==i&&i>=n.cmid&&"Deleted"===r.status&&"Normal"===n.kind?x(e,n.cmid,n):(!function(e,n){const t=e.history.pending.find((e=>e.item.cmid===n));void 0!==t&&s.removePending(e.history,t.item.randomId)}(e,n.cmid),s.append(e.history,n,t))}function _(e,n){const t=s.replace(e.history,n);void 0!==t&&"Normal"===n.kind&&(n.comments=(0,r._)({},n.comments,{history:t.comments.history,oneLevelCount:t.comments.oneLevelCount,order:t.comments.order}))}function C(e,n,t){s.remove(e.history,n,{isRestorable:t})}function x(e,n,t){s.restore(e.history,n,t)}function E(e,n){s.insert(e.history,n)}function I(e){const n=e.unreadCount>0?e.inReadCmid:void 0;s.cleanup(e.history,1.5*c.POSTS_PER_PAGE,n)}function M(e,n,t){if(void 0===t){const r=e.history.confirmed.filter((t=>"Node"===t.kind&&function(e,n){return n.cmid>e.inReadCmid}(e,t.item)&&t.item.cmid<=n)).length;t=Math.max(0,e.unreadCount-r)}e.inReadCmid=n,e.unreadCount=t}function N(e,n){e.isArchived=n,n&&(e.unreadCount=0)}function S(e,n){e.isMuted=n}function R(e,n){e.isMember=n}function A(e,n){void 0!==n.majorSortId&&(e.majorSortId=n.majorSortId),void 0!==n.minorSortId&&(e.minorSortId=n.minorSortId)}function T(e,n){e.photos.photo50=n.photo50,e.photos.photo100=n.photo100}function P(e,n){const t=e.get(n);if(t)return t;if(o.isDev)throw new Error(`Канал ${n} не найден в кэше! Обрати внимание на то как загружаются недостающие данные в сторе.`);return e.get(l(0))}},185327:(e,n,t)=>{"use strict";t.d(n,{CASPER_MESSAGE_DELETE_TTL:()=>u,DEFAULT_CHAT_PERMISSIONS:()=>f,MAX_PINNED:()=>l,addAdmin:()=>Ae,addFolder:()=>Ve,addMembers:()=>Se,allConfirmedHistoryNodes:()=>m,allHistoryNodes:()=>p,allQueuedMessages:()=>F,allowWrite:()=>He,appendMessage:()=>re,appendQueuedMessage:()=>ie,canAddToFolder:()=>A,canCreateChatBasedOnCurrent:()=>w,canDeleteMessageForAll:()=>j,canForwardFrom:()=>M,canForwardTo:()=>N,canInviteTo:()=>S,canPin:()=>P,canReadMembers:()=>Y,canSendReactions:()=>J,canUseMassMentions:()=>R,changeQueuedMessageEntrypoint:()=>we,changeUserState:()=>We,cleanup:()=>fe,clearChatDataOnLeave:()=>Ie,deleteMessage:()=>ce,description:()=>Xe,findHistoryNodeByCmid:()=>v,findMediaViewerCache:()=>Je,findMessageByCmid:()=>b,findMessageById:()=>$,firstUnreadReactionCmid:()=>V,flowHistory:()=>g,fromAcceptedMessageRequest:()=>Be,fromCancelledMessageRequest:()=>Fe,fromRejectedMessageRequest:()=>$e,getConvoFailedMessagesCount:()=>z,getFirstUnreadMentionCmid:()=>W,getMRSenderPeerId:()=>I,getPinnedMessage:()=>H,hasUnreadExpireables:()=>O,hasUnreadMentions:()=>q,hasUnreadReactions:()=>L,insertMessages:()=>ue,isAdmin:()=>Ze,isBusinessNotify:()=>E,isCasper:()=>y,isEmpty:()=>G,isForbidedWritingForAll:()=>en,isHidden:()=>Q,isInFolder:()=>X,isMR:()=>_,isMessageUnread:()=>K,isMuted:()=>k,isNew:()=>B,isPendingMR:()=>C,isPinned:()=>T,isRejectedMR:()=>x,isUnread:()=>U,isUnreadOut:()=>D,lastEditableMessage:()=>h,markRead:()=>me,merge:()=>ee,pinMessage:()=>Oe,readInUntil:()=>he,readOutUntil:()=>pe,readReactions:()=>be,removeAdmin:()=>Te,removeFolder:()=>Ke,removeMember:()=>Re,removePending:()=>te,replaceExpiredReplies:()=>se,replaceInviteLinks:()=>De,replaceMessage:()=>ae,replaceUnreadReactions:()=>ge,restoreMessage:()=>de,restrictWrite:()=>ze,safeGet:()=>Ye,setChatPermissions:()=>je,setConvoState:()=>Ge,setDescription:()=>Ue,setOwner:()=>Pe,setUnreadReaction:()=>ve,shouldShortPollReactions:()=>Z,unpinMessage:()=>Le,updateAcl:()=>Me,updateActiveCall:()=>qe,updateFlags:()=>xe,updateIsNew:()=>Ce,updateMembersCount:()=>Ne,updateMessageFlags:()=>Ee,updatePush:()=>ne,updateSendingFail:()=>ye,updateSortId:()=>_e});var r=t(434788),i=t(820224),o=t(96190),a=t(777634),s=t(89131),c=t(95154),d=t(168465);const u=144e5,l=5,f={invite:"all",change_info:"all",change_pin:"all",use_mass_mentions:"all",see_invite_link:"all",call:"all",change_style:"all",change_admins:"owner"};function m(e){return e.history.confirmed.reduce(((e,n)=>("Node"===n.kind&&e.push(n),e)),[])}function h(e){const n=m(e);for(let i=n.length-1;i>=0;i--){var t,r;const o=null==(t=n[i])?void 0:t.item;if("Normal"===(null==(r=o)?void 0:r.kind)&&a.isEditable(o,Date.now(),H(e)))return o}}function p(e){return[...m(e),...e.history.pending]}function g(e,n,t){let r=!1;return e.map(((i,o)=>{const a=e[o-1],c="DeletedNode"===i.kind?i.restorable:i.item;if(!a){const e="DeletedNode"!==i.kind&&"Normal"===c.kind&&n<c.cmid;return e&&!r&&(r=!0),{kind:"split",atUnread:e&&t,atDate:!0}}const d="DeletedNode"===a.kind?a.restorable:a.item,u=["gift","graffiti","finishedCall"],l=!(0,s.isSameDate)(d.sentAt,c.sentAt),f="Queued"!==d.kind&&"Queued"!==c.kind&&!c.isOut&&c.cmid>n&&!r;f&&!r&&(r=!0);const m=!("Normal"!==d.kind||"Normal"!==c.kind||d.authorId!==c.authorId||d.expireTTL||c.expireTTL||c.replyMessage||u.some((e=>void 0!==d.attaches[e]))||u.some((e=>void 0!==c.attaches[e]))||d.attaches.sticker),h="Expired"===d.kind&&"Expired"===c.kind;return!l&&!f&&c.sentAt-d.sentAt<=3e5&&(m||h)?{kind:"continue"}:{kind:"split",atUnread:f,atDate:l}}))}function v(e,n){return d.findNodeByCmid(e.history,n)}function b(e,n){var t;const{node:r}=v(e,n);return"Node"===(null==(t=r)?void 0:t.kind)?r.item:void 0}function k(e){return"everything"!==e.push.mode}function y(e){return("ChatConvo"===e.kind||"MessageRequestChatConvo"===e.kind)&&e.isCasper}function w(e,n){if("ChatConvo"!==e.kind)return!1;const t=e.adminIds.has(n),r=e.ownerId===n,i=e.membersCount>0;return!o.isFavorites(e.peerId,n)&&i&&(t||r)}function _(e){return"MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind}function C(e){return("MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind)&&"pending"===e.MRStatus}function x(e){return("MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind)&&"rejected"===e.MRStatus}function E(e){return"BusinessNotify"===e.kind}function I(e){return"MessageRequestUserConvo"===e.kind?e.peerId:e.inviterPeerId}function M(e){return!y(e)}function N(e){return e.canWrite.allowed&&"MessageRequestChatConvo"!==e.kind&&!E(e)}function S(e){return"ChatConvo"===e.kind&&e.acl.canInvite}function R(e){return"ChatConvo"===e.kind&&e.acl.canUseMassMentions}function A(e){return!_(e)&&!E(e)}function T(e){return[4,5,6].some((n=>(e.majorSortId&1<<n)>0))}function P(e){return!(e.isArchived||G(e)||_(e)||y(e))}function j(e,n,t){const r=o.isUserPeerId(n.authorId)||o.isGroupPeerId(n.authorId),i="ChatConvo"===e.kind&&e.adminIds.has(t),s=n.authorId===t,c=!(!r||"ChatConvo"!==e.kind)&&e.adminIds.has(n.authorId),d="ChatConvo"!==e.kind||"in"===e.state;switch(!0){case Date.now()-n.sentAt>864e5:case!e.canWrite.allowed:case!d:case a.isCall(n):case o.isFavorites(e.peerId,t):return!1;case i&&!c:case s:return!0;default:return!1}}function U(e){return e.unreadCount>0||e.isMarkedUnread}function D(e){var n,t;if("MessageRequestChatConvo"===e.kind)return!1;const r=d.lastNode({history:e.history,withDeleted:!0,withPending:!0}),i="DeletedNode"===(null==(n=r)?void 0:n.kind)?r.restorable:null==(t=r)?void 0:t.item;return void 0!==i&&(i.isOut&&K(e,i))}function O(e){return e.unreadExpireables.size>0}function L(e){return e.unreadReactions.size>0}function q(e){switch(e.kind){case"UserConvo":case"GroupConvo":case"ContactConvo":case"MessageRequestChatConvo":case"MessageRequestUserConvo":case"BusinessNotify":return!1;case"ChatConvo":return e.unreadMentions.size>0;default:return(0,s.exhaustivenessCheck)(e)}}function G(e){return d.isEmpty(e.history)}function B(e){return e.isNew}function $(e,n){const t=e.history.confirmed;for(let e of t){let t;if("DeletedNode"===e.kind&&(t=e.restorable),"Node"===e.kind&&(t=e.item),void 0!==t&&"id"in t&&t.id===n)return t}}function F(e){return e.history.pending.map((e=>e.item))}function z(e){return F(e).filter((e=>e.hasFailed)).length}function H(e){return"ChatConvo"===e.kind?e.pinnedMessage:void 0}function W(e){const n=Math.min(...e.unreadMentions.values());return n===1/0?void 0:a.resolveCmid(n)}function V(e){const n=Math.min(...e.unreadReactions.keys());return n===1/0?void 0:a.resolveCmid(n)}function K(e,n){if(n.peerId!==e.peerId)throw new Error("Передано сообщение не принадлежащее беседе");return"Queued"===n.kind||(n.isOut?n.cmid>e.outReadBy:n.cmid>e.inReadBy)}function Y(e){return e.canWrite.allowed||!e.canWrite.allowed&&"no_access"!==e.canWrite.reason}function Q(e){return e.majorSortId<=0&&e.minorSortId<=0&&G(e)}function X(e,n){return e.folderIds.has(n)}function J(e){var n;if(y(e)||"message_request_banner"===(null==(n=e.convoBanner)?void 0:n.name))return!1;switch(e.kind){case"UserConvo":case"GroupConvo":return e.canWrite.allowed;case"ChatConvo":return"in"===e.state&&e.acl.canSendReactions&&e.canWrite.allowed&&!e.isGroupChannel;case"BusinessNotify":case"MessageRequestChatConvo":case"MessageRequestUserConvo":case"ContactConvo":return!1;default:(0,s.exhaustivenessCheck)(e)}}function Z(e){return!("ChatConvo"!==e.kind||!e.shouldShortPollReactions)}function ee(e,n){var t;if(void 0===n)return e;if((null==(t=n)?void 0:t.peerId)!==e.peerId)throw new Error("Convo.merge вызван на 2 разных чатах");const r=e.history;return e.history=n.history,le(e,r.confirmed),d.insert(e.history,r.confirmed),0===e.majorSortId&&(e.majorSortId=n.majorSortId),"ChatConvo"===e.kind&&"ChatConvo"===n.kind&&(e.memberIds=n.memberIds,e.members=n.members,e.membersCount=n.membersCount,e.invitedIds=n.invitedIds),e}function ne(e,n){e.push=n}function te(e,n){d.removePending(e.history,n)}function re(e,n,t,r,i){if(n.peerId!==e.peerId)throw new Error("Передано сообщение не принадлежащее беседе");e.minorSortId<t&&(e.minorSortId=t);const o=d.lastCmid(e.history),a=void 0===o||o<n.cmid;if(!n.isOut&&a&&K(e,n)&&e.unreadCount++,ke(n.isOut,e),i){switch(i.kind){case"InputKeyboardUpsertEvent":e.currentKeyboard=i.keyboard;break;case"InputKeyboardDeleteEvent":delete e.currentKeyboard;break;default:return(0,s.exhaustivenessCheck)(i)}e.currentKeyboard="InputKeyboardUpsertEvent"===i.kind?i.keyboard:void 0}"ChatConvo"===e.kind&&r&&e.unreadMentions.add(n.cmid),"Normal"===n.kind&&n.expireTTL&&e.unreadExpireables.add(n.cmid),e.mediaViewerCacheHasNext=!0,d.append(e.history,n,"randomId"in n?n.randomId:void 0)}function ie(e,n){d.appendPending(e.history,n),ke(n.isOut,e)}function oe(e,n){var t;(null==(t=e.mediaViewerCache)?void 0:t.find((({cmid:e})=>e===n.cmid)))&&(e.mediaViewerCache=void 0)}function ae(e,n,t){"ChatConvo"===e.kind&&(e.unreadMentions.delete(n.cmid),t&&K(e,n)&&e.unreadMentions.add(n.cmid)),e.unreadExpireables.delete(n.cmid),("Normal"===n.kind&&n.expireTTL||"Expired"===n.kind)&&K(e,n)&&e.unreadExpireables.add(n.cmid),oe(e,n),d.replace(e.history,n)}function se(e,n){e.history.confirmed.forEach((e=>{if("Node"!==e.kind||"Normal"!==e.item.kind)return;const{replyMessage:t}=e.item;void 0!==t&&"ForeignExpired"!==t.kind&&t.cmid===n&&(e.item.replyMessage=a.expireForeign(t))}))}function ce(e,n,t){if(!n.isOut&&K(e,n)&&(e.unreadCount=Math.max(0,e.unreadCount-1)),"ChatConvo"===e.kind&&e.unreadMentions.delete(n.cmid),e.unreadExpireables.delete(n.cmid),e.unreadReactions.delete(n.cmid),e.inReadBy===n.cmid){const t=d.findNodeByCmid(e.history,n.cmid);if("Node"===t.status){const n=e.history.confirmed[t.index-1];void 0!==n&&"GapNode"!==n.kind&&(e.inReadBy=d.nodeCmid(n))}}oe(e,n),d.remove(e.history,n.cmid,t)}function de(e,n,t){d.restore(e.history,n.cmid,n),"ChatConvo"===e.kind&&t&&e.unreadMentions.add(n.cmid)}function ue(e,n,t){const r=[];n.reverse().forEach(((n,i,o)=>{if(0===i&&n.cmid>1&&t.backward&&r.push({kind:"GapNode",fromCmid:a.resolveCmid(1),toCmid:a.resolveCmid(n.cmid-1)}),r.push({kind:"Node",item:n}),i===o.length-1&&t.forward){const t=d.lastCmid(e.history);void 0!==t&&n.cmid<t&&r.push({kind:"GapNode",fromCmid:a.resolveCmid(n.cmid+1),toCmid:a.resolveCmid(t)})}})),le(e,r),d.insert(e.history,r)}function le(e,n){n.forEach((n=>{const t="Node"===n.kind&&"randomId"in n.item?n.item.randomId:void 0;t&&te(e,t)}))}function fe(e){const n=e.unreadCount>0?e.inReadBy:void 0;d.cleanup(e.history,1.5*c.MESSAGES_PER_PAGE,n)}function me(e){e.isMarkedUnread=!1}function he(e,n,t){if(!(e.inReadBy>n)){if(void 0===t){const r=d.lastCmid(e.history);if(r&&n>=r)t=0;else{const r=e.history.confirmed.filter((t=>{if("Node"!==t.kind)return!1;const r=t.item;return!r.isOut&&K(e,r)&&r.cmid<=n})).length;t=Math.max(0,e.unreadCount-r)}}switch(e.inReadBy=n,e.unreadCount=t,0===t&&(e.isMarkedUnread=!1),e.kind){case"UserConvo":case"GroupConvo":case"ContactConvo":case"MessageRequestUserConvo":case"MessageRequestChatConvo":case"BusinessNotify":break;case"ChatConvo":for(const t of e.unreadMentions)t<=n&&e.unreadMentions.delete(t);break;default:(0,s.exhaustivenessCheck)(e)}for(const t of e.unreadExpireables)t<=n&&e.unreadExpireables.delete(t)}}function pe(e,n){e.outReadBy>=n||(e.outReadBy=n)}function ge(e,n){e.unreadReactions=n.reduce(((n,t)=>(n.set(t,e.unreadReactions.get(t)),n)),new Map)}function ve(e,n,t){e.unreadReactions.has(n)&&e.unreadReactions.set(n,t)}function be(e,n){e.unreadReactions.delete(n)}function ke(e,n){var t;e&&(null==(t=n.currentKeyboard)?void 0:t.oneTime)&&delete n.currentKeyboard}function ye(e,n,t){const r=d.findPendingNode(e.history,n);void 0!==r&&a.updateFail(r.item,t)}function we(e,n,t){const r=d.findPendingNode(e.history,n);void 0!==r&&a.updateEntrypoint(r.item,t)}function _e(e,n){"majorSortId"in n?e.majorSortId=n.majorSortId:e.minorSortId=n.minorSortId}function Ce(e,n){e.isNew=n}function xe(e,n,t){const r=Qe({isMarkedUnread:e.isMarkedUnread,isArchived:e.isArchived});let o;switch(n){case"unset":o=Qe(r&~t);break;case"replace":o=Qe(t);break;case"set":o=Qe(r|t);break;default:(0,s.exhaustivenessCheck)(n)}const{isMarkedUnread:a,isArchived:c,DONT_USE_isMuted:d}=o;(0,i._)(o,["isMarkedUnread","isArchived","DONT_USE_isMuted"]);e.isMarkedUnread=a,e.isArchived=c}function Ee(e,n,t,r){var i;const o=d.findNodeByCmid(e.history,n).node;if(void 0===o||"GapNode"===o.kind)return;const{isDeleted:s,isDeletedForAll:c,isSpam:u}=a.updateFlags(o,t,r);if((s||u)&&"DeletedNode"!==(null==(i=o)?void 0:i.kind)||c){ce(e,"DeletedNode"===o.kind?o.restorable:o.item,{isRestorable:!1})}}function Ie(e){e.membersCount=0,e.state="left",e.acl={canChangeInfo:!1,canChangeInviteLink:!1,canChangePin:!1,canInvite:!1,canPromoteUsers:!1,canSeeInviteLink:!1,canModerate:!1,canCopyChat:!1,canCall:!1,canUseMassMentions:!1,canChangeServiceType:!1,canChangeStyle:!1,canSendReactions:!1},e.adminIds=new Set,delete e.members,delete e.inviteLinks}function Me(e,n){e.acl=n}function Ne(e,n){e.membersCount=n}function Se(e,n,t){e.members||(e.members=new Map);for(const t of n){const{peerId:n,isMessageRequest:r}=t;e.members.set(n,t),r?e.invitedIds.add(n):o.isContactPeerId(n)||e.memberIds.add(n)}e.membersCount=t||e.memberIds.size}function Re(e,n){var t,r;const i=null==(t=e.members)?void 0:t.get(n);i&&(null==(r=e.members)||r.delete(n),i.isMessageRequest||o.isContactPeerId(n)?e.invitedIds.delete(n):e.memberIds.delete(n),e.membersCount=e.memberIds.size)}function Ae(e,n){var t;e.adminIds.add(n);const r=null==(t=e.members)?void 0:t.get(n);r&&(r.isAdmin=!0)}function Te(e,n){var t;e.adminIds.delete(n);const r=null==(t=e.members)?void 0:t.get(n);r&&(r.isAdmin=!1)}function Pe(e,n){e.ownerId=n}function je(e,n,t){e.permissions=n,e.isService=t}function Ue(e,n){e.description=n}function De(e,n){e.inviteLinks=n}function Oe(e,n){e.pinnedMessage=n}function Le(e){const n=e.pinnedMessage;return delete e.pinnedMessage,n}function qe(e,n){e.activeCall=n}function Ge(e,n){e.state=n}function Be(e,n){if("MessageRequestUserConvo"===e.kind){const{MRStatus:n}=e,t=(0,i._)(e,["MRStatus"]);return(0,r._)({},t,{kind:"UserConvo"})}const{inviterPeerId:t,MRStatus:o,canWrite:a}=e,s=(0,i._)(e,["inviterPeerId","MRStatus","canWrite"]);return(0,r._)({},s,{kind:"ChatConvo",canWrite:n?n.canWrite:!1===a.allowed&&"kicked"===a.reason?{allowed:!0}:a})}function $e(e){return"UserConvo"===e.kind?(0,r._)({},e,{kind:"MessageRequestUserConvo",MRStatus:"rejected",canWrite:{allowed:!1,reason:"mr_rejected"}}):(0,r._)({},e,{MRStatus:"rejected",canWrite:{allowed:!1,reason:"mr_rejected"}})}function Fe(e){return"UserConvo"===e.kind?(0,r._)({},e,{kind:"MessageRequestUserConvo",MRStatus:"cancelled"}):(0,r._)({},e,{MRStatus:"cancelled"})}function ze(e,n){e.canWrite={allowed:!1,reason:n}}function He(e){e.canWrite={allowed:!0}}function We(e,n){e.state=n}function Ve(e,n){e.folderIds.add(n)}function Ke(e,n){e.folderIds.delete(n)}function Ye(e,n){const t=e.get(n);if(t)return t;if(s.isDev)throw new Error(`Беседа ${n} не найдена в кэше! Обрати внимание на то как загружаются недостающие данные в сторе.`);return e.get(o.resolveId())}function Qe(e){const n={DONT_USE_isMuted:4,isMarkedUnread:20,isArchived:23};if("number"==typeof e){const t={};for(const r of Object.keys(n))t[r]=(e&1<<n[r])>0;return t}let t=0;for(const r of Object.keys(e))e[r]&&(t|=1<<n[r]);return t}function Xe(e){switch(e.kind){case"ChatConvo":case"GroupConvo":return e.description;default:return}}function Je(e,n,t,r){var i,o;return null==(o=r)||null==(i=o.mediaViewerCache)?void 0:i.find((({cmid:r,id:i,position:o})=>`${r}-${i}-${o}`==`${e}-${n}-${t}`))}function Ze(e,n){return"ChatConvo"===e.kind&&!o.isContactPeerId(n)&&!o.isChatPeerId(n)&&e.adminIds.has(n)}function en(e){return"ChatConvo"===e.kind&&!!e.forbidedWritingForAllUntil}},999504:(e,n,t)=>{"use strict";t.d(n,{FOLDER_NAME_LIMIT:()=>o,deleteFolder:()=>m,empty:()=>c,getLockId:()=>d,isLoaded:()=>s,push:()=>l,refresh:()=>f,reorderFolders:()=>b,replaceFolder:()=>v,resolveId:()=>a,setHasMore:()=>p,setName:()=>g,setUnreadCounters:()=>h,sorter:()=>u});var r=t(185327),i=t(168465);const o=16;function a(e){return e}function s(e,n){return e[n].boundaryMinorId!==1/0}function c(){return[]}function d(e,n){return`folder_${e}_${n}`}function u(e,n){var t,r,o,a;const s=null==(t=i.lastNode({history:e.history,withDeleted:!1,withPending:!0}))?void 0:t.item,c=null==(r=i.lastNode({history:n.history,withDeleted:!1,withPending:!0}))?void 0:r.item;var d,u,l,f;return"Queued"===(null==(o=s)?void 0:o.kind)||"Queued"===(null==(a=c)?void 0:a.kind)?(null!=(l=null==(d=c)?void 0:d.sentAt)?l:0)-(null!=(f=null==(u=s)?void 0:u.sentAt)?f:0):n.minorSortId-e.minorSortId}function l(e,n,t,i,o){const a=e.find((e=>e.id===n));if(a){for(const o of i)r.isInFolder(o,n)&&(k(a,t,o),f(e,o));a[t].hasMore=o,a[t].hasMore||(a[t].boundaryMinorId=0)}}function f(e,n){for(const t of e)t.all.peerIds.delete(n.peerId),t.unread.peerIds.delete(n.peerId),r.isInFolder(n,t.id)&&(n.minorSortId>=t.all.boundaryMinorId&&t.all.peerIds.add(n.peerId),r.isUnread(n)&&n.minorSortId>=t.unread.boundaryMinorId&&t.unread.peerIds.add(n.peerId))}function m(e,n){const t=e.findIndex((e=>e.id===n));-1!==t&&e.splice(t,1)}function h(e,n,t,r){const i=e.find((e=>e.id===n));i&&(i.unreadCount=t,i.unreadUnmutedCount=r)}function p(e,n,t){e[n].hasMore=t}function g(e,n){e.name=n}function v(e,n){const t=e.findIndex((e=>e.id===n.id));-1!==t&&e.splice(t,1,n)}function b(e,n){e.sort(((e,t)=>n.indexOf(e.id)-n.indexOf(t.id)))}function k(e,n,t){e[n].boundaryMinorId>t.minorSortId&&(e[n].boundaryMinorId=t.minorSortId),"all"===n&&k(e,"unread",t)}},168465:(e,n,t)=>{"use strict";t.d(n,{append:()=>m,appendPending:()=>g,around:()=>u,cleanup:()=>_,findClosestNodeInSlice:()=>f,findNodeByCmid:()=>d,findPendingNode:()=>l,insert:()=>C,isEmpty:()=>o,lastCmid:()=>s,lastConfirmedNode:()=>c,lastNode:()=>a,nodeCmid:()=>I,nodeSentAt:()=>M,remove:()=>p,removePending:()=>v,replace:()=>h,restore:()=>b});var r=t(89131),i=t(453934);function o(e){const{confirmed:n,pending:t}=e;return 0===n.length&&0===t.length}function a({history:e,withPending:n,withDeleted:t}){const{confirmed:i,pending:o}=e;if(n){const e=o[o.length-1];if(void 0!==e)return e}for(let e=i.length-1;e>=0;e--){const n=i[e];if(!n)throw new Error("item по индексу не существует");switch(n.kind){case"Node":return n;case"DeletedNode":if(t)return n;continue;case"GapNode":return;default:return(0,r.exhaustivenessCheck)(n)}}}function s(e){const n=c(e);if(void 0!==n)switch(n.kind){case"GapNode":return n.toCmid;case"Node":case"DeletedNode":return I(n);default:return(0,r.exhaustivenessCheck)(n)}}function c(e){const{confirmed:n}=e;return n[n.length-1]}function d(e,n){var t;const{confirmed:i}=e,o=i.findIndex((e=>{switch(e.kind){case"GapNode":return e.fromCmid<=n&&e.toCmid>=n;case"Node":case"DeletedNode":return I(e)===n;default:return(0,r.exhaustivenessCheck)(e)}})),a=i[o];return"Node"===(null==(t=a)?void 0:t.kind)?{status:"Node",node:a,index:o}:void 0===a||"DeletedNode"===a.kind?void 0!==a&&void 0!==o?{status:"Deleted",node:a,index:o}:{status:"Deleted"}:{status:"NotLoaded",node:a,index:o}}function u(e,n){const{confirmed:t,pending:r}=e,i=t[0];if(!i)return{nodes:[],pendingNodes:r.length>0?r:void 0};if("GapNode"===i.kind&&i.toCmid>=n)return;let o,a=!1,s=0,c="GapNode"===i.kind?i:{kind:"GapNode",fromCmid:Math.min(n-1,0),toCmid:Math.min(n-1,0)};for(o=s;o<t.length;o++){const e=t[o];if(!e)throw new Error("item по индексу не существует");if("GapNode"===e.kind){if(c.toCmid<n&&e.fromCmid>n){a=!0;break}s=o,c=e}else if(o===t.length-1&&c.toCmid<n){a=!0;break}}return a?t.slice(s,o+1).reduce(((e,n,t,i)=>{if("GapNode"===n.kind){if(0===t)e.topGap=n;else{if(t!==i.length-1)throw new Error("В середине результата History.around не может быть гэпов");e.bottomGap=n}return e}return e.nodes.push(n),t===i.length-1&&void 0===e.bottomGap&&r.length>0&&(e.pendingNodes=r),e}),{nodes:[]}):void 0}function l(e,n){const{pending:t}=e;return t.find((e=>e.item.randomId===n))}function f(e,n,t=!1){for(let r=0;r<e.nodes.length;r++){const i=e.nodes[r];if(!i)continue;const o=I(i),a=e.nodes[r+1],s=a&&I(a);if(0===r&&n<o||r===e.nodes.length-1&&n>o||n===o)return i;if(s&&o<n&&n<s)return t?a:i}}function m(e,n,t){const r=(0,i.castDraft)(n);void 0!==t&&v(e,t),x(e,k([{kind:"Node",item:r}],s(e)))}function h(e,n){const{confirmed:t}=e,o=(0,i.castDraft)(n),{status:a,node:s,index:c}=d(e,o.cmid);if("NotLoaded"!==a){if("Deleted"!==a)return t[c]={kind:"Node",item:o},s.item;if(r.isDev)throw new Error("Попытка заменить удаленный узел истории")}}function p(e,n,t){const{confirmed:r}=e,{status:i,node:o,index:a}=d(e,n);"NotLoaded"!==i&&"Deleted"!==i&&(t.isRestorable?"Node"===o.kind&&(r[a]={kind:"DeletedNode",isSpam:t.isSpam,restorable:o.item}):r.splice(a,1))}function g(e,n){const{pending:t}=e;t.push({kind:"PendingNode",item:(0,i.castDraft)(n)})}function v(e,n){const{pending:t}=e,r=t.findIndex((e=>e.item.randomId===n));-1!==r&&t.splice(r,1)}function b(e,n,t){const{confirmed:r}=e,{status:i,node:o,index:a}=d(e,n);if("NotLoaded"!==i&&"Node"!==i)if(void 0===t)void 0!==o&&(r[a]={kind:"Node",item:o.restorable});else{x(e,k([{kind:"Node",item:t}],s(e)))}}function k(e,n){const t=e[0],r=t&&I(t),i=e[e.length-1],o=i&&I(i);return{topGap:void 0!==r&&r>1?{kind:"GapNode",fromCmid:1,toCmid:r-1}:void 0,nodes:e,bottomGap:void 0!==n&&void 0!==o&&o<n?{kind:"GapNode",fromCmid:o+1,toCmid:n}:void 0}}const y=.2,w=.2;function _(e,n,t){const{confirmed:r}=e;if(r.length<n)return;const i=s(e);if(void 0===i)return;const o=Math.floor(n/1.5),a={confirmed:[{kind:"GapNode",fromCmid:1,toCmid:i}],pending:[]},c=void 0===i?void 0:u(e,i),d=void 0===t?void 0:u(e,t);if(void 0!==c){x(a,k(void 0===d?c.nodes.slice(-o):c.nodes.slice(-Math.floor(o*y)),i))}if(void 0!==d){const e=d.nodes.findIndex((e=>I(e)===t));if(-1!==e){const n=Math.max(e-Math.floor(o*w),0);x(a,k(d.nodes.slice(n,e+Math.floor(o*(1-w-(void 0===c?0:y)))),i))}}e.confirmed=a.confirmed}function C(e,n){if(0===n.length)return void(e.confirmed=[]);if(0===e.confirmed.length)return void(e.confirmed=(0,i.castDraft)(n));!function(e,n){const{confirmed:t}=e,r=t[t.length-1],i=n[n.length-1];if(void 0===r||void 0===i)return;const o="GapNode"===i.kind?i.toCmid:I(i),a="GapNode"===r.kind?r.toCmid:I(r);"GapNode"!==r.kind&&a>o&&("GapNode"===i.kind?i.toCmid=a:n.push({kind:"GapNode",fromCmid:o+1,toCmid:a}));o>a&&("GapNode"===r.kind?r.toCmid=o:t.push({kind:"GapNode",fromCmid:a+1,toCmid:o}))}(e,n);n.reduce(((e,t,r)=>(0===r&&"GapNode"!==t.kind&&e.push(-1),r===n.length-1&&"GapNode"!==t.kind&&e.push(n.length),"GapNode"===t.kind&&e.push(r),e)),[]).forEach(((t,r,i)=>{const o=i[r+1];if(void 0!==o){const r=n[t],i=n[o],a=n.slice(t+1,o).reduce(((e,n)=>{if("GapNode"===n.kind)throw new Error("Не может быть гэп узлов между гэпами");return e.push(n),e}),[]);if(void 0!==r&&"GapNode"!==r.kind)throw new Error("Не гэп используется как гэп");if(void 0!==i&&"GapNode"!==i.kind)throw new Error("Не гэп используется как гэп");x(e,{topGap:r,bottomGap:i,nodes:a})}}))}function x(e,n){const{confirmed:t}=e;let r,o=-1;if(void 0!==n.topGap){var a;o=E(e,n.topGap.toCmid);const r=t[o];if(void 0!==r){("GapNode"===r.kind?r.fromCmid:I(r))>n.topGap.toCmid&&o--}"GapNode"===(null==(a=r)?void 0:a.kind)&&r.fromCmid<=n.topGap.toCmid&&r.toCmid>n.topGap.toCmid&&(t.splice(o,0,{kind:"GapNode",fromCmid:r.fromCmid,toCmid:n.topGap.toCmid}),r.fromCmid=n.topGap.toCmid+1)}if(void 0!==n.bottomGap){var s;r=E(e,n.bottomGap.fromCmid);const i=t[r];"GapNode"===(null==(s=i)?void 0:s.kind)&&i.fromCmid<n.bottomGap.fromCmid&&(i.fromCmid=n.bottomGap.fromCmid)}const c=[...t.slice(0,o+1),...(0,i.castDraft)(n.nodes),...void 0!==r?t.slice(r):[]];e.confirmed=c}function E(e,n){const{confirmed:t}=e;for(let e=0;e<t.length;e++){const r=t[e],i=t[e-1];if(!r)return-1;if(0===e){if("GapNode"===r.kind?r.fromCmid>n:I(r)>n)return-1}if("GapNode"===r.kind&&n>=r.fromCmid&&n<=r.toCmid)return e;const o="GapNode"===r.kind?r.fromCmid:I(r);if(o===n)return e;if(void 0===i)continue;const a="GapNode"===i.kind?i.toCmid:I(i);if(o>n&&a<n)return e}return t.length}function I(e){switch(e.kind){case"Node":return e.item.cmid;case"DeletedNode":return e.restorable.cmid;default:(0,r.exhaustivenessCheck)(e)}}function M(e){switch(e.kind){case"Node":case"PendingNode":return e.item.sentAt;case"DeletedNode":return e.restorable.sentAt;default:(0,r.exhaustivenessCheck)(e)}}},777634:(e,n,t)=>{"use strict";t.d(n,{canChangeMessagePlayedStatus:()=>N,convertFlags:()=>M,expireForeign:()=>y,getCmid:()=>l,getMessageAttachmentsCount:()=>A,hasText:()=>T,isCall:()=>g,isEditable:()=>p,isReactionsAvailable:()=>v,link:()=>h,newQueued:()=>I,resolveCmid:()=>d,resolveId:()=>c,resolveRandomId:()=>u,setCurrentUserReaction:()=>S,setReactions:()=>R,toForeign:()=>k,toPinned:()=>b,toPlainText:()=>f,toRawText:()=>m,unpinMessage:()=>x,updateCmid:()=>_,updateEntrypoint:()=>C,updateFail:()=>w,updateFlags:()=>E});var r=t(434788),i=t(820224),o=t(197934),a=t(504698),s=t(89131);function c(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function d(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function u(e){return!e||e>0?0:e}function l(e){return"Normal"===e.kind?e.cmid:"Foreign"===e.kind&&"rootCmid"in e?e.rootCmid:void 0}function f(e,n){return a.toPlainText(e.chunks,n)}function m(e){return a.toRawText(e.chunks)}function h(e,n=""){const t="Normal"===e.kind&&e.id?`&msgid=${e.id}`:"",r=`/im?sel=${e.peerId}${t}`;return n?`https://${n}${r}`:r}function p(e,n,t){const r=n-e.sentAt<864e5,i=!!t&&t.id===e.id,o=e.isOut&&e.authorId===e.peerId;return(r||i||o)&&e.isOut&&!g(e)&&!e.attaches.voice&&!e.attaches.sticker&&!e.attaches.ugcSticker&&!e.attaches.gift&&!e.attaches.graffiti&&!e.attaches.moneyTransfer&&!e.attaches.moneyRequest&&!e.attaches.videoMessage}function g(e){return!!e.attaches.activeCall||!!e.attaches.finishedCall}function v(e){return!e.expireTTL&&!e.deleteTTL&&!(e.attaches.gift||e.attaches.activeCall||e.attaches.finishedCall)}function b(e){const{id:n,cmid:t,peerId:r,authorId:i,chunks:o,sentAt:a,forwardedMessages:s,replyMessage:c,attaches:d}=e;return{kind:"Pinned",id:n,cmid:t,peerId:r,authorId:i,chunks:o,sentAt:a,forwardedMessages:s,replyMessage:c,attaches:d,isUnavailable:!1}}function k(e){const{message:n}=e,t=(0,i._)(e,["message"]),{kind:o,randomId:a,isOut:s,isImportant:c,replyMessage:d}=n,u=(0,i._)(n,["kind","randomId","isOut","isImportant","replyMessage"]);return(0,r._)({kind:"Foreign",isUnavailable:!1},u,t)}function y(e){const{kind:n,replyMessage:t,forwardedMessages:o,chunks:a,attaches:s,updatedAt:c,expireTTL:d,deleteTTL:u}=e,l=(0,i._)(e,["kind","replyMessage","forwardedMessages","chunks","attaches","updatedAt","expireTTL","deleteTTL"]);return(0,r._)({kind:"ForeignExpired"},l)}function w(e,n){e.hasFailed=n}function _(e,n){e.cmid=n}function C(e,n){e.entrypoint=n}function x(e){e.pinnedAt=void 0}function E(e,n,t){const o="DeletedNode"===e.kind?e.restorable:e.item,a={isOut:o.isOut,isSpam:!1,isDeleted:!1,isDeletedForAll:!1,noPush:!1};let c,d;switch(o.kind){case"Normal":c=M((0,r._)({},a,{isImportant:o.isImportant,isPlayed:!!o.isPlayed,hasReactions:"Node"===e.kind&&o.reactions.size>0}));break;case"Service":case"Expired":c=M((0,r._)({},a,{isImportant:!1,isPlayed:!1,hasReactions:!1}));break;default:(0,s.exhaustivenessCheck)(o)}switch(n){case"unset":d=M(c&~t);break;case"replace":d=M(t);break;case"set":d=M(c|t);break;default:(0,s.exhaustivenessCheck)(n)}const{isImportant:u,isSpam:l,isDeleted:f,isDeletedForAll:m,isPlayed:h,isOut:p,hasReactions:g,noPush:v,DONT_USE_ME_isStealth:b,DONT_USE_ME_isUnread:k,DONT_USE_ME_skipUnread:y}=d;(0,i._)(d,["isImportant","isSpam","isDeleted","isDeletedForAll","isPlayed","isOut","hasReactions","noPush","DONT_USE_ME_isStealth","DONT_USE_ME_isUnread","DONT_USE_ME_skipUnread"]);switch(o.kind){case"Normal":o.isImportant=u,o.isOut=p,o.isPlayed=h;break;case"Service":case"Expired":break;default:(0,s.exhaustivenessCheck)(o)}return{isDeleted:f,isDeletedForAll:m,isSpam:l}}function I(e,n,t){var i;const o=-Math.pow(2,31),c=u(-e.sentAt%Math.abs(o)),d=void 0!==n?k({message:n,rootPeerId:e.peerId,rootRandomId:c}):void 0,l=null==(i=t)?void 0:i.map((n=>k({message:n,rootPeerId:e.peerId,rootRandomId:c})));return(0,r._)({},e,{kind:"Queued",text:e.text,chunks:a.fromClientText(e.text),hasFailed:!1,randomId:c,replyMessage:d,forwardedMessages:l&&(0,s.isNonEmptyArray)(l)?l:void 0})}function M(e){const n={DONT_USE_ME_isUnread:0,isOut:1,isImportant:3,isSpam:6,isDeleted:7,isPlayed:12,DONT_USE_ME_isStealth:16,isDeletedForAll:17,noPush:20,DONT_USE_ME_skipUnread:23,hasReactions:24};if("number"==typeof e){const t={};for(const r of Object.keys(n))t[r]=(e&1<<n[r])>0;return t}let t=0;for(const r of Object.keys(e))e[r]&&(t|=1<<n[r]);return t}function N(e){if(e.isOut)return!1;return!(!e.attaches.voice&&!e.attaches.videoMessage)&&!e.isPlayed}function S(e,n){e.reactionId=n}function R(e,n){const t=new Set(n.map((e=>e.reactionId)));Array.from(e.reactions.keys()).filter((e=>!t.has(e))).forEach((n=>e.reactions.delete(n))),n.forEach((n=>{e.reactions.set(n.reactionId,n)}))}function A(e){var n;let t=0;var r;return t+=o.count(e.attaches),e.replyMessage&&"ForeignExpired"!==e.replyMessage.kind&&(t+=A(e.replyMessage)),t+=null!=(r=null==(n=e.forwardedMessages)?void 0:n.reduce(((e,n)=>e+A(n)),0))?r:0,t}function T(e){return 0!==e.chunks.length}},96190:(e,n,t)=>{"use strict";t.d(n,{MARUSIA_PEER_ID:()=>v,clearChatDataOnLeave:()=>A,convertContact:()=>P,firstName:()=>I,hasPhoto:()=>f,initials:()=>N,isAnonymPeerId:()=>l,isChatPeerId:()=>d,isContactPeerId:()=>c,isEmployee:()=>k,isFavorites:()=>p,isGroupPeerId:()=>u,isMarusia:()=>b,isOnVacation:()=>y,isUserPeerId:()=>s,isVkAdministration:()=>g,maxPhotoSizeUrl:()=>M,name:()=>w,phone:()=>C,resolveAnyId:()=>a,resolveId:()=>o,resolveRealId:()=>h,safeGet:()=>O,screenName:()=>_,sex:()=>x,shortName:()=>E,toKind:()=>S,toRealId:()=>m,updateChatInfo:()=>R,updateFriendship:()=>j,updateIsPeerBlacklistedByMe:()=>D,updateMembership:()=>U,updateMutualFriends:()=>T});var r=t(723062),i=t(89131);function o(e){if(Number.isNaN(e)&&(e=0),i.isDev&&0===e)throw new Error("Айди беседы никогда не должно быть равно 0! Читай комментарий к ошибке.");if(!e||!Number.isInteger(e))return 0;const n=e;return s(n)||u(n)||d(n)||c(n)?n:0}function a(e){if(!e||!Number.isInteger(e))return 0;const n=e;return s(n)||u(n)||d(n)||l(n)?n:0}function s(e){return r.Ranges.isUserId(e)||0===e}function c(e){return r.Ranges.isContactId(e)}function d(e){return r.Ranges.isChatOrChannelPeer(e)}function u(e){return r.Ranges.isGroupId(e)}function l(e){return r.Ranges.isAnonymousCallPeerId(e)}function f(e){return!!e.photo50}function m(e){return c(e)?r.Ranges.convertPeerIdToContactId(e):d(e)?r.Ranges.convertChatPeerIdToChatId(e):u(e)?-e:s(e)?e:void(0,i.exhaustivenessCheck)(e)}function h(e,n){switch(e){case"User":return o(n);case"Contact":return o(r.Ranges.convertContactIdToPeerId(n));case"Group":return o(-n);case"Chat":return o(r.Ranges.convertChatIdToChatPeerId(n));default:(0,i.exhaustivenessCheck)(e)}}function p(e,n){return e===n}function g(e){return 100===e}const v=-194070336;function b(e){return e===v}function k(e){return"mrg_unit"===e.employeeMark||"normal"===e.employeeMark||"vacation"===e.employeeMark}function y(e){return"vacation"===e.employeeMark}function w(e,n="nom"){switch(e.kind){case"User":switch(n){case"nom":return e.firstName+" "+e.lastName;case"gen":return e.firstNameGen+" "+e.lastNameGen;case"acc":return e.firstNameAcc+" "+e.lastNameAcc;default:return(0,i.exhaustivenessCheck)(n)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,i.exhaustivenessCheck)(e)}}function _(e){switch(e.kind){case"User":return e.screenName||`id${e.id}`;case"Group":return e.screenName;default:return}}function C(e){switch(e.kind){case"User":case"Contact":return e.phone;default:return}}function x(e){switch(e.kind){case"User":return e.sex;case"Contact":case"Group":case"Chat":return"unknown";default:return(0,i.exhaustivenessCheck)(e)}}function E(e,n="nom"){switch(e.kind){case"User":const t=e.lastName.charAt(0)+(e.lastName.length>1?".":"");switch(n){case"nom":return e.firstName+" "+t;case"gen":return e.firstNameGen+" "+t;case"acc":return e.firstNameAcc+" "+t;default:return(0,i.exhaustivenessCheck)(n)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,i.exhaustivenessCheck)(e)}}function I(e,n="nom"){switch(e.kind){case"User":switch(n){case"nom":return e.firstName;case"gen":return e.firstNameGen;case"acc":return e.firstNameAcc;default:return(0,i.exhaustivenessCheck)(n)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,i.exhaustivenessCheck)(e)}}function M(e){var n,t;return"Contact"!==e.kind&&null!=(t=null!=(n=e.photo200)?n:e.photo100)?t:e.photo50}function N(e){let n="";switch(e.kind){case"User":n=[e.firstName,e.lastName].filter(Boolean).map(i.getFirstLetter).join("");break;case"Group":n=(0,i.getFirstLetter)(e.name);break;case"Chat":n=(0,i.getFirstLetter)(e.title);break;case"Contact":n=e.name.split(/\s/).slice(0,2).map(i.getFirstLetter).join("");break;default:(0,i.exhaustivenessCheck)(e)}return n}function S(e){return s(e)?"User":d(e)?"Chat":u(e)?"Group":c(e)?"Contact":void(0,i.exhaustivenessCheck)(e)}function R(e,n){"title"in n?e.title=n.title:(e.photo50=n.photo50,e.photo100=n.photo100,e.photo200=n.photo200)}function A(e){delete e.photo50,delete e.photo100,delete e.photo200,delete e.hasDefaultPhoto,e.canCall=!1}function T(e,n,t){"Contact"!==e.kind&&(e.mutualFriends={hint:n,count:t})}function P(e,n){e.userId=n}function j(e,n){switch(n){case"add":{if(!e.canChangeFriendship)break;const n={unfamiliar:"outgoingRequest",outgoingRequest:"outgoingRequest",incomingRequest:"friends",friends:"friends"};e.friendship=n[e.friendship];break}case"delete":{const n={unfamiliar:"unfamiliar",outgoingRequest:"unfamiliar",incomingRequest:"incomingRequest",friends:"incomingRequest"};e.friendship=n[e.friendship];break}default:(0,i.exhaustivenessCheck)(n)}}function U(e,n){switch(n){case"join":{const n={notMember:e.isClosed?"outgoingRequest":"member",member:"member",unsure:"member",declined:"member",outgoingRequest:"outgoingRequest",incomingRequest:"member"}[e.membership];e.membership!==n&&"member"===n&&e.memberCount++,e.membership=n;break}case"leave":{const n={notMember:"notMember",member:"notMember",unsure:"notMember",declined:"notMember",outgoingRequest:"notMember",incomingRequest:"declined"}[e.membership];e.membership!==n&&e.memberCount--,e.membership=n;break}default:(0,i.exhaustivenessCheck)(n)}}function D(e,n){e.isBlacklistedByMe=n}function O(e,n){const t=e.get(n);if(t)return t;if(i.isDev)throw new Error(`Пир ${n} не найден в кэше! Обрати внимание на то, как загружаются недостающие данные в сторе.`);return e.get(o())}},86144:(e,n,t)=>{"use strict";t.d(n,{DONUT_DURATION:()=>u,changeCommentsOrder:()=>b,findCommentByCmid:()=>k,insertComments:()=>v,isDonut:()=>p,isDonutPlaceholder:()=>h,isEmpty:()=>m,link:()=>g,newPending:()=>w,replaceComment:()=>y,resolveCmid:()=>c,resolveRandomId:()=>d,toRawText:()=>l,toWallAttach:()=>f});var r=t(434788),i=t(89131),o=t(504698),a=t(96190),s=t(777634);function c(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function d(e){if(e>=0){if(i.isDev)throw new Error("Рандом айди поста должен быть меньше 0!");return 0}return e%Math.pow(2,31)}const u=[-1,1,2,3,4,5,6,7];function l(e){return o.toRawText(e.chunks)}function f(e){return{id:s.resolveId(e.cmid),kind:"Wall",date:e.sentAt,authorId:a.resolveId(e.channelId),ownerId:a.resolveId(e.channelId),attaches:e.attaches,chunks:e.chunks,isAds:!1}}function m(e){var n,t;return!(0!==e.chunks.length||Object.keys(e.attaches).find((e=>"unknown"!==e))||"Normal"===e.kind&&(null==(t=e.donut)||null==(n=t.placeholder)?void 0:n.text))}function h(e){var n;return Boolean(null==(n=e.donut)?void 0:n.placeholder)}function p(e){var n;return Boolean(null==(n=e.donut)?void 0:n.isDonut)}function g(e){return`/wall${e.channelId}_${e.cmid}`}function v(e,n,t){e.comments.oneLevelCount=t,e.comments.history=[...e.comments.history,...n]}function b(e,n){e.comments.history=[],e.comments.order=n}function k(e,n){return e.comments.history.find((e=>e.cmid===n))}function y(e,n){const t=e.comments.history.findIndex((e=>e.cmid===n.cmid));-1!==t&&(e.comments.history[t]=n)}function w(e,n){const t=d(-e.sentAt);return(0,r._)({},e,{kind:"Pending",randomId:t,chunks:o.fromClientText(n),hasFailed:!1})}},504698:(e,n,t)=>{"use strict";t.d(n,{MASS_MENTIONS:()=>d,dontUse__enableNewParser__hack:()=>u,fromClientText:()=>f,fromServerText:()=>l,toPlainText:()=>g,toRawText:()=>v});var r=t(96190),i=t(997864),o=t(474582),a=t(659397),s=t(89131);let c=!1;const d=[{variant:"all",mentions:["all","everyone","все"]},{variant:"online",mentions:["online","here","тут","здесь"]}];function u(){c=!0}function l(e,n=c){return n?(0,o.from_server_text)(e).reduce(((e,n)=>p(e,h(n))),[]):m(b.ServerChunks,e)}function f(e,n=c){return n?(0,o.from_client_text)((0,a.decodeHTMLEntities)(e,{})).reduce(((e,n)=>p(e,h(n))),[]):m(b.ClientChunks,(0,a.decodeHTMLEntities)(e,{}))}function m(e,n){if(0===n.length)return[];try{return e.tryParse(n).reduce(p,[])}catch(e){return console.error(e),[]}}function h(e){switch(e.kind){case"LineBreak":case"Text":case"Emoji":return e;case"Code":return{kind:"Text",text:e.text};case"PossibleMention":return{kind:"ScreenNameMention",screenName:e.screen_name,displayName:e.screen_name===e.display_name.slice(1)?void 0:e.display_name};case"AllMention":case"OnlineMention":return{kind:"MassMention",displayName:e.text};case"UserMention":return{kind:"Mention",type:"id",peerId:r.resolveId(e.user_peer_id),displayName:e.display_name};case"GroupMention":return{kind:"Mention",type:"club",peerId:r.resolveId(e.group_peer_id),displayName:e.display_name};case"Url":return{kind:"Url",href:e.url,caption:e.caption,text:e.text};case"Hashtag":return e.screen_name?{kind:"HashtagMention",tag:e.tag,screenName:e.screen_name}:{kind:"Hashtag",tag:e.tag};default:return(0,s.exhaustivenessCheck)(e)}}function p(e,n){if("Text"===n.kind){var t;const r=e[e.length-1];"Text"===(null==(t=r)?void 0:t.kind)?r.text+=n.text:e.push({kind:"Text",text:n.text})}else e.push(n);return e}function g(e,n){return e.reduce(((e,t)=>{switch(t.kind){case"Text":case"Emoji":return e+t.text;case"Mention":case"MassMention":return e+t.displayName;case"ScreenNameMention":return e+(t.displayName||`@${t.screenName}`);case"Email":return e+t.email;case"Url":return e+t.caption;case"Hashtag":return e+t.tag;case"HashtagMention":return e+t.tag+`@${t.screenName}`;case"LineBreak":return e+(n.multiline?"\n":" ");default:return(0,s.exhaustivenessCheck)(t)}}),"")}function v(e){return e.reduce(((e,n)=>{switch(n.kind){case"Text":case"Emoji":case"Url":return e+n.text;case"Mention":{const t=r.toRealId(n.peerId);return e+`[${n.type}${t}|${n.displayName}]`}case"MassMention":return e+n.displayName;case"ScreenNameMention":return e+(n.displayName?`@${n.screenName} (${n.displayName})`:`@${n.screenName}`);case"Email":return e+n.email;case"Hashtag":return e+n.tag;case"HashtagMention":return e+n.tag+`@${n.screenName}`;case"LineBreak":return e+"\n";default:return(0,s.exhaustivenessCheck)(n)}}),"")}const b=i.createLanguage({ClientChunks:e=>i.alt(e.LineBreak,e.Email,e.Url,e.HashtagMention,e.Hashtag,e.MassMention,e.Mention,e.ScreenNameMention,e.Text).many(),ServerChunks:e=>i.alt(e.LineBreak,e.Email,e.Url,e.HashtagMention,e.Hashtag,e.MassMention,e.Mention,e.Text).many(),LineBreak:()=>i.regexp(/\n|<br ?\/?>/).map((()=>({kind:"LineBreak"}))),ScreenName:()=>i.seqObj(["prefix",i.oneOf("@*")],["handle",i.alt(i.digit,i.letter,i.string("_")).atLeast(2).map((e=>e.join("")))]),MassMention:()=>i.regexp(/(?!,|;|:|\.|\s|\n|"|\(|\)|\[|\]|!|\?)([*@](all|everyone|все|online|here|здесь|тут))(?=$|,|;|:|<br ?\/?>|\.(?![a-z0-9_-])|\s|\n|"|\(|\)|\[|\]|!|\?)/i,1).map((e=>({kind:"MassMention",displayName:e}))),Mention:()=>i.seqObj(i.string("["),["type",i.alt(i.string("id"),i.string("club"))],["peerId",i.digit.atLeast(1).map((e=>+e.join("")))],["displayName",i.regexp(/\|(.+?)]/,1)]).map((e=>{let n;return n="club"===e.type?r.resolveId(-e.peerId):0===e.peerId?r.resolveId():r.resolveId(e.peerId),{kind:"Mention",type:e.type,peerId:n,displayName:e.displayName}})),ScreenNameMention:e=>i.seqObj(["screenName",e.ScreenName],["displayName",i.alt(i.seq(i.whitespace,i.regexp(/\((.+?)\)/,1)).map((([,e])=>e)),i.succeed(void 0))]).map((e=>({kind:"ScreenNameMention",screenName:e.screenName.handle,displayName:e.displayName}))),Url:()=>{const e=i.seqObj(i.string("["),["protocol",i.regexp(new RegExp(y,"i"))],["fullDomain",i.regexp(new RegExp("vk\\.com|vk\\.ru|vk\\.me|web\\.vk\\.me","i"))],i.regexp(new RegExp("(?!/away\\.php)","i")),["query",i.regexp(new RegExp(I))],["displayName",i.regexp(/\|(.+?)]/,1)]).map((e=>{const{protocol:n,fullDomain:t,query:r,displayName:i}=e;return{kind:"Url",caption:i,href:`${n||"https://"}${t}${r}`,text:`[${n}${t}${r}|${i}]`}})),n=i.seq(i.regexp(new RegExp(y,"i")),i.regexp(new RegExp(w)),i.regexp(new RegExp(_)),i.regexp(new RegExp(C)),i.regexp(new RegExp(I))).map((e=>{const[n,t,r,i,o]=e,a=`${n||"https://"}${t}${r}${i}${o}`,c=e.join("");return r.length<=N&&M.has(r.toLowerCase())?{kind:"Url",caption:(0,s.safeDecodeURI)(c),href:a,text:c}:{kind:"Text",text:c}}));return i.alt(e,n)},Hashtag:()=>i.regexp(new RegExp(`#${T}{0,100}${A}${T}{0,100}`,"u")).map((e=>({kind:"Hashtag",tag:e}))),HashtagMention:e=>i.seqObj(["tag",i.regexp(new RegExp(`#${T}{0,100}${A}${T}{0,100}`))],["screenName",e.ScreenName]).map((e=>({kind:"HashtagMention",tag:e.tag,screenName:e.screenName.handle}))),Email:()=>i.regexp(new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@("+w+_+"))","i")).map((e=>({kind:"Email",email:e}))),Text:()=>i.any.map((e=>({kind:"Text",text:e})))}),k="\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј%",y="(https?:\\/\\/)?",w="((?:["+k+"\\—\\-\\_]+\\.){1,5})",_="([A-Za-zа-яА-Я\\-\\d]{2,22})",C="(?:\\:(\\d{2,5}))?",x="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",E="\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$~=;:'*"+x+"　-〿＀-￯",I="(([\\/?#])(?:\\&amp;|\\&|\\&#\\d{2,6};|,[_%]|!|,*"+("(?:["+E+"]|[.](?!\\s|$|[^."+E+"]))")+"+|"+("(?:\\(|\\[)["+k+"\\d&#%;,]+(?:\\)|\\])")+"){0,200})?",M=new Set([..."aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),..."бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),..."qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((e=>"xn--"+e))]),N=[...M].reduce(((e,n)=>Math.max(e,n.length)),0),S=`${x}a-zA-Zа-яА-ЯёіјєїґўЁІЈЄЇҐЎ’`,R="(?:&#(?:19[2-9]|(?:[2-9]|1[0-3])[0-9][0-9]);?)",A=`(?:[${S}]|${R})`,T=`(?:[${S}_\\d]|${R})`},468336:(e,n,t)=>{"use strict";t.d(n,{getFirstEmojiFromString:()=>a,getLengthWithEmoji:()=>s,hasEmoji:()=>c,toTextAndEmojiChunks:()=>o});var r=t(504698),i=t(89131);function o(e){return r.fromClientText(e).reduce(((e,n,t)=>{var i;const o=e[t-1],a="Emoji"===n.kind?{kind:"Emoji",text:n.text}:{kind:"Text",text:r.toRawText([n])};return"Text"===a.kind&&"Text"===(null==(i=o)?void 0:i.kind)?o.text+=a.text:e.push(a),e}),[])}function a(e){const n=r.fromClientText(e).find((e=>"Emoji"===e.kind));if(n)return n.text}function s(e){return o(e).reduce(((e,n)=>{switch(n.kind){case"Text":return e+n.text.length;case"Emoji":return e+1;default:return(0,i.exhaustivenessCheck)(n)}}),0)}function c(e){return r.fromClientText(e).some((e=>"Emoji"===e.kind))}},89131:(e,n,t)=>{"use strict";t.d(n,{RetryTimeout:()=>l,clamp:()=>j,createDeferredPromise:()=>T,debounce:()=>d,escapeRegex:()=>I,exhaustivenessCheck:()=>a,formatDuration:()=>g,formatFileSize:()=>p,getDateDayStart:()=>y,getFirstLetter:()=>A,getRandomFloat:()=>S,getRandomInt:()=>N,isDeepEqual:()=>x,isDev:()=>o,isNonEmptyArray:()=>m,isSameDate:()=>v,isSameMonth:()=>b,isSameYear:()=>k,isShallowEqual:()=>E,isTruthy:()=>h,isValidPhoneNumber:()=>P,noop:()=>w,parseRootMargin:()=>U,safeDecodeURI:()=>M,shuffleArray:()=>R,sleep:()=>s,throttle:()=>u,toNonEmpty:()=>f,words:()=>_});var r=t(11010),i=t(468336);const o=!1;function a(e){throw new Error("Exhaustivness failure! This should never happen.")}function s(e){return c.apply(this,arguments)}function c(){return(c=(0,r._)((function*(e){return new Promise((n=>{setTimeout(n,e)}))}))).apply(this,arguments)}function d(e,n,t){let r=null;const i=()=>{null!==r&&(window.clearTimeout(r),r=null)},o=(...o)=>{const a=t&&!r;i(),r=window.setTimeout((()=>{r=null,t||e(...o)}),n),a&&e(...o)};return o.cancel=i,o}function u(e,n,t){let r=!1,i=null;return(...o)=>{r?i=o:(r=!0,t?i=o:e(...o),setTimeout((()=>{r=!1,i&&(e(...i),i=null)}),n))}}class l{constructor(e,n){this.delay=()=>this.timeout,this.attempts=()=>this.retries,this.backoff=()=>{this.timeout=Math.min(2*this.timeout,this.maxTimeout),this.retries++},this.reset=()=>{this.timeout=this.minTimeout,this.retries=0},this.minTimeout=e,this.maxTimeout=n,this.timeout=e,this.retries=0}}function f(e){return e.length>0?e:null}function m(e){return void 0!==e[0]}function h(e){return!!e}function p(e){return e>Math.pow(1024,3)?Number((e/Math.pow(1024,3)).toFixed(2))+" GB":e>Math.pow(1024,2)?Number((e/Math.pow(1024,2)).toFixed(1))+" MB":Math.round(e/1024)+" KB"}function g(e,n){e||(e=0),e=Math.abs(e);const t=Math.floor(e/3600).toString(),r=(Math.floor(e/60)%60).toString(),i=(e%60).toString().padStart(2,"0");return e>=3600||n?[t,r.padStart(2,"0"),i].join(":"):[r.padStart(1,"0"),i].join(":")}function v(e,n){return e=new Date(e),n=new Date(n),e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function b(e,n){return e=new Date(e),n=new Date(n),e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function k(e,n){return e=new Date(e),n=new Date(n),e.getFullYear()===n.getFullYear()}function y(e){const n=new Date(e);return n.setHours(0,0,0,0),n.getTime()}function w(){}function _(e){return e.split(/\s/)}function C(e,n,t){if(e===n)return!0;if(e!=e&&n!=n)return!0;const r=e=>"object"!=typeof e||null===e,i=(e,n)=>"deep"===t?C(e,n,"deep"):Object.is(e,n);if(r(e)||r(n))return e===n;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;if(Array.isArray(e)){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(!i(e[t],n[t]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(let t of e.entries()){const e=t[0];if(!r(e))throw new Error("isDeepEqual can't compare Maps with non primitive keys");if(!n.has(e))return!1}for(let t of e.entries())if(!i(t[1],n.get(t[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(let t of e.entries()){const e=t[0];if(!r(e))throw new Error("isDeepEqual can't compare Sets with non primitive values");if(!n.has(e))return!1}return!0}const t=Object.keys(e);if(t.length!==Object.keys(n).length)return!1;for(const e of t)if(!Object.prototype.hasOwnProperty.call(n,e))return!1;for(const r of t)if(!i(e[r],n[r]))return!1;return!0}throw new Error(`isEqual don't know how to compare: ${e} and ${n}`)}function x(e,n){return C(e,n,"deep")}function E(e,n){return C(e,n,"shallow")}const I=e=>e?e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1"):"";function M(e){try{return decodeURIComponent(e)}catch(n){return e}}function N(e,n){return Math.floor(Math.random()*(n-e+1)+e)}function S(e,n){return Math.random()*(n-e)+e}function R(e){const n=[...e];for(let e=n.length-1;e>0;e--){const t=N(0,e),r=n[e];n[e]=n[t],n[t]=r}return n}function A(e){const[n]=(0,i.toTextAndEmojiChunks)(e);if(!n)return"";switch(n.kind){case"Text":return(n.text[0]||"").toUpperCase();case"Emoji":return n.text;default:return a()}}function T(){let e=Promise.resolve,n=Promise.reject;const t=new Promise(((t,r)=>{e=t,n=r}));return t.resolve=e,t.reject=n,t}function P(e){const n=e.trim();return/^\+?(\d{10,18}|\d{1,5}([\s-]?(\(\d{1,3}\)|\d{1,4})){1,4})$/.test(n)}function j(e,n,t){return Math.min(t,Math.max(n,e))}const U=e=>e?e.toString().split(" ").map((e=>`${parseInt(e)}px`)).join(" "):void 0},732052:(e,n,t)=>{"use strict";e.exports=t.p+"527e411af63d1c98f4e0.wasm"}}]);try{stManager.done("dist/3fc6dcdb2df4dfe047d9b87f7365f63e.74a250772c06d83961ff.js")}catch(e){}