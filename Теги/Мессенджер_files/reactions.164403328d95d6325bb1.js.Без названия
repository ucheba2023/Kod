(()=>{"use strict";var e,t,n,o,r,i,s,a={58255:(e,t,n)=>{n.d(t,{default:()=>r});var o=n(111132);function r(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,n)=>{function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>o})},374277:(e,t,n)=>{function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function r(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>r})},376125:(e,t,n)=>{n.d(t,{default:()=>o});const o={root:"BadgesEntrypoint-module__root--irU6C",separatorWrapper:"BadgesEntrypoint-module__separatorWrapper--YS6lL",separator:"BadgesEntrypoint-module__separator--oIIFM"}},429697:(e,t,n)=>{n.d(t,{default:()=>f});var o=n(487462),r=n(263366),i=n(894578),s=n(58255),a=n(374277),l=n(667294),c=n(696630),u=n(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},p=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var o=t.resolveArguments(e,n),r=o[0],i=o[1];t.removeClasses(r,"exit"),t.addClass(r,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=t.resolveArguments(e,n),r=o[0],i=o[1]?"appear":"enter";t.addClass(r,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=t.resolveArguments(e,n),r=o[0],i=o[1]?"appear":"enter";t.removeClasses(r,i),t.addClass(r,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,r=o?""+(o&&n?n+"-":"")+e:n[e];return{baseClassName:r,activeClassName:o?r+"-active":n[e+"Active"],doneClassName:o?r+"-done":n[e+"Done"]}},t}(0,i.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&r&&(o+=" "+r),"active"===n&&e&&(0,u.forceReflow)(e),o&&(this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))}(e,o))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,r=n.active,i=n.done;this.appliedClasses[t]={},o&&d(e,o),r&&d(e,r),i&&d(e,i)},n.render=function(){var e=this.props,t=(e.classNames,(0,r.default)(e,["classNames"]));return l.createElement(c.default,(0,o.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);p.defaultProps={classNames:""},p.propTypes={};const f=p},696630:(e,t,n)=>{n.d(t,{default:()=>h});var o=n(263366),r=n(894578),i=n(667294),s=n(973935),a=n(806035),l=n(500220),c=n(559391),u="unmounted",d="exited",p="entering",f="entered",v="exiting",m=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var r,i=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?i?(r=d,o.appearStatus=p):r=f:r=t.unmountOnExit||t.mountOnEnter?u:d,o.state={status:r},o.nextCallback=null,o}(0,r.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==f&&(t=p):n!==p&&n!==f||(t=v)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&(0,c.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,o=this.context?this.context.isMounting:e,r=this.props.nodeRef?[o]:[s.findDOMNode(this),o],i=r[0],l=r[1],c=this.getTimeouts(),u=o?c.appear:c.enter;!e&&!n||a.default.disabled?this.safeSetState({status:f},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,l),this.safeSetState({status:p},(function(){t.props.onEntering(i,l),t.onTransitionEnd(u,(function(){t.safeSetState({status:f},(function(){t.props.onEntered(i,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!a.default.disabled?(this.props.onExit(o),this.safeSetState({status:v},(function(){e.props.onExiting(o),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),o=null==e&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=r[0],a=r[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(l.default.Provider,{value:null},"function"==typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},t}(i.Component);function g(){}m.contextType=l.default,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},m.UNMOUNTED=u,m.EXITED=d,m.ENTERING=p,m.ENTERED=f,m.EXITING=v;const h=m},500220:(e,t,n)=>{n.d(t,{default:()=>o});const o=n(667294).createContext(null)},806035:(e,t,n)=>{n.d(t,{default:()=>o});const o={disabled:!1}},559391:(e,t,n)=>{n.d(t,{forceReflow:()=>o});var o=function(e){return e.scrollTop}},580301:(e,t,n)=>{n.d(t,{useEventListenerOnRef:()=>r});var o=n(667294);const r=(e,t,n)=>{(0,o.useLayoutEffect)((()=>{const{current:o}=e;if(o)return o.addEventListener(t,n,{passive:!0}),()=>{o.removeEventListener(t,n)}}),[e.current])}},799695:(e,t,n)=>{n.d(t,{useOnClickOutside:()=>r});var o=n(667294);const r=(e,t)=>{(0,o.useEffect)((()=>{const n=n=>{!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",n,{passive:!0}),document.addEventListener("touchstart",n,{passive:!0}),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},419328:(e,t,n)=>{n.d(t,{makePendingRequestState:()=>o});const o=(e={})=>{const t=Object.create(null);return{cancel:e=>{var n;null==(n=t[e])||n.abort(),delete t[e]},register:(n,o)=>{var r;const i=t[n],s=(e=>{var n;return void 0!==(null==(n=t[e])?void 0:n.throttleTimerId)})(n);if(i){if(s)return!1;console.warn(`Reactions pending request for key '${n}' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()`),i.abort()}let a;t[n]={abort:o},void 0!==(null==(r=e)?void 0:r.throttleMs)&&(a=((e,n)=>{const o=t[e];if(!o)return;o.throttleTimerId&&window.clearTimeout(o.throttleTimerId);const r=window.setTimeout((()=>{const n=t[e];n&&(n.throttleTimerId=void 0)}),n);return o.throttleTimerId=r,r})(n,e.throttleMs));return()=>{var e;(null==(e=t[n])?void 0:e.abort)===o&&delete t[n],window.clearTimeout(a)}}}}},849307:(e,t,n)=>{var o,r,i,s=n(412818);(null==(r=window.vk)||null==(o=r.pe)?void 0:o.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(n.p=window.vk.stDomain+"/dist/"),window.Reactions=s.ReactionsEntryGlobal,(0,s.init)();try{window.stManager.done(window.jsc("web/reactions.js"))}catch(e){}},424952:(e,t,n)=>{n.d(t,{BadgesEntrypointSkeleton:()=>s});var o=n(785893),r=n(444972),i=n(238071);const s=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Separator,{}),(0,o.jsx)(r.Skeleton,{circle:!0,width:36,height:36})]})},238071:(e,t,n)=>{n.d(t,{Separator:()=>i});var o=n(785893),r=n(376125);const i=()=>(0,o.jsx)("div",{className:r.default.separatorWrapper,children:(0,o.jsx)("div",{className:r.default.separator})})},409549:(e,t,n)=>{n.d(t,{LazyBadgesEntryPoint:()=>c});var o=n(434788),r=n(785893),i=n(667294),s=n(895145),a=n(424952);const l=(0,s.asyncComponent)((()=>Promise.all([n.e(98066),n.e(24509),n.e(68592),n.e(14622),n.e(6787),n.e(12636),n.e(31902)]).then(n.bind(n,620209))),(({BadgesEntrypoint:e})=>e)),c=e=>(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(a.BadgesEntrypointSkeleton,{}),children:(0,r.jsx)(l,(0,o._)({},e))})},536943:(e,t,n)=>{n.d(t,{ReactionImage:()=>a});var o=n(785893),r=n(667294),i=n(396849),s=n(659397);const a=(0,r.forwardRef)((({animationURL:e,isPlaying:t,image:n,loadAnimationParams:a},l)=>{const c=(0,r.useRef)(null),{isAnimationReady:u}=(0,i.useReactionAnimation)({animationElem:c,animationURL:e,play:t,loadAnimationParams:a}),d=u&&t;return(0,o.jsx)("div",{className:"ReactionImage",style:{backgroundImage:!d&&n?`url(${n})`:void 0},ref:l,children:(0,o.jsx)("div",{className:(0,s.classNames)("ReactionImage__animationContainer",{"ReactionImage__animationContainer--hidden":!d}),ref:c})})}))},418559:(e,t,n)=>{n.d(t,{PreloadImages:()=>i});var o=n(249823),r=n(667294);const i=(0,r.memo)((function({imageURLs:e}){return(0,r.useEffect)((()=>{Promise.all(e.map((e=>(0,o.preloadImage)(e)))).catch((()=>{}))}),[e]),null}))},858789:(e,t,n)=>{n.d(t,{ReactedUsersStack:()=>a,stackConfigForVisibleCount:()=>l,userPhotoStub:()=>s});var o=n(785893),r=n(659397),i=n(82161);const s={kind:"stub"};function a({photos:e,size:t,totalCount:n,visibleCount:s}){const a=null!=n?n:e.length;let l=Math.min(e.length,s);a===l+1&&e.length>=l+1&&(l+=1);let c=Math.max(0,a-l),u=c>0;const d=e.slice(0,l),p=(0,i.formatCount)(c);return(0,o.jsx)("div",{className:(0,r.classNames)("ReactedUsersStack",`ReactedUsersStack--size-${t}`,{"ReactedUsersStack--others":u}),children:(0,o.jsxs)("div",{className:"ReactedUsersStack__photos",role:"presentation",children:[d.map(((e,t)=>function(e){return"profile"===e.kind}(e)?(0,o.jsx)("div",{className:"ReactedUsersStack__photo",role:"img",style:{backgroundImage:`url(${e.imageURL})`},title:e.title},t):function(e){return"stub"===e.kind}(e)?(0,o.jsx)("div",{role:"img",className:"ReactedUsersStack__photo ReactedUsersStack__photo--stub"},t):null)),u&&(0,o.jsx)("div",{className:"ReactedUsersStack__photo ReactedUsersStack__photo--others","aria-hidden":"true",dangerouslySetInnerHTML:{__html:`+${p}`}})]})})}function l(e){const t=e+1;return{maxStackItems:t,visibleCount:e,stubItemsForPhotos:e=>Math.min(e,t)}}},820161:(e,t,n)=>{n.d(t,{Reaction:()=>c});var o=n(785893),r=n(953908),i=n(659397),s=n(249917),a=n(731262),l=n(536943);const c=({animationURL:e,image:t,isOpenedDefault:n,onMouseEnter:c,onReactionClick:u,reactionId:d,reactionTitle:p})=>{const f=(0,a.useReactedUsersConfig)(d),v=()=>{var e;null==(e=u)||e(d)};return(0,o.jsxs)("div",{className:(0,i.classNames)("Reaction",{"Reaction--openedDefault":n&&f.shouldShowReactedUsers}),onClick:e=>{v(),e.stopPropagation()},onKeyDown:e=>{[r.KEY.RETURN,r.KEY.SPACE].includes(e.keyCode)&&(v(),e.stopPropagation())},onMouseEnter:c,tabIndex:0,role:"button","aria-label":p||void 0,children:[(0,o.jsx)("div",{className:"Reaction__hoverArea"}),(0,o.jsx)("div",{className:"Reaction__title",children:(0,o.jsx)(s.ReactionTitle,{reactedUsersConfigResult:f,reactionId:d,title:p})}),(0,o.jsx)("div",{className:"Reaction__image",children:(0,o.jsx)(l.ReactionImage,{isPlaying:!0,image:t,animationURL:e})})]})}},249917:(e,t,n)=>{n.d(t,{ReactionTitle:()=>a});var o=n(785893),r=n(667294),i=n(659397),s=n(763832);const a=({reactedUsersConfigResult:e,reactionId:t,title:n})=>{const a=(0,r.useRef)(null),{reactedUsersConfig:l,shouldShowReactedUsers:c}=e;return(0,o.jsxs)("div",{className:(0,i.classNames)("ReactionTitle",{"ReactionTitle--withUsers":c}),ref:a,children:[(0,o.jsx)("div",{className:"ReactionTitle__name",children:n}),(0,o.jsx)("div",{className:(0,i.classNames)({"ReactionTitle__reactedUsers--visible":c}),children:(0,o.jsx)(s.ReactionsMenuReactedUsersPreview,{parentClickContainerRef:a,reactedUsersConfig:l,reactionId:t})})]})}},674953:(e,t,n)=>{n.d(t,{ReactionsMenu:()=>f});var o=n(785893),r=n(667294),i=n(659397),s=n(953908),a=n(820161),l=n(921881),c=n(805827),u=n(32375),d=n(216833),p=n(409549);const f=(0,r.forwardRef)((function({close:e,currentReactionId:t,onReactionChoose:n,position:f=l.PopperVerticalPosition.TOP,reactionsOptions:v,onMouseEnter:m,onMouseLeave:g,badgesProps:h},b){var E;const R=(0,c.useReactionMenuConfig)(),C=f===l.PopperVerticalPosition.TOP?null==(E=R)?void 0:E.openedDefaultReactionId:void 0,[y,_]=(0,r.useState)(C),k=(0,r.useCallback)((t=>{var n;t.keyCode===s.KEY.ESC&&(null==(n=e)||n())}),[]),w=(0,r.useCallback)((()=>{_(void 0)}),[]);return(0,o.jsx)("div",{className:(0,i.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":f===l.PopperVerticalPosition.TOP,"ReactionsMenu--extraHoverAreaToBottom":f===l.PopperVerticalPosition.BOTTOM}),onKeyDown:k,onMouseEnter:m,onMouseLeave:g,ref:b,children:(0,o.jsxs)("div",{className:"ReactionsMenu__inner",children:[v.items.map((e=>(0,o.jsx)(a.Reaction,{animationURL:e.animationURL,image:e.imageMenuURL,isOpenedDefault:e.id===y,isSelected:e.id===t,onMouseEnter:w,onReactionClick:n,reactionId:e.id,reactionTitle:e.title},e.id))),(0,d.isBadgesEnabled)()&&(0,u.verifyPayloadForBadges)(h)&&(0,o.jsx)(p.LazyBadgesEntryPoint,{onClick:e,badgesProps:h})]})})}))},40165:(e,t,n)=>{n.d(t,{ReactionsMenuContextProvider:()=>c,useReactionsMenuContext:()=>l});var o=n(434788),r=n(785893),i=n(667294),s=n(921414);const a=(0,i.createContext)({currentReactionId:void 0,likeObjectId:void 0,reactedUsers:s.REMOTE_RESOURCE_STATE_CONTEXT_STUB,reactedUsersCounts:void 0,titleVariant:void 0,triggerClose:()=>{}}),l=()=>(0,i.useContext)(a),c=({value:e,children:t})=>{const n=(0,s.useRemoteResource)();return(0,r.jsx)(a.Provider,{value:(0,o._)({},e,{reactedUsers:n}),children:t})}},763832:(e,t,n)=>{n.d(t,{ReactionsMenuReactedUsersPreview:()=>d});var o=n(785893),r=n(667294),i=n(198508),s=n(858789),a=n(40165),l=n(580301),c=n(731262);const u="s";function d({parentClickContainerRef:e,reactionId:t,reactedUsersConfig:n}){const{likeObjectId:d,triggerClose:p}=(0,a.useReactionsMenuContext)(),f=(0,r.useCallback)((function(e){var o;if(e.stopPropagation(),!d)throw new Error("ReactionTitle: unable to open reacted modal, missing object id");(null==(o=n)?void 0:o.hasSomeReactions)&&(p(),(0,i.showReactedModal)(t,d))}),[]);return(0,l.useEventListenerOnRef)(e,"click",f),(0,o.jsx)("div",{className:"ReactionsMenuReactedUsersPreview",children:n&&n.userPhotos?(0,o.jsx)(s.ReactedUsersStack,{visibleCount:c.visibleCount,totalCount:n.totalPhotosCount,photos:n.userPhotos,size:u}):null})}},976873:(e,t,n)=>{n.d(t,{ReactionsMenuStateContainer:()=>i});var o=n(785893),r=n(40165);const i=({children:e,contextValue:t})=>(0,o.jsx)(r.ReactionsMenuContextProvider,{value:t,children:e})},705967:(e,t,n)=>{n.d(t,{getUsersForReactionId:()=>r,isTitleVariantWithUsers:()=>i});var o=n(282795);function r(e,t){var n;const o=null==(n=e.byReactionId)?void 0:n[t];if(void 0!==o)return o}function i(e){return e===o.TitleVariantWithLikedUsers}},731262:(e,t,n)=>{n.d(t,{useReactedUsersConfig:()=>d,visibleCount:()=>u});var o=n(40165),r=n(858789),i=n(880549),s=n(282795),a=n(705967),l=n(822715);const{stubItemsForPhotos:c,visibleCount:u}=(0,r.stackConfigForVisibleCount)(3);function d(e){var t;const{currentReactionId:n,reactedUsers:{valueMaybeStale:u}}=(0,o.useReactionsMenuContext)(),d=function(e){const{titleVariant:t=s.TITLE_VARIANT_DEFAULT,reactedUsers:{valueMaybeStale:n},reactedUsersCounts:r}=(0,o.useReactionsMenuContext)();if(!(0,a.isTitleVariantWithUsers)(t))return;return function(e,t,n){const o=t?(0,a.getUsersForReactionId)(t,e):void 0;if(o)return{kind:"reacted_users",reactedUsersForReaction:o};const r=n?(0,l.counterForReactionId)(n,e):void 0;if(r&&r>0)return{kind:"count_only_stub",counter:r};return}(e,n,r)}(e);let f,v;if(d&&"reacted_users"===d.kind&&d.reactedUsersForReaction.users){var m;let{reactedUsersForReaction:{users:t=[],totalCount:o}}=d;const r=(0,i.withCurrentUser)(t,o,e,n,null==(m=u)?void 0:m.currentUser);o=r.totalCount,t=r.users,v=null!=o?o:t.length,f=t.map(p)}else if(d&&function(e){return"count_only_stub"===e.kind}(d)){var g;let t=d.counter;const o=(0,i.withCurrentUser)([],t,e,n,null==(g=u)?void 0:g.currentUser);t=o.totalCount;const s=o.users;t&&(v=t,f=[...s.map(p),...Array.from({length:c(t)},(()=>r.userPhotoStub))])}else{var h;const t=(0,i.withCurrentUserAddedOnly)(e,n,null==(h=u)?void 0:h.currentUser);v=t.totalCount,f=t.users.map(p)}var b;v=null!=(b=null!=v?v:null==(t=f)?void 0:t.length)?b:0;const E=Boolean(v&&v>0);return E?{shouldShowReactedUsers:!0,reactedUsersConfig:{hasSomeReactions:E,totalPhotosCount:v,userPhotos:f}}:{shouldShowReactedUsers:!1,reactedUsersConfig:void 0}}function p(e){return{kind:"profile",imageURL:e.ownerImageURL,title:e.ownerName}}},880549:(e,t,n)=>{n.d(t,{useReactedUsersPreview:()=>f,withCurrentUser:()=>g,withCurrentUserAddedOnly:()=>h});var o=n(11010),r=n(434788),i=n(822715),s=n(647434),a=n(512637),l=n(705967),c=n(40165),u=n(851793),d=n(667294),p=n(991059);function f({attemptRefetch:e}){const{likeObjectId:t,titleVariant:n,reactedUsers:r}=(0,c.useReactionsMenuContext)(),{counts:i}=(0,u.useReactionsGlobalStateForObject)(t,{payloadIsSuitable:v}),[p,f]=(0,d.useState)(!1);(0,d.useEffect)((()=>{i&&f(!0)}),[i]),(0,d.useEffect)((()=>{if(!t||!(0,l.isTitleVariantWithUsers)(n))return;function i(){return(i=(0,o._)((function*(){if(!t)return;p&&f(!1),r.setLoading(!0);const e=(0,s.requestGetReacted)(t);try{const t=function(e){const{reactedMenuStats:t}=e;if(!t)return;let n;const{byReactionId:o}=t;if(o){n={};for(const[e,t]of Object.entries(o)){var r,i,s;n[e]={totalCount:null!=(i=t.totalCount)?i:void 0,users:null!=(s=null==(r=t.users)?void 0:r.map((e=>m(e))))?s:void 0}}}const a=t.currentUser?m(t.currentUser):t.currentUser;return{byReactionId:n,currentUser:a}}(yield e.promise);if(!t){const e=new Error("useReactedUsersTooltip: failed to transform response");return(0,a.isDebugEnabled)()&&console.error(e),void r.setFailed(e)}r.setLoaded(t)}catch(e){r.setFailed(e)}}))).apply(this,arguments)}e&&("initial"===r.resource.kind||"loading"!==r.resource.kind&&p)&&function(){i.apply(this,arguments)}()}),[n,t,p,e])}function v(e){return"counts_only"===e.kind||!0===e.isQueueUpdate}function m(e){return(0,r._)({},e,{ownerName:e.ownerName?(0,p.stringWithHTMLEntitiesDecode)(e.ownerName):void 0})}function g(e,t,n,o,r){const s=null!=t?t:0,a=window.vk.id;if((0,i.isReactionIdSet)(o)&&o===n&&r){var l;const t=function(e,t,n,o,r){if(!r)return;const{ownerImageURL:i,ownerName:s}=r;if(!i)return;if(n.find((t=>t.ownerId===e)))return;return{currentUser:{ownerId:e,ownerImageURL:i,ownerName:s},totalCount:o+1}}(a,0,e,s,r);if(null==(l=t)?void 0:l.currentUser){const n={ownerId:t.currentUser.ownerId,ownerImageURL:t.currentUser.ownerImageURL,ownerName:t.currentUser.ownerName};return{totalCount:t.totalCount,users:[n].concat(e||[])}}}else if((0,i.isReactionIdUnset)(o)||o!==n){const t=function(e,t,n,o){const r=n&&n.filter((t=>t.ownerId!==e)),i=r&&n&&r.length<n.length;if(i)return{totalCount:i?o-1:o,users:r}}(a,0,e,s);if(t)return{totalCount:t.totalCount,users:t.users}}return{totalCount:s,users:e}}function h(e,t,n){return g([],0,e,t,n)}},396849:(e,t,n)=>{n.d(t,{useReactionAnimation:()=>l});var o=n(11010),r=n(434788),i=n(667294),s=n(666734),a=n(143790);const l=({animationElem:e,animationURL:t,play:n=!0,loadAnimationParams:l})=>{const c=(0,i.useRef)(null),[u,d]=(0,i.useState)((()=>t&&(0,s.animationItemHasData)(t)));return(0,i.useEffect)((()=>{if(!t)return void(c.current=null);if(!e.current)return void console.error(new Error("Missing animation container"));let n=()=>{};return(0,o._)((function*(){e.current&&(c.current=yield(0,s.getAnimationAsync)(t,e.current,{loadAnimationParams:(0,r._)({autoplay:!0},l)}),n=()=>{d(!0)},(0,a.onAnimationReady)(c.current,n))}))(),()=>{var e,t;!c.current||!c.current._cbs||(null==(e=c.current)||e.removeEventListener("DOMLoaded",n),null==(t=c.current)||t.destroy());d(!1),c.current=null}}),[t,e]),(0,i.useEffect)((()=>{var e,t;u&&(n?null==(e=c.current)||e.play():null==(t=c.current)||t.stop())}),[n,u]),{isAnimationReady:u}}},445031:(e,t,n)=>{n.d(t,{useReactionMenuSet:()=>i});var o=n(667294),r=n(908088);const i=e=>(0,o.useMemo)((()=>(0,r.getReactionSet)(e)),[e])},851793:(e,t,n)=>{n.d(t,{useReactionsGlobalStateForObject:()=>l,useReactionsGlobalUpdateEventsForObject:()=>c});var o=n(667294),r=n(822715),i=n(505426),s=n(693982),a=n(249823);function l(e,{payloadIsSuitable:t}={}){const[n,i]=(0,o.useState)(void 0),s=(0,a.usePreviousRef)(n);return c(e,(0,o.useCallback)((function(e){var n;t&&!t(e)||e.counts&&!(0,r.areCountersEqual)(e.counts,null!=(n=s.current)?n:void 0)&&i(e.counts)}),[e])),{counts:n}}function c(e,t){!function({onAnyPostCountsAnyUpdate:e}){(0,o.useEffect)((()=>(0,i.registerNonGlobalNonUniqueListener)(i.WallDataEvents.post_reactions_counts_update,e)),[e])}({onAnyPostCountsAnyUpdate:(0,o.useCallback)((function(n){(0,s.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},921414:(e,t,n)=>{n.d(t,{REMOTE_RESOURCE_STATE_CONTEXT_STUB:()=>i,useRemoteResource:()=>l});var o=n(667294);const r={kind:"initial"},i={valueMaybeStale:void 0,value:void 0,reset:()=>{},setFailed:()=>{},setLoaded:()=>{},setLoading:()=>{},resource:r};function s(e){if("value"in e&&void 0!==e.value)return e.value}function a(e){const t=s(e);return void 0!==t?t:"staleValue"in e&&void 0!==e.staleValue?e.staleValue:void 0}function l(){const[e,t]=(0,o.useState)(r);return{valueMaybeStale:a(e),value:s(e),resource:e,setFailed:(0,o.useCallback)(((e,n=!1)=>{t((t=>({kind:"failed",error:e,staleValue:n?a(t):void 0})))}),[]),setLoaded:(0,o.useCallback)((e=>{t({kind:"loaded",value:e})}),[]),setLoading:(0,o.useCallback)(((e=!1)=>{t((t=>({kind:"loading",staleValue:e?a(t):void 0})))}),[]),reset:(0,o.useCallback)((()=>{t((()=>r))}),[])}}},753566:(e,t,n)=>{n.d(t,{ReactionsMenuButton:()=>g});var o=n(785893),r=n(667294),i=n(512637),s=n(805827),a=n(123799),l=n(418559),c=n(655154),u=n(674953),d=n(445031),p=n(407089),f=n(577698),v=n(976873),m=n(32375);const g=({objectId:e,onReactionChoose:t,reactionButtonContainerElem:n,reactionHiddenButtonContainerElem:g,reactionIdInitial:h,reactionSetId:b,reactionsCounts:E,styleVariant:R,triggerMouseenterOnInitial:C,titleVariant:y})=>{var _,k;const{isAllowedReenter:w,tooltipVisibility:S,triggerClose:T}=(0,a.useTooltipVisibility)(),[P,x]=(0,r.useState)(h);(0,r.useEffect)((()=>{const t=[(0,c.addReactionChooseListener)(e,(()=>{T()})),(0,c.addDataUpdateListener)(e,(e=>{x(e.currentReactionId)}))];return()=>{t.forEach((e=>{e()}))}}),[]);const I=(0,d.useReactionMenuSet)(b),U=(0,s.useReactionMenuConfig)();var M;const O=(0,r.useMemo)((()=>{var e;return null!=(M=null==(e=I)?void 0:e.items.map((e=>e.imageMenuURL)))?M:[]}),[null==(_=I)?void 0:_.id]);(0,r.useEffect)((()=>{var e;I&&void 0!==P&&!(null==(e=I.items)?void 0:e.find((e=>e.id===P)))&&console.warn(`Current reaction ID ${P} is not found in set '${b}'`)}),[I]);if(!I)return console.warn(`ReactionsMenuButton init error, unavailable reaction set: ${b}`),null;const A={close:T,currentReactionId:P,onReactionChoose:e=>{(T(),e!==P)&&t(e)},reactionsOptions:I,badgesProps:(0,m.reactionsElemPayloadForBadges)(n)},j={currentReactionId:P,likeObjectId:e,reactedUsersCounts:E,titleVariant:y,triggerClose:T};return(0,o.jsxs)(v.ReactionsMenuStateContainer,{contextValue:j,children:[(0,o.jsx)(p.ReactionsMenuTooltip,{delayShow:null==(k=U)?void 0:k.menuShowDelay,getAttachElem:e=>{if(!e)return;const t=(0,f.getClosestLikeBtnContainerElem)(e);return t||(0,i.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t},isAllowedReenter:w,popup:u.ReactionsMenu,popupProps:A,reactionButtonContainer:n,reactionHiddenButtonContainer:g,styleVariant:R,triggerMouseenterOnInitial:C,visibility:S}),(0,o.jsx)(l.PreloadImages,{imageURLs:O})]})}},407089:(e,t,n)=>{n.d(t,{ReactionsMenuTooltip:()=>m});var o=n(434788),r=n(785893),i=n(667294),s=n(59985),a=n(880549),l=n(249823),c=n(310707),u=n(544311),d=n(123799),p=n(746257);const f=["--post-padding-lr"],v=()=>document.createElement("div"),m=({getAttachElem:e,initialIsOpen:t=!1,isAllowedReenter:n,reactionButtonContainer:m,reactionHiddenButtonContainer:g,popup:h,popupProps:b,delayHide:E=s.HIDE_TOOLTIP_TIMEOUT,delayShow:R=s.SHOW_TOOLTIP_TIMEOUT,onOpenStateChange:C,onPopperVisibilityChange:y,styleVariant:_,triggerMouseenterOnInitial:k=!0,visibility:w=d.TooltipVisibility.uncontrolled})=>{const S=void 0!==e,[T,P]=(0,i.useState)(t),x=w!==d.TooltipVisibility.uncontrolled,I=(0,l.usePrevious)(w),U=(0,i.useRef)(null),M=(0,i.useRef)(null),O=(0,i.useRef)(null);(0,a.useReactedUsersPreview)({attemptRefetch:T});const{style:A}=(0,p.useCSSVarsPropagation)({elementWithPropsRef:M,properties:f}),j=(0,i.useMemo)((()=>{var t;if(e)return e(null!=(t=O.current)?t:void 0)}),[e,O.current]),L=(0,i.useCallback)(((e,t)=>{!t&&x||P(e)}),[x]);(0,i.useEffect)((()=>{var e;null==(e=C)||e(T,O.current)}),[T]),(0,i.useEffect)((()=>{T&&n&&(n.current=d.IS_ALLOWED_REENTER_DEFAULT)}),[T]);const N=(0,u.useTooltipTrigger)({afterHide:L,afterShow:L,cancelCloseOnContentHover:n,delayHide:E,delayShow:R,ignoreMouseTriggers:x,popperPopupRef:U,reactionButtonContainer:m,reactionHiddenButtonContainer:g,triggerMouseenterOnInitial:k});return(0,i.useEffect)((()=>{if(x){const e=w===d.TooltipVisibility.opened;return e||N.cancelDelayedOpening(),void P(e)}T&&I===d.TooltipVisibility.opened&&P(!1)}),[w,x]),(0,r.jsx)(c.TransitionPopper,{attachTarget:j,isOpen:T,content:h,contentProps:(0,o._)({},b,N.contentProps),mode:"side",onPopperVisibilityChange:y,position:"t",popperContentStyle:A,popperPopupRef:U,ref:S?O:M,renderNodeFactory:v,styleVariant:_,children:(0,r.jsx)("div",{className:"ReactionsMenuButtonPopperReference"})})}},310707:(e,t,n)=>{n.d(t,{TransitionPopper:()=>f});var o=n(434788),r=n(820224),i=n(785893),s=n(667294),a=n(682615),l=n(429697),c=n(515190),u=n(921881),d=n(814833);const p={appear:150,enter:150,exit:150},f=(0,s.forwardRef)((function(e,t){var{attachTarget:n,isOpen:f=!1,content:v,contentProps:m,onPopperVisibilityChange:g,popperContentStyle:h,popperPopupRef:b,styleVariant:E}=e,R=(0,r._)(e,["attachTarget","isOpen","content","contentProps","onPopperVisibilityChange","popperContentStyle","popperPopupRef","styleVariant"]);const{isVisible:C,onEnter:y,onHidden:_}=(e=>{const[t,n]=(0,s.useState)(!!e);return{isVisible:!!e||t,onEnter:(0,s.useCallback)((()=>{n(!0)}),[]),onHidden:(0,s.useCallback)((()=>{n(!1)}),[])}})(f),k=(0,s.useRef)(null),w=(0,d.useCombinedRefs)(t,k);var S;const T=(0,u.usePopperTopAutoPosition)(null!=(S=k.current)?S:void 0,146,C),P=(()=>{const e=(0,s.useRef)(!0);return(0,s.useEffect)((()=>{e.current=!1}),[]),e.current})();(0,s.useEffect)((()=>{var e;P||null==(e=g)||e(C)}),[C]);const x=(0,a.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===E,"ReactionsMenuPopper--popperBottom":T===u.PopperVerticalPosition.BOTTOM,"ReactionsMenuPopper--popperTop":T===u.PopperVerticalPosition.TOP}),I=(0,i.jsx)(v,(0,o._)({},m,{position:T})),U=(0,i.jsx)(l.default,{appear:!0,in:f,classNames:"ReactionsMenuPopperTransition",onEnter:y,onExited:_,timeout:p,children:(0,i.jsx)("div",{className:x,ref:b,style:h,children:I})});return(0,i.jsx)(c.Popper,(0,o._)({},R,{align:"left",attachTarget:n,content:U,open:C,position:T,ref:w}))}))},746257:(e,t,n)=>{n.d(t,{useCSSVarsPropagation:()=>r});var o=n(667294);const r=({elementWithPropsRef:e,properties:t})=>(0,o.useMemo)((()=>{const n=e.current;if(!n)return{style:{}};const o=window.getComputedStyle(n),r={};return t.forEach((e=>{const t=o.getPropertyValue(e);t&&(r[e]=t)})),{style:r}}),[e.current,t])},921881:(e,t,n)=>{n.d(t,{PopperVerticalPosition:()=>o,usePopperTopAutoPosition:()=>s});var o,r=n(667294),i=n(759876);!function(e){e.BOTTOM="b",e.TOP="t"}(o||(o={}));const s=(e,t,n)=>(0,r.useMemo)((()=>((e,t)=>{if(!e)return"t";const n=(0,i.default)(e),o=window.pageYOffset||document.documentElement.scrollTop;return n.top-o<t?"b":"t"})(e,t)),[e,t,n])},805827:(e,t,n)=>{n.d(t,{useReactionMenuConfig:()=>i});var o=n(667294),r=n(908088);const i=()=>(0,o.useMemo)((()=>(0,r.getReactionConfig)()),[])},544311:(e,t,n)=>{n.d(t,{useTooltipTrigger:()=>i});var o=n(799695),r=n(667294);const i=({afterHide:e,afterShow:t,cancelCloseOnContentHover:n,delayHide:i=0,delayShow:s=0,ignoreMouseTriggers:a=!1,reactionButtonContainer:l,reactionHiddenButtonContainer:c,popperPopupRef:u,triggerMouseenterOnInitial:d})=>{const p=(0,r.useRef)(null),f=(0,r.useRef)(void 0),v=(0,r.useRef)(void 0),m=(0,r.useCallback)((()=>{var e;window.clearTimeout(null!=(e=f.current)?e:void 0)}),[]),g=(0,r.useCallback)((()=>{var e;m(),null==(e=t)||e(!1)}),[t]),h=(0,r.useCallback)((()=>{var e;m(),null==(e=t)||e(!0)}),[t]);(0,o.useOnClickOutside)(u,g),(0,r.useEffect)((()=>()=>{window.clearTimeout(f.current),window.clearTimeout(v.current)}),[]);const b=(0,r.useCallback)((t=>window.setTimeout((()=>{var t;null==(t=e)||t(!1)}),null!=t?t:0)),[e]),E=()=>{var e,t;(window.clearTimeout(null!=(e=v.current)?e:void 0),a)||(f.current=(t=s,window.setTimeout((()=>{h()}),null!=t?t:0)))},R=e=>{var t,n,o;if(window.clearTimeout(null!=(o=f.current)?o:void 0),a)return;e.relatedTarget instanceof HTMLElement&&(null==(n=p)||null==(t=n.current)?void 0:t.contains(e.relatedTarget))||(v.current=b(i))};(0,r.useEffect)((()=>{d&&E()}),[]),(0,r.useEffect)((()=>{var e,t,n;return null==(e=l)||e.addEventListener("mouseenter",E,{passive:!0}),null==(t=l)||t.addEventListener("mouseleave",R,{passive:!0}),null==(n=c)||n.addEventListener("click",E,{passive:!0}),()=>{var e,t,n;null==(e=l)||e.removeEventListener("mouseenter",E),null==(t=l)||t.removeEventListener("mouseleave",R),null==(n=c)||n.removeEventListener("click",E)}}),[l]);return{cancelDelayedOpening:m,contentProps:{ref:p,onMouseEnter:(0,r.useCallback)((()=>{var e,t;window.clearTimeout(null!=(t=v.current)?t:void 0),(null==(e=n)?void 0:e.current)&&h()}),[a,h]),onMouseLeave:(0,r.useCallback)((e=>{a||l&&e.target instanceof HTMLElement&&l.contains(e.target)||(v.current=b(i))}),[b,i,a,l])}}}},123799:(e,t,n)=>{n.d(t,{IS_ALLOWED_REENTER_DEFAULT:()=>i,TooltipVisibility:()=>o,useTooltipVisibility:()=>s});var o,r=n(667294);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(o||(o={}));const i=!0,s=()=>{const[e,t]=(0,r.useState)("uncontrolled"),n=(0,r.useRef)(i),o=(0,r.useCallback)((o=>{"closed"!==e&&(void 0!==o&&(n.current=o),t("closed"),window.setTimeout((()=>{t("uncontrolled")})))}),[]);return{isAllowedReenter:n,tooltipVisibility:e,setTooltipVisibility:t,triggerClose:o}}},189841:(e,t,n)=>{n.d(t,{reactionsButtonMount:()=>m});var o=n(785893),r=n(973935),i=n(198508),s=n(512637),a=n(32375),l=n(282795),c=n(753566),u=n(655154),d=n(225960),p=n(577698),f=n(321850);const v=d.ButtonStyleVariant.Post,m=(e,t={})=>{var n;if("__isMounted"in e)return;const d=(0,p.getLikeBtn)(e),m=(0,p.getHiddenLikeBtn)(e),g=(0,p.getMenuMount)(e);if(!d||!g)return void((0,s.isDebugEnabled)()&&console.error("Init reactions button failed",g,d));const h=(0,a.reactionsElemPayload)(d);if(!(null==(n=h)?void 0:n.objectRaw))return void((0,s.isDebugEnabled)()&&console.error("Init reactions button failed",h));const{counts:b,csrfHash:E,objectRaw:R,reactionSetId:C,styleVariant:y=v,userReactionId:_}=h;var k;const w=null!=(k=h.titleVariant)?k:l.TITLE_VARIANT_DEFAULT;null===E&&console.warn("Missing reactions csrf hash"),(0,s.isDebugEnabled)()&&console.log("Init reactions button",R,C);r.render((0,o.jsx)(c.ReactionsMenuButton,{objectId:R,onReactionChoose:e=>{const t=(0,a.reactionsElemPayload)(d);null!==E&&t&&((0,u.emitReactionChoose)(R),(0,i.reactionButtonSetReaction)(e,t.userReactionId,R,E,d))},reactionButtonContainerElem:d,reactionHiddenButtonContainerElem:m,reactionIdInitial:_,reactionSetId:C,reactionsCounts:b,styleVariant:y,titleVariant:w,triggerMouseenterOnInitial:!!t.isMouseenterEvent}),g),(0,f.pushNavDestroy)((function(){g&&(r.unmountComponentAtNode(g),delete e.__isMounted)})),e.__isMounted=!0}},198508:(e,t,n)=>{n.d(t,{reactionButtonSetReaction:()=>h,showReactedModal:()=>b});var o=n(434788),r=n(95432),i=n(192441),s=n(682951),a=n(898298),l=n(999237),c=n(72569),u=n(647434),d=n(512637),p=n(32375),f=n(249823),v=n(767176),m=n(809053);const g=(e,{counts:t,isFromWkLayer:n,isPrimaryLikeButtonClick:o,isUserAction:r=!1,objectRaw:i,previewVisibility:s,reactionId:a,suggestSubscribe:c})=>{(0,l.triggerReactionsUpdate)(i,t,{id:a},{isFromWkLayer:n,isPrimaryLikeButtonClick:o,isUserAction:r,previewVisibility:s,suggestSubscribe:c})},h=(e,t,n,r,s,l)=>{var h,b,E,R;if((0,d.isDebugEnabled)()&&console.log(`Change reaction for object ${n}: ${e}`),!(0,f.isValidEnvironment)())return;const C=(0,p.reactionsElemPayload)(s),y=null==(h=C)?void 0:h.counts,_=((e,t,n)=>{const r=(0,o._)({},e);return void 0!==t&&(r[t]=(r[t]||0)+1),void 0!==n&&(r[n]=Math.max(0,(r[n]||0)-1)),r})((null==(b=C)?void 0:b.counts)||(0,i.reactionCountsBrandWrap)({}),e,t),k=null==(E=l)?void 0:E.isPrimaryLikeButtonClick,w=(0,c.isWkLayerWallPostOpen)(),S=(0,a.previewVisibilityIntentForVariant)(null==(R=C)?void 0:R.previewVariant),T=(0,m.getTrackCodeFromPost)(s);g(0,{counts:_,isFromWkLayer:w,isPrimaryLikeButtonClick:k,isUserAction:!0,objectRaw:n,previewVisibility:S,reactionId:e}),(0,u.requestPostReactionSet)(e,n,r,{trackCode:T}).promise.then((t=>{var o;const r=(0,u.validateLikesChangeResponse)(t),i=null==(o=r)?void 0:o.userReaction;r&&void 0!==i&&g(0,{counts:r.counts,isFromWkLayer:w,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:S,reactionId:i.id,suggestSubscribe:r.suggestSubscribe});let s=n.replace("wall","post"),a=document.getElementById(s);if(a){let t=a.getAttribute("data-ad");if(t){let n=void 0===e?"unlike":"like";v.AdsEvents.register(n,t)}}}),(e=>{var o;(null==(o=e)?void 0:o.isAborted)||g(0,{counts:y,isFromWkLayer:w,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:S,reactionId:t})}))};function b(e,t){!function(e){(0,r.showWiki)({w:e},!1,void 0,{queue:1})}(`${s.WK_SECTION_PREFIX_REACTIONS}_${e}/${t}`)}},647434:(e,t,n)=>{n.d(t,{requestGetReacted:()=>o.requestGetReacted,requestPostReactionSet:()=>r.requestPostReactionSet,validateLikesChangeResponse:()=>r.validateLikesChangeResponse});var o=n(585386),r=n(913923)},585386:(e,t,n)=>{n.d(t,{requestGetReacted:()=>s});var o=n(434788),r=n(822715),i=n(363444);const s=e=>{const t={act:"reactions_get_reacted",object:e};return{promise:new Promise(((e,n)=>{i.ajax.post("/like.php",t,{onDone:t=>{const i=function(e){let t;if(!(0,r.isUnknownObject)(e))return t;const{reactedMenuStats:n}=e;n&&(t||(t={}),t=(0,o._)({},t,{reactedMenuStats:n}));return t}(t);if(!i){const e=new Error("requestGetReacted: Invalid response");return console.error(e,t),void n(e)}e(i)},onFail:e=>(n({err:e}),!1)})}))}}},991059:(e,t,n)=>{n.d(t,{stringWithHTMLEntitiesDecode:()=>i});var o=n(640971),r=n(659397);const i=e=>(0,r.decodeHTMLEntities)((0,o.unwrap)(e));o.unwrap},913923:(e,t,n)=>{n.d(t,{requestPostReactionSet:()=>d,validateLikesChangeResponse:()=>p});var o=n(419328),r=n(822715),i=n(363444),s=n(383320),a=n(584356),l=n(682951),c=n(878021);const u=(0,o.makePendingRequestState)(),d=(e,t,n,o)=>{var r,l,d,p;(null==(p=null==(r=o)?void 0:r.abortPendingRequests)||p)&&u.cancel(t);const f={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:null==(l=window.Likes)?void 0:l._getReference(t),track_code:null==(d=o)?void 0:d.trackCode},v=new s.AjaxCancellationToken,m=new Promise(((e,t)=>{const n=i.ajax.post("like.php",f,{cancellationToken:v,onDone:n=>{var o,r;if(null==(o=n)?void 0:o.unauth_action_box)return c.UnauthActionBox.show(n.unauth_action_box),void t();(null==(r=n)?void 0:r.done_box)&&(0,a.showDoneBox)("",{},n.done_box),e(n)},onFail:e=>{const o=(e=>{return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t})(n);return t({err:e,isAborted:o}),!!o}})})),g=()=>{v.cancel()},h=u.register(t,g);return m.catch((()=>{})).finally((()=>{h&&h()})),{abort:g,promise:m}},p=e=>{var t,n,o;if(void 0===(null==(t=e)?void 0:t.reactions_my))return void console.warn("Invalid reaction change response format",e);const i=null!=(o=null==(n=e)?void 0:n[l.REACTIONS_COUNTS_RESPONSE_FIELD])?o:void 0,s=e.reactions_my,a=e.suggest_subscribe;let c;return null===s?c={id:void 0}:(0,r.isValidReactionId)(s)&&(c={id:s}),{counts:i,userReaction:c,suggestSubscribe:a}}},412818:(e,t,n)=>{n.d(t,{ReactionsEntryGlobal:()=>v,init:()=>p});var o=n(953908),r=n(189841),i=n(557530),s=n(259036),a=n(835821),l=n(908088),c=n(530517),u=n(839470),d=n(577698);const p=()=>{(0,c.postRenderReactionsInit)(),(0,a.initResponseHandlers)()},f=e=>"1"===e.dataset.reactionsMenuDisabled,v={onReactionKeyDown:(e,t)=>{(0,i.isEventFromMenu)(t)||(0,u.partConfigEnabled)("unlike_archived_post")&&f(e)||[o.KEY.RETURN,o.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,i.toggleReactionOnClick)(e))},initReactionByMouseEvent:(e,t)=>{if(t.target!==e)return;const n=(0,d.getButtonContainer)(e);n&&((0,u.partConfigEnabled)("unlike_archived_post")&&f(e)||(0,s.reactionsButtonInit)(n,{isMouseenterEvent:!0}))},onReactionClick:(e,t)=>{(0,o.checkEvent)(t)||(0,i.isEventFromMenu)(t)||((0,i.toggleReactionOnClick)(e),(0,u.partConfigEnabled)("unlike_archived_post")&&f(e)||(0,s.reactionsButtonInit)(e))},reactionsButtonMount:r.reactionsButtonMount,storageAddSets:l.storageAddSets,storageSetConfig:l.storageSetConfig}},557530:(e,t,n)=>{n.d(t,{isEventFromMenu:()=>a,toggleReactionOnClick:()=>l});var o=n(59985),r=n(198508),i=n(655154),s=n(32375);const a=e=>{var t,n;return e.target instanceof HTMLElement&&(null==(t=(n=e.target).closest)?void 0:t.call(n,"._ReactionsMenuPopperRoot"))},l=e=>{var t;const n=(0,s.reactionsElemPayload)(e);if(!(null==(t=n)?void 0:t.objectRaw))return void console.warn("Missing reactions object raw",e);const{csrfHash:a,objectRaw:l,userReactionId:c}=n;if((0,i.emitReactionChoose)(l),null===a)return void console.warn("Missing reactions csrf hash",e);const u=void 0===c?o.REACTION_ID_DEFAULT:void 0;(0,r.reactionButtonSetReaction)(u,c,l,a,e,{isPrimaryLikeButtonClick:!0})}},259036:(e,t,n)=>{n.d(t,{reactionsButtonInit:()=>o});const o=(...e)=>{const t=window.Reactions;t?t.reactionsButtonMount(...e):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((()=>{window.Reactions?o(...e):console.error("Reactions module is unavailable")}))}},835821:(e,t,n)=>{n.d(t,{initResponseHandlers:()=>l});var o=n(541140),r=n(908088);const i=e=>{var t;const n=null==(t=e)?void 0:t.reaction_sets;n&&(0,r.storageAddSets)(n)},s=e=>{e&&(0,r.storageSetConfig)(e)};let a=!1;const l=()=>{a||((0,o.replaceExtraHandler)("reactionsConfig",s),(0,o.replaceExtraHandler)("reactions",i),a=!0)}},999237:(e,t,n)=>{n.d(t,{triggerReactionsUpdate:()=>a});var o=n(693982),r=n(682951),i=n(505426),s=n(109454);const a=(e,t,n,a)=>{const l=(0,o.parseLikeObjectId)(e);l&&l.objectType===r.SUPPORTED_OBJECT_TYPES.wall&&l.objectId?(0,i.emitEvent)(i.WallDataEvents.post_reactions_counts_update,function(e,t,n,o){var r,i,a;const l={counts:e,isFromWkLayer:null==(r=t)?void 0:r.isFromWkLayer,isPrimaryLikeButtonClick:null==(i=t)?void 0:i.isPrimaryLikeButtonClick,isQueueUpdate:null==(a=t)?void 0:a.isQueueUpdate,isUserAction:t.isUserAction,postFullId:n.objectId,previewVisibility:t.previewVisibility,reactionIdState:o?{reactionId:o.id}:void 0,suggestSubscribe:t.suggestSubscribe};return o?(0,s.reactionsCountsUpdatePayload)(l,o):(0,s.reactionsCountsOnlyUpdatePayload)(l)}(t,a,l,n)):l&&l.objectType===r.SUPPORTED_OBJECT_TYPES.wall_reply&&l.objectId?(0,i.emitEvent)(i.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:l.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},767176:(e,t,n)=>{n.d(t,{AdsEvents:()=>p});var o=n(599809),r=n(936134),i=n(795558),s=n(796943),a=n(866310),l=n(95432),c=n(9480);let u=[];const d=(0,r.debounce)((()=>{if(0===u.length)return;const e=u.splice(0,u.length);(0,o.api)("adsint.registerAdEvents",{events:JSON.stringify(e)}).catch((t=>{for(;e.length;)u.unshift(e.pop())}))}),1e3);const p={register:(e,t)=>{(e=>["like","unlike","share","music_pause","music_play","music_track_to_profile","music_playlist_to_profile","music_track_share","music_playlist_share","music_track_share_to_story","music_playlist_share_to_story"].includes(e))(e)&&(e=>!!e)(t)&&(u.push({event_type:e,ad_data:t}),d())},handleShareEvent:(e,t,n)=>{const o=e&&e.dataset&&e.dataset.ad;if(!o||!t)return null;let r="share";0===t.indexOf("audio")&&(window.Wall&&Wall.triggerAdStat(e,"audio_click"),0===t.indexOf("audio_playlist")?r=2==n?"music_playlist_share_to_story":"music_playlist_share":0===t.indexOf("audio")&&(r=2==n?"music_track_share_to_story":"music_track_share")),p.register(r,o)}};(0,s.onDomReady)((()=>{const e="adsEvents",t=(0,l.getAudioPlayer)();if(!t||t.subscribers&&t.subscribers.filter((t=>t.context===e)).length>0)return;const n={[a.AudioPlayerEventType.PLAY]:"music_play",[a.AudioPlayerEventType.PAUSE]:"music_pause",[a.AudioPlayerEventType.MUSIC_AUDIOS_ADD]:"music_track_to_profile",[a.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD]:"music_playlist_to_profile"},o=e=>{if(n[e]){const o=c.AudioUtils.audioTupleToAudioObject(t.getCurrentAudio()),r=o?document.querySelector("._audio_row_"+o.fullId+"."+c.AudioUtils.AUDIO_CURRENT_CLS):null,s=(0,i.domClosest)("post",r);let a=s&&s.dataset&&s.dataset.ad;a||(a=(e=>{if(!e)return null;const t=0===e.indexOf("feed:")?e.replace("feed:","post"):null,n=t&&document.getElementById(t);return n&&n.dataset&&n.dataset.ad})(t._getPlayingContext())),a&&(window.Wall&&Wall.triggerAdStat(s,"audio_click"),p.register(n[e],a))}};t.on(e,a.AudioPlayerEventType.PLAY,(()=>o(a.AudioPlayerEventType.PLAY))),t.on(e,a.AudioPlayerEventType.PAUSE,(()=>o(a.AudioPlayerEventType.PAUSE))),t.on(e,a.AudioPlayerEventType.MUSIC_AUDIOS_ADD,(()=>o(a.AudioPlayerEventType.MUSIC_AUDIOS_ADD))),t.on(e,a.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD,(()=>o(a.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD)))}))}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return a[e].call(n.exports,n,n.exports,c),n.exports}c.m=a,c.amdO={},e=[],c.O=(t,n,o,r)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,o,r]=e[u],s=!0,a=0;a<n.length;a++)(!1&r||i>=r)&&Object.keys(c.O).every((e=>c.O[e](n[a])))?n.splice(a--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]},c.H={},c.G=e=>{Object.keys(c.H).map((t=>{c.H[t](e)}))},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);c.r(r);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(r,i),r},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>25394===e?"AudioLongtapModal.2932c6e9c6120eff2657.js":24817===e?"hls.7bfefe299fa92971b99a.js":75980===e?"menu_settings.3ea04534d06cb6d38e2c.js":96816===e?"web-audio-lyrics-modal.218229d2232b2e3d93fb.js":9375===e?"voice_message_player.e464fba002f2d3244773.js":28762===e?"speech.be0c329a1eff7c81577d.js":57468===e?"SilentModeForms.81e354f9bd61dfd364b5.js":96248===e?"feed-skeleton.add07457f9a9b141ed5a.js":55489===e?"lottie-light.319fff4bb343e96ef290.js":31902===e?"BadgesEntrypoint.42da25a3940fff29a2c3.js":59240===e?"performance-stats.4b38c82ee7bdbd67bf4a.js":18669===e?"BadgesCatalog.c94e7eac668c6189a6c5.js":83803===e?"BadgesObjectInfo.bb17190ae4a3f87aa415.js":27772===e?"badges_status_bar_onboarding_init.2e2dbfeb5097f2c5211a.js":60456===e?"BadgesRestrictedModal.6a2b217d6d7a398f34f0.js":64369===e?"BadgesTaskModal.37d9ec75b5ab2aaab9b7.js":44221===e?"IconBadges.2da61b7762dda802ae61.js":38288===e?"lottie.5e4758c39f106eab733a.js":14622===e?"c2584b7636e8ec38dcef48890d8b9d02.bf9fd00943c587e0a50c.js":6787===e?"040ebd9ebe24a3fb803719cfd453703d.220e7e60cf07d24c1d88.js":12636===e?"1bfba6d3805d53174acd15b3e6971331.073e41a0e449e66e06a9.js":void 0,c.miniCssF=e=>e+"."+{18669:"b07de20e2a70b51eba8a",25394:"6af57e1b0cf5a74f9a87",31902:"1af3b1664dbe1e4298f5",57468:"35be3dfa1e90e3cdd0a1",75980:"5bbee2c9f3e189193a73",83803:"6c652cbe68402e87f449"}[e]+".css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},c.l=(e,t,n,r)=>{if(o[e])o[e].push(t);else{var i,s;if(void 0!==n)for(var a=document.getElementsByTagName("script"),l=0;l<a.length;l++){var u=a[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+n){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.setAttribute("data-webpack","vk:"+n),i.src=e),o[e]=[t];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(p);var r=o[e];if(delete o[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),s&&document.head.appendChild(i)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="/dist/",r=e=>new Promise(((t,n)=>{var o=c.miniCssF(e),r=c.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=(s=n[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){var s;if((r=(s=i[o]).getAttribute("data-href"))===e||r===t)return s}})(o,r))return t();((e,t,n,o)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=i=>{if(r.onerror=r.onload=null,"load"===i.type)n();else{var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=a,r.parentNode.removeChild(r),o(l)}},r.href=t,document.head.appendChild(r)})(e,r,t,n)})),i={70724:0},c.f.miniCss=(e,t)=>{i[e]?t.push(i[e]):0!==i[e]&&{18669:1,25394:1,31902:1,57468:1,75980:1,83803:1}[e]&&t.push(i[e]=r(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))},(()=>{var e={70724:0};c.f.j=(t,n)=>{var o=c.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else if(75980!=t){var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var i=c.p+c.u(t),s=new Error;c.l(i,(n=>{if(c.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}}),"chunk-"+t,t)}else e[t]=0},c.H.j=t=>{if((!c.o(e,t)||void 0===e[t])&&75980!=t){e[t]=null;var n=document.createElement("link");n.charset="utf-8",c.nc&&n.setAttribute("nonce",c.nc),n.rel="preload",n.as="script",n.href=c.p+c.u(t),document.head.appendChild(n)}},c.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[i,s,a]=n,l=0;if(i.some((t=>0!==e[t]))){for(o in s)c.o(s,o)&&(c.m[o]=s[o]);if(a)var u=a(c)}for(t&&t(n);l<i.length;l++)r=i[l],c.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return c.O(u)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s={18669:[96248]},c.f.preload=e=>{var t=s[e];Array.isArray(t)&&t.map(c.G)};var u=c.O(void 0,[75514,98066,56990,24509,76400,40885,76429,68592,90613],(()=>c(849307)));u=c.O(u)})();