"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[6787],{784118:(e,t,s)=>{s.d(t,{Icon20GearOutline:()=>r});var r=(0,s(28178).makeIcon)("Icon20GearOutline","gear_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="gear_outline_20"><path fill-rule="evenodd" d="m7.222 3.378.01-.033a4.147 4.147 0 0 1 .17-.476c.358-.821.944-1.285 1.854-1.36l.166-.009h1.208c1.051.033 1.735.608 2.095 1.692l.057.186.044.166c.016.064.037.132.06.203l.05.137.03.015.06-.02.116-.044.135-.059a5.36 5.36 0 0 1 .168-.074l.036-.015a4.23 4.23 0 0 1 .424-.15c.932-.27 1.685-.075 2.32.618l.108.125.714.88c.636.833.617 1.723-.004 2.683l-.109.161-.102.139c-.04.054-.082.113-.123.177l-.062.1-.029.05.004.017.08.052.11.066.133.072c1.209.614 1.707 1.42 1.515 2.541l-.032.162-.213.916c-.137.593-.245.873-.67 1.258a2.135 2.135 0 0 1-1.059.518l-.01.003a3.917 3.917 0 0 1-.438.059l-.191.012-.173.006-.052.001h-.006c-.05.002-.102.006-.156.01l-.158.02.012.123.011.083.029.154c.068.322.101.618.098.89v.012c-.015.84-.38 1.45-1.132 1.87l-.147.076-1.023.494c-.901.403-1.722.234-2.484-.467a3.934 3.934 0 0 1-.144-.14l-.133-.142-.113-.13a2.938 2.938 0 0 0-.147-.161l-.085-.083-.043-.04-.08.076-.091.093-.103.115c-.828.981-1.703 1.334-2.763.923l-.153-.063-.915-.443-.271-.138c-.415-.225-.647-.44-.874-.918a2.153 2.153 0 0 1-.209-1.01v-.016c.006-.19.03-.388.07-.603l.038-.195.001-.004c.014-.064.025-.133.035-.206l.016-.148-.003-.003-.09-.012-.128-.012-.151-.006a4.145 4.145 0 0 1-.862-.098l-.012-.003c-.837-.198-1.363-.69-1.608-1.524l-.043-.16-.254-1.102c-.204-1.026.205-1.818 1.186-2.41l.17-.098.152-.08c.06-.03.123-.065.188-.105l.134-.087.004-.017-.055-.093-.07-.108-.089-.124a5.194 5.194 0 0 1-.286-.423c-.54-.905-.534-1.72.046-2.523l.1-.132.717-.877c.687-.792 1.566-.958 2.64-.554l.18.072.158.07a2.9 2.9 0 0 0 .193.08l.118.042.032-.014.029-.077.04-.12.04-.143c.013-.056.028-.112.044-.166Zm4.24.841.013.038.05.138a1.5 1.5 0 0 0 .743.833l.03.014a1.5 1.5 0 0 0 1.136.082l.06-.02a1.47 1.47 0 0 0 .065-.023l.117-.044.062-.025.135-.059.035-.015a2.698 2.698 0 0 1 .415-.16c.268-.078.407-.06.47-.043.057.015.16.056.314.22l.077.09.682.84c.138.185.15.295.15.359 0 .084-.03.267-.225.573l-.082.122-.08.108a4.406 4.406 0 0 0-.18.26l-.014.022-.062.099-.008.013-.01.018-.03.05a1.5 1.5 0 0 0-.178 1.056l.004.017a1.5 1.5 0 0 0 .648.959l.08.052.05.032.11.066.06.034.133.072.034.018c.456.231.62.421.676.516.036.06.084.162.042.417l-.023.117-.207.892c-.066.285-.095.35-.105.369 0 0 0 .003-.01.013a.974.974 0 0 1-.101.103c-.082.074-.166.124-.354.161a2.357 2.357 0 0 1-.257.035l-.153.01-.138.004-.071.002a4.554 4.554 0 0 0-.28.02l-.158.019a1.5 1.5 0 0 0-1.318 1.628l.011.123.008.07.012.083.01.06.028.154.008.045c.05.236.068.419.066.557-.003.206-.046.301-.073.348-.028.046-.094.131-.276.235l-.105.056-.977.471c-.204.088-.317.082-.382.07-.076-.015-.228-.068-.456-.279a2.382 2.382 0 0 1-.08-.076l-.1-.107-.088-.102a4.389 4.389 0 0 0-.217-.236l-.018-.018-.084-.082a1.433 1.433 0 0 0-.036-.034l-.043-.04a1.5 1.5 0 0 0-2.047.014l-.08.075a1.43 1.43 0 0 0-.042.041l-.09.094a1.534 1.534 0 0 0-.048.05l-.103.116-.025.03c-.315.371-.532.495-.646.535-.073.025-.183.05-.415-.038l-.094-.039-.864-.418-.238-.12a1.186 1.186 0 0 1-.13-.083l-.004-.003-.003-.003a1.077 1.077 0 0 1-.083-.147.666.666 0 0 1-.063-.34c.003-.09.015-.207.043-.365l.035-.174a4.384 4.384 0 0 0 .058-.35l.016-.149a1.5 1.5 0 0 0-.434-1.224l-.004-.003a1.5 1.5 0 0 0-.86-.423l-.09-.012a1.405 1.405 0 0 0-.064-.008l-.128-.01a1.539 1.539 0 0 0-.068-.005l-.15-.007-.04-.001a2.663 2.663 0 0 1-.549-.06c-.215-.05-.305-.115-.346-.154-.04-.038-.109-.12-.17-.319l-.03-.114-.242-1.052c-.042-.224-.006-.329.023-.387.038-.076.146-.23.459-.42l.128-.074.119-.063a4.431 4.431 0 0 0 .316-.179l.134-.087a1.5 1.5 0 0 0 .65-.947l.004-.017a1.5 1.5 0 0 0-.171-1.066l-.055-.093a1.49 1.49 0 0 0-.037-.062l-.07-.108a1.496 1.496 0 0 0-.04-.057l-.088-.124a1.516 1.516 0 0 0-.024-.031c-.307-.406-.369-.647-.378-.754-.006-.067-.004-.18.148-.395l.072-.094.684-.838c.154-.173.262-.211.33-.225.09-.018.28-.027.623.1l.138.055.123.055a4.42 4.42 0 0 0 .316.13l.118.042a1.5 1.5 0 0 0 1.134-.058l.031-.015a1.5 1.5 0 0 0 .764-.823l.03-.077.023-.066.04-.12.02-.065.04-.143.01-.037.03-.119c.037-.128.076-.235.114-.323.1-.23.192-.319.243-.357.044-.033.134-.086.343-.105l.1-.006h1.14c.234.01.333.071.386.114.067.056.192.195.308.538l.043.14.034.129c.026.1.056.2.088.298ZM10 11.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 1.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},377976:(e,t,s)=>{s.d(t,{API:()=>E});var r,a,i=s(434788),o=s(393356),n=s(401623),c=s(283085),u=s(618430),l=s(647827),d=s(183746),h=s(722223);const p="undefined"!=typeof window&&(null==(a=window.vk)||null==(r=a.apiConfigDomains)?void 0:r.apiDomain)||"api.vk.com";class E extends n.CallbackService{setOptions(e){this.options=(0,i._)({},this.options,e)}execute(e){return this.call("execute",e)}procedure(e,t){return this.call(`execute.${e}`,t)}call(e,t){return this.callWithRequest(new n.APIRequest({method:e,params:t,api:this}))}callWithRequest(e){return this.worker.enqueue(e),e.promise}getWorker(){switch(this.options.mode){case h.APIMode.PARALLEL:return new c.ParallelWorker(this);case h.APIMode.SEQUENTIAL:return new u.SequentialWorker(this)}}constructor(e,t={}){super(),this.globalParams=new Map,this.options=(0,i._)({token:"",mode:h.APIMode.SEQUENTIAL,requestMode:h.APIRequestMode.SEQUENTIAL,requestMethod:h.APIRequestMethod.FETCH,wait:3e3,limit:3,bridge:!1,version:o.API_VERSION,baseUrl:`https://${p}`,retryLimit:3,timeout:6e4,executeCount:25,language:"ru",executeUnsupportedMethods:["photos.save","photos.saveWallPhoto","photos.saveOwnerPhoto","photos.saveMessagesPhoto","messages.setChatPhoto","photos.saveMarketPhoto","photos.saveMarketAlbumPhoto","audio.save","docs.save","photos.saveOwnerCoverPhoto","stories.save","polls.savePhoto"]},e);for(const e of l.methodGroups)this[e]=new Proxy(Object.create(null),{get:(t,s)=>(t,r)=>this.callWithRequest(new n.APIRequest({api:this,method:`${e}.${s}`,params:t,options:r}))});this.worker=this.getWorker(),this.updates=new d.Updates(this,t)}}},513222:(e,t,s)=>{s.d(t,{CaptchaType:()=>i,MINIMUM_TIME_INTERVAL_API:()=>a,POLLING_VERSION:()=>r});const r=10,a=1133;var i;!function(e){e.API="API",e.DIRECT_AUTH="DIRECT_AUTH",e.IMPLICIT_FLOW_AUTH="IMPLICIT_FLOW_AUTH",e.ACCOUNT_VERIFICATION="ACCOUNT_VERIFICATION"}(i||(i={}))},432043:(e,t,s)=>{s.d(t,{APIError:()=>i});var r=s(602033),a=s(5874);class i extends a.VKError{constructor(e){const t=Number(e.error_code);switch(super({code:t,message:`Code №${t} - ${e.error_msg}`}),this.params=e.request_params,t===r.API_ERROR_CAPTCHA&&(this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img),t){case r.API_ERROR_CAPTCHA:this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img;break;case r.API_ERROR_AUTH_VALIDATION:this.redirectUri=e.redirect_uri;break;case r.API_ERROR_NEED_CONFIRMATION:this.confirmationText=e.confirmation_text}}}},752448:(e,t,s)=>{s.d(t,{ExecuteError:()=>a});var r=s(432043);class a extends r.APIError{constructor(e){super({error_code:e.error_code,error_msg:e.error_msg,request_params:[]}),this.method=e.method}}},695007:(e,t,s)=>{s.d(t,{OAuthError:()=>a});var r=s(5874);class a extends r.VKError{constructor({error:e,error_description:t}){super({code:e,message:t})}}},869489:(e,t,s)=>{s.d(t,{UpdatesError:()=>a});var r=s(5874);class a extends r.VKError{}},5874:(e,t,s)=>{var r;s.d(t,{SharedErrorCode:()=>r,VKError:()=>a}),function(e){e.UNSUPPORTED_MODE="UNSUPPORTED_MODE",e.MISSING_CAPTCHA_HANDLER="MISSING_CAPTCHA_HANDLER",e.MISSING_TOKEN_REGENERATE_HANDLER="MISSING_TOKEN_REGENERATE_HANDLER"}(r||(r={}));class a extends Error{constructor({code:e,message:t}){super(t),this.code=e,this.name=this.constructor.name}}},526511:(e,t,s)=>{s.d(t,{CallbackService:()=>a});var r=s(5874);class a{get hasCaptchaHandler(){return void 0!==this.captchaHandler}onCaptcha(e){return this.captchaHandler=e,this}processingCaptcha(e){const{captchaHandler:t}=this;return t?new Promise(((s,r)=>{t(e,(e=>new Promise(((t,a)=>{if(e instanceof Error)return a(e),void r(e);s({key:e,validate:{resolve:t,reject:a}})}))))})):Promise.reject(new r.VKError({code:r.SharedErrorCode.MISSING_CAPTCHA_HANDLER,message:"Missing captcha handler"}))}get hasTokenRegenerateHandler(){return void 0!==this.tokenRegenerateHandler}onTokenRegenerate(e){return this.tokenRegenerateHandler=e,this}processingTokenRegenerate(){const{tokenRegenerateHandler:e}=this;return void 0===e?Promise.reject(new r.VKError({code:r.SharedErrorCode.MISSING_TOKEN_REGENERATE_HANDLER,message:"Missing token regenerate handler"})):new Promise(((t,s)=>{e((e=>new Promise(((r,a)=>{if(e instanceof Error)return a(e),void s(e);t({token:e,validate:{resolve:r,reject:a}})}))))}))}}},565579:(e,t,s)=>{s.d(t,{EventDispatcher:()=>r});class r{hasEventListener(e,t){return this.listeners.some((s=>s.type===e&&s.listener===t))}addEventListener(e,t,s={}){return this.hasEventListener(e,t)||this.listeners.push({type:e,listener:t,options:s}),this}removeEventListener(e,t){const s=this.listeners.findIndex((s=>s.type===e&&s.listener===t));return-1!==s&&this.listeners.splice(s,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e){return this.listeners.filter((t=>t.type===e.type)).forEach((t=>{const{type:s,listener:r,options:{once:a}}=t;r.call(this,e),a&&this.removeEventListener(s,r)})),this}constructor(){this.listeners=[]}}},401623:(e,t,s)=>{s.d(t,{APIRequest:()=>r.APIRequest,CallbackService:()=>a.CallbackService});var r=s(17318),a=s(526511)},17318:(e,t,s)=>{s.d(t,{APIRequest:()=>u});var r=s(11010),a=s(434788),i=s(363476),o=s.n(i),n=s(372322),c=s(48989);class u{toString(){return(0,c.getExecuteMethod)(this.method,this.params)}get filteredParams(){const{options:{token:e,version:t,language:s}}=this.api;return Object.fromEntries([...Object.entries((0,a._)({},!this.isCustomMethod&&{v:t,access_token:e},{lang:s},this.params)),...this.api.globalParams.entries()].filter((([,e])=>void 0!==e)))}get isCustomMethod(){const{requestMethod:e}=this.api.options;return"function"==typeof e}make(){var e=this;return(0,r._)((function*(){const{options:{timeout:t,requestMethod:s}}=e.api;e.timeout=setTimeout((()=>{var t;return null==(t=e.options.abortController)?void 0:t.abort()}),t);try{return e.isCustomMethod?yield e.custom():yield e[s]()}finally{clearTimeout(e.timeout)}}))()}fetch(){var e;const{abortController:t}=this.options,{options:{baseUrl:s}}=this.api;return fetch(new URL(`/method/${this.method}`,s),{method:"POST",signal:null==(e=t)?void 0:e.signal,headers:{connection:"keep-alive"},body:new URLSearchParams(this.filteredParams)}).then((e=>e.json()))}bridge(){const{abortController:e}=this.options;return new Promise(((t,s)=>{var r,a;(null==(r=e)?void 0:r.signal.aborted)&&s(e.signal.reason),null==(a=e)||a.signal.addEventListener("abort",(()=>{s(e.signal.reason)})),o().send("VKWebAppCallAPIMethod",{method:this.method,params:this.filteredParams}).then(t).catch((e=>{var s;const{error_data:r}=e;t({error:(null==(s=r)?void 0:s.error_reason)||r||e})}))}))}script(){const{abortController:e}=this.options,{options:{baseUrl:t}}=this.api;return new Promise(((s,r)=>{var a,i;(null==(a=e)?void 0:a.signal.aborted)&&r(e.signal.reason);const o=(0,n.generateId)(20),c=new URLSearchParams(this.filteredParams);c.set("callback",o);const u=document.createElement("script");u.type="text/javascript",u.async=!0,u.src=new URL(`/method/${this.method}?${c}`,t).toString(),window[o]=e=>{u.remove(),delete window[o],s(e)},null==(i=e)||i.signal.addEventListener("abort",(()=>{u.remove(),delete window[o],r(e.signal.reason)})),document.head.appendChild(u)}))}custom(){const{abortController:e}=this.options,{requestMethod:t}=this.api.options;if("function"==typeof t)return new Promise(((s,r)=>{var a,i;(null==(a=e)?void 0:a.signal.aborted)&&r(e.signal.reason),null==(i=e)||i.signal.addEventListener("abort",(()=>{r(e.signal.reason)})),t(this.method,this.filteredParams).then(s).catch(r)}))}constructor({api:e,method:t,params:s={},options:r={}}){var i;this.retries=0,this.api=e,this.method=t,this.params=(0,a._)({},s),this.options=(0,a._)({},r),null!=(i=this.options).abortController||(i.abortController=new AbortController),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}},506945:(e,t,s)=>{s(667294)},964548:(e,t,s)=>{s.d(t,{API:()=>r.API,StickersQueueEventType:()=>n.StickersQueueEventType,UpdatesSource:()=>i.UpdatesSource,VKError:()=>a.VKError,VmojiQueueEventType:()=>o.VmojiQueueEventType,getRandomId:()=>c.getRandomId});var r=s(377976),a=(s(722223),s(695007),s(869489),s(752448),s(5874)),i=(s(432043),s(183746)),o=s(563772),n=s(513080),c=(s(85158),s(456079),s(187684),s(969042),s(506945),s(167718));s(153473),s(517283)},647827:(e,t,s)=>{s.d(t,{methodGroups:()=>r});const r=["account","accountVerification","actionLinks","address","adex","admin","admins","ads","adsint","adsweb","aliexpress","antispam","appWidgets","apps","articles","asr","audio","audioBooks","audioSearch","auth","authorsMarketplace","autotests","badges","bestFriends","biz","blogforce","board","bot","botsConf","bugtracker","calls","callsOk","captcha","cashout","catalog","channels","classifieds","combo","coupons","crowd","cua","database","deliveryClub","devAdmin","docs","documentation","donut","downloadedGames","ecosystem","education","educationCloud","educationForeign","educationParents","educationPolls","educationReport","educationUser","email","esia","exchange","exchangeRates","execute","experts","explore","externalAudioMatching","externalUsers","fave","finance","findMe","forbiddenRegistry","fortuneSquare","fortuneWheel","friends","gamesPromo","gifts","golunch","goodsOrders","groups","healthApp","healthCommon","healthCourses","healthLoyalty","id","identity","instManager","interests","internal","leadForms","leads","lifeEvents","likes","lovina","loyalty","loyaltyTeen","market","marusia","masks","memories","messages","microlandings","mobile","money","multiaccount","musicManager","narratives","newsfeed","nft","nftMarket","nospam","notes","notifications","odnoklassniki","onboarding","orders","pages","phones","photos","places","platform","platformConsole","podcasts","podcastsOffice","polls","prettyCards","promoCodes","questions","queue","reports","restore","rewardedAds","rightholders","search","secure","serverEffects","settings","shortVideo","signals","situationalSuggests","sms","social","specials","statEvents","stats","statsDashboard","status","stickers","storage","store","stories","streaming","studentsVerification","studio","superApp","superAppPromo","support","survey","tags","textlives","tickets","tinkoff","translations","uma","users","utils","uxpolls","verification","video","videoPostcards","vkCharity","vkIdHub","vkMusic","vkRun","vkStart","vkTaxi","vkUp","vkdrive","vkstore","vmoji","voicerooms","wall","weather","widgets","widgetsIOS","widgetsKit","wishlists"]},722223:(e,t,s)=>{var r,a,i;s.d(t,{APIMode:()=>r,APIRequestMethod:()=>i,APIRequestMode:()=>a}),function(e){e.PARALLEL="parallel",e.SEQUENTIAL="sequential"}(r||(r={})),function(e){e.SEQUENTIAL="sequential",e.BURST="burst"}(a||(a={})),function(e){e.FETCH="fetch",e.SCRIPT="script",e.BRIDGE="bridge"}(i||(i={}))},513080:(e,t,s)=>{var r;s.d(t,{StickersQueueEvent:()=>a,StickersQueueEventType:()=>r}),function(e){e.UGC_USER_UPDATE="ugc_user_update",e.UGC_PACK_UPDATE="ugc_pack_update",e.UGC_OWNER_UPDATE="ugc_owner_update",e.UGC_STICKER_UPDATE="ugc_sticker_update"}(r||(r={}));class a extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},718557:(e,t,s)=>{s.d(t,{handlerStickersQueueEvent:()=>c});var r=s(513080),a=s(85158),i=s(456079),o=s(187684),n=s(969042);function c(e,{data:t}){const{type:s}=t;switch(s){case r.StickersQueueEventType.UGC_PACK_UPDATE:e.dispatchEvent(new a.StickersUGCPackUpdate(t));break;case r.StickersQueueEventType.UGC_USER_UPDATE:e.dispatchEvent(new i.StickersUGCUserUpdate(t));break;case r.StickersQueueEventType.UGC_OWNER_UPDATE:e.dispatchEvent(new o.StickersUGCOwnerUpdate(t));break;case r.StickersQueueEventType.UGC_STICKER_UPDATE:e.dispatchEvent(new n.StickersUGCStickerUpdate(t))}}},187684:(e,t,s)=>{s.d(t,{StickersUGCOwnerUpdate:()=>a});var r=s(513080);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_OWNER_UPDATE,e)}}},85158:(e,t,s)=>{s.d(t,{StickersUGCPackUpdate:()=>a});var r=s(513080);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_USER_UPDATE,e)}}},969042:(e,t,s)=>{s.d(t,{StickersUGCStickerUpdate:()=>a});var r=s(513080);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_STICKER_UPDATE,e)}}},456079:(e,t,s)=>{s.d(t,{StickersUGCUserUpdate:()=>a});var r=s(513080);class a extends r.StickersQueueEvent{constructor(e){super(r.StickersQueueEventType.UGC_USER_UPDATE,e)}}},563772:(e,t,s)=>{var r;s.d(t,{VmojiQueueEvent:()=>a,VmojiQueueEventType:()=>r}),function(e){e.AVATAR="avatar",e.STICKERS="stickers",e.CHARACTER="character",e.STICKERS_PRINT_REQUEST="stickers_print_request"}(r||(r={}));class a extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},208911:(e,t,s)=>{s.d(t,{handleVmojiQueueEvent:()=>a});var r=s(563772);function a(e,{data:t}){const{type:s,query_id:a}=t;a&&e.dispatchEvent(new r.VmojiQueueEvent(a,t)),e.dispatchEvent(new r.VmojiQueueEvent(s,t))}},183746:(e,t,s)=>{s.d(t,{Updates:()=>_,UpdatesSource:()=>r});var r,a,i,o=s(11010),n=s(434788),c=s(820224),u=s(869489),l=s(565579),d=s(208911),h=s(718557),p=s(131942),E=s(513222);!function(e){e.USER="user",e.GROUP="group",e.VMOJI="vmoji",e.STICKERS="stickers"}(r||(r={})),function(e){e.CHECK="a_check",e.RELEASE="a_release"}(a||(a={})),function(e){e.NEED_RESTART="NEED_RESTART",e.POLLING_REQUEST_FAILED="POLLING_REQUEST_FAILED"}(i||(i={}));class _ extends l.EventDispatcher{start(){var e=this;return(0,o._)((function*(){if(!e.started){e.started=!0;try{const t=yield e.getLongPollServer();if(!t)return;const{server:s,key:i,ts:o}=t;switch(0===e.ts&&(e.ts=o),e.url=new URL(s),e.url.searchParams.set("key",i),e.url.searchParams.set("act",a.CHECK),e.url.searchParams.set("wait","25"),e.url.searchParams.set("mode",String(e.mode)),e.url.searchParams.set("version",String(E.POLLING_VERSION)),e.source){case r.VMOJI:case r.STICKERS:e.url.searchParams.set("id",String(e.userId))}e.startFetchLoop()}catch(t){throw e.started=!1,t}}}))()}getLongPollServer(){var e=this;return(0,o._)((function*(){let t;switch(e.source){case r.GROUP:t=yield e.api.groups.getLongPollServer({group_id:e.groupId});break;case r.VMOJI:case r.STICKERS:var s;s=yield e.api[e.source].subscribeToQueue().then((e=>{var{base_url:t}=e,s=(0,c._)(e,["base_url"]);return(0,n._)({server:t},s)})),t=s;break;default:return}const{server:a}=t;return t.server=`${a.startsWith("https")?"":"https://"}${a}`,t}))()}stop(){var e=this;return(0,o._)((function*(){e.started=!1,e.restarted=0}))()}startFetchLoop(){var e=this;return(0,o._)((function*(){try{for(;e.started;)yield e.fetchUpdates()}catch(t){if(t.code!==i.NEED_RESTART&&e.restarted!==e.retryLimit)return e.restarted+=1,yield(0,p.wait)(3e3),void e.startFetchLoop();for(;e.started;)try{yield e.stop(),yield e.start();break}catch(t){console.log(t),e.started=!0,yield(0,p.wait)(e.wait)}}}))()}fetchUpdates(){var e=this;return(0,o._)((function*(){e.url.searchParams.set("ts",String(e.ts));const t=new AbortController,s=setTimeout((()=>t.abort()),3e4);let r;try{const s=yield fetch(e.url,{method:"GET",signal:t.signal,headers:{connection:"keep-alive"}});if(!s.ok)throw new u.UpdatesError({code:i.POLLING_REQUEST_FAILED,message:"Polling request failed"});r=yield s.json()}finally{clearTimeout(s)}if(void 0!==r.failed){if(1===r.failed)return void(e.ts=r.ts);throw e.ts=0,new u.UpdatesError({code:i.NEED_RESTART,message:"The server has been failed"})}e.restarted=0,e.ts=r.ts,r.pts&&(e.pts=Number(r.pts)),r.updates=r.updates||r.events||[];for(const t of r.updates)e.handleUpdate(t)}))()}handleUpdate(e){switch(this.source){case r.VMOJI:(0,d.handleVmojiQueueEvent)(this,e);break;case r.STICKERS:(0,h.handlerStickersQueueEvent)(this,e)}}constructor(e,t={}){super(),this.mode=202,this.started=!1,this.ts=0,this.pts=0,this.restarted=0,this.api=e;const{source:s,userId:r,groupId:a,wait:i,retryLimit:o}=t;this.source=s,this.userId=r,this.groupId=a,this.wait=i||3e3,this.retryLimit=o||3}}},372322:(e,t,s)=>{function r(e){const t="abcdefghijklmnopqrstuvwxyz";let s="";for(let r=0;r<e;r++)s+=t.charAt(Math.floor(26*Math.random()));return s}s.d(t,{generateId:()=>r})},517283:(e,t,s)=>{var r;s(363476);!function(e){e.WALL="wall",e.DOCS="docs",e.STATS="stats",e.VIDEO="video",e.PAGES="pages",e.NOTES="notes",e.MANAGE="manage",e.MARKET="market",e.PHOTOS="photos",e.STATUS="status",e.GROUPS="groups",e.OFFLINE="offline",e.STORIES="stories",e.FRIENDS="friends",e.MESSAGES="messages",e.APP_WIDGET="app_widget"}(r||(r={}))},868728:(e,t,s)=>{function r(e){return`return [${e.join(",")}];`}s.d(t,{getChainReturn:()=>r})},48989:(e,t,s)=>{s.d(t,{getExecuteMethod:()=>a});var r=s(206467);function a(e,t={}){return`API.${e}(${(0,r.getExecuteParams)(t)})`}},206467:(e,t,s)=>{function r(e){return JSON.stringify(e,((t,s)=>"object"==typeof s&&s!==e?String(s):s))}s.d(t,{getExecuteParams:()=>r})},153473:(e,t,s)=>{s(11010),s(432043),s(695007),s(131942)},167718:(e,t,s)=>{function r(){const e=Math.pow(2,32)/2-1;return Math.floor(Math.random()*e)}s.d(t,{getRandomId:()=>r})},708672:(e,t,s)=>{function r(e,t){let s=0;t.response.forEach(((r,a)=>{const i=e[a];!1===r?(i.reject(t.errors[s]),s++):i.resolve(r)}))}s.d(t,{resolveExecuteTask:()=>r})},131942:(e,t,s)=>{function r(e){return new Promise((t=>{setTimeout(t,e)}))}s.d(t,{wait:()=>r})},283085:(e,t,s)=>{s.d(t,{ParallelWorker:()=>c});var r=s(11010),a=s(401623),i=s(618430),o=s(868728),n=s(708672);class c extends i.SequentialWorker{execute(){var e=this,t=()=>super.execute;return(0,r._)((function*(){const{queue:s}=e;if(e.isAllowedMethod(s[0].method))return void t().call(e);const{executeCount:r}=e.api.options,i=[];for(let t=0;t<e.queue.length&&(e.isAllowedMethod(s[t].method)||(i.push(s.splice(t,1)[0]),t-=1,!(i.length>=r)));t+=1);if(0===i.length)return;const c=new a.APIRequest({api:e.api,method:"execute",params:{code:(0,o.getChainReturn)(i.map(String))}});t().call(e,c);try{(0,n.resolveExecuteTask)(i,yield c.promise)}catch(e){for(const t of i)t.reject(e)}}))()}isAllowedMethod(e){return e.startsWith("execute")||this.api.options.executeUnsupportedMethods.includes(e)}}},618430:(e,t,s)=>{s.d(t,{SequentialWorker:()=>l});var r=s(11010),a=s(602033),i=s(614531),o=s(432043),n=s(752448),c=s(131942),u=s(513222);class l extends i.APIWorker{execute(e){var t=this;return(0,r._)((function*(){var s;if(e||(e=t.queue.shift()),!e)return;const{method:r}=e;let a;try{a=yield e.make()}catch(s){const{options:r}=t.api;var i;return e.retries===r.limit?(null==(i=e.captchaValidate)||i.reject(s),void e.reject(s)):(e.retries+=1,yield(0,c.wait)(r.wait),void t.requeue(e))}var u;void 0===a.error?(null==(s=e.captchaValidate)||s.resolve(),r.startsWith("execute")?e.resolve({response:a.response,errors:(a.execute_errors||[]).map((e=>new n.ExecuteError(e)))}):e.resolve(null!=(u=a.response)?u:a)):t.handleError(e,new o.APIError(a.error))}))()}handleError(e,t){var s=this;return(0,r._)((function*(){var r,i;const{code:o}=t,{options:n}=s.api;if(e.retries!==n.limit){if(e.retries+=1,o===a.API_ERROR_TOO_MANY)return s.paused?void s.requeue(e):(s.pause(),yield(0,c.wait)(u.MINIMUM_TIME_INTERVAL_API),s.requeue(e),void s.resume());if(null==(r=e.captchaValidate)||r.reject(t),null==(i=e.tokenRegenerateValidate)||i.reject(t),o===a.API_ERROR_CAPTCHA&&s.api.hasCaptchaHandler)try{const{captchaSid:r}=t,{key:a,validate:i}=yield s.api.processingCaptcha({type:u.CaptchaType.API,src:t.captchaImg,sid:r,request:e});e.captchaValidate=i,e.params.captcha_sid=r,e.params.captcha_key=a,s.requeue(e)}catch(t){e.reject(t)}else if(o===a.API_ERROR_AUTH&&s.api.hasTokenRegenerateHandler)try{const{token:t,validate:r}=yield s.api.processingTokenRegenerate();s.api.options.token=t,e.tokenRegenerateValidate=r,yield(0,c.wait)(u.MINIMUM_TIME_INTERVAL_API),s.requeue(e)}catch(t){e.reject(t)}else e.reject(t)}else e.reject(t)}))()}}},614531:(e,t,s)=>{s.d(t,{APIWorker:()=>a});var r=s(513222);class a{enqueue(e){this.queue.push(e),this.immediateHeat()}requeue(e){this.queue.unshift(e),this.immediateHeat()}pause(){this.paused=!0}resume(){this.paused=!1,this.immediateHeat()}heat(){if(this.paused||this.busy||!this.queue.length)return;this.busy=!0;const{requestMode:e}=this.api.options;this[e]()}sequential(){this.execute(),setTimeout((()=>{this.busy=!1,this.immediateHeat()}),this.intervalPerRequests)}burst(){const e=Math.min(this.api.options.limit,this.queue.length);for(let t=0;t<e&&0!==this.queue.length;t+=1)this.execute();const t=Math.ceil(r.MINIMUM_TIME_INTERVAL_API-e*this.intervalPerRequests);setTimeout((()=>{this.busy=!1,this.immediateHeat()}),t<=0?r.MINIMUM_TIME_INTERVAL_API:t)}immediateHeat(){setTimeout((()=>this.heat()))}constructor(e){this.busy=!1,this.paused=!1,this.queue=[],this.api=e,this.intervalPerRequests=Math.ceil(r.MINIMUM_TIME_INTERVAL_API/this.api.options.limit)}}},364922:(e,t,s)=>{s.d(t,{Cache:()=>c});var r,a,i,o=s(11010),n=s(891047);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(a||(a={})),function(e){e.HELP_HINTS="helpHints"}(i||(i={}));class c{getHelpHints(){return this.getItem(i.HELP_HINTS)}setHelpHints(e){return this.setItem(i.HELP_HINTS,e)}clear(){return(0,n.clear)(this.store)}getItem(e){var t=this;return(0,o._)((function*(){const s=t.buildItemKey(e),r=c.cache.get(s);return(0,n.get)(s,t.store).then((e=>e||r)).catch((()=>r))}))()}setItem(e,t){var s=this;return(0,o._)((function*(){const r=s.buildItemKey(e);c.cache.set(r,t),yield(0,n.set)(r,t,s.store).catch((()=>{}))}))()}deleteItem(e){const t=this.buildItemKey(e);return(0,n.del)(t,this.store)}buildItemKey(e){return`${e}-${c.VERSION}-${this.userId}`}getItemSync(e,t){const s=this.buildSyncItemKey(e);try{let e=localStorage.getItem(s);if(!e)return;switch(t){case a.OBJECT:try{e=JSON.parse(e)}catch(e){return}break;case a.NUMBER:e=Number(e)||0;break;case a.STRING_NUMBER:e=Number(e)||e;break;case a.BOOLEAN:e=Boolean(Number(e))}return e}catch(e){return c.cache.get(s)}}setItemSync(e,t,s){const r=this.buildSyncItemKey(e);switch(s){case a.OBJECT:t=JSON.stringify(t);break;case a.BOOLEAN:t=String(Number(t))}try{localStorage.setItem(r,t)}catch(e){c.cache.set(r,t)}}buildSyncItemKey(e){return`${c.DB_NAME}_${e}_${c.VERSION}_${this.userId}`}constructor({userId:e=(null==(r=window.vk)?void 0:r.id),categories:t}={}){var s;this.userId=e||0;let a="cache";(null==(s=t)?void 0:s.length)&&(a=`${a}-${t.join("-")}`),this.store=(0,n.createStore)(c.DB_NAME,a)}}c.DB_NAME="help-hints",c.VERSION=1,c.CACHE_UPDATE_EVENT_NAME=`${c.DB_NAME}_cache_update`,c.cache=new Map},992983:(e,t,s)=>{s.d(t,{HelpHint:()=>r});class r{get id(){return this.hint.id}get title(){return this.hint.title}get description(){return this.hint.description}getResource(e){var t,s;return null==(s=this.hint.resources)||null==(t=s.find((({key:t})=>t===e)))?void 0:t.value}constructor(e){this.hint=e}}},179153:(e,t,s)=>{s.d(t,{HelpHints:()=>l});var r=s(11010),a=s(434788),i=s(964548),o=s(599809),n=s(992983),c=s(364922),u=s(362884);class l{static setAPI(e){this.api=e}static setUserId(e){this.cacheOptions.userId=e,this.cache=void 0}static setCategories(e){Array.isArray(e)||(e=[e]),this.cacheOptions.categories=e,this.cache=void 0}static get(e){var t=this;return(0,r._)((function*(){return yield t.reload(),t.getSync(e)}))()}static getSync(e){var t;const s=null==(t=this.helpHints)?void 0:t.items.find((({id:t})=>t===e));if(s)return new n.HelpHint(s)}static show(e){return e instanceof n.HelpHint&&(e=e.id),this.api.account.showHelpHint({hint_id:e})}static hide(e){var t=this;return(0,r._)((function*(){e instanceof n.HelpHint&&(e=e.id);let s=!1;var r;(yield t.reloading,t.helpHints)&&(t.helpHints.items=t.helpHints.items.filter((({id:t})=>(t===e&&(s=!0),t!==e))),null==(r=t.cache)||r.setHelpHints(t.helpHints));return s?t.api.account.hideHelpHint({hint_id:e}):Promise.resolve()}))()}static getResource(e,t){var s=this;return(0,r._)((function*(){const r=yield s.get(e);if(r)return r.getResource(t)}))()}static reload(){var e=this;return(0,r._)((function*(){return yield e.reloading,e.cache||(e.cache=new c.Cache(e.cacheOptions)),e.reloading=new Promise((0,r._)((function*(t){var s,o;if(!e.api.options.token&&"function"!=typeof e.api.options.requestMethod){const s=yield e.getAccessToken();if(!s)return t();e.api=new i.API({token:s}),e.api.onTokenRegenerate((0,r._)((function*(s){const r=yield e.getAccessToken();if(!r)return t();s(r)})))}if(e.helpHints=yield null==(s=e.cache)?void 0:s.getHelpHints(),e.helpHints&&Date.now()-e.helpHints.date<u.TEN_MINUTES&&!e.isDevMode())return t();const{categories:n}=e.cacheOptions;e.helpHints=yield e.api.account.getHelpHints({categories:n?String(n):void 0}).then((e=>(0,a._)({},e,{date:Date.now()}))).catch((()=>{})),yield null==(o=e.cache)?void 0:o.setHelpHints(e.helpHints),e.refresh(),t()}))),e.reloading}))()}static refresh(){try{localStorage.setItem(c.Cache.CACHE_UPDATE_EVENT_NAME,""),localStorage.removeItem(c.Cache.CACHE_UPDATE_EVENT_NAME)}catch(e){}}static getAccessToken(){return(0,r._)((function*(){const e=yield(0,o.login)("web_token").catch((()=>{}));if(!e)return;const{access_token:t}=e;return t}))()}}l.api=new i.API({token:""}),l.cacheOptions={},l.reloading=Promise.resolve(),l.isDevMode=()=>localStorage.getItem("help-hints-dev"),window.addEventListener("storage",(({key:e,newValue:t})=>{e===c.Cache.CACHE_UPDATE_EVENT_NAME&&null!==t&&l.reload()}))},874695:(e,t,s)=>{var r,a;s.d(t,{HelpHintId:()=>a}),function(e){e.DEFAULT="default",e.STICKERS_UGC="stickers_ugc"}(r||(r={})),function(e){e.KEYBOARD_STICKERS_VMOJI="keyboard:stickers_vmoji",e.POSTING_POST_FEED_BADGES="posting:post_feed_badges",e.POSTING_POST_BADGES_ONBOARDING="posting:post_badges_onboarding",e.POSTING_POST_FEED_BADGES_UNSEEN="posting:post_feed_badges_unseen",e.POSTING_POST_BADGES_PAGE_UNSEEN="posting:post_badges_page_unseen",e.POSTING_POST_BADGES_CATALOG_USER="posting:post_badges_catalog_user",e.POSTING_POST_BADGES_FEEDBACK_USER="posting:post_badges_feedback_user",e.POSTING_POST_BADGES_FEEDBACK_USER_UNSEEN="posting:post_badges_feedback_user_unseen",e.STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.STICKERS_UGC_KEYBOARD_ONBOARDING="stickers:ugc_keyboard_onboarding",e.STICKERS_UGC_APP_ONBOARDING_MODAL="stickers:ugc_app_onboarding_modal",e.STICKERS_UGC_KEYBOARD_ONBOARDING_TOOLTIP="stickers:ugc_keyboard_onboarding_tooltip"}(a||(a={}))},362884:(e,t,s)=>{s.d(t,{TEN_MINUTES:()=>r});const r=6e5}}]);try{stManager.done("dist/040ebd9ebe24a3fb803719cfd453703d.220e7e60cf07d24c1d88.js")}catch(e){}