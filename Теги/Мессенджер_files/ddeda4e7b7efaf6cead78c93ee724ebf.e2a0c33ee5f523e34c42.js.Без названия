(self.webpackChunkvk=self.webpackChunkvk||[]).push([[87454],{700202:(e,t,r)=>{"use strict";r(667294)},639751:(e,t,r)=>{"use strict";r.d(t,{makeIcon:()=>d});var o=r(772253),n=r(414932),s=r(158339),i=r(667294),a=r(192943),l=r(686600),c=r(919266),u=function(e){var t=e.width,r=void 0===t?0:t,a=e.height,l=void 0===a?0:a,c=e.viewBox,u=e.id,d=e.className,h=void 0===d?"":d,p=e.fill,m=e.getRootRef,v=e.style,f=void 0===v?{}:v,g=e.title,y=e.children,b=(0,s._)(e,["width","height","viewBox","id","className","fill","getRootRef","style","title","children"]),E=Math.max(r,l),w=(0,o._)({width:r,height:l},f);return i.createElement("svg",(0,n._)((0,o._)({"aria-hidden":"true",display:"block"},b),{className:["vkuiIcon","vkuiIcon--".concat(E),"vkuiIcon--w-".concat(r),"vkuiIcon--h-".concat(l),"vkuiIcon--".concat(u),h].join(" ").trim(),viewBox:c,width:r,height:l,style:w,ref:m}),g&&i.createElement("title",null,g),i.createElement("use",{xlinkHref:"#".concat(u),style:{fill:"currentColor",color:p}},y))};function d(e,t,r,s,d,h,p,m){var v=function(){f||((0,l.addSpriteSymbol)(new a.BrowserSymbol({content:s})),f=!0)},f=!1,g=(0,c.warnOnce)(e),y=function(e){if((0,l.useIsomorphicLayoutEffect)(v,[]),p){var s=m?". Замените на ".concat(m):"";g("Иконка устарела"+s)}return i.createElement(u,(0,n._)((0,o._)({},e),{viewBox:r,id:t,width:void 0===e.width||isNaN(e.width)?d:+e.width,height:void 0===e.height||isNaN(e.height)?h:+e.height}))};return y.mountIcon=v,y.displayName=e,y}},989913:(e,t,r)=>{"use strict";r.d(t,{BrowserSprite:()=>l});var o=r(148564),n=r(302267),s=r(975766),i=r(192943),a="http://www.w3.org/2000/svg",l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o._)(this,e),(0,s._)(this,"symbols",new Map),(0,s._)(this,"config",{attrs:{xmlns:a,"xmlns:xlink":"http://www.w3.org/1999/xlink",style:"position:absolute;width:0;height:0","aria-hidden":"true"}}),(0,s._)(this,"node",null),Object.assign(this.config.attrs,t.attrs)}return(0,n._)(e,[{key:"push",value:function(e){var t=this.symbols,r=t.has(e.id);return t.set(e.id,e),!r}},{key:"add",value:function(e){var t=this.push(e);return this.node&&t&&e.mount(this.node),t}},{key:"attach",value:function(e){var t=this;this.node||(this.node=e,this.symbols.forEach((function(t){t.mount(e)})),e.querySelectorAll("symbol").forEach((function(e){var r=i.BrowserSymbol.createFromExistingNode(e);t.add(r)})))}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.node||(this.node=this.render(),t&&e.childNodes[0]?e.insertBefore(this.node,e.firstChild):e.appendChild(this.node)),this.node}},{key:"render",value:function(){var e=document.createElementNS(a,"svg");return Object.entries(this.config.attrs).forEach((function(t){return e.setAttribute(t[0],t[1])})),this.symbols.forEach((function(t){return e.appendChild(t.node)})),e}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)}}]),e}()},192943:(e,t,r)=>{"use strict";r.d(t,{BrowserSymbol:()=>a});var o=r(148564),n=r(302267),s=r(975766),i=r(667766),a=function(){function e(t){var r=t.content;(0,o._)(this,e),(0,s._)(this,"isMounted",!1),(0,s._)(this,"node",void 0),this.node=(0,i.parse)(r)}return(0,n._)(e,[{key:"id",get:function(){return this.node.id}},{key:"mount",value:function(e){return this.isMounted||(this.isMounted=!0,e.appendChild(this.node)),this.node}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&(this.node.parentNode.removeChild(this.node),this.isMounted=!1)}}],[{key:"createFromExistingNode",value:function(t){var r=new e({content:""});return r.node=t,r}}]),e}()},426435:(e,t,r)=>{"use strict";r.d(t,{makeIcon:()=>o.makeIcon});var o=r(639751);r(700202)},686600:(e,t,r)=>{"use strict";r.d(t,{addSpriteSymbol:()=>c,useIsomorphicLayoutEffect:()=>u});var o,n=r(989913),s=r(667294),i=!("undefined"==typeof window||!window.document||!window.document.createElement);if(i){var a="__SVG_SPRITE_NODE__";o=new n.BrowserSprite({attrs:{id:a}});var l=function(){var e=document.getElementById(a);e?o.attach(e):o.mount(document.body),document.removeEventListener("DOMContentLoaded",l)};document.querySelector("body")?l():document.addEventListener("DOMContentLoaded",l)}else o=null;function c(e){o&&o.add(e)}var u=i?s.useLayoutEffect:s.useEffect},667766:(e,t,r)=>{"use strict";function o(e){var t=!!document.importNode,r=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(r,!0):r}r.d(t,{parse:()=>o})},919266:(e,t,r)=>{"use strict";function o(e){var t={};return function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[r]||(console[o]("[@vkontakte/icons][".concat(e,"] ").concat(r)),t[r]=!0)}}r.d(t,{warnOnce:()=>o})},93001:(e,t,r)=>{"use strict";r.d(t,{Icon12Explicit:()=>o});var o=(0,r(426435).makeIcon)("Icon12Explicit","explicit_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="explicit_12"><path fill="currentColor" d="M8 9H5V4h3v1H6v1h2v1H6v1h2v1Z" /><path fill="currentColor" fill-rule="evenodd" d="M1 3.5A2.5 2.5 0 0 1 3.5 1h6A2.5 2.5 0 0 1 12 3.5v6A2.5 2.5 0 0 1 9.5 12h-6A2.5 2.5 0 0 1 1 9.5v-6ZM3.5 2h6A1.5 1.5 0 0 1 11 3.5v6A1.5 1.5 0 0 1 9.5 11h-6A1.5 1.5 0 0 1 2 9.5v-6A1.5 1.5 0 0 1 3.5 2Z" clip-rule="evenodd" /></symbol>',12,12,!1,void 0)},813387:(e,t,r)=>{"use strict";r.d(t,{Icon16Chevron:()=>o});var o=(0,r(426435).makeIcon)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8Z" /></symbol>',12,16,!1,void 0)},361674:(e,t,r)=>{"use strict";r.d(t,{Icon16Replay:()=>o});var o=(0,r(426435).makeIcon)("Icon16Replay","replay_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="replay_16"><path fill="currentColor" d="M8 2.75v1.195a.245.245 0 0 1-.373.209l-3.01-1.85a.245.245 0 0 1 0-.418l3.01-1.85A.245.245 0 0 1 8 .245V1.25a6.75 6.75 0 1 1-6.688 7.67.75.75 0 0 1 1.486-.203A5.251 5.251 0 1 0 8 2.75z" /></symbol>',16,16,!1,void 0)},284379:(e,t,r)=>{"use strict";r.d(t,{Icon20DeleteOutline:()=>o});var o=(0,r(426435).makeIcon)("Icon20DeleteOutline","delete_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" d="M6.837 4H2.75a.75.75 0 0 0 0 1.5h.545l.907 9.248c.051.523.094.96.157 1.314.066.37.163.711.353 1.028a2.9 2.9 0 0 0 1.247 1.131c.334.158.682.222 1.058.25.36.029.797.029 1.323.029h3.32c.526 0 .964 0 1.323-.028.376-.03.724-.093 1.058-.25a2.9 2.9 0 0 0 1.247-1.132c.19-.317.287-.657.353-1.028.063-.355.106-.79.157-1.314l.907-9.248h.545a.75.75 0 0 0 0-1.5h-4.087a3.25 3.25 0 0 0-6.326 0Zm1.581 0h3.164a1.751 1.751 0 0 0-3.164 0Zm6.78 1.5H4.802l.89 9.072c.054.56.091.938.143 1.228.05.281.104.422.162.52a1.4 1.4 0 0 0 .603.546c.102.048.248.088.533.11.294.024.673.024 1.235.024h3.262c.562 0 .941 0 1.235-.023.285-.023.43-.063.533-.111a1.4 1.4 0 0 0 .603-.547c.058-.097.112-.238.162-.52.052-.29.09-.667.144-1.226l.89-9.073Zm-2.886 2.002a.75.75 0 0 1 .685.81l-.5 6.003a.75.75 0 0 1-1.494-.124l.5-6.003a.75.75 0 0 1 .81-.686Zm-4.624 0a.75.75 0 0 1 .81.686l.5 6.002a.75.75 0 0 1-1.495.125l-.5-6.003a.75.75 0 0 1 .685-.81Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},757244:(e,t,r)=>{"use strict";r.d(t,{Icon20More:()=>o});var o=(0,r(426435).makeIcon)("Icon20More","more_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="more_20"><path fill="currentColor" d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" /></symbol>',20,20,!1,void 0)},718761:(e,t,r)=>{"use strict";r.d(t,{Icon20PauseCircle:()=>o});var o=(0,r(426435).makeIcon)("Icon20PauseCircle","pause_circle_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="pause_circle_20"><path fill="currentColor" fill-rule="evenodd" d="M20 10c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0s10 4.477 10 10zM6 7.5c0-.466 0-.699.076-.883a1 1 0 0 1 .541-.54C6.801 6 7.034 6 7.5 6s.699 0 .883.076a1 1 0 0 1 .54.541C9 6.801 9 7.034 9 7.5v5c0 .466 0 .699-.076.883a1 1 0 0 1-.541.54C8.199 14 7.966 14 7.5 14s-.699 0-.883-.076a1 1 0 0 1-.54-.541C6 13.199 6 12.966 6 12.5zm5.076-.883C11 6.801 11 7.034 11 7.5v5c0 .466 0 .699.076.883a1 1 0 0 0 .541.54c.184.077.417.077.883.077s.699 0 .883-.076a1 1 0 0 0 .54-.541c.077-.184.077-.417.077-.883v-5c0-.466 0-.699-.076-.883a1 1 0 0 0-.541-.54C13.199 6 12.966 6 12.5 6s-.699 0-.883.076a1 1 0 0 0-.54.541z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},197718:(e,t,r)=>{"use strict";r.d(t,{Icon20PlayCircle:()=>o});var o=(0,r(426435).makeIcon)("Icon20PlayCircle","play_circle_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="play_circle_20"><path fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10zm4.733-10.446L7.8 5.694a.548.548 0 0 0-.266-.069A.524.524 0 0 0 7 6.14v7.72c0 .09.025.18.071.257.147.247.473.331.728.19l6.934-3.861a.505.505 0 0 0 0-.892z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},186644:(e,t,r)=>{"use strict";r.d(t,{Icon20SongOutline:()=>o});var o=(0,r(426435).makeIcon)("Icon20SongOutline","song_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="song_outline_20"><path fill-rule="evenodd" d="M15.235 1.678a.75.75 0 0 0-.606-.168 25.527 25.527 0 0 0-1.367.269c-.758.168-1.736.419-2.5.734-1.295.535-1.513 1.898-1.514 2.834l-.001 1.152a3094.12 3094.12 0 0 0-.001 6.026c-1.979.132-3.363.793-4.121 1.743-.87 1.09-.83 2.499.087 3.416.877.876 2.3 1.071 3.474.466 1.22-.629 2.064-2.035 2.064-4.15l-.003-1-.001-.526-.001-1.681c0-1.14 0-2.504.002-3.715l2.559-.676c.99-.262 1.913-1.027 2.067-2.2a16.6 16.6 0 0 0 .127-1.905.787.787 0 0 0-.265-.619Zm-4.487 3.848 2.175-.575c.562-.148.908-.524.963-.943.038-.29.063-.583.08-.846-.119.024-.246.052-.378.081-.742.165-1.615.393-2.253.656-.367.152-.586.587-.587 1.449v.178ZM9.25 14.028c-1.65.128-2.551.672-2.953 1.176-.44.551-.35 1.093-.025 1.419.382.381 1.088.523 1.727.193.591-.304 1.244-1.096 1.25-2.788Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},299371:(e,t,r)=>{"use strict";r.d(t,{Icon24Cancel:()=>o});var o=(0,r(426435).makeIcon)("Icon24Cancel","cancel_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="cancel_24"><path d="M7.536 6.264a.9.9 0 0 0-1.272 1.272L10.727 12l-4.463 4.464a.9.9 0 0 0 1.272 1.272L12 13.273l4.464 4.463a.9.9 0 1 0 1.272-1.272L13.273 12l4.463-4.464a.9.9 0 1 0-1.272-1.272L12 10.727 7.536 6.264Z" /></symbol>',24,24,!1,void 0)},212276:(e,t,r)=>{"use strict";r.d(t,{Icon24DocumentOutline:()=>o});var o=(0,r(426435).makeIcon)("Icon24DocumentOutline","document_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_outline_24"><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2h2.011ZM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.352.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8Zm3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17.426 17.426 0 0 1 13.8 5.9V4.573Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},658332:(e,t,r)=>{"use strict";r.d(t,{Icon24MoreHorizontal:()=>o});var o=(0,r(426435).makeIcon)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path fill="currentColor" d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2Zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Z" /></g></symbol>',24,24,!1,void 0)},957424:(e,t,r)=>{"use strict";r.d(t,{Icon28ChevronLeftOutline:()=>o});var o=(0,r(426435).makeIcon)("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chevron_left_outline_28"><path fill="currentColor" d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" /></symbol>',28,28,!1,void 0)},585117:(e,t,r)=>{"use strict";r.d(t,{Icon28Pause:()=>o});var o=(0,r(426435).makeIcon)("Icon28Pause","pause_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="pause_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" d="M7.3 5h3.4A1.3 1.3 0 0 1 12 6.3v15.4a1.3 1.3 0 0 1-1.3 1.3H7.3A1.3 1.3 0 0 1 6 21.7V6.3A1.3 1.3 0 0 1 7.3 5Zm9 0h3.4A1.3 1.3 0 0 1 21 6.3v15.4a1.3 1.3 0 0 1-1.3 1.3h-3.4a1.3 1.3 0 0 1-1.3-1.3V6.3A1.3 1.3 0 0 1 16.3 5Z" /></g></symbol>',28,28,!1,void 0)},128694:(e,t,r)=>{"use strict";r.d(t,{Icon28Play:()=>o});var o=(0,r(426435).makeIcon)("Icon28Play","play_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="play_28"><path d="M21.65 11.923c1.181.682 1.772 1.023 1.97 1.467.173.388.173.832 0 1.22-.198.444-.789.785-1.97 1.467L11.6 21.874c-1.181.681-1.772 1.022-2.257.971a1.5 1.5 0 0 1-1.057-.61C8 21.842 8 21.16 8 19.797V8.203c0-1.363 0-2.044.286-2.438a1.5 1.5 0 0 1 1.057-.61c.485-.05 1.076.29 2.257.971l10.05 5.797Z" /></symbol>',28,28,!1,void 0)},119379:(e,t,r)=>{"use strict";r.d(t,{Icon28SongOutline:()=>o});var o=(0,r(426435).makeIcon)("Icon28SongOutline","song_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="song_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M19.78 3.025A1 1 0 0 1 21 4v2.102a3.6 3.6 0 0 1-2.672 3.479L15 10.468v9.926c0 4.687-4.583 7.1-7.073 4.61C5.351 22.426 7.82 18.2 13 17.942V7.93c-.027-1.922.91-3.288 2.684-3.88.641-.213 1.993-.551 4.096-1.026ZM13 19.944c-3.538.196-4.845 2.459-3.659 3.645C10.484 24.732 13 23.408 13 20.394Zm6-14.688c-1.348.315-2.249.548-2.684.693-.934.311-1.331.89-1.316 1.968v.481l2.812-.75A1.6 1.6 0 0 0 19 6.102Z" /></g></symbol>',28,28,!1,void 0)},392646:(e,t,r)=>{"use strict";r.d(t,{Icon32Play:()=>o});var o=(0,r(426435).makeIcon)("Icon32Play","play_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="play_32"><path d="M24.948 14.001c1.154.656 1.732.984 1.925 1.412.17.374.17.8 0 1.174-.194.428-.77.756-1.925 1.412l-12.43 7.061c-1.154.656-1.732.984-2.205.935a1.471 1.471 0 0 1-1.033-.587C9 25.03 9 24.373 9 23.061V8.938c0-1.311 0-1.967.28-2.347.244-.33.62-.543 1.033-.586.473-.05 1.05.279 2.205.935L24.948 14Z" /></symbol>',32,32,!1,void 0)},513698:(e,t,r)=>{"use strict";r.d(t,{Icon12Cancel:()=>o});var o=(0,r(28178).makeIcon)("Icon12Cancel","cancel_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="cancel_12"><path fill="currentColor" d="M3.525 2.464a.75.75 0 0 0-1.06 1.061L4.938 6 2.464 8.475a.75.75 0 1 0 1.061 1.06L6 7.062l2.475 2.475a.75.75 0 0 0 1.06-1.061L7.062 6l2.475-2.475a.75.75 0 1 0-1.061-1.06L6 4.938z" /></symbol>',12,12,!1,void 0)},622451:(e,t,r)=>{"use strict";r.d(t,{Icon16HelpOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon16HelpOutline","help_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="help_outline_16"><path fill="currentColor" d="M7.972 9.598c.376 0 .583-.21.662-.572.07-.454.228-.686.932-1.102.747-.449 1.134-1.005 1.134-1.82 0-1.26-1.012-2.102-2.516-2.102-1.139 0-1.986.46-2.325 1.172-.106.206-.159.41-.159.643 0 .41.26.675.678.675.323 0 .561-.15.694-.497.17-.48.519-.74 1.038-.74.583 0 .985.368.985.897 0 .497-.206.767-.89 1.183-.625.373-.948.794-.948 1.432v.075c0 .443.265.756.715.756ZM8 2.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8Zm7.9 3.1a.9.9 0 0 1-.9.9.9.9 0 0 1-.9-.9.9.9 0 0 1 .9-.9.9.9 0 0 1 .9.9Z" /></symbol>',16,16,!1,void 0)},900798:(e,t,r)=>{"use strict";r.d(t,{Icon16MoreVertical:()=>o});var o=(0,r(28178).makeIcon)("Icon16MoreVertical","more_vertical_16","0 0 8 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 16" id="more_vertical_16"><path fill="currentColor" d="M4 4.5c.825 0 1.5-.675 1.5-1.5S4.825 1.5 4 1.5 2.5 2.175 2.5 3 3.175 4.5 4 4.5Zm0 2c-.825 0-1.5.675-1.5 1.5S3.175 9.5 4 9.5 5.5 8.825 5.5 8 4.825 6.5 4 6.5Zm0 5c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5 1.5-.675 1.5-1.5-.675-1.5-1.5-1.5Z" /></symbol>',8,16,!1,void 0)},29157:(e,t,r)=>{"use strict";r.d(t,{Icon20CheckCircleOff:()=>o});var o=(0,r(28178).makeIcon)("Icon20CheckCircleOff","check_circle_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 20 20" id="check_circle_off_20"><defs><path id="check_circle_off_20_a" fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Zm0-1a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" clip-rule="evenodd" /></defs><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},495906:(e,t,r)=>{"use strict";r.d(t,{Icon20HelpOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20HelpOutline","help_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="help_outline_20"><g fill="currentColor"><path d="M10 6.25a1.25 1.25 0 0 0-1.21.937.75.75 0 0 1-1.453-.374 2.75 2.75 0 0 1 5.413.687c0 1.211-.654 1.84-1.145 2.298l-.008.008c-.478.446-.772.72-.855 1.3a.75.75 0 0 1-1.484-.212c.158-1.11.803-1.709 1.256-2.13l.068-.062c.447-.417.668-.663.668-1.202 0-.69-.56-1.25-1.25-1.25zM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" /><path fill-rule="evenodd" d="M10 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zM3 10a7 7 0 1 0 14 0 7 7 0 0 0-14 0z" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},407729:(e,t,r)=>{"use strict";r.d(t,{Icon24Add:()=>o});var o=(0,r(28178).makeIcon)("Icon24Add","add_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="add_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" d="M13 11h6.5a1 1 0 0 1 0 2H13v6.5a1 1 0 0 1-2 0V13H4.5a1 1 0 0 1 0-2H11V4.5a1 1 0 0 1 2 0V11Z" /></g></symbol>',24,24,!1,void 0)},894758:(e,t,r)=>{"use strict";r.d(t,{Icon24HelpOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24HelpOutline","help_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="help_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M4.929 4.929A9.97 9.97 0 0 1 12 2a9.972 9.972 0 0 1 7.071 2.929A9.97 9.97 0 0 1 22 12a9.971 9.971 0 0 1-2.929 7.071A9.972 9.972 0 0 1 12 22a9.972 9.972 0 0 1-7.071-2.929A9.972 9.972 0 0 1 2 12a9.971 9.971 0 0 1 2.929-7.071ZM12 3.8a8.171 8.171 0 0 0-5.798 2.402C4.717 7.687 3.8 9.735 3.8 12s.917 4.313 2.402 5.798A8.171 8.171 0 0 0 12 20.2a8.172 8.172 0 0 0 5.798-2.402C19.283 16.313 20.2 14.265 20.2 12s-.917-4.313-2.402-5.798A8.172 8.172 0 0 0 12 3.8Zm-.768 4.29c-.254.195-.409.434-.46.634a.9.9 0 0 1-1.744-.448c.17-.663.6-1.224 1.108-1.613C10.646 6.27 11.303 6 12 6c1.602 0 3 1.398 3 3 0 1.37-.75 2.22-1.285 2.807-.599.655-.815.91-.815 1.293a.9.9 0 0 1-1.8 0c0-1.123.71-1.886 1.174-2.386l.111-.12c.515-.565.815-.965.815-1.594 0-.608-.592-1.2-1.2-1.2-.235 0-.516.097-.768.29ZM13.2 16.6a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0Z" /></symbol>',24,24,!1,void 0)},658508:(e,t,r)=>{"use strict";r.d(t,{Icon28ChevronRightOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 7.5 6.5 6.5-6.5 6.5" /><path fill="currentColor" fill-rule="nonzero" d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414L16.086 14Z" /></g></symbol>',28,28,!1,void 0)},239532:(e,t,r)=>{"use strict";r.d(t,{Icon28HelpOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon28HelpOutline","help_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="help_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M3 14C3 7.928 7.928 3 14 3s11 4.928 11 11-4.928 11-11 11S3 20.072 3 14Zm1.8 0c0 5.078 4.122 9.2 9.2 9.2 5.078 0 9.2-4.122 9.2-9.2 0-5.078-4.122-9.2-9.2-9.2-5.078 0-9.2 4.122-9.2 9.2Zm8.1 5.65v-.3a.95.95 0 0 1 .95-.95h.3a.95.95 0 0 1 .95.95v.3a.95.95 0 0 1-.95.95h-.3a.95.95 0 0 1-.95-.95Zm2.97-5.447c-.477.488-.821.912-.966 1.652a2.2 2.2 0 0 0-.029.298.889.889 0 0 1-.887.847h-.01a.891.891 0 0 1-.89-.894c0-.25.008-.413.023-.49.138-.718.487-1.361.977-1.863l1.105-1.134c.316-.318.525-.774.525-1.269 0-.99-.801-1.8-1.781-1.8a1.78 1.78 0 0 0-1.493.82 3.745 3.745 0 0 0-.238.465.891.891 0 0 1-1.1.48l-.034-.012a.85.85 0 0 1-.513-1.128c.064-.155.125-.291.183-.41.612-1.245 1.764-2.015 3.195-2.015 1.968 0 3.563 1.611 3.563 3.6 0 .792-.32 1.512-.828 2.025l-.802.828Z" /></g></symbol>',28,28,!1,void 0)},932146:(e,t,r)=>{"use strict";r.d(t,{Icon36HelpOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon36HelpOutline","help_outline_36","0 0 36 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 36 36" id="help_outline_36"><path fill="currentColor" d="M18 11.5c-1.18 0-2.064.687-2.29 1.562a1.25 1.25 0 1 1-2.42-.624C13.848 10.268 15.89 9 18 9c2.56 0 4.75 1.872 4.75 4.588 0 1.001-.254 1.805-.668 2.483-.392.643-.907 1.13-1.312 1.51l-.024.022c-.828.776-1.359 1.274-1.509 2.324a1.25 1.25 0 1 1-2.475-.354c.276-1.932 1.387-2.967 2.182-3.707l.117-.109c.415-.389.692-.67.887-.989.174-.284.302-.637.302-1.18 0-1.182-.912-2.088-2.25-2.088ZM18 27a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" /><path fill="currentColor" fill-rule="evenodd" d="M18 3C9.716 3 3 9.716 3 18s6.716 15 15 15 15-6.716 15-15S26.284 3 18 3ZM5.5 18c0 6.904 5.596 12.5 12.5 12.5S30.5 24.904 30.5 18 24.904 5.5 18 5.5 5.5 11.096 5.5 18Z" clip-rule="evenodd" /></symbol>',36,36,!1,void 0)},212380:(e,t,r)=>{"use strict";r.d(t,{Icon56HelpOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon56HelpOutline","help_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 56 56" id="help_outline_56"><path fill="currentColor" d="M25.46 18.099c-.63.377-1.176.98-1.567 1.958a1.5 1.5 0 1 1-2.786-1.114c.61-1.523 1.562-2.669 2.809-3.417C25.145 14.79 26.556 14.5 28 14.5c4.473 0 7 3.85 7 7 0 2.81-1.716 4.354-2.983 5.494l-.257.232c-1.307 1.19-2.26 2.19-2.26 4.274a1.5 1.5 0 0 1-3 0c0-3.416 1.797-5.177 3.24-6.492l.071-.065C31.24 23.643 32 22.949 32 21.5c0-1.85-1.518-4-4-4-1.056 0-1.895.211-2.54.599ZM28 41a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" /><path fill="currentColor" fill-rule="evenodd" d="M28 52c13.255 0 24-10.745 24-24S41.255 4 28 4 4 14.745 4 28s10.745 24 24 24Zm0-3c11.598 0 21-9.402 21-21S39.598 7 28 7 7 16.402 7 28s9.402 21 21 21Z" clip-rule="evenodd" /></symbol>',56,56,!1,void 0)},931807:e=>{var t=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=t},58255:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var o=r(111132);function n(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,r)=>{"use strict";function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}r.d(t,{default:()=>o})},374277:(e,t,r)=>{"use strict";function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function n(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}r.d(t,{default:()=>n})},891047:(e,t,r)=>{"use strict";function o(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function n(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=o(r);return(e,r)=>n.then((o=>r(o.transaction(t,e).objectStore(t))))}let s;function i(){return s||(s=n("keyval-store","keyval")),s}function a(e,t=i()){return t("readonly",(t=>o(t.get(e))))}function l(e,t,r=i()){return r("readwrite",(r=>(r.put(t,e),o(r.transaction))))}function c(e,t,r=i()){return r("readwrite",(r=>new Promise(((n,s)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),n(o(r.transaction))}catch(e){s(e)}}}))))}function u(e,t=i()){return t("readwrite",(t=>(t.delete(e),o(t.transaction))))}function d(e=i()){return e("readwrite",(e=>(e.clear(),o(e.transaction))))}r.d(t,{clear:()=>d,createStore:()=>n,del:()=>u,get:()=>a,set:()=>l,update:()=>c})},759244:()=>{},963328:()=>{},98264:()=>{},403658:()=>{},861848:()=>{},458327:()=>{},814106:()=>{},181876:()=>{},170490:()=>{},895593:()=>{},351667:()=>{},528098:()=>{},974580:()=>{},936021:()=>{},97839:()=>{},628392:()=>{},241676:()=>{},848056:()=>{},833249:()=>{},417819:()=>{},635800:function(e,t,r){!function(e,t){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var o=r(t);function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}var i=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,r){return!Object.is(e,t[r])}))},a={error:null},l=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).state=a,t.resetErrorBoundary=function(){for(var e,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];null==t.props.onReset||(e=t.props).onReset.apply(e,o),t.reset()},t}s(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var r=t.prototype;return r.reset=function(){this.setState(a)},r.componentDidCatch=function(e,t){var r,o;null==(r=(o=this.props).onError)||r.call(o,e,t)},r.componentDidUpdate=function(e,t){var r,o,n=this.state.error,s=this.props.resetKeys;null!==n&&null!==t.error&&i(e.resetKeys,s)&&(null==(r=(o=this.props).onResetKeysChange)||r.call(o,e.resetKeys,s),this.reset())},r.render=function(){var e=this.state.error,t=this.props,r=t.fallbackRender,n=t.FallbackComponent,s=t.fallback;if(null!==e){var i={error:e,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(s))return s;if("function"==typeof r)return r(i);if(n)return o.createElement(n,i);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(o.Component);function c(e,t){var r=function(r){return o.createElement(l,t,o.createElement(e,r))},n=e.displayName||e.name||"Unknown";return r.displayName="withErrorBoundary("+n+")",r}function u(e){var t=o.useState(null),r=t[0],n=t[1];if(null!=e)throw e;if(null!=r)throw r;return n}e.ErrorBoundary=l,e.useErrorHandler=u,e.withErrorBoundary=c,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(667294))},429697:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var o=r(487462),n=r(263366),s=r(894578),i=r(58255),a=r(374277),l=r(667294),c=r(696630),u=r(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var o=t.resolveArguments(e,r),n=o[0],s=o[1];t.removeClasses(n,"exit"),t.addClass(n,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var o=t.resolveArguments(e,r),n=o[0],s=o[1]?"appear":"enter";t.addClass(n,s,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var o=t.resolveArguments(e,r),n=o[0],s=o[1]?"appear":"enter";t.removeClasses(n,s),t.addClass(n,s,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,o="string"==typeof r,n=o?""+(o&&r?r+"-":"")+e:r[e];return{baseClassName:n,activeClassName:o?n+"-active":r[e+"Active"],doneClassName:o?n+"-done":r[e+"Done"]}},t}(0,s.default)(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var o=this.getClassNames(t)[r+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&n&&(o+=" "+n),"active"===r&&e&&(0,u.forceReflow)(e),o&&(this.appliedClasses[t][r]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))}(e,o))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],o=r.base,n=r.active,s=r.done;this.appliedClasses[t]={},o&&d(e,o),n&&d(e,n),s&&d(e,s)},r.render=function(){var e=this.props,t=(e.classNames,(0,n.default)(e,["classNames"]));return l.createElement(c.default,(0,o.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);h.defaultProps={classNames:""},h.propTypes={};const p=h},696630:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var o=r(263366),n=r(894578),s=r(667294),i=r(973935),a=r(806035),l=r(500220),c=r(559391),u="unmounted",d="exited",h="entering",p="entered",m="exiting",v=function(e){function t(t,r){var o;o=e.call(this,t,r)||this;var n,s=r&&!r.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?s?(n=d,o.appearStatus=h):n=p:n=t.unmountOnExit||t.mountOnEnter?u:d,o.state={status:n},o.nextCallback=null,o}(0,n.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:d}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==h&&r!==p&&(t=h):r!==h&&r!==p||(t=m)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,o=this.props.timeout;return e=t=r=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,r=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===h){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);r&&(0,c.forceReflow)(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},r.performEnter=function(e){var t=this,r=this.props.enter,o=this.context?this.context.isMounting:e,n=this.props.nodeRef?[o]:[i.findDOMNode(this),o],s=n[0],l=n[1],c=this.getTimeouts(),u=o?c.appear:c.enter;!e&&!r||a.default.disabled?this.safeSetState({status:p},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,l),this.safeSetState({status:h},(function(){t.props.onEntering(s,l),t.onTransitionEnd(u,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(s,l)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),o=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!a.default.disabled?(this.props.onExit(o),this.safeSetState({status:m},(function(){e.props.onExiting(o),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(o)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(o){r&&(r=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),o=null==e&&!this.props.addEndListener;if(r&&!o){if(this.props.addEndListener){var n=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],s=n[0],a=n[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,r=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(l.default.Provider,{value:null},"function"==typeof r?r(e,n):s.cloneElement(s.Children.only(r),n))},t}(s.Component);function f(){}v.contextType=l.default,v.propTypes={},v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},v.UNMOUNTED=u,v.EXITED=d,v.ENTERING=h,v.ENTERED=p,v.EXITING=m;const g=v},500220:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});const o=r(667294).createContext(null)},806035:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});const o={disabled:!1}},559391:(e,t,r)=>{"use strict";r.d(t,{forceReflow:()=>o});var o=function(e){return e.scrollTop}},460554:(e,t,r)=>{"use strict";r.d(t,{ConvoAudiosPlaylist:()=>i,getAudioThumb:()=>h,isConvoAudioTrack:()=>u,isRestoredConvoAudiosPlaylist:()=>d,mapConvoToConvoAudioTrackList:()=>c,toConvoAudioTrack:()=>a});var o=r(185327),n=r(9452),s=r(89131);class i{getNext(e,t,r){const o=t?this.shuffledList:this.list;return(0,n.getNextTrackFromPlaylist)(e,o,r)}getPrev(e,t,r){const o=t?this.shuffledList:this.list;return(0,n.getPrevTrackFromPlaylist)(e,o,r)}getConvoAudiosList(){return this.list}getPlaylistMeta(){return this.meta}constructor(e){this.list=e.list,this.shuffledList=(0,s.shuffleArray)(this.list),this.meta=e.meta}}function a(e,t,r){var o,n,s;let i;"Foreign"===(null==(o=r)?void 0:o.kind)&&"rootCmid"in r&&r.rootCmid?i={cmid:r.rootCmid,peerId:r.rootPeerId}:(null==(n=r)?void 0:n.peerId)&&(null==(s=r)?void 0:s.cmid)&&(i={peerId:r.peerId,cmid:r.cmid});const a=h(t.thumb);return{title:t.title,artist:t.artist,trackCode:t.trackCode,fromMessage:i,thumb:a,audioTrack:{id:`${t.ownerId}_${t.id}`,url:t.url,progress:e,duration:t.duration}}}function l(e){var t,r;const o=[];if("Normal"!==e.kind&&"Queued"!==e.kind&&"Foreign"!==e.kind)return o;if(Array.isArray(e.attaches.audios)){const t=[...e.attaches.audios];o.push(...t)}const n=null==(t=e.attaches.wall)?void 0:t.attaches.audios;if(Array.isArray(n)){const e=[...n];o.push(...e)}const s=e.forwardedMessages;Array.isArray(s)&&s.reduce(((e,t)=>(e.push(...l(t)),e)),o);const i="ForeignExpired"===(null==(r=e.replyMessage)?void 0:r.kind)?void 0:e.replyMessage;return i&&o.push(...l(i)),o}function c(e){const t=[],r=o.allHistoryNodes(e).map((e=>({message:e.item})));for(const{message:e}of r){const r="Normal"===e.kind,o="Queued"===e.kind;if(r||o){l(e).filter((e=>!!e.url)).forEach((r=>{const o="Normal"===e.kind?e:void 0;t.push(a(0,r,o))}))}}return(0,n.excludeTracksDoubling)(t)}function u(e){if(!e||"object"!=typeof e)return!1;const{title:t,artist:r,audioTrack:o,trackCode:n,fromMessage:s,thumb:i}=e;if("string"!=typeof t||"string"!=typeof r||!o||"object"!=typeof o||"string"!=typeof n||!s||"object"!=typeof s||"string"!=typeof i)return!1;const{url:a,id:l,duration:c,progress:u}=o;return"string"==typeof a&&"string"==typeof l&&"number"==typeof c&&"number"==typeof u&&("number"==typeof s.cmid&&"number"==typeof s.peerId)}function d(e){if(e&&"object"==typeof e){const{meta:t,list:r}=e;let o=!1,n=!1;if(t&&"object"==typeof t){const{convoPeerId:e,type:r}=t;o="number"==typeof e&&"temp"===r}return r&&Array.isArray(r)&&r.length&&(n=!!r.filter((e=>u(e))).length),o&&n}return!1}function h(e,t){var r,o,n,s,i,a,l,c;const u=t&&(null==(r=e)?void 0:r[`photo_${t}`]);return u||((null==(o=e)?void 0:o.photo_34)||(null==(n=e)?void 0:n.photo_68)||(null==(s=e)?void 0:s.photo_135)||(null==(i=e)?void 0:i.photo_270)||(null==(a=e)?void 0:a.photo_300)||(null==(l=e)?void 0:l.photo_600)||(null==(c=e)?void 0:c.photo_1200))}},9452:(e,t,r)=>{"use strict";r.d(t,{excludeTracksDoubling:()=>i,getNextTrackFromPlaylist:()=>n,getPrevTrackFromPlaylist:()=>s});var o=r(434788);function n(e,t,r){const n=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),s=n>=0?t[n+1]:void 0;if(s)return(0,o._)({},s,{audioTrack:(0,o._)({},s.audioTrack,{progress:0})});if(!s&&"all"===r){const e=t[0];return e?(0,o._)({},e,{audioTrack:(0,o._)({},e.audioTrack,{progress:0})}):void 0}}function s(e,t,r){const n=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),s=t[n-1];if(s)return(0,o._)({},s,{audioTrack:(0,o._)({},s.audioTrack,{progress:0})});if(!s&&"all"===r){const e=t[t.length-1];return e?(0,o._)({},e,{audioTrack:(0,o._)({},e.audioTrack,{progress:0})}):void 0}}function i(e){const t=new Set;return e.filter((e=>!t.has(e.audioTrack.id)&&(t.add(e.audioTrack.id),!0)))}},200028:(e,t,r)=>{"use strict";r.d(t,{ChannelComposerDraftsProvider:()=>d,ComposerDraftsProvider:()=>l,useChannelComposerDraft:()=>c,useComposerDraft:()=>i});var o=r(667294),n=r(400681),s=r(559360);function i(e){const t=(0,o.useContext)(a);if(!t)throw new Error("ComposerDraftsProvider не добавлен в дерево Реакта!");const r=t[e],s=(0,o.useMemo)((()=>n.empty()),[]);var i;return r&&null!=(i=r[r.length-1])?i:s}const a=o.createContext({}),l=a.Provider;function c(e){const t=(0,o.useContext)(u);if(!t)throw new Error("ChannelComposerDraftsProvider не добавлен в дерево Реакта!");const r=(0,o.useMemo)((()=>s.empty()),[]);return t[e]||r}const u=o.createContext({}),d=u.Provider},367763:(e,t,r)=>{"use strict";r.d(t,{useDeviceData:()=>n});var o=r(86894);function n(){return{isTouchOnly:!(0,o.useAdaptivityWithJSMediaQueries)().hasPointer}}},599781:(e,t,r)=>{"use strict";r.d(t,{useHover:()=>n});var o=r(667294);const n=()=>{const[e,t]=o.useState(!1),r=o.useCallback((()=>t(!0)),[]),n=o.useCallback((()=>t(!1)),[]),s=o.useRef();return[o.useCallback((e=>{s.current&&(s.current.removeEventListener("mouseenter",r),s.current.removeEventListener("mouseleave",n)),s.current=e,s.current&&(s.current.addEventListener("mouseenter",r),s.current.addEventListener("mouseleave",n))}),[r,n]),e]}},346006:(e,t,r)=>{"use strict";r.d(t,{Module:()=>i,useGlobalKeyBoardHandlers:()=>u,useModuleKeyBoardHandlers:()=>c});var o=r(89131),n=r(667294),s=r(65970);e=r.hmd(e);const i={MediaViewer:"MediaViewer",Modal:"Modal",SimpleComposer:"SimpleComposer",FCComposer:"FCComposer",FCWindow:"FCWindow",RightPanel:"RightPanel",Composer:"Composer",ConvoMain:"ConvoMain"},a={[i.MediaViewer]:{priority:1001},[i.Modal]:{priority:1e3,blockGlobalHandlers:!0,blockOtherModules:!0},[i.SimpleComposer]:{priority:902},[i.FCComposer]:{priority:901},[i.FCWindow]:{priority:900},[i.RightPanel]:{priority:500},[i.Composer]:{priority:200},[i.ConvoMain]:{priority:100}};const l=new class{constructor(){this.isSubscribed=!1,this.isGlobalHandlersBlocked=!1,this.globalHandlers=new Map,this.moduleConfig=new Map(Object.entries(a)),this.moduleHandlers=new Map,this.subscribeModuleKeyDown=(t,r)=>{if(o.isDev&&!this.moduleConfig.has(t))throw new Error(`Module ${e} must be in moduleConfig.`);var n;const s=null!=(n=this.moduleHandlers.get(t))?n:new Set;return s.add(r),this.moduleHandlers.set(t,s),this.onModuleHandlersUpdated(),()=>{s.delete(r),0===s.size&&this.moduleHandlers.delete(t),this.onModuleHandlersUpdated()}},this.subscribeGlobalKeyDown=(e,t)=>{const r=this.globalHandlers.has(e);if(o.isDev&&r)throw new Error(`Global keyCombo ${e} is already subscribed. Unsubscribe it first`);return this.globalHandlers.set(e,t),this.updateSubscription(),()=>{this.globalHandlers.delete(e),this.updateSubscription()}},this.addModuleConfig=(e,t)=>{this.moduleConfig.set(e,t)},this.updateSubscription=()=>{const e=this.globalHandlers.size>0||this.moduleHandlers.size>0;e&&!this.isSubscribed&&(document.addEventListener("keydown",this.keyDownHandler),this.isSubscribed=!0),!e&&this.isSubscribed&&(document.removeEventListener("keydown",this.keyDownHandler),this.isSubscribed=!1)},this.onModuleHandlersUpdated=()=>{this.updateGlobalHandlersBlocked(),this.updateSubscription()},this.callModuleSubscription=(e,t)=>{const r=[...this.moduleConfig.entries()].sort(((e,t)=>t[1].priority-e[1].priority)).map((([e])=>e));for(let n=0;n<r.length;n++){var o;const s=r[n];if(void 0===s)continue;const i=this.moduleHandlers.get(s);if(!i)continue;let a=!1;const l=t=>{const r=t===e;return r&&(a=!0),r};for(let e of Array.from(i).reverse())if(e(l,t),a)break;if(a=a||!!(null==(o=this.moduleConfig.get(s))?void 0:o.blockOtherModules),a)break}},this.callGlobalSubscription=(e,t)=>{if(this.isGlobalHandlersBlocked)return void t();const r=this.globalHandlers.get(e);r&&(!1!==r.autoPreventDefault?(t(),r.handler()):r.handler(t))},this.updateGlobalHandlersBlocked=()=>{const e=[...this.moduleHandlers.keys()].some((e=>{var t;return null==(t=this.moduleConfig.get(e))?void 0:t.blockGlobalHandlers}));this.isGlobalHandlersBlocked=e},this.keyDownHandler=e=>{if(!(e instanceof KeyboardEvent))return;const t=(0,s.getKeyCombo)(e),r=e.preventDefault.bind(e);(0,s.isGlobalKeyCombo)(t)?this.callGlobalSubscription(t,r):(0,s.isModuleKeyCombo)(t)&&this.canCallModuleSubscription()&&this.callModuleSubscription(t,r)},this.canCallModuleSubscription=()=>{const e=document.activeElement;return null===e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!(e instanceof HTMLElement&&!0===e.isContentEditable)}}};function c({moduleName:e,config:t}){void 0!==t&&l.addModuleConfig(e,t);return{subscribeKeyDown:(0,n.useCallback)((t=>l.subscribeModuleKeyDown(e,t)),[e])}}const u=()=>({subscribeGlobalKeyDown:l.subscribeGlobalKeyDown})},576697:(e,t,r)=>{"use strict";r.d(t,{useLongTouch:()=>s});var o=r(667294);const n=500;function s(e,t,r,s=n){(0,o.useEffect)((()=>{const o=t.current;if(!e||!o)return;let n;const i=()=>{n&&(window.clearTimeout(n),n=void 0)},a=e=>{i(),n=window.setTimeout((e=>()=>{i();const t=e=>{o.removeEventListener("touchend",t,!0),e.preventDefault(),e.stopPropagation()};o.addEventListener("touchend",t,{capture:!0,once:!0}),r(e)})(e),s)};return o.addEventListener("touchstart",a,{passive:!0}),o.addEventListener("touchcancel",i,!0),o.addEventListener("touchend",i,!0),o.addEventListener("touchmove",i,{passive:!0}),()=>{i(),o.removeEventListener("touchstart",a),o.removeEventListener("touchcancel",i,!0),o.removeEventListener("touchend",i,!0),o.removeEventListener("touchmove",i)}}),[r,e,s,t])}},410519:(e,t,r)=>{"use strict";r.d(t,{useModal:()=>i,useModalGroup:()=>l,useSubModal:()=>a});var o=r(667294),n=r(883950),s=r(171656);const i=(e,t="popup")=>c({groupId:e,stackName:t}),a=e=>c({groupId:e,isSubModal:!0}),l=()=>{const{createGroup:e,closeGroup:t}=(0,s.useModalContext)(),r=(0,o.useRef)();r.current||(r.current=e());const{id:n}=r.current.data,i=(0,o.useCallback)((()=>t(n)),[t,n]);return(0,o.useEffect)((()=>()=>{var e;null==(e=r.current)||e.remove()}),[]),{id:n,closeGroup:i}},c=e=>{var t,r;const i=null!=(r=null==(t=e)?void 0:t.stackName)?r:"popup",{createModal:a,createGroup:l,getModalGroup:c,closeModalForced:d}=(0,s.useModalContext)(),h=(0,o.useRef)();var p;h.current||(h.current=(null==(p=e)?void 0:p.groupId)?{data:c(e.groupId)}:l());const m=(0,o.useRef)();var v,f;m.current||(m.current=a(h.current.data.id,null==(v=e)?void 0:v.isSubModal,(null==(f=e)?void 0:f.id)?n.resolveId(e.id):void 0));const g=m.current.id;return(0,o.useEffect)((()=>()=>{var e,t,r;d(g,i),null==(t=h.current)||null==(e=t.remove)||e.call(t),null==(r=m.current)||r.remove()}),[d,g,i]),u(g,i)},u=(e,t)=>{const{openedModals:r,openModal:n,closeModal:i,findIndexInStack:a}=(0,s.useModalContext)(),l=(0,o.useCallback)((()=>n(e,t)),[n,e,t]),c=(0,o.useCallback)((()=>i(e,t)),[i,e,t]),u=a(e,t);return(0,o.useMemo)((()=>({isActive:Boolean(r[t].find((t=>t===e))),indexInStack:u,isInStack:null!==u,open:l,close:c})),[c,e,l,r,u,t])}},90308:(e,t,r)=>{"use strict";r.d(t,{useResizeObserver:()=>s});var o=r(667294),n=r(89131);function s({throttleInterval:e,debounceInterval:t}={},r){const s=(0,o.useRef)(),i=(0,o.useRef)(new Map),a=(0,o.useRef)();a.current=r;const l=(0,o.useCallback)((()=>{const r=new Map,o=()=>{const e=Array.from(r.values());e.forEach((e=>{const t=i.current.get(e.target);t&&t(e)})),a.current&&a.current(e),r.clear()},l=e?(0,n.throttle)(o,e):t?(0,n.debounce)(o,t,!0):o;s.current=new ResizeObserver((e=>{e.forEach((e=>{r.set(e.target,e)})),l()}))}),[e,t]);(0,o.useEffect)((()=>(l(),()=>{s.current&&(s.current.disconnect(),s.current=void 0),i.current.clear()})),[l]);return{observe:(0,o.useCallback)(((e,t)=>{s.current||l();const r=s.current,o=i.current;return r.observe(e),t&&o.set(e,t),()=>{t&&o.delete(e),r.unobserve(e)}}),[s,l])}}},599660:(e,t,r)=>{"use strict";r.d(t,{ActionsMenu:()=>d,ActionsMenuAction:()=>h,ActionsMenuDropdownAction:()=>p,ActionsMenuSeparator:()=>m});var o=r(434788),n=r(820224),s=(r(759244),r(667294)),i=r(294184),a=r.n(i),l=r(813387),c=r(163332),u=r(988994);const d=e=>{var{className:t,children:r}=e,i=(0,n._)(e,["className","children"]);return s.createElement("div",(0,o._)({},i,{className:a()("ActionsMenu",t)}),r)},h=e=>{var{leftIcon:t,rightIcon:r,title:i,subtitle:l,type:c="secondary",size:u="regular",isActive:d=!1,isLoading:h,className:p,onClick:m,titleClassName:v}=e,f=(0,n._)(e,["leftIcon","rightIcon","title","subtitle","type","size","isActive","isLoading","className","onClick","titleClassName"]);return s.createElement("button",(0,o._)({},f,{className:a()("ActionsMenuAction",c&&`ActionsMenuAction--${c}`,h&&"ActionsMenuAction--loading",d&&"ActionsMenuAction--active",`ActionsMenuAction--size-${u}`,p),onClick:m}),t&&s.createElement("i",{className:"ActionsMenuAction__icon"},t),s.createElement("span",{className:a()("ActionsMenuAction__title",v)},i,l&&s.createElement("span",{className:"ActionsMenuAction__subtitle"},l)),r&&s.createElement("i",{className:"ActionsMenuAction__icon"},r))},p=e=>{var{children:t,icon:r,openType:i,hideOnClick:p=!0,position:m,align:v,actionsMenuClassName:f}=e,g=(0,n._)(e,["children","icon","openType","hideOnClick","position","align","actionsMenuClassName"]);const[y,b]=(0,s.useState)(!1),{mode:E}=(0,u.useLayoutData)(),w=(0,s.useMemo)((()=>{const e="two-column"===E?{position:"right",align:"left"}:{position:"bottom",align:"right"};return m&&(e.position=m),v&&(e.align=v),e}),[E,m,v]);return s.createElement(c.Dropdown,(0,o._)({content:s.createElement(d,{className:a()(f,{"ActionsMenu--dropdown":"two-column"===E})},t)},"click"===i?{openType:"click"}:{openType:"hover",hideDelay:0},w,{classNames:{trigger:"ActionsMenu--dropdown-trigger"},adaptation:"vertical",onOpen:()=>b(!0),onClose:()=>b(!1),hideOnClick:p,canOpen:!g.disabled}),s.createElement(h,(0,o._)({},g,{isActive:y,leftIcon:r,rightIcon:s.createElement(l.Icon16Chevron,null)})))},m=({className:e})=>s.createElement("div",{role:"separator",className:a()("ActionsMenuAction__separator",e)})},202158:(e,t,r)=>{"use strict";r.d(t,{AttachAudio:()=>M});r(963328);var o=r(667294),n=r(294184),s=r.n(n),i=r(89131),a=r(696023),l=r(579957),c=r(460554),u=r(364705),d=r(585117),h=r(718761),p=r(128694),m=r(197718),v=r(119379),f=r(186644),g=r(93001),y=r(757244),b=r(86894),E=r(599781),w=r(518388),k=r(376753),_=r(163332),C=r(599660),x=r(367763),A=r(179636);const M=o.memo((function({audio:e,isLarge:t,message:r,actions:n}){return Boolean(e.contentRestricted)?o.createElement(I,{audio:e,isLarge:t}):o.createElement(S,{audio:e,message:r,isLarge:t,actions:n})})),S=o.memo((function({audio:e,isLarge:t,message:r,actions:n}){const{player:s}=(0,a.useBrowserEnv)(),i=(0,o.useContext)(l.ConvoAudiosPlaylistContext),[u,d]=(0,o.useState)("stopped"),[h,p]=(0,o.useState)(0),m=(0,o.useRef)(`${e.ownerId}_${e.id}`),v=(0,o.useCallback)((e=>{var t;const{currentTrackEntity:r,status:o}=e;if((null==(t=r)?void 0:t.audioTrack)&&r.audioTrack.id===m.current){const{progress:e}=r.audioTrack;d(o),p(e)}}),[]);(0,o.useEffect)((()=>(s.subscribe("stateupdated",v),()=>{s.unsubscribe("stateupdated",v)})),[e,v,s]),(0,o.useEffect)((()=>{v(s.getState())}),[]);const f=(0,o.useCallback)((t=>{if(e.url){if("playing"===u)s.pause();else{var o,n;const t=i(),a="Foreign"===(null==(o=r)?void 0:o.kind)||"Normal"===(null==(n=r)?void 0:n.kind)?r:void 0;s.play((0,c.toConvoAudioTrack)(h,e,a),t)}t.preventDefault()}}),[e,u,s,i,h,r]);return o.createElement(R,{progress:h,artist:e.artist,title:e.title,duration:e.duration,status:u,thumb:e.thumb,isExplicit:e.isExplicit,isLarge:t,actions:n,onClick:f})}));function I({audio:e,isLarge:t}){const{navigate:r}=(0,u.useRouter)();return o.createElement(R,{progress:0,artist:e.artist,title:e.title,duration:e.duration,status:"stopped",thumb:e.thumb,isExplicit:e.isExplicit,isLarge:t,className:"AttachAudio__restricted",onClick:()=>{r({kind:"AudioRestrictionRuntimeRoute",audio:e})}})}const R=({progress:e,duration:t,artist:r,title:n,status:l,thumb:u,isLarge:M,isExplicit:S,className:I,actions:R,onClick:N})=>{const{lang:O}=(0,a.useBrowserEnv)(),{isTouchOnly:P}=(0,x.useDeviceData)(),L=(0,a.useFeatureFlags)(),{settings:T}=(0,a.useViewer)(),D=T.rightClickActionsEnabled&&!P,[B,H]=(0,o.useState)(null),V=M&&L.vkm_new_attach_track,z=V?d.Icon28Pause:h.Icon20PauseCircle,W=V?p.Icon28Play:m.Icon20PlayCircle,F=V?v.Icon28SongOutline:f.Icon20SongOutline,[j,U]=(0,E.useHover)(),$="playing"===l||"paused"===l,G=(0,c.getAudioThumb)(u,V?135:68);return o.createElement("div",{ref:e=>{j(e),H(e)},className:s()("AttachAudio",I,{"AttachAudio--large":V,"AttachAudio--withActions":R}),onClick:N},o.createElement("div",{className:"AttachAudio__album"},u?o.createElement("img",{className:"AttachAudio__albumImg",alt:`${n} — ${r}`,src:G}):o.createElement("div",{className:"AttachAudio__albumImg AttachAudio__albumImg--placeholder"},o.createElement(F,null)),(()=>{const t=V&&$||U;return o.createElement("div",{className:"AttachAudio__albumControls"},o.createElement("div",{className:s()("AttachAudio__albumControlsBackdrop",{"AttachAudio__albumControlsBackdrop--show":t})}),o.createElement("div",{className:"AttachAudio__albumControlsIcon"},(()=>{const e=O.use("me_attach_track_play_aria_label"),t=O.use("me_attach_track_play_aria_label");return"playing"===l?(U||V)&&o.createElement(z,{"aria-label":t}):"paused"===l?(U||V)&&o.createElement(W,{"aria-label":e}):"stopped"===l?U&&o.createElement(W,{"aria-label":e}):void 0})()),!V&&$&&o.createElement(w.AttachAudioSoundBar,{isActive:"playing"===l,className:s()("AttachAudio__albumControlsBar",{"AttachAudio__albumControlsBar--hide":U})}),V&&$&&o.createElement(k.ProgressCircle,{className:"AttachAudio__albumControlsProgress",progress:Number((100*e).toFixed(2)),size:46,ariaLabel:O.use("me_attach_track_progress_aria_label")}))})()),o.createElement("div",{className:"AttachAudio__info"},o.createElement(b.Headline,{level:V?"1":"2",weight:V?"2":"3",className:"AttachAudio__title"},o.createElement("span",{className:"AttachAudio__titleText"},n),S&&o.createElement("span",{className:"AttachAudio__titleExplicit","aria-label":O.use("me_attach_track_explicit_aria_label")},o.createElement(g.Icon12Explicit,null))),V?o.createElement(b.Subhead,{className:"AttachAudio__artist"},r):o.createElement(b.Footnote,{className:"AttachAudio__artist"},r),V&&o.createElement(b.Subhead,{className:"AttachAudio__duration"},$?o.createElement("span",{role:"timer",className:"AttachAudio__durationLeft","aria-label":O.use("me_attach_track_time_left_aria_label")},((e,t)=>{const r=Math.floor(t*(1-e));return"-"+(0,i.formatDuration)(r)})(e,t)):o.createElement("span",{className:"AttachAudio__durationValue"},(0,i.formatDuration)(t)))),R&&!D&&o.createElement("div",{className:"AttachAudio__actions"},o.createElement(_.Dropdown,{classNames:{wrapper:s()("AttachAudio__dropdown",{"AttachAudio__dropdown--open":P}),wrapperOpened:"AttachAudio__dropdown--open"},content:o.createElement(C.ActionsMenu,null,R),align:"center",position:"bottom",openType:P?"click":"hover"},o.createElement("button",{className:"AttachAudio__action","aria-label":O.use("me_actions_more")},o.createElement(y.Icon20More,null)))),R&&D&&o.createElement(A.ContextMenu,{ref:{current:B},allowNativeContextMenu:!0,content:o.createElement(C.ActionsMenu,null,R)}))}},518388:(e,t,r)=>{"use strict";r.d(t,{AttachAudioSoundBar:()=>a});r(98264);var o=r(667294),n=r(294184),s=r.n(n),i=r(89131);const a=({isActive:e,className:t})=>{const r=(0,o.useRef)(null),n=(0,o.useRef)(e);n.current=e;const a=[[.4,1],[.3,.85],[.2,.65],[.05,.5]];return(0,o.useEffect)((()=>{const e=setInterval((()=>{if(!r.current||!n.current)return;const e=r.current.children;for(let r=0;r<e.length;r++){const o=e[r],n=o instanceof HTMLDivElement&&o.style;if(!n)return;var t;const[s=0,l=0]=null!=(t=a[r])?t:[];n.height=(0,i.getRandomFloat)(14*s,14*l)+"px"}}),150);return()=>{clearInterval(e)}}),[]),o.createElement("div",{ref:r,className:s()("AttachAudioSoundBar",t,{"AttachAudioSoundBar--stopped":!e})},o.createElement("div",{className:"AttachAudioSoundBar__bar"}),o.createElement("div",{className:"AttachAudioSoundBar__bar"}),o.createElement("div",{className:"AttachAudioSoundBar__bar"}),o.createElement("div",{className:"AttachAudioSoundBar__bar"}))}},76292:(e,t,r)=>{"use strict";r.d(t,{AttachDoc:()=>k});r(403658);var o=r(667294),n=r(197934),s=r(212276),i=r(597298),a=r(89131),l=r(294184),c=r.n(l),u=r(696023),d=r(15285),h=r(401208),p=r(410519),m=r(671324),v=r(874971),f=r(964929),g=r(798855),y=r(234325),b=r(506315),E=r(86894),w=r(388918);const k=({doc:e,variant:t="inline",isInBubble:r=!1,forwardLevel:l=0,isOut:m=!1,className:v})=>{const f=(0,u.usePixelDensity)(),[,g]=(0,d.getExpectedAttachWidth)(f,r,l,232),y=(0,p.useModal)(),b=(0,o.useCallback)((t=>{e.isUnsafe&&(0!==t.button&&1!==t.button||(t.preventDefault(),y.open()))}),[e.isUnsafe,y]),E=n.preview(e,g),w=e.ext.toUpperCase()+" · "+(0,a.formatFileSize)(e.size);return"preview"===t&&e.image?o.createElement(h.AttachDocPreview,{doc:e,meta:w,isInBubble:r,forwardLevel:l}):o.createElement(o.Fragment,null,o.createElement(i.ExternalLink,{onClick:b,onAuxClick:b,href:e.url,className:c()("AttachDoc",v)},o.createElement("figure",{className:c()("AttachDoc__icon",{"AttachDoc__icon--isOut":m})},E?o.createElement("img",{src:E.url,alt:e.title}):o.createElement(s.Icon24DocumentOutline,null)),o.createElement("div",{className:"AttachDoc__title"},e.title),o.createElement("div",{className:"AttachDoc__meta"},w)),y.isActive&&o.createElement(_,{onClose:y.close,title:e.title,url:e.url}))},_=({onClose:e,url:t,title:r})=>{const{lang:n}=(0,u.useBrowserEnv)();return o.createElement(m.ModalView,{onEscape:e,contextClass:"MEConfig"},o.createElement(v.ModalBackdrop,{onClick:e},o.createElement(f.ModalPanel,{className:"AttachDoc__unsafe-modal"},o.createElement(g.ModalHeader,{closeLabel:n.use("me_close"),onClose:e,title:n.use("me_download_unsafe_title")}),o.createElement(y.ModalBody,null,o.createElement(w.FormattedLangKey,{langkey:"me_download_unsafe_text",values:{filename:o.createElement("b",{className:"AttachDoc__unsafe-filename"},r)}})),o.createElement(b.ModalFooter,{buttons:[o.createElement(E.Button,{mode:"tertiary",key:"cancel",onClick:e},n.use("me_cancel")),o.createElement(E.Button,{href:t,download:!0,mode:"primary",onClick:e,key:"download"},n.use("me_download"))]}))))}},401208:(e,t,r)=>{"use strict";r.d(t,{AttachDocPreview:()=>d});r(861848);var o=r(667294),n=r(197934),s=r(597298),i=r(803524),a=r(392646),l=r(696023),c=r(15285),u=r(293216);const d=({doc:e,meta:t,isInBubble:r=!1,forwardLevel:d=0})=>{const[h,p]=(0,o.useState)(!1),m=(0,l.usePixelDensity)(),v="gif"===e.ext,[f,g]=(0,c.getExpectedAttachWidth)(m,r,d,232),y=n.preview(e,g);if(!y)return null;const b=Math.min(y.width,f),E=Math.ceil(y.height/y.width*b);return o.createElement(s.ExternalLink,{href:e.url,className:"AttachDocPreview",style:{width:Math.max(b,120),height:Math.max(E,120)},onClick:v?e=>{p((e=>!e)),e.preventDefault()}:void 0,target:v?"_self":"_blank"},o.createElement(u.PhotoItem,{className:"AttachDocPreview__photoItem",alt:e.title,src:h?e.url:y.url,width:Math.max(b,120),height:Math.max(E,120)}),v&&!h&&o.createElement("div",{className:"AttachDocPreview__play"},o.createElement(a.Icon32Play,null)),o.createElement(i.ComposerAttachPreviewMeta,{rounded:!0,top:!0,left:!0},o.createElement("span",{className:"AttachDocPreview__meta"},t)))}},650938:(e,t,r)=>{"use strict";r.d(t,{AttachVideos:()=>v,getDuration:()=>f});var o=r(434788),n=(r(458327),r(667294)),s=r(197934),i=r(294184),a=r.n(i),l=r(392646),c=r(89131),u=r(597298),d=r(15285),h=r(704057),p=r(747578),m=r(293216);const v=({videos:e,forwardLevel:t=0,getAdditionalLinkPayload:r,onWidthChange:i})=>{const c=(0,d.getAttachForwardIndent)(t),{width:v,minHeight:g,maxSingleHeight:y,preferredRatio:b}=(0,h.useImagesLayout)(),E=v-c,w=1===e.length,k=(0,n.useMemo)((()=>e.reduce(((e,t)=>e+"__"+t.id),`${E}__${g}__${b}`)),[e,E,g,b]),_=(0,n.useMemo)((()=>{const t=e.reduce(((e,t)=>{const r=s.preview(t,E);return r&&e.push((0,o._)({},r,{width:r.width||t.width||1600,height:r.height||t.height||900,videoAttach:t})),e}),[]);if(!t.length)return null;const r=(0,p.computeAttachePhotosLayout)(b,E,{minHeight:g,maxSingleHeight:y},t);return(0,p.applyGap)(r,2)}),[e,g,y,b,E]);return(0,n.useEffect)((()=>{var e;null==(e=i)||e(v)}),[i,v]),_?n.createElement("div",{className:"AttachVideos AttachVideos--inBubble",style:{maxWidth:w?"max-content":E,"--videoAttachGap":"2px"}},_.map(((t,o)=>n.createElement("div",{className:"AttachVideos__layoutRow",key:`${o}__${k}`},t.map((({width:t,height:o,url:s,videoAttach:i})=>{var c,d,h,p,v,g,y,b;const{id:E,duration:w,platform:k,files:_,restriction:C}=i,x=1===(null==(c=C)?void 0:c.blur),A=0===(null==(d=C)?void 0:d.can_play),M=f(w,!!(null==(h=_)?void 0:h.external))||k,S="short_video"===i.type?void 0:i.position;return n.createElement(u.Link,{to:{kind:"AttachMediaProxyRoute",attach:i,source:null==(p=r)?void 0:p(S)},className:"AttachVideos__link",key:E,disabled:A},n.createElement(m.PhotoItem,{width:Math.ceil(t),height:Math.ceil(o),src:s,alt:i.title,className:a()({AttachVideos__previewBackdrop:x||A})}),!(x||A)&&n.createElement(n.Fragment,null,e.length<=3&&n.createElement("div",{className:"AttachVideos__videoPlay"},n.createElement(l.Icon32Play,null)),M&&n.createElement("div",{className:"AttachVideos__videoInfo"},M)),(x||A)&&n.createElement("div",{className:"AttachVideos__videoRestrictionWrap"},n.createElement("div",{className:"AttachVideos__videoIconRestriction",style:{backgroundImage:`url('${null==(y=C)||null==(g=y.card_icon)||null==(v=g.slice(-1).pop())?void 0:v.url}')`,filter:"invert(100%)"}}),void 0!==(null==(b=C)?void 0:b.title)&&n.createElement("div",null,C.title)))})))))):null};function f(e,t){return void 0===e?"":!t||t&&e?(0,c.formatDuration)(e):""}},803524:(e,t,r)=>{"use strict";r.d(t,{ComposerAttachPreviewMeta:()=>a});var o=r(434788),n=(r(814106),r(667294)),s=r(294184),i=r.n(s);const a=({children:e,rounded:t,offsetLength:r=5,top:s,right:a,bottom:l,left:c})=>{const u=["ComposerAttachPreviewMeta",{"ComposerAttachPreviewMeta--rounded":t}],d=r+"px",h=(0,o._)({},s&&{top:d},a&&{right:d},l&&{bottom:d},c&&{left:d},{maxWidth:`calc(100% - ${2*r}px)`});return n.createElement("div",{className:i()(u),style:h},e)}},179636:(e,t,r)=>{"use strict";r.d(t,{ContextMenu:()=>p});r(181876);var o=r(667294),n=r(837492),s=r(429697),i=r(294184),a=r.n(i),l=r(696023),c=r(89131),u=r(576697),d=r(367763),h=r(163332);const p=(0,o.forwardRef)((({classNames:e={},content:t,forceUpdateContent:r,canOpen:i=!0,open:p=!1,hideOnClick:v=!0,hideOnScroll:f=!0,allowNativeContextMenu:g=!1,onStartOpening:y,onOpen:b,onClose:E,children:w,position:k="bottom",align:_="left",onPositionChange:C,getToggleOpen:x},A)=>{var M;const{isTouchOnly:S}=(0,d.useDeviceData)(),[I,R]=(0,o.useState)(!1),N=(0,l.usePrevious)(I),O=(0,l.usePrevious)(p),P=(0,o.useRef)(I);P.current=I;const[L,T]=(0,o.useState)(t),[D,B]=(0,o.useState)({x:-999,y:-999}),[H,V]=(0,o.useState)("closed"),z=(0,o.useContext)(h.DropdownDepthContext),W=(0,o.useCallback)((e=>{V((t=>{let r;switch(r="function"==typeof e?e(t):e,r){case"opening":case"opened":var o;null==(o=z)||o.setChildOpen(!0);break;case"closing":case"closed":var n;null==(n=z)||n.setChildOpen(!1);break;default:(0,c.exhaustivenessCheck)(r)}return r}))}),[z]),F=(0,o.useCallback)((({preventDefault:e,x:t,y:r})=>{var o;g||(null==(o=e)||o());W((o=>{switch(o){case"opened":case"opening":case"closing":return"closing";case"closed":var n;if(g)null==(n=e)||n();return B({x:t,y:r}),"opening";default:(0,c.exhaustivenessCheck)(o)}}))}),[g,W]);null==(M=x)||M(F),(0,o.useLayoutEffect)((()=>{var e;if(!m(A))return;const t=A.current,r=e=>{F({x:e.clientX,y:e.clientY,preventDefault:e.preventDefault.bind(e)})};return null==(e=t)||e.addEventListener("contextmenu",r),()=>{var e;null==(e=t)||e.removeEventListener("contextmenu",r)}}),[A,g,W,F]),(0,u.useLongTouch)(S&&m(A),m(A)?A:{current:null},(({touches:e})=>{var t,r;F({x:(null==(t=e[0])?void 0:t.clientX)||0,y:(null==(r=e[0])?void 0:r.clientY)||0})}));const j=(0,o.useCallback)((()=>{W((e=>{switch(e){case"opening":case"closed":return"closed";case"opened":case"closing":return"closing";default:return(0,c.exhaustivenessCheck)(e)}}))}),[W]),U=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),v&&j()}),[v,j]);(0,o.useLayoutEffect)((()=>{W((e=>p&&i||"closed"===e?i&&p&&"opened"!==e?"opening":e:$.current?"closing":"closed"))}),[p,i,W]);const $=(0,o.useRef)(null),G=(0,o.useCallback)((e=>{var t;return e instanceof Node&&(null==(t=$.current)?void 0:t.contains(e))}),[]);return(0,o.useLayoutEffect)((()=>{const e=e=>{e.stopPropagation(),G(e.target)||P.current||j()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[g,G,H,j]),(0,o.useEffect)((()=>{var e,t,r;"opening"===H&&(null==(e=y)||e());"opened"===H&&(null==(t=b)||t());"closed"===H&&(null==(r=E)||r(),R(!1))}),[H]),(0,o.useEffect)((()=>{const e=!I&&N,o=!p&&O;!r&&(["closing","opening"].includes(H)||e||o)||T(t)}),[I,t,H,N,r,p,O]),(0,o.useEffect)((()=>{if(!f||"opened"!==H)return;const e=({target:e})=>{G(e)||P.current||j()};return window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0)}}),[G,H,j,f]),o.createElement(h.DropdownDepthContext.Provider,{value:(0,o.useMemo)((()=>({setChildOpen:R})),[R])},o.createElement(n.Popper,{mode:"cursor",cursor:D,align:_,position:k,portalClassName:e.portal,open:"closed"!==H,onPositionChange:C,watchContentChange:!0,content:o.createElement(s.default,{nodeRef:$,in:"opening"===H||"opened"===H,addEndListener:e=>{var t;return null==(t=$.current)?void 0:t.addEventListener("transitionend",e,!1)},mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"ContextMenu__contentWrapper-",onEntered:()=>W("opened"),onExited:()=>W("closed")},o.createElement("div",{ref:$,className:a()("ContextMenu__contentWrapper",e.contentWrapper),onClickCapture:e=>{I||"closing"===H&&(e.preventDefault(),e.stopPropagation())},onClick:U},L))}))}));function m(e){return!!e&&"function"!=typeof e}},704057:(e,t,r)=>{"use strict";r.d(t,{ImagesLayoutProvider:()=>s,useImagesLayout:()=>i});var o=r(667294);const n=o.createContext(void 0),s=n.Provider,i=()=>{const e=(0,o.useContext)(n);if(!e)throw Error("Все аттачи фото должны сопровождаться контекстом размеров");return e}},163332:(e,t,r)=>{"use strict";r.d(t,{Dropdown:()=>f,DropdownDepthContext:()=>v});var o=r(434788),n=r(820224),s=(r(170490),r(667294)),i=r(429697),a=r(837492),l=r(294184),c=r.n(l),u=r(89131),d=r(696023),h=r(367763),p=r(576697);const m=150,v=(0,s.createContext)(void 0),f=(0,s.forwardRef)(((e,t)=>{var{openType:r="hover",delay:l,hideDelay:f=m,classNames:g={},content:y,children:b,hideOnClick:E,hideOnScroll:w,hideOnMouseLeave:k,canOpen:_=!0,open:C=!1,onOpen:x,onClose:A,forceUpdateContent:M}=e,S=(0,n._)(e,["openType","delay","hideDelay","classNames","content","children","hideOnClick","hideOnScroll","hideOnMouseLeave","canOpen","open","onOpen","onClose","forceUpdateContent"]);const[I,R]=(0,s.useState)(!1),N=(0,d.usePrevious)(I),O=(0,d.usePrevious)(C),[P,L]=(0,s.useState)(y),{isTouchOnly:T}=(0,h.useDeviceData)(),D=T&&"hover"===r?"click":r,{displayState:B,$content:H,$trigger:V,onClick:z,onHover:W,handleHide:F,handleOpened:j,handleClosed:U}=function({canOpen:e,open:t,openType:r,delay:o,hideDelay:n,hideOnMouseLeave:i,childOpen:a}){const[l,c]=(0,s.useState)("closed"),d=(0,s.useRef)(null),h=(0,s.useRef)(null),m=(0,s.useContext)(v),f=(0,s.useCallback)((e=>{c((t=>{let r;switch(r="function"==typeof e?e(t):e,r){case"opening":case"opened":var o;null==(o=m)||o.setChildOpen(!0);break;case"closing":case"closed":var n;null==(n=m)||n.setChildOpen(!1);break;default:(0,u.exhaustivenessCheck)(r)}return r}))}),[m]),{hideOnHover:g,onMouseOver:y}=function({open:e,canOpen:t,delay:r,hideDelay:o,hideOnMouseLeave:n,openType:i,displayState:a,setDisplayState:l,$content:c,$trigger:u,childOpen:d}){const h=(0,s.useRef)(null),p=(0,s.useRef)(null),m=(0,s.useRef)(null),v=(0,s.useRef)(a);v.current=a;const f=(0,s.useRef)(d);f.current=d;const g=(0,s.useCallback)((()=>{var e,t;return(null==(e=u.current)?void 0:e.matches(":hover"))||(null==(t=c.current)?void 0:t.matches(":hover"))}),[c,u]),y=(0,s.useCallback)((e=>{e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),b=(0,s.useCallback)((()=>{m.current&&(window.cancelAnimationFrame(m.current),m.current=null)}),[]),E=(0,s.useRef)(void 0===e);E.current=void 0===e;const w=(0,s.useCallback)(((e=o,t=!0)=>{if("hover"!==i&&!n)return;y(h);const r="closed"===v.current||"closing"===v.current;if(p.current||r)return;E.current=t;const s=()=>{l((e=>"opened"===e?"closing":"closed")),y(p)};e&&"opened"===v.current?p.current=window.setTimeout((()=>{g()?y(p):s()}),e):s()}),[o,i,n,y,l,g]);(0,s.useLayoutEffect)((()=>{h.current&&(t||y(h))}),[y,h,t]);const k=(0,s.useCallback)((()=>{if("hover"!==i||!t)return;y(p);const e="opened"===v.current||"opening"===v.current;if(h.current||e)return;E.current=!0;const o=()=>{l((e=>"closed"===e?"opening":"opened")),y(h)};r&&"closed"===v.current?h.current=window.setTimeout(o,r):o()}),[r,t,i,l,y]),_=(0,s.useCallback)((()=>{const e=()=>{g()||f.current?("closing"!==v.current||E.current)&&k():(n&&"opened"===v.current&&w(500,!0),n||w())};b(),m.current=window.requestAnimationFrame(e)}),[b,g,w,n,k]);return(0,s.useEffect)((()=>("hover"!==i&&!n||"closed"===a||(_(),document.addEventListener("mousemove",_,{passive:!0}),document.addEventListener("wheel",_,{passive:!0})),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("wheel",_)})),[n,a,_,i,b,d]),(0,s.useEffect)((()=>()=>{y(h),y(p),b()}),[]),(0,s.useEffect)((()=>{!1===e&&(document.removeEventListener("mousemove",_),document.removeEventListener("wheel",_))}),[e,_,y,b]),{onMouseOver:k,hideOnHover:w}}({open:t,canOpen:e,delay:o,hideDelay:n,hideOnMouseLeave:i,openType:r,displayState:l,setDisplayState:f,$content:d,$trigger:h,childOpen:a}),{onClick:b}=function({$content:e,$trigger:t,openType:r,setDisplayState:o,canOpen:n}){const i=(0,s.useCallback)((e=>{var t;if("click"===r||"contextmenu"===r||"longtouch"===r){var s;if(null==(t=e)||t.stopPropagation(),"contextmenu"===r)null==(s=e)||s.preventDefault();o((e=>{switch(e){case"opening":return"closed";case"closed":return n?"opening":"closed";case"opened":case"closing":return"closing";default:return(0,u.exhaustivenessCheck)(e)}}))}}),[r,o,n]);return(0,p.useLongTouch)("longtouch"===r,t,(()=>i())),(0,s.useEffect)((()=>{const t=t=>{t.stopPropagation(),("click"===r||"contextmenu"===r||"longtouch"===r)&&e.current&&t.target instanceof Node&&!e.current.contains(t.target)&&i()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e]),{onClick:i}}({$content:d,$trigger:h,openType:r,setDisplayState:f,canOpen:e});(0,s.useLayoutEffect)((()=>{f((r=>t&&e||"closed"===r?e&&t&&"opened"!==r?"opening":r:d.current?"closing":"closed"))}),[t,e,f]);const E=(0,s.useCallback)((()=>{f("opened")}),[f]),w=(0,s.useCallback)((()=>{f("closed")}),[f]),k=(0,s.useCallback)(((e,t)=>{b(),g(e,t)}),[g,b]);return{displayState:l,$content:d,$trigger:h,onClick:b,onHover:y,handleHide:k,handleOpened:E,handleClosed:w}}({canOpen:_,open:C,openType:D,delay:l,hideDelay:f,childOpen:I,hideOnMouseLeave:k}),$=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),E&&F(0,!1)}),[E,F]);(0,s.useEffect)((()=>{if(!w||"opened"!==B)return;const e=({target:e})=>{var t;e instanceof Node&&(null==(t=H.current)?void 0:t.contains(e))||F(0,!1)};return window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0)}}),[H,B,F,w]);(0,s.useEffect)((()=>{var e,t;"opened"===B&&(null==(e=x)||e());"closed"===B&&(null==(t=A)||t(),R(!1))}),[B]),(0,s.useEffect)((()=>{const e=!I&&N,t=!C&&O;!M&&(["closing","opening"].includes(B)||e||t)||L(y)}),[I,y,B,N,M,C,O]);return s.createElement("div",{className:c()("DropdownReforged",g.wrapper,{[g.wrapperOpened||"DropdownReforged--opened"]:"opened"===B,[g.wrapperClosed||"DropdownReforged--closed"]:"closed"===B})},s.createElement(v.Provider,{value:(0,s.useMemo)((()=>({setChildOpen:R})),[R])},s.createElement(a.Popper,(0,o._)({ref:e=>{V.current=e,"function"==typeof t?t(e):t&&(t.current=e)}},S,{mode:"side",portalClassName:g.portal,onMouseEnter:W,open:"closed"!==B,content:s.createElement(i.default,{nodeRef:H,in:"opening"===B||"opened"===B,addEndListener:e=>{var t;return null==(t=H.current)?void 0:t.addEventListener("transitionend",e,!1)},mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"DropdownReforged__contentWrapper-",onEntered:j,onExited:U},s.createElement("div",{ref:H,className:c()("DropdownReforged__contentWrapper",g.contentWrapper),onClickCapture:e=>{I||E&&"closing"===B&&(e.preventDefault(),e.stopPropagation())},onClick:$},P))}),s.createElement("div",{className:c()("DropdownReforged__trigger",g.trigger),onMouseOver:W,onMouseEnter:W,onClick:"click"===D?z:void 0,onContextMenu:"contextmenu"===D?z:e=>{e.preventDefault()}},b))))}))},388918:(e,t,r)=>{"use strict";r.d(t,{FormattedLangKey:()=>l});var o=r(434788),n=r(820224),s=r(667294),i=r(696023),a=r(89131);const l=e=>{const{lang:t}=(0,i.useBrowserEnv)(),{className:r,langkey:l}=e,c=(0,n._)(e,["className","langkey"]);return t.fold(l,(e=>s.createElement(s.Fragment,null,e)),(e=>(a.isDev&&(e=e.map(((e,t)=>"string"==typeof e?s.createElement(s.Fragment,{key:t},e):s.cloneElement(e,(0,o._)({},e.props,{key:t}))))),s.createElement("span",{className:r},e))),c)}},576241:(e,t,r)=>{"use strict";r.d(t,{LayerProvider:()=>s,useLayer:()=>i});var o=r(667294);r(973935);const n=(0,o.createContext)({}),s=({layer:e,children:t})=>o.createElement(n.Provider,{value:(0,o.useMemo)((()=>({layer:e})),[e])},t),i=()=>{const{layer:e}=(0,o.useContext)(n);return e||void 0}},988994:(e,t,r)=>{"use strict";r.d(t,{LayoutDataProvider:()=>i,useLayoutData:()=>a});var o=r(696023),n=r(667294);const s=(0,n.createContext)(null),i=({children:e,mode:t})=>{const[r]=(0,o.useViewport)({debounced:!0}),i=r<640?"one-column":"two-column";return n.createElement(s.Provider,{value:(0,n.useMemo)((()=>({mode:t||i})),[i,t])},e)};function a(){const e=(0,n.useContext)(s);if(!e)throw new Error("LayoutDataContext не добавлен в дерево Реакта!");return e}},597298:(e,t,r)=>{"use strict";r.d(t,{ExternalLink:()=>u,Link:()=>c});var o=r(434788),n=r(820224),s=r(667294),i=r(696023),a=r(781982),l=r(80497);const c=(0,s.forwardRef)(((e,t)=>{var{to:r,children:l,onNavigate:c,stopPropagation:d=!0,disabled:h,options:p}=e,m=(0,n._)(e,["to","children","onNavigate","stopPropagation","disabled","options"]);const{router:v}=(0,i.useBrowserEnv)(),f="AttachMediaProxyRoute"===r.kind?(0,o._)({},r,{tab:v.currentRoute.tab}):r,g=v.toUrl(f),y=a.IRouter.isProxyRoute(r)?v.fromProxyRoute(r):r,b=e=>{var t;(d&&e.stopPropagation(),m.onClick)?m.onClick(e):(v.openLink(e,r,p),null==(t=c)||t())};return!g||h?s.createElement("span",(0,o._)({},m,{ref:t}),l):y?s.createElement("a",(0,o._)({},m,{href:g,ref:t,onClick:b}),l):s.createElement(u,(0,o._)({},m,{href:g,ref:t,onClick:b}),l)})),u=(0,s.forwardRef)(((e,t)=>{var{children:r,href:a,target:c,disabled:u,onClick:d}=e,h=(0,n._)(e,["children","href","target","disabled","onClick"]);const{vkDomain:p}=(0,i.useBrowserEnv)(),m=(0,i.useCombinedRefs)(t);return u?s.createElement("span",(0,o._)({},h,{ref:m}),r):s.createElement("a",(0,o._)({},h,{ref:m,onClick:d,href:h.download?a:(0,l.prepareLink)(p,a),target:c||"_blank",rel:"noopener noreferrer"}),r)}))},874971:(e,t,r)=>{"use strict";r.d(t,{ModalBackdrop:()=>a});r(895593);var o=r(667294),n=r(294184),s=r.n(n),i=r(876620);const a=({isClear:e,isBodyScrollDisabled:t,onClick:r,children:n})=>{const a=s()("RE_ModalBackdrop",{"RE_ModalBackdrop--tinted":!e}),{isFullScreen:l}=(0,o.useContext)(i.ModalConfigContext),c=s()("RE_ModalBackdrop__container",l?"RE_ModalBackdrop__container--fullScreen":"RE_ModalBackdrop__container--window");var u;return u=Boolean(t),(0,o.useEffect)((()=>{const e=document.body;if(!u)return;const t=e.getBoundingClientRect(),r=window.innerWidth-(t.left+t.right);if(0===r)return;let o=document.createElement("style");return o.innerText="body { overflow-y: hidden !important; }",e.appendChild(o),e.style.borderRight=`${r}px solid transparent`,()=>{e.style.borderRight="",e.removeChild(o)}}),[u]),o.createElement("div",{className:a},r&&o.createElement("div",{className:"RE_ModalBackdrop__flesh",onClick:r}),o.createElement("div",{className:c},n))}},234325:(e,t,r)=>{"use strict";r.d(t,{ModalBody:()=>l});r(351667);var o=r(667294),n=r(294184),s=r.n(n),i=r(24087),a=r(876620);const l=({children:e,withCustomLayout:t,withScrollHandling:r})=>{const{isFullScreen:n}=(0,o.useContext)(a.ModalConfigContext),l=s()("RE_ModalBody",{"RE_ModalBody--standard":!t,"RE_ModalBody--scrollable":r,"RE_ModalBody--fullScreen":n}),c=r?i.default:"div";return o.createElement(c,{className:l},e)}},293390:(e,t,r)=>{"use strict";r.d(t,{ModalCloseButton:()=>a});var o=r(299371),n=r(294184),s=r.n(n),i=(r(528098),r(667294));const a=e=>{const{closeLabel:t,mode:r,onClose:n}=e;return i.createElement("button",{className:s()("ModalCloseButton","modalHeader"===r&&"ModalCloseButton__modalHeaderMode","modalPanel"===r&&"ModalCloseButton__modalPanelMode"),"aria-label":t,onClick:n},i.createElement(o.Icon24Cancel,null))}},876620:(e,t,r)=>{"use strict";r.d(t,{ModalConfigContext:()=>s,ModalsConfigProvider:()=>i});var o=r(667294),n=r(988994);const s=(0,o.createContext)({isFullScreen:!1}),i=({children:e})=>{const t=(0,n.useLayoutData)(),r=(0,o.useMemo)((()=>({isFullScreen:"one-column"===t.mode})),[t.mode]);return o.createElement(s.Provider,{value:r},e)}},506315:(e,t,r)=>{"use strict";r.d(t,{ModalFooter:()=>n});r(974580);var o=r(667294);const n=({buttons:e,hint:t,children:r})=>o.createElement("footer",{className:"RE_ModalFooter"},t&&o.createElement("div",{className:"RE_ModalFooter__hint"},t),r&&o.createElement("div",{className:"RE_ModalFooter__content"},r),e&&o.createElement("div",{className:"RE_ModalFooter__actions"},e))},798855:(e,t,r)=>{"use strict";r.d(t,{ModalHeader:()=>l});r(936021);var o=r(667294),n=r(957424),s=r(293390),i=r(294184),a=r.n(i);const l=({onClose:e,closeLabel:t,backLabel:r,onBack:i,title:l,children:c,className:u})=>o.createElement("header",{className:a()("RE_ModalHeader",u)},o.createElement("div",{className:"RE_ModalHeader__content"},r&&i&&o.createElement("button",{className:"RE_ModalHeader__back",onClick:i},o.createElement("span",{className:"RE_ModalHeader__backIcon"},o.createElement(n.Icon28ChevronLeftOutline,null)),r),l&&o.createElement("h1",{className:"RE_ModalHeader__title"},l),c&&o.createElement("div",{className:"RE_ModalHeader__container"},c)),o.createElement(s.ModalCloseButton,{closeLabel:t,onClose:e,mode:"modalHeader"}))},964929:(e,t,r)=>{"use strict";r.d(t,{ModalPanel:()=>a});r(97839);var o=r(667294),n=r(294184),s=r.n(n),i=r(876620);const a=({children:e,className:t,topRight:r})=>{const{isFullScreen:n}=(0,o.useContext)(i.ModalConfigContext),a=s()("RE_ModalPanel",t,{"RE_ModalPanel--fullScreen":n});return o.createElement("article",{className:a},e,r&&o.createElement("div",{className:"RE_ModalPanel__TopRight"},r))}},671324:(e,t,r)=>{"use strict";r.d(t,{ModalView:()=>c});r(628392);var o=r(667294),n=r(294184),s=r.n(n),i=r(355795),a=r(576241),l=r(346006);const c=({children:e,isHidden:t,onEscape:r,contextClass:n,portalTarget:c})=>{const u=(0,a.useLayer)(),d=s()("RE_ModalView",{"RE_ModalView--hidden":Boolean(t)}),{subscribeKeyDown:h}=(0,l.useModuleKeyBoardHandlers)({moduleName:l.Module.Modal}),p=(0,o.useCallback)(((e,t)=>{void 0!==r&&e("Escape")&&(t(),r())}),[r]);return(0,o.useEffect)((()=>{if(!t)return h(p)}),[h,p,t]),o.createElement(i.Portal,{portalClassName:n,portalTarget:c||u},o.createElement("div",{className:d},e))}},171656:(e,t,r)=>{"use strict";r.d(t,{ModalsProvider:()=>a,useModalContext:()=>l});var o=r(667294),n=r(89131),s=r(453934);const i=(0,o.createContext)(null),a=({children:e,modals:t,stacks:r})=>{const a=(0,o.useCallback)((e=>{let t=!0;if(Object.values(r).forEach((r=>{var o;let n=0;if((null==(o=r.currentElement)?void 0:o.groupId)===e){var s;for(t=!1;(null==(s=r.currentElement)?void 0:s.groupId)===e;)n+=1,r.goBack();r.pop(n)}})),t)throw Error("Пытаетесь закрыть группу модалок, которая закрыта")}),[r]),l=(0,o.useCallback)(((e,o)=>{const n=t.getModalParams(e),{groupId:s,isSubModal:i}=n,a=r[o];if(null!==a.findIndex(e))throw new Error("Пытаетесь открыть модалку, которая открыта");a.push({modalId:e,groupId:s,isSubModal:i})}),[r,t]),c=(0,o.useCallback)(((e,t)=>{var o;const n=r[t];if((null==(o=n.currentElement)?void 0:o.modalId)!==e)throw Error("Пытаетесь закрыть модалку, которая закрыта");n.pop()}),[r]),u=(0,o.useCallback)(((e,t)=>{r[t].forcedRemove((t=>t.modalId===e))}),[r]),d=(0,o.useCallback)(((e,t)=>r[t].findIndex(e)),[r]),[h,p]=(0,o.useState)({rightPanel:[],popup:[]});(0,o.useLayoutEffect)((()=>{const e=Object.keys(r).map((e=>r[e].subscribe((t=>{const{action:r,payload:o}=t;switch(r){case"add":p((0,s.produce)((r=>{r[e]=t.payload.isSubModal?r[e].filter((e=>e!==o.modalId)):[],r[e].push(o.modalId)})));break;case"remove":p((0,s.produce)((t=>{const r=t[e].filter((e=>!o.find((t=>e===t.modalId))));r.length<t[e].length&&(t[e]=r)})));break;default:(0,n.exhaustivenessCheck)(r)}}))));return()=>e.forEach((e=>e()))}),[r]);const m=(0,o.useCallback)((e=>r[e].size),[r]),v=(0,o.useMemo)((()=>({openedModals:h,openModal:l,closeModal:c,closeModalForced:u,closeGroup:a,getModalGroup:t.getModalGroup,createModal:t.createModal,createGroup:t.createGroup,getStackSize:m,findIndexInStack:d})),[h,l,c,u,a,t.getModalGroup,t.createModal,t.createGroup,m,d]);return o.createElement(i.Provider,{value:v},e)};function l(){const e=(0,o.useContext)(i);if(!e)throw new Error("ModalContext не добавлен в дерево Реакта!");return e}},126528:(e,t,r)=>{"use strict";r.d(t,{OptimizedSpinner:()=>c});var o=r(434788),n=(r(241676),r(667294)),s=r(294184),i=r.n(s),a=r(86894),l=r(997650);const c=({className:e,size:t="small",intersectionOptions:r,onIntersection:s})=>{const{ref:c,inView:u}=(0,l.useInView)((0,o._)({},r,{threshold:.01}));return(0,n.useEffect)((()=>{u&&s&&s()}),[u]),n.createElement("div",{ref:c,className:i()("OptimizedSpinner",e)},u&&n.createElement(a.Spinner,{size:t}))}},293216:(e,t,r)=>{"use strict";r.d(t,{PhotoItem:()=>a});var o=r(667294),n=r(659397),s=r(361674),i=(r(848056),r(538839));const a=({src:e,alt:t,width:r,height:a,cover:l,showReload:c=!1,className:u,onLoad:d,onError:h})=>{const p=l?{width:r,height:a}:void 0,[m,v]=(0,o.useState)(1),[f,g]=(0,o.useState)((()=>{if(!e)return!1;const t=(0,i.isImageLoaded)(e);var r;t&&(null==(r=d)||r());return t})),[y,b]=(0,o.useState)(!1),E=(0,o.useCallback)((e=>{y&&c&&(e.preventDefault(),e.stopPropagation(),v((e=>e+1)))}),[y,c]),w=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),v((e=>e+1))}),[]);return o.createElement("div",{className:(0,n.classNames)("PhotoItem",u),style:{width:r,height:a},onClick:E},o.createElement("div",{className:"PhotoItem__blur",style:{"--imageUrl":y?void 0:`url(${e})`}}),o.createElement("img",{key:m,src:e,alt:t,className:(0,n.classNames)("PhotoItem__img",{"PhotoItem__img--loaded":f}),style:p,onLoad:()=>{var e;g(!0),b(!1),null==(e=d)||e()},onError:()=>{var e;b(!0),null==(e=h)||e()}}),y&&o.createElement("div",{className:"PhotoItem__error"},c&&o.createElement("button",{type:"button",className:"PhotoItem__reload",onClick:w},o.createElement(s.Icon16Replay,{className:"PhotoItem__reloadIcon"}))))}},579957:(e,t,r)=>{"use strict";r.d(t,{ConvoAudiosPlaylistContext:()=>s,ConvoAudiosPlaylistProvider:()=>i});var o=r(667294),n=r(460554);const s=o.createContext((()=>{})),i=({convo:e,children:t})=>{const r=(0,o.useRef)(e);r.current=e;const i=(0,o.useCallback)((()=>{const e=(0,n.mapConvoToConvoAudioTrackList)(r.current),t={type:"temp",convoPeerId:r.current.peerId};return new n.ConvoAudiosPlaylist({list:e,meta:t})}),[]);return o.createElement(s.Provider,{value:i},t)}},837492:(e,t,r)=>{"use strict";r.d(t,{Popper:()=>p});var o=r(434788),n=r(820224),s=(r(833249),r(667294)),i=r(294184),a=r.n(i),l=r(355795),c=r(696023),u=r(15285),d=r(576241),h=r(90308);const p=(0,s.forwardRef)((function(e,t){var r,i,{open:p=!0,position:b="auto",mode:E="side",align:w="auto",adaptation:k,content:_,portalClassName:C,children:x,portalTarget:A,cursor:M,watchContentChange:S=!1,onPositionChange:I}=e,R=(0,n._)(e,["open","position","mode","align","adaptation","content","portalClassName","children","portalTarget","cursor","watchContentChange","onPositionChange"]);const N=(0,d.useLayer)(),[O,P]=(0,s.useState)(null),L=(0,c.useCombinedRefs)(t),[T,D]=(0,s.useState)(null),[B,H]=(0,s.useState)(null),[V,z]=(0,s.useState)(null),{observe:W}=(0,h.useResizeObserver)(),F=(0,s.useCallback)((e=>{e&&P(e)}),[]),j=(0,s.useCallback)(((e=!1)=>{if(p){if("side"===E&&L.current&&(0!==(n=L.current).offsetWidth||0!==n.offsetHeight)){var t;const[n,s,i]=function(e,t,r,n,s,i,a){var l,c,d,h;let p="fixed",b=e.getBoundingClientRect(),{innerWidth:E,innerHeight:w}=window,k=window.scrollY||document.documentElement.scrollTop,_=window.scrollX||document.documentElement.scrollLeft;i&&(b=(0,u.getOffsetRect)(e,i),E=i.clientWidth,w=i.clientHeight,k=i.scrollTop,_=i.scrollLeft,p="absolute");const C=null==(l=t)?void 0:l.getBoundingClientRect(),x=(null==(c=C)?void 0:c.width)||0,A=(null==(d=C)?void 0:d.height)||0,M=x&&!a?Math.max(b.width,x):void 0,S=A&&!a?Math.max(b.height,A):void 0;if(r===m){r=g(b.top-k,k+w-b.top-b.height)}if(n===m){n=y(_+E/3,b.left+.5*b.width,_+2*E/3)}const I=u.browser.safari_mobile&&(null==(h=window.visualViewport)?void 0:h.pageTop)||0;let R=b.left,N=b.top+I;const O=R+b.width,P=N+b.height,L=.5*b.width,T=.5*x,D=.5*b.height,B=.5*A,H=b.width<x,V=b.height<A,z=N<A,W=P+A>w+k,F=i&&N-k<A,j=P<A,U=N+D<B,$=N+A>w+k,G=N+D+B>w+k,K=O-b.width<x,Z=O+x>E+_,q=R+L<T,Y=R+L+T>E+_,X="horizontal"===s,J="vertical"===s;J||(("top"===r&&z||"center"===n&&U||f.includes(n)&&j)&&(r="bottom"),("bottom"===r&&W||"center"===n&&G||f.includes(n)&&$)&&(r="top"));X||(v.includes(r)&&(f.includes(n)&&(K&&(n="left"),Z&&(n="right")),"center"===n&&(Y&&(n="right"),q&&(n="left"))),f.includes(r)&&(v.includes(n)&&(j&&(n="bottom"),$&&(n="top")),K&&(r="right",n="right"===n?"left":n),Z&&(r="left",n="left"===n?"right":n)));let Q={};switch(r){case"top":Q={width:M,top:N-A};break;case"bottom":Q={width:M,top:P};break;case"left":Q={height:S,left:R-x};break;case"right":Q={height:S,left:O}}v.includes(r)&&H&&("right"===n&&(Q.left=O-x),"center"===n&&(Q.left=R+L-T),X&&(("center"===n&&q||"right"===n&&K)&&(Q.left=0),("center"===n&&Y||"left"===n&&Z)&&(Q.left=E-x+_)));if(f.includes(r)&&V){switch(n){case"center":Q.top=N+D-B;break;case"top":Q.top=N-A+b.height}J&&(("center"===n&&U||f.includes(n)&&j)&&(Q.top=0),F&&"center"===n&&(Q.top=k),("center"===n&&G||f.includes(n)&&$)&&(Q.top=w-A+k))}return[(0,o._)({top:N,left:R},Q,{position:p}),n,r]}(L.current,O,b,w,k,(null==(t=A)?void 0:t.current)?A.current:void 0,e);var r;if(n)null==(r=I)||r({left:n.left,top:n.top});D(n),H(s),z(i)}var n;if("cursor"===E&&M){const[e,t,r]=function(e,t,r,n){var s,i,a;const{innerWidth:l,innerHeight:c}=window,{x:u,y:d}=e,h=null==(s=t)?void 0:s.getBoundingClientRect(),p=(null==(i=h)?void 0:i.width)||0,v=(null==(a=h)?void 0:a.height)||0,b=p||void 0,E=v||void 0;if(r===m){r=g(d,c-d)}if(n===m){n=y(u,u,l-u)}const w=d<v,k=c-d<v,_=d<v/2,C=c-d<v/2,x=u<p,A=l-u<p;("top"===r&&w||"center"===n&&_)&&(r="bottom");("bottom"===r&&k||"center"===n&&C)&&(r="top");f.includes(n)&&(x&&(n="left"),A&&(n="right"));let M={};switch(r){case"top":M.top=d-v;break;case"bottom":M.top=d}switch(n){case"left":M.left=u;break;case"right":M.left=u-p}return[(0,o._)({position:"fixed",left:u,top:d,height:E,width:b},M),n,r]}(M,O,b,w);var s;if(e)null==(s=I)||s({left:e.left,top:e.top});D(e),H(t),z(r)}}}),[M,E,b,w,L,p,O,A,k,I]);return(0,s.useLayoutEffect)((()=>{var e,t;j();const r=null==(e=Array.from((null==(t=O)?void 0:t.children)||[]))?void 0:e[0];if(!r||!S)return;return W(r,(e=>{e.borderBoxSize[0]&&j(!0)}))}),[null==(r=O)?void 0:r.children,W,j,S]),s.createElement(s.Fragment,null,"cursor"!==E&&x&&s.cloneElement(x,(0,o._)({},x.props,{ref:L})),p&&s.createElement(l.Portal,(0,o._)({},R,{ref:F,className:a()("MEPopper","MEConfig",B&&`MEPopper--align${U=B,U.length>0?U.slice(0,1).toUpperCase()+U.slice(1):""}`,V&&`MEPopper--${V}`),"data-align":B,"data-position":V,portalClassName:C,style:T||void 0,portalTarget:(null==(i=A)?void 0:i.current)||N}),_));var U})),m="auto",v=["top","bottom"],f=["left","right"];function g(e,t){return t>e?"bottom":"top"}function y(e,t,r){return t>=e&&t<=r?"center":t>r?"right":"left"}},355795:(e,t,r)=>{"use strict";r.d(t,{Portal:()=>l});var o=r(434788),n=r(820224),s=r(667294),i=r(973935),a=r(696023);const l=(0,s.forwardRef)((function(e,t){var{children:r,portalClassName:l,portalTarget:c}=e,u=(0,n._)(e,["children","portalClassName","portalTarget"]);const[d,h]=(0,s.useState)(null),p=(0,a.usePrevious)(l);return(0,s.useEffect)((()=>{d&&(p&&d.classList.remove(...p.split(" ")),l&&d.classList.add(...l.split(" ")))}),[d,l,p]),(0,s.useLayoutEffect)((()=>{if(null===c)return;const e=function(e,t){const r=document.createElement("div");e&&r.classList.add(...e.split(" "));return(t||document.body).appendChild(r)}(l,c);return h(e),()=>{e.remove()}}),[c]),d?i.createPortal(s.createElement("div",(0,o._)({},u,{ref:t}),r),d):null}))},376753:(e,t,r)=>{"use strict";r.d(t,{ProgressCircle:()=>a});r(417819);var o=r(667294),n=r(294184),s=r.n(n),i=r(696023);const a=({size:e,progress:t,strokeWidth:r=2,strokeColor:n="white",strokeOverlayColor:a,className:l,ariaLabel:c})=>{const{lang:u}=(0,i.useBrowserEnv)(),d=(e-r)/2,h=`0 0 ${e} ${e}`,p=d*Math.PI*2,m=p-p*t/100;return o.createElement("div",{role:"progressbar",className:s()("ProgressCircle",l),style:{width:e,height:e},"aria-label":null!=c?c:u.use("me_progress_circle_default_aria_label"),"aria-valuenow":Math.floor(t)},o.createElement("svg",{width:e,height:e,viewBox:h},a&&o.createElement("circle",{className:"ProgressCircle__progressOverlay",cx:e/2,cy:e/2,r:d,stroke:a,strokeWidth:`${r}px`}),o.createElement("circle",{className:"ProgressCircle__progress",cx:e/2,cy:e/2,r:d,stroke:n,strokeWidth:`${r}px`,transform:`rotate(-90 ${e/2} ${e/2})`,style:{strokeDasharray:p,strokeDashoffset:m}})))}},682930:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>p});var o=r(434788),n=r(667294),s=r(96190),i=r(696023),a=r(171656),l=r(364705),c=r(200028),u=r(883950),d=r(294962),h=r(755534);const p=({children:e,env:t,featureFlags:r,state:p,dispatch:m,owner:v})=>{const f=(0,n.useCallback)((e=>{m((0,o._)({type:"CacheUpdateReceived"},e))}),[m]),g=s.safeGet(p.peers,p.viewer.id),y=(0,n.useMemo)((()=>(0,o._)({viewer:g},p.viewer)),[g,p.viewer]),b=(0,n.useMemo)((()=>({popup:t.modals.stack,rightPanel:new u.Stack})),[t.modals.stack]);return n.createElement(i.BrowserEnvProvider,{value:t},n.createElement(l.RouterProvider,null,n.createElement(a.ModalsProvider,{modals:t.modals.system,stacks:b},n.createElement(i.DispatchProvider,{value:m},n.createElement(d.RlottieQueueProvider,null,n.createElement(i.FeatureFlagsProvider,{value:r},n.createElement(i.HelpHintsProvider,{value:p.helpHints},n.createElement(i.LastSeenProvider,{value:p.lastSeens},n.createElement(i.TypingsProvider,{value:p.typings},n.createElement(i.PeersProvider,{value:p.peers},n.createElement(i.OwnerProvider,{value:v},n.createElement(h.StickersConfigProvider,null,n.createElement(i.ConvosProvider,{value:p.convos},n.createElement(i.ChannelsProvider,{value:p.channels},n.createElement(i.OrganisersProvider,{value:p.organisers},n.createElement(i.ConvosSearchIndexProvider,{value:p.convosSearchIndex},n.createElement(i.ViewerProvider,{value:y},n.createElement(i.InsertIntoCacheProvider,{value:f},n.createElement(c.ComposerDraftsProvider,{value:p.composerDrafts},n.createElement(c.ChannelComposerDraftsProvider,{value:p.channelComposerDrafts},n.createElement(i.VideoMessageShapesProvider,{value:p.videoMessageShapes},e)))))))))))))))))))))}},294962:(e,t,r)=>{"use strict";r.d(t,{RlottieQueueProvider:()=>a,useRlottieQueue:()=>l});var o=r(272125),n=r(929332),s=r(667294);const i=s.createContext(null),a=({children:e,externalQueue:t})=>{const r=(0,s.useRef)(null);return r.current||(o.LottieManager.init(),r.current=t||new n.LazyLoadQueue),s.createElement(i.Provider,{value:r.current},e)};function l(){const e=(0,s.useContext)(i);if(!e)throw new Error("RlottieQueueProvider не добавлен в дерево Реакта!");return e}},364705:(e,t,r)=>{"use strict";r.d(t,{RouterProvider:()=>a,useConvoRoute:()=>c,useRouter:()=>l});var o=r(696023),n=r(781982),s=r(667294);const i=(0,s.createContext)({}),a=({children:e})=>{const{router:t}=(0,o.useBrowserEnv)(),[r,a]=(0,s.useState)(t.currentRoute),[l,c]=(0,s.useState)(t.modalRoute?[t.modalRoute]:[]);(0,s.useLayoutEffect)((()=>{const e=t.subscribe(((e,t)=>{c((r=>{let o=[];if(n.IRouter.isModalRoute(e))switch(t){case"PUSH":o=r.concat(e);break;case"POP":o=r.slice(0,-1),0===r.length&&o.push(e);break;case"REPLACE":o=[...r.slice(0,-1),e]}return o})),a(e)}));return()=>e()}),[t]);const u=l.slice(-1)[0],d=(0,s.useMemo)((()=>({router:t,route:r,fromUrl:t.fromUrl,toUrl:t.toUrl,toRoute:t.fromProxyRoute,modalRoute:u||null,modalRoutes:l,screenRoute:t.screenRoute,runtimeRoute:t.runtimeRoute})),[t,r,u,l]);return s.createElement(i.Provider,{value:d},e)},l=()=>{const{route:e,router:t,screenRoute:r,modalRoute:o,runtimeRoute:n,modalRoutes:a,toUrl:l,toRoute:c,fromUrl:u}=(0,s.useContext)(i);return{route:e,screenRoute:r,modalRoute:o,runtimeRoute:n,modalRoutes:a,navigate:t.push,back:t.back,forward:t.forward,replace:t.replace,fromUrl:u,toUrl:l,toRoute:c}},c=()=>{const{screenRoute:e}=l();if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},755534:(e,t,r)=>{"use strict";r.d(t,{StickersConfigProvider:()=>c,useStickersConfig:()=>u});var o=r(11010),n=r(667294),s=r(478748),i=r(696023),a=r(927411);const l=n.createContext(null),c=({children:e})=>{const{api:t}=(0,i.useBrowserEnv)(),r=(0,i.useOwner)(),c=(0,n.useRef)(),[u,d]=(0,n.useState)({}),h=(0,n.useCallback)(((e,r={})=>t.fetchForExternalLibs(e,r,{timeout:3e4,retries:5}).catch((e=>e instanceof a.IApi.RequestError?Promise.reject(e.apiError):e instanceof a.IApi.ExecuteErrors?Promise.reject({errors:e.list}):Promise.reject(e)))),[t]);return(0,n.useEffect)((()=>{c.current=new s.API({onAPIRequest:h,userId:r.id})}),[h,r.id]),(0,n.useEffect)((()=>{(0,o._)((function*(){if(!c.current)return;if(!(yield c.current.cache.reload()))return;const e=yield c.current.cache.getStickersImageConfigs();e&&d({items:e.items,id:e.default_id})}))()}),[]),n.createElement(l.Provider,{value:u},e)};function u(){const e=(0,n.useContext)(l);if(!e)throw new Error("StickersConfigProvider не добавлен в дерево Реакта!");return e}},538839:(e,t,r)=>{"use strict";r.d(t,{blobToImageUrl:()=>a,getFilesFromDataTransferItems:()=>n,getImageSizeByFile:()=>l,isImageLoaded:()=>c});var o=r(11010);function n(e){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(e){const t=[];return yield Promise.all(Array.from(e).map((0,o._)((function*(e){if("file"!==e.kind)return;const r=e.webkitGetAsEntry();if(r){const o=yield function(e,t){return new Promise((r=>{let o=0;const n=[];function s(e){if(function(e){return e.isFile}(e)){o++;const s=t.getAsFile();e.file((e=>{o--,n.push(e),0===o&&r(n)}),(()=>{s&&(o--,n.push(s)),0===o&&r(n)}))}else(function(e){return e.isDirectory})(e)&&i(e.createReader())}function i(e){o++,e.readEntries((e=>{o--;for(const t of e)s(t);0===o&&r(n)}))}s(e)}))}(r,e);return void t.push(...o)}const o=e.getAsFile();o&&t.push(o)})))),t.map(i)}))).apply(this,arguments)}function i(e){if(e.type)return e;const t=e.name.split(".").pop();if(!t)return e;let r="";switch(t.toLowerCase()){case"mov":r="video/quicktime";break;case"3gp":r="video/3gpp"}return r?new File([e],e.name,{type:r}):e}function a({blob:e}){return URL.createObjectURL(e)}function l(e){return new Promise(((t,r)=>{const o=new Image,n=URL.createObjectURL(e);o.onload=()=>{t({width:o.width,height:o.height}),URL.revokeObjectURL(n)},o.onerror=e=>{r(e)},o.src=n}))}function c(e){const t=new Image;return t.src=e,t.complete||t.width+t.height>0}},747578:(e,t,r)=>{"use strict";r.d(t,{applyGap:()=>m,computeAttachePhotosLayout:()=>h});var o=r(434788),n=r(89131);function s(e){if((0,n.isNonEmptyArray)(e))return e;throw new Error("not an NonEmptyArray")}function i(e,t){const r=e/t.reduce(((e,t)=>e+t.width),0),n=t.map((e=>{const{height:t,width:n}=e;return(0,o._)({},e,{height:t*r,width:n*r})}));return s(n)}function a(e,t){const{height:r,width:n}=t,s=e/r;return(0,o._)({},t,{height:e,width:n*s})}function l(e){let t=0,r=0;const o=e[0];for(let e of o)r+=e.width;for(let r of e)r[0]&&(t+=r[0].height);return r/t}function c(e,t){let r=t[0];const o=[...t,e].sort(((e,t)=>e-t)),n=o.findIndex((t=>t===e)),s=o[n-1],i=o[n+1];if(!s&&i)r=i;else if(!i&&s)r=s;else if(i&&s){r=i/e>e/s?s:i}return r}function u(e,t){return s(e.map((e=>{const r=c(e.width/e.height,t);return e.width>e.height?(0,o._)({},e,{width:r*e.height}):(0,o._)({},e,{height:e.width/r})})))}function d(e,{minHeight:t},r){return s(r.reduceRight(((r,o)=>{const n=r[r.length-1],s=a(t,o),{width:i}=s,l=n?n.reduce(((e,t)=>e+t.width),0):0;return i+l<=e&&n?n.push(s):r.push([s]),r}),[]).reverse().map((e=>e.reverse())).map((t=>i(e,s(t)))))}function h(e,t,r,o){try{const{maxSingleHeight:n}=r,h=[],m={},v=[9/16,3/4,1,4/3,16/9],f=function(e,t){const{minHeight:r}=t,o=function(e,t,r){const o=[t];let n=e;do{n=o[o.length-1]-t*r,n<e&&(n=e),o.push(n)}while(n!==e);return o}(r,e,.05),n=[];for(let e=0;e<o.length;e++){const t=o[e];t&&n.push({minHeight:t})}return n}(t/e,r),g=u(o,v),y=o[0];if(1===o.length&&y)return function(e,t,r,o){if(u([r],t)[0]){const{width:t,height:n}=r;if(t>=n)return[i(e,[r])];const s=o||16/9*e,l=i(e,[r])[0];return l&&l.height<s?[[l]]:[[a(s,r)]]}return[[r]]}(t,v,y,n);for(let r of f){const o=p(d(t,r,g),e,t),n=l(o);h.push(n),m[n]=o}let b;const E=c(e,s(h));return b=E&&m[E],b||d(t,r,o)}catch(e){return[o]}}function p(e,t,r){return function(e,t){const r=1.75,o=l(e),n=o/t;if(n>r){const n=o/(r*t);return e.forEach((e=>e.forEach((e=>e.height=e.height*n)))),e}if(n<1/r){const n=o/(1/r*t);return e.forEach((e=>e.forEach((e=>e.height=e.height*n)))),e}return e}(function(e,t){return s(e.map((e=>{if(1===e.length&&e[0]){const r=e[0],n=r.width>r.height;return[(0,o._)({},r,{width:t,height:n?r.height>t/2?t/2:r.height:t})]}return e})))}(function(e){var t;const r=e.length,o=s(e[e.length-1]),n=1===o.length;if(r<=2||!n)return e;const l=e[e.length-2];if(!l)return e;const c=null==(t=l)?void 0:t.reduce(((e,t)=>e+t.width),0);return l.push(o[0]),l.forEach((e=>a(1,e))),i(c,l),s(e.splice(0,e.length-1))}(e),r),t)}function m(e,t){return e.forEach((e=>e.forEach(((r,o)=>{0===o||o===e.length-1?r.width=Math.ceil(r.width-t/2):r.width=Math.ceil(r.width-t)})))),e}},65970:(e,t,r)=>{"use strict";r.d(t,{LangPersistentKey:()=>n,getKeyCombo:()=>h,isGlobalKeyCombo:()=>d,isModuleKeyCombo:()=>c});var o,n,s=r(15285);!function(e){e.Mod="Mod",e.Alt="Alt",e.Shift="Shift",e.Meta="Meta"}(o||(o={})),function(e){e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.Escape="Escape",e.Enter="Enter",e.Backspace="Backspace",e.Tab="Tab",e.Slash="/",e.PageDown="PageDown",e.PageUp="PageUp",e.Home="Home",e.End="End",e.Space="Space"}(n||(n={}));const i={" ":n.Space};var a;!function(e){e.F="F"}(a||(a={}));const l=[o.Shift,o.Mod,n.ArrowDown,n.ArrowUp,n.Enter,n.Escape,n.Backspace,`${o.Shift}+${n.Enter}`,`${o.Mod}+${n.Enter}`,n.ArrowLeft,n.ArrowRight,n.Tab,n.Space],c=e=>l.includes(e),u=[`${o.Mod}+${a.F}`,`${o.Mod}+${o.Shift}+${a.F}`,`${o.Mod}+${n.Slash}`],d=e=>u.includes(e),h=e=>{try{const r=[];var t;Object.values(o).forEach((t=>{p[t](e)&&r.push(t)}));const s=null!=(t=i[e.key])?t:e.key;return Object.values(n).forEach((e=>s===e&&r.push(e))),Object.values(a).forEach((t=>{s.toUpperCase()!==t?e.code.slice(3)===t&&r.push(t):r.push(t)})),r.join("+")}catch(e){return""}},p={[o.Mod]:e=>s.isMac?"Meta"===e.key||e.metaKey:e.ctrlKey,[o.Alt]:e=>e.altKey,[o.Shift]:e=>e.shiftKey,[o.Meta]:e=>s.isMac?e.ctrlKey:e.metaKey}},15285:(e,t,r)=>{"use strict";r.d(t,{browser:()=>l,emptyImage:()=>y,enRuKeysMap:()=>p,formatPhoneNumber:()=>f,getAttachForwardIndent:()=>d,getExpectedAttachWidth:()=>h,getOffsetRect:()=>i,getOrganiserUid:()=>v,getPeersInlineNames:()=>m,isMac:()=>c,isWindows:()=>u});var o=r(11010),n=r(667294),s=r(89131);function i(e,t){var r,o,n;if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};const s=e.getBoundingClientRect(),i=null==(r=t)?void 0:r.getBoundingClientRect(),a=document.body,l=document.documentElement,c=t?t.scrollTop:window.pageYOffset||l.scrollTop||a.scrollTop,u=(t?t.scrollLeft:window.pageXOffset)||l.scrollLeft||a.scrollLeft,d=l.clientTop||a.clientTop||0,h=l.clientLeft||a.clientLeft||0;return{top:s.top-((null==(o=i)?void 0:o.top)||0)+c-d,left:s.left-((null==(n=i)?void 0:n.left)||0)+u-h,width:s.width,height:s.height}}const a=navigator.userAgent.toLowerCase(),l={version:(a.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(a)&&/webkit|safari|khtml/i.test(a),safari_mobile:/iphone|ipod|ipad/i.test(a),ios:/.+(ipod|ipad|iphone.*os)/i.test(a),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext))},c="userAgentData"in window.navigator&&"platform"in window.navigator.userAgentData?0===window.navigator.userAgentData.platform.indexOf("mac"):0===window.navigator.platform.indexOf("Mac"),u=window.navigator.platform.toLowerCase().startsWith("win"),d=e=>e>0?22+10*(e-1):0;function h(e,t,r,o){const n=o+(t?0:8)-d(r);return[n,n*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}const p={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":".",[c?"\\":"`"]:"ё"},m=(e,t,r,o)=>{const s=[];return e.forEach(((n,i)=>{s.push(r(n),(r=>r===e.length-1?"":t===e.length&&r===e.length-2?` ${o.use("me_chat_members_last_divider")} `:", ")(i))})),t>e.length&&(0===e.length?s.push(o.use("me_chat_members_count",{num:t-e.length})):s.push(o.use("me_chat_members_count_lots",{num:t-e.length,values:{names:""}}))),s.length>0?n.createElement(n.Fragment,null,s):null};function v(e){switch(e.kind){case"filters":return e.filter;case"folders":return e.id;default:(0,s.exhaustivenessCheck)(e)}}function f(e){return g.apply(this,arguments)}function g(){return(g=(0,o._)((function*(e){var t,o;const{parsePhoneNumber:n}=yield r.e(4387).then(r.bind(r,304387)),s=n(e.replace(/^(\+|)+/,"+"));var i,a;return{isValid:s.valid,international:null!=(i=null==(t=s.number)?void 0:t.international)?i:e,national:null!=(a=null==(o=s.number)?void 0:o.national)?a:e}}))).apply(this,arguments)}const y="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},559360:(e,t,r)=>{"use strict";r.d(t,{SEND_OPTIONS:()=>u,TOPICS:()=>a,VISIBILITY:()=>i,empty:()=>s,getPostThemeIdFromKey:()=>l,getPostThemeKeyFromId:()=>c,validateRequiredFields:()=>d});var o=r(434788),n=r(839963);function s(){return{text:"",attaches:{},uploadsTrackIds:new Set,visibility:"all",donutDelay:-1,topic:"no_theme",sendOptions:{selected:[],disabled:[]},resetSendOptions:[]}}const i=["all","donut"],a=[["no_theme",0],["art",1],["it",7],["games",12],["music",16],["photo",19],["science",21],["sport",23],["tourism",25],["cinema",26],["humor",32],["style",43]],l=e=>{const t=a.find((t=>t[0]===e));if(!t)throw new Error(`Передан некорректный ключ ${e} для темы поста`);return t[1]},c=e=>{if(void 0===e)return"no_theme";const t=a.find((t=>t[1]===e));if(!t)throw new Error(`Передан некорректный ID ${e} для темы поста`);return t[0]},u=["close_comments","signed","mute_notifications","mark_as_ads"];function d(e){const t=s();return Object.entries(e).reduce(((e,[r,s])=>{const i=n.resolveId(+r);return e[i]=s,s.uploadsTrackIds instanceof Set||(e[i]=(0,o._)({},s,{uploadsTrackIds:t.uploadsTrackIds})),e}),{})}},400681:(e,t,r)=>{"use strict";r.d(t,{DEFAULT_FORWARD_AUTHOR_HIDDEN:()=>a,empty:()=>i,getNormalForward:()=>u,hasActiveUploads:()=>c,isEmpty:()=>l,validateRequiredFields:()=>d});var o=r(434788),n=r(96190),s=r(89131);function i(){return{text:"",attaches:{},uploadsTrackIds:new Set}}const a=!1;function l(e,t){const r=0!==Object.keys(e.attaches).length;return 0===t.length&&!e.forward&&!r&&!c(e)}function c(e){return 0!==e.uploadsTrackIds.size}function u(e,t){if(!e.forward||e.forward.kind!==t)return;const r=[...e.forward.items].filter((e=>"Normal"===e.kind));return(0,s.isNonEmptyArray)(r)?r:void 0}function d(e){const t=i();return Object.entries(e).reduce(((e,[r,s])=>{const i=n.resolveId(+r);return Array.isArray(s)?(e[i]=s,e):("kind"in s||(s.uploadsTrackIds instanceof Set||(s=(0,o._)({},s,{uploadsTrackIds:t.uploadsTrackIds})),e[i]=[s]),e)}),{})}},80497:(e,t,r)=>{"use strict";r.d(t,{prepareLink:()=>n});var o=r(95154);function n(e,t){return function(e,t){if(t.startsWith("/"))return!t.startsWith("//");t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t);try{const{hostname:r}=new URL(t);return[e,"vk.com","vk.ru","vk.me","vk.cc",o.SFERUM_DOMAIN].some((e=>r===e||r.endsWith("."+e)))}catch(e){return!1}}(e,t)||function(e){return e.startsWith("mailto:")}(t)?t:function(e,t){return`https://${e}/away.php?to=${encodeURIComponent(t)}&utf=1`}(e,t)}},927411:(e,t,r)=>{"use strict";var o;r.d(t,{IApi:()=>o}),function(e){e.resolveTrackId=function(e,t){if(0===t.length)throw new Error("Нельзя отдавать пустую строку в IApi.resolveTrackId");return`${e}-${t}`};class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}e.TimeoutError=t;class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}e.AbortError=r;class o extends Error{constructor(e,t,r){super(t),this.code=e,this.apiError=r,Object.setPrototypeOf(this,o.prototype)}}e.RequestError=o;class n extends Error{constructor(e){super(e[0].error_msg),this.list=e,Object.setPrototypeOf(this,n.prototype)}}e.ExecuteErrors=n}(o||(o={}))},781982:(e,t,r)=>{"use strict";r.d(t,{IRouter:()=>o});var o,n=r(89131);!function(e){let t;e.SettingsRouteSectionKeys=["main","account","folders","notifications","theme","experimental","about","edu"],e.ChannelModalRouteSectionKeys=["settings"],function(e){e[e.Message=0]="Message",e[e.Post=1]="Post",e[e.Composer=2]="Composer",e[e.Comment=3]="Comment",e[e.ChannelComposer=4]="ChannelComposer"}(t=e.RouteSourceKind||(e.RouteSourceKind={})),e.globalParamsKeys=["tab","folder","createPoll","sferum"],e.convoRouteExtraParamsKeys=["settings"],e.withExtraConvoParams=e=>"MainRoute"===e.kind||"ConvoRoute"===e.kind||"ChannelRoute"===e.kind||"ChannelsListRoute"===e.kind,e.isModalRoute=e=>{switch(e.kind){case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"MiniAppCatalogModalRoute":case"ChannelModalRoute":return!0;case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":case"SettingsRoute":return!1;default:(0,n.exhaustivenessCheck)(e)}},e.isProxyRoute=e=>{switch(e.kind){case"AttachProxyRoute":case"AttachMediaProxyRoute":case"HashtagProxyRoute":case"HashtagMentionProxyRoute":case"ScreenNameProxyRoute":return!0;case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":case"MiniAppCatalogModalRoute":case"SettingsRoute":case"ChannelModalRoute":return!1;default:(0,n.exhaustivenessCheck)(e)}},e.isRuntimeRoute=e=>{switch(e.kind){case"ModalMessageRuntimeRoute":case"EmptyRuntimeRoute":case"AudioRestrictionRuntimeRoute":return!0;case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":case"SettingsRoute":case"MiniAppCatalogModalRoute":case"ChannelModalRoute":return!1;default:(0,n.exhaustivenessCheck)(e)}}}(o||(o={}))},883950:(e,t,r)=>{"use strict";r.d(t,{Modals:()=>s,Stack:()=>n,resolveId:()=>i});var o=r(53416);class n{push(e){this.history.push(e),this.index=this.history.length-1,this.listeners.call({action:"add",payload:e})}goBack(e=1){this.index-=e}subscribe(e){return this.listeners.push(e)}get lastElement(){return this.history[this.history.length-1]||null}get currentElement(){return this.history[this.index]||null}findIndex(e){const t=this.history.findIndex((t=>t.modalId===e));return-1!==t?t:null}get size(){return this.history.length}onItemsRemove(e){this.index=this.history.length-1,this.listeners.call({action:"remove",payload:e}),this.lastElement&&this.listeners.call({action:"add",payload:this.lastElement})}constructor(){this.index=0,this.pop=(e=1)=>{const t=this.history.splice(-e,e);this.onItemsRemove(t)},this.forcedRemove=e=>{const t=this.history.reduce(((t,r)=>(e(r)?t.toRemove.push(r):t.actualHistory.push(r),t)),{actualHistory:[],toRemove:[]});this.history=t.actualHistory,this.onItemsRemove(t.toRemove)},this.history=[],this.listeners=function(){let e=[];return{get length(){return e.length},push:t=>(e.push(t),function(){e=e.filter((e=>e!==t))}),call(t){e.forEach((e=>e&&e(t)))}}}()}}class s{removeGroup(e){this.system.groups.delete(e)}removeModal(e){const{groupId:t}=this.getModalParams(e),r=this.system.groups.get(t);if(void 0!==r){const{group:t}=r,o=t.findIndex((t=>t.id===e));t.splice(o,1)}this.system.modals.delete(e)}constructor(){this.createGroup=()=>{const e=(0,o.nanoid)(),t={id:e,group:[]};return this.system.groups.set(e,t),{data:t,remove:this.removeGroup.bind(this,e)}},this.createModal=(e,t=!1,r)=>{const n=this.system.groups.get(e);if(!n)throw Error("Нет такого стека");const s=r||(0,o.nanoid)();return n.group.push({id:s}),this.system.modals.set(s,{groupId:n.id,isSubModal:t}),{id:s,remove:this.removeModal.bind(this,s)}},this.getModalGroup=e=>{const t=this.system.groups.get(e);if(!t)throw Error("Передан Id несуществующей группы модалок");return t},this.getModalParams=e=>{const t=this.system.modals.get(e);if(!t)throw Error("Попытка получить несуществующую модалку");return t},this.system={modals:new Map,groups:new Map}}}function i(e){return e}},822158:(e,t,r)=>{"use strict";r.d(t,{AsyncAtom:()=>i});var o=r(11010),n=r(891047),s=r(873004);class i extends s.Atom{get(){const e=this.getKey();return(0,n.get)(e,this.base.store).then((e=>e||this.cache||null)).catch((t=>(console.log(`${e}: Ошибка чтения данных из хранилища`),console.log(t),this.cache||null)))}set(e,t){var r=this,s=()=>super.set;return(0,o._)((function*(){const o=r.getKey();r.cache=e,yield(0,n.set)(o,e,r.base.store).catch((e=>{console.log(`${o}: Не удалось записать данные в хранилище`),console.log(e)})),s().call(r,e,t)}))()}delete(){const e=this.getKey();return delete this.cache,(0,n.del)(e,this.base.store).then((()=>{this.base.notify(this.key)})).catch((t=>{console.log(`${e}: Ошибка удаления ключа из хранилища`),console.log(t)}))}constructor(e){super(e);const{base:t}=e;this.base=t}}},559205:(e,t,r)=>{"use strict";r.d(t,{createAsyncStore:()=>a});var o=r(891047),n=r(131966),s=r(822158);class i extends n.Store{createAtom(e){return new s.AsyncAtom({key:e,base:this})}clear(){return(0,o.clear)(this.store).then((()=>{this.notify()}))}constructor(e){super(e);const{dbName:t,version:r}=e;this.store=(0,o.createStore)(`${t}-v${r}`,t)}}function a(e){return new i(e)}},873004:(e,t,r)=>{"use strict";r.d(t,{Atom:()=>o});class o{set(e,{notify:t=!0}={}){t&&this.base.notify(this.key)}getKey(){return`${this.base.options.storeName}-${this.key}`}constructor({key:e,base:t}){this.key=e,this.base=t}}},131966:(e,t,r)=>{"use strict";r.d(t,{Store:()=>o});class o{subscribe(e,t){const r=this.getListeners(t);return r.add(e),()=>{r.delete(e)}}notify(e,t){this.getListeners(t).forEach((t=>{t(e)}))}refresh(){try{localStorage.setItem(this.key,""),localStorage.removeItem(this.key)}catch(e){}}destroy(){this.listeners.clear(),this.syncListeners.clear(),o.instances.delete(this.key)}get key(){const{dbName:e,storeName:t,version:r}=this.options;return`${e}-v${r}-${t}`}getListeners(e){return e?this.syncListeners:this.listeners}constructor(e){this.listeners=new Set,this.syncListeners=new Set,this.options=e,o.instances.set(this.key,this)}}o.instances=new Map,window.addEventListener("storage",(({key:e,newValue:t})=>{var r;e&&null!==t&&(null==(r=o.instances.get(e))||r.notify())}))},426775:(e,t,r)=>{"use strict";r.d(t,{SyncAtom:()=>s,SyncAtomType:()=>o});var o,n=r(873004);!function(e){e.OBJECT="object",e.STRING="string",e.NUMBER="number",e.BOOLEAN="boolean",e.STRING_NUMBER="string_number"}(o||(o={}));class s extends n.Atom{get(){const e=this.getKey();try{let t=localStorage.getItem(e);if(!t)return null;switch(this.type){case o.OBJECT:try{t=JSON.parse(t)}catch(e){return null}break;case o.NUMBER:t=Number(t)||0;break;case o.STRING_NUMBER:t=Number(t)||t;break;case o.BOOLEAN:t=Boolean(Number(t))}return t}catch(t){return console.log(`${e}: Ошибка чтения данных из хранилища`),console.log(t),this.cache||null}}set(e,t){const r=this.getKey();let n;switch(this.type){case o.OBJECT:n=JSON.stringify(e);break;case o.BOOLEAN:n=String(Number(e));break;default:n=String(e)}try{localStorage.setItem(r,n)}catch(t){console.log(`${r}: Не удалось записать данные в хранилище`),console.log(t),this.cache=e}super.set(e,t)}delete(){const e=this.getKey();try{delete this.cache,localStorage.removeItem(e)}catch(t){console.log(`${e}: Ошибка удаления ключа из хранилища`),console.log(t)}}getKey(){return`${this.base.key}-${this.key}`}constructor(e){super(e);const{base:t,type:r}=e;this.base=t,this.type=r}}},380312:(e,t,r)=>{"use strict";r.d(t,{createSyncStore:()=>i});var o=r(131966),n=r(426775);class s extends o.Store{createAtom(e,t){return new n.SyncAtom({key:e,type:t,base:this})}constructor(e){super(e)}}function i(e){return new s(e)}},535727:(e,t,r)=>{"use strict";r.d(t,{usePatchChildrenRef:()=>i});var o=r(667294),n=r(488543);const s=e=>"string"==typeof e.type,i=e=>{var t;const r=(0,o.isValidElement)(e)&&(s(e)?e.ref:e.props.getRootRef),i=(0,n.useExternRef)(r);return(0,o.useEffect)((()=>{i.current||console.error("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента")}),[null==(t=e)?void 0:t.type,i]),[i,(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{[s(e)?"ref":"getRootRef"]:i}):e]}},503967:(e,t,r)=>{"use strict";r.d(t,{PackContext:()=>u});var o=r(570912),n=r(615816),s=r(820224),i=(0,n._)("_options"),a=(0,n._)("_pack"),l=(0,n._)("_product"),c=(0,n._)("_stockItem");class u{get rawData(){return(0,o._)(this,a)[a]||(0,o._)(this,c)[c]||(0,o._)(this,l)[l]}get isPack(){return Boolean((0,o._)(this,a)[a])}get isProduct(){return Boolean((0,o._)(this,l)[l])}get isStockItem(){return Boolean((0,o._)(this,c)[c])}get isStoreItem(){return this.isProduct||this.isStockItem}get stockItem(){return(0,o._)(this,c)[c]}get id(){var e,t,r,n;const s=null==(t=(0,o._)(this,i)[i])||null==(e=t.redefine)?void 0:e.id;if(void 0!==s)return s;const c=null==(r=(0,o._)(this,l)[l])?void 0:r.id;return void 0!==c?c:null==(n=(0,o._)(this,a)[a])?void 0:n.id}setHint(e){return(0,o._)(this,i)[i]?((0,o._)(this,i)[i].hint=e,this):this}get hintId(){var e,t;return null==(t=(0,o._)(this,i)[i])||null==(e=t.hint)?void 0:e.id}get hintWidth(){var e,t;return null==(t=(0,o._)(this,i)[i])||null==(e=t.hint)?void 0:e.width}get index(){var e;return null==(e=(0,o._)(this,i)[i])?void 0:e.index}get referrer(){var e;return null==(e=(0,o._)(this,i)[i])?void 0:e.referrer}get tooltip(){var e;return null==(e=(0,o._)(this,i)[i])?void 0:e.tooltip}get title(){var e,t,r;return(null==(t=(0,o._)(this,i)[i])||null==(e=t.redefine)?void 0:e.title)||(null==(r=(0,o._)(this,l)[l])?void 0:r.title)||""}get stickers(){var e,t,r,n;return(null==(t=(0,o._)(this,i)[i])||null==(e=t.redefine)?void 0:e.stickers)||(null==(r=(0,o._)(this,a)[a])?void 0:r.stickers)||(null==(n=(0,o._)(this,l)[l])?void 0:n.stickers)}get baseId(){var e;return null==(e=(0,o._)(this,l)[l])?void 0:e.base_id}get isStyle(){return void 0!==this.baseId}get hasStyles(){var e;return Boolean(null==(e=this.styleIds)?void 0:e.length)}get styleIds(){var e;return null==(e=(0,o._)(this,l)[l])?void 0:e.style_ids}get canGift(){var e;return Boolean(null==(e=(0,o._)(this,c)[c])?void 0:e.can_gift)}get vmojiAvatar(){var e;return null==(e=(0,o._)(this,l)[l])?void 0:e.vmoji_avatar}get isVmoji(){var e;return Boolean(this.vmojiAvatar||(null==(e=(0,o._)(this,l)[l])?void 0:e.is_vmoji))}get isNew(){var e;return null==(e=(0,o._)(this,l)[l])?void 0:e.is_new}get previews(){var e;return null==(e=(0,o._)(this,l)[l])?void 0:e.previews}constructor(e){var{pack:t}=e,r=(0,s._)(e,["pack"]);Object.defineProperty(this,i,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,o._)(this,i)[i]=r,t&&("product"in t?((0,o._)(this,c)[c]=t,(0,o._)(this,l)[l]=t.product):"id"in t&&"type"in t?(0,o._)(this,l)[l]=t:(0,o._)(this,a)[a]=t)}}},879706:(e,t,r)=>{"use strict";r.d(t,{$api:()=>l,APIGate:()=>c,changeAPIOptions:()=>a});var o=r(798116),n=r(504190),s=r(348354),i=r(478748);const a=s.stickersEmojiKeyboard.createEvent(),l=s.stickersEmojiKeyboard.createStore(new i.API({})).on(a,((e,{api:t})=>t)),c=(0,n.createGate)();(0,o.forward)({from:c.state,to:a})},348354:(e,t,r)=>{"use strict";r.d(t,{stickersEmojiKeyboard:()=>o});const o=(0,r(798116).createDomain)()},326157:(e,t,r)=>{"use strict";r.d(t,{$favoriteStickers:()=>s,setFavoriteStickers:()=>n});var o=r(348354);const n=o.stickersEmojiKeyboard.createEvent(),s=o.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},237341:(e,t,r)=>{"use strict";r.d(t,{$hasAvatar:()=>s,setHasAvatar:()=>n});var o=r(348354);const n=o.stickersEmojiKeyboard.createEvent(),s=o.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},829596:(e,t,r)=>{"use strict";r.d(t,{$packs:()=>p,ServicePackKey:()=>o});var o,n,s=r(798116),i=r(944952),a=r(734264),l=r(237341),c=r(703104),u=r(730368),d=r(326157),h=r(503967);!function(e){e[e.FAVORITE=-1]="FAVORITE",e[e.RECENT=-2]="RECENT",e[e.VMOJI=-3]="VMOJI",e[e.UGC=-4]="UGC"}(o||(o={})),function(e){e.RECENT="recent",e.FAVORITE="favourite",e.KEYBOARD="keyboard"}(n||(n={}));const p=(0,s.combine)(i.$ugcInfo,a.$ugcPacks,c.$stockItems,u.$recentStickers,d.$favoriteStickers,l.$hasAvatar,((e,t,r,s,i,a)=>{var l,c,u,d,p,m,v;const f=new Map;let g=[];const y=new Map;let b=0;if(!r||!s||!i)return{};i.length&&(f.set(o.FAVORITE,new h.PackContext({index:b,referrer:n.FAVORITE,redefine:{id:o.FAVORITE,title:"stickers_picker_favorite",stickers:i}})),g.push(o.FAVORITE),b++),s.length&&(f.set(o.RECENT,new h.PackContext({index:b,referrer:n.RECENT,redefine:{id:o.RECENT,title:"stickers_picker_recently_used",stickers:s}})),g.push(o.RECENT),b++);-1!==(null==(l=r)?void 0:l.findIndex((({product:{vmoji_avatar:e}})=>void 0!==e)))||a||(f.set(o.VMOJI,new h.PackContext({index:b,referrer:n.KEYBOARD,redefine:{id:o.VMOJI,title:"stickers_picker_vmoji"}})),g.push(o.VMOJI),b++);const E=null==(c=t)?void 0:c[0],w=null==(u=e)?void 0:u.can_edit,k=null==(p=E)||null==(d=p.stickers)?void 0:d.length,_=(null==(m=e)?void 0:m.show_keyboard_onboarding)&&w;if(!(null==(v=e)?void 0:v.is_keyboard_hidden)&&(k||_)){const e=new h.PackContext({pack:E,index:b,referrer:n.KEYBOARD,tooltip:{header:"stickers_picker_ugc_tooltip_title",text:"stickers_picker_ugc_tooltip_description"},redefine:{id:o.UGC,title:"stickers_picker_ugc"}});w&&e.setHint({id:"stickers:ugc_keyboard_onboarding_tooltip",width:176}),f.set(o.UGC,e),g.push(o.UGC),b++}return r.forEach((e=>{const{product:{id:t,vmoji_avatar:r}}=e;if(f.set(t,new h.PackContext({index:b,referrer:n.KEYBOARD,pack:e})),r){let e=y.get(r.id);e||(e=g.push([])-1,y.set(r.id,e));const o=g[e];Array.isArray(o)&&o.push(t)}else g.push(t);b++})),{packs:f,packsGroups:g}}))},703104:(e,t,r)=>{"use strict";r.d(t,{$stockItems:()=>s,setStockItems:()=>n});var o=r(348354);const n=o.stickersEmojiKeyboard.createEvent(),s=o.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},730368:(e,t,r)=>{"use strict";r.d(t,{$recentStickers:()=>s,setRecentStickers:()=>n});var o=r(348354);const n=o.stickersEmojiKeyboard.createEvent(),s=o.stickersEmojiKeyboard.createStore(null).on(n,((e,t)=>t))},944952:(e,t,r)=>{"use strict";r.d(t,{$ugcInfo:()=>d,reloadUGCInfo:()=>c,setUGCInfo:()=>l});var o=r(11010),n=r(798116),s=r(879706),i=r(348354),a=r(910850);const l=i.stickersEmojiKeyboard.createEvent(),c=i.stickersEmojiKeyboard.createEvent(),u=i.stickersEmojiKeyboard.createEffect((0,o._)((function*(e){return e.cache.ugcInfo.get().catch((()=>null))}))),d=i.stickersEmojiKeyboard.createStore(null).on(l,((e,t)=>t)).on(u.doneData,((e,t)=>t)).on(a.submitUGCReportFx.doneData,(()=>null));(0,n.sample)({clock:c,source:s.$api,target:u})},734264:(e,t,r)=>{"use strict";r.d(t,{$ugcPacks:()=>i,setUGCPacks:()=>s});var o=r(348354),n=r(910850);const s=o.stickersEmojiKeyboard.createEvent(),i=o.stickersEmojiKeyboard.createStore(null).on(s,((e,t)=>t)).on(n.submitUGCReportFx.doneData,(()=>null))},910850:(e,t,r)=>{"use strict";r.d(t,{submitUGCReport:()=>i,submitUGCReportFx:()=>a});var o=r(798116),n=r(879706),s=r(348354);const i=s.stickersEmojiKeyboard.createEvent(),a=s.stickersEmojiKeyboard.createEffect((e=>{e.cache.clearUGC()}));(0,o.sample)({clock:i,source:n.$api,target:a})},616912:(e,t,r)=>{"use strict";r.d(t,{$userEnv:()=>s,setUserEnv:()=>n});var o=r(348354);const n=o.stickersEmojiKeyboard.createEvent(),s=o.stickersEmojiKeyboard.createStore({}).on(n,((e,t)=>t))},478748:(e,t,r)=>{"use strict";r.d(t,{API:()=>c});var o=r(434788),n=r(820224),s=r(964548),i=r(164702),a=r(960294),l=r(254734);class c extends s.API{constructor(e){var{onAPIRequest:t}=e,r=(0,n._)(e,["onAPIRequest"]);const{userId:c}=r;super({requestMethod:t},{userId:c,source:"stickers"}),this.cache=new i.Cache((0,o._)({api:this},r)),this.updates.addEventListener(s.StickersQueueEventType.UGC_OWNER_UPDATE,a.stickersUGCOwnerUpdateHandler.bind(this)),this.updates.addEventListener(s.StickersQueueEventType.UGC_STICKER_UPDATE,l.stickersUGCStickerUpdateHandler.bind(this))}}},960294:(e,t,r)=>{"use strict";function o({detail:{owner_global_id:e}}){this.cache.reloadUGC(e)}r.d(t,{stickersUGCOwnerUpdateHandler:()=>o})},254734:(e,t,r)=>{"use strict";r.d(t,{stickersUGCStickerUpdateHandler:()=>i});var o=r(11010);const n=new Map,s=new Set;function i(e){return a.apply(this,arguments)}function a(){return(a=(0,o._)((function*({detail:{stickers:e}}){const{peerId:t}=this.cache.options;e.forEach((e=>{if(e.owner_id!==t)return;let r=n.get(t);r||(r=[],n.set(t,r));const o=r.findIndex((t=>t.id===e.id&&t.pack_id===e.pack_id&&t.owner_id===e.owner_id));-1!==o?r[o]=e:r.push(e)})),l.call(this)}))).apply(this,arguments)}function l(){return c.apply(this,arguments)}function c(){return(c=(0,o._)((function*(){var e,t;const{peerId:r}=this.cache.options;if(!r||s.has(r))return;const o=n.get(r);if(!(null==(e=o)?void 0:e.length))return;s.add(r),n.delete(r);const i=yield this.cache.ugcPacks.get();if(!(null==(t=i)?void 0:t.length))return;const a=new Map(i.map((e=>[e.id,e])));o.forEach((e=>{const{id:t,pack_id:r}=e;if(void 0===r)return;const o=a.get(r);if(!o)return;const n=o.stickers.findIndex((e=>e.id===t));-1!==n&&(o.stickers[n]=e)})),yield this.cache.ugcPacks.set(i).catch((()=>{})),s.delete(r),l.call(this)}))).apply(this,arguments)}},153526:(e,t,r)=>{"use strict";r.d(t,{reloadFavoriteStickers:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){const e=yield this.options.api.store.getFavoriteStickers().then((({items:e})=>e)).catch((()=>null));return!!e&&(yield this.favoriteStickers.set(e),!0)}))).apply(this,arguments)}},859668:(e,t,r)=>{"use strict";r.d(t,{reloadGlobal:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){var e,t,r,o,n,s;if(this.reloading)return!0;this.setReloading(!0);const i=yield this.global.get();let[a,l]=yield Promise.all([this.options.api.store.hasNewItems({type:"stickers",version_hash:String(null==(e=i)?void 0:e.stickers_version_hash)}).catch((()=>null)),this.stockItems.get()]);if(!a)return this.setReloading(!1),!1;(s=a).sticker_packs_version_hashes||(s.sticker_packs_version_hashes=null==(t=i)?void 0:t.sticker_packs_version_hashes);const{stickers_version_hash:c,sticker_packs_version_hashes:u,favorite_stickers_version_hash:d,image_configs_version_hash:h,sticker_packs_chunk_size_limit:p}=a;c!==(null==(r=i)?void 0:r.stickers_version_hash)&&(l=null,this.stickersListAsync.clear());const m=[this.reloadStockItems({cachedStockItems:l,actualPacksHashes:u,chunkSize:p}),this.reloadUGC(),this.reloadVmoji(),this.reloadRecentStickers()];return d!==(null==(o=i)?void 0:o.favorite_stickers_version_hash)&&m.push(this.reloadFavoriteStickers()),h!==(null==(n=i)?void 0:n.image_configs_version_hash)&&m.push(this.reloadImageConfigs()),Promise.all(m).then((e=>{this.setReloading(!1);const t=-1===e.findIndex((e=>!e));return t&&a&&(this.global.set(a),this.stickersSync.notify(void 0,!0)),t}))}))).apply(this,arguments)}},441695:(e,t,r)=>{"use strict";r.d(t,{reloadImageConfigs:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){const e=yield this.options.api.store.getStickersImageConfigs().catch((()=>null));return!!e&&(this.imageConfigs.set(e),!0)}))).apply(this,arguments)}},957627:(e,t,r)=>{"use strict";r.d(t,{reloadRecentStickers:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){const e=yield this.options.api.messages.getRecentStickers().then((({items:e})=>e)).catch((()=>null));return e&&this.recentStickers.set(e),!0}))).apply(this,arguments)}},844411:(e,t,r)=>{"use strict";r.d(t,{getStickers:()=>n});var o=r(11010);function n(e){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(e){const t=yield Promise.all(e.map((e=>this.stickersListAsync.createAtom(String(e)).get())));if(!t.includes(null))return t;const r=new Map,o=t.reduce(((t,o,n)=>{if(!o){const o=e[n];t.push(o),r.set(o,n)}return t}),[]);return(yield this.options.api.store.getStickers({sticker_ids:String(o)})).forEach((e=>{const{sticker_id:o}=e;if(!o)return;this.stickersListAsync.createAtom(String(o)).set(e);const n=r.get(o);n&&(t[n]=e)})),t}))).apply(this,arguments)}},161260:(e,t,r)=>{"use strict";function o({active:e}){return this.stockItems.get().then((t=>(t&&(t=t.sort((({product:{vmoji_avatar:e}},{product:{vmoji_avatar:t}})=>Number(Boolean(t))-Number(Boolean(e)))),e&&(t=t.filter((({product:{active:e}})=>e)))),t)))}r.d(t,{getStockItems:()=>o})},801115:(e,t,r)=>{"use strict";r.d(t,{loadStockItems:()=>n});var o=r(11010);function n(e){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*({productId:e,stickerId:t}){const r=yield this.stockItems.get();let o;return r&&(e&&(o=r.find((({product:{id:t}})=>t===e))),t&&!o&&(o=r.find((({product:{stickers:e}})=>e&&-1!==e.findIndex((({sticker_id:e})=>e===t)))))),o||(e&&(o=yield this.options.api.store.getStockItemByProductId({type:"stickers",product_id:String(e)}).catch((()=>{}))),o?(this.updateStockItems([o]),o):(t&&(o=yield this.options.api.store.getStockItemByStickerId({sticker_id:t}).catch((()=>{}))),o&&this.updateStockItems([o]),o))}))).apply(this,arguments)}},744035:(e,t,r)=>{"use strict";r.d(t,{reloadStockItems:()=>i});var o=r(11010),n=r(659397);const s=new Map;function i(e){return a.apply(this,arguments)}function a(){return(a=(0,o._)((function*({chunkSize:e=25,cachedStockItems:t,actualPacksHashes:r}){var o,i,a;let l=s.get(this.stickersSync.key);l||(l=new Map,s.set(this.stickersSync.key,l));let c=null==(o=t)?void 0:o.reduce(((e,{product:{id:t},version_hash:o})=>{var n;const s=null==(n=r)?void 0:n.find((({pack_id:e})=>e===t));if(!s)return e;return s.hash!==o&&e.push(t),e}),[]);const u=!c;if(u&&(c=yield this.options.api.store.getProducts({type:"stickers",filters:"active"}).then((({items:e})=>e.map((({id:e})=>e)))).catch((()=>{}))),!(null==(i=c)?void 0:i.length))return!0;this.stickersListAsync.clear();let d=yield Promise.all((0,n.chunkArray)(c,e).map((e=>{var t;const r=String(e);return(null==(t=l)?void 0:t.get(r))||this.options.api.store.getStockItems({type:"stickers",product_ids:r}).then((e=>{var t;return null==(t=l)||t.set(r,e),e}))}))).then((e=>e.reduce(((e,{items:t})=>(e.push(...t),e)),[]).filter((e=>!Array.isArray(e))))).catch((()=>null));if(!d)return!1;if(null==(a=t)?void 0:a.length){const e=new Map(d.map((e=>[e.product.id,e])));d=t=t.map((t=>e.get(t.product.id)||t))}return d&&c&&u&&(d=d.sort((({product:{id:e}},{product:{id:t}})=>{var r,o;return Number(null==(r=c)?void 0:r.indexOf(e))-Number(null==(o=c)?void 0:o.indexOf(t))}))),yield this.stockItems.set(d),s.delete(this.stickersSync.key),!0}))).apply(this,arguments)}},895883:(e,t,r)=>{"use strict";r.d(t,{updateStockItems:()=>n});var o=r(11010);function n(e,t){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(e,t){let r=yield this.stockItems.get();if(r){const t=new Map(r.map((e=>{const{product:{id:t}}=e;return[t,e]})));e.forEach((e=>{const{product:{id:r}}=e;t.set(r,e)})),r=[...t.values()]}return this.stockItems.set(r||e,t)}))).apply(this,arguments)}},352319:(e,t,r)=>{"use strict";function o(){this.ugcInfo.delete(),this.ugcPacks.delete()}r.d(t,{clearUGC:()=>o})},767374:(e,t,r)=>{"use strict";r.d(t,{hideUGCOnboarding:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){var e;const t=yield this.ugcInfo.get();if(!(null==(e=t)?void 0:e.show_keyboard_onboarding))return!1;const{owner_id:r}=t;return t.show_keyboard_onboarding=!1,this.ugcInfo.set(t),this.options.api.stickers.hideUGCKeyboardOnboarding({owner_id:r}).then(Boolean).catch((()=>!1))}))).apply(this,arguments)}},725055:(e,t,r)=>{"use strict";r.d(t,{reloadUGC:()=>i});var o=r(11010),n=r(723062),s=r(744165);function i(e){return a.apply(this,arguments)}function a(){return(a=(0,o._)((function*(e){if(!(0,s.isUgcStickersEnabled)())return this.clearUGC(),!0;const{peerId:t}=this.options;if(!t||!n.Ranges.isChatOrChannelPeer(t))return!0;const r=yield this.ugcPacks.get(),o=yield this.options.api.stickers.getUGCPackLists({owner_ids:String(t),owner_global_ids:e}).then((({lists:e})=>e[0])).catch((()=>{}));if(!o)return this.ugcInfo.delete(),this.ugcPacks.delete(),!0;this.ugcInfo.set(o);const{items:i}=o;if(!i.length)return this.ugcPacks.delete(),!0;const a=r?new Map(r.map((({id:e,hash:t})=>[e,t]))):void 0,l=i.reduce(((e,{pack_id:t,hash:r})=>{var o;return(null==(o=a)?void 0:o.get(t))!==r&&e.push(t),e}),[]);if(!l.length)return!0;const c=yield this.options.api.stickers.getUGCPacks({owner_id:t,pack_ids:String(l)}).then((({packs:e})=>e)).catch((()=>{}));return!c||(this.ugcPacks.set(c),!0)}))).apply(this,arguments)}},295266:(e,t,r)=>{"use strict";r.d(t,{clearVmojiPromotionDot:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){var e;const t=yield this.global.get();(null==(e=t)?void 0:e.vmoji_promotion)&&(t.vmoji_promotion.dot_color=void 0,this.global.set(t,{notify:!1}))}))).apply(this,arguments)}},20830:(e,t,r)=>{"use strict";r.d(t,{reloadVmoji:()=>n});var o=r(11010);function n(){return s.apply(this,arguments)}function s(){return(s=(0,o._)((function*(){return this.hasAvatar.get()||(yield this.options.api.vmoji.getAvatar().then((({characters:e})=>{var t;this.hasAvatar.set(Boolean(null==(t=e)?void 0:t.length))})).catch((()=>{}))),!0}))).apply(this,arguments)}},164702:(e,t,r)=>{"use strict";r.d(t,{Cache:()=>E});var o=r(380312),n=r(559205),s=r(426775),i=r(725055),a=r(20830),l=r(844411),c=r(859668),u=r(161260),d=r(801115),h=r(744035),p=r(895883),m=r(767374),v=r(441695),f=r(957627),g=r(295266),y=r(153526),b=r(352319);class E{subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}get reloading(){return this.isReloading}setReloading(e){this.isReloading=e}destroy(){this.stickersSync.destroy(),this.stickersAsync.destroy(),this.stickersListAsync.destroy()}constructor(e){this.isReloading=!1,this.listeners=new Set,this.reload=c.reloadGlobal.bind(this),this.reloadVmoji=a.reloadVmoji.bind(this),this.clearVmojiPromotionDot=g.clearVmojiPromotionDot.bind(this),this.getStockItem=d.loadStockItems.bind(this),this.getStockItems=u.getStockItems.bind(this),this.updateStockItems=p.updateStockItems.bind(this),this.reloadStockItems=h.reloadStockItems.bind(this),this.reloadUGC=i.reloadUGC.bind(this),this.clearUGC=b.clearUGC.bind(this),this.hideUGCOnboarding=m.hideUGCOnboarding.bind(this),this.reloadRecentStickers=f.reloadRecentStickers.bind(this),this.reloadFavoriteStickers=y.reloadFavoriteStickers.bind(this),this.reloadImageConfigs=v.reloadImageConfigs.bind(this),this.getStickers=l.getStickers.bind(this);const{userId:t,peerId:r}=e;this.options=e;const E=(0,o.createSyncStore)({dbName:"stickers",storeName:String(t),version:1}),w=(0,n.createAsyncStore)({dbName:"stickers",storeName:String(t),version:1}),k=(0,n.createAsyncStore)({dbName:"stickers-list",storeName:String(t),version:1});this.stickersSync=E,this.stickersAsync=w,this.stickersListAsync=k,this.global=w.createAtom("global"),this.stockItems=w.createAtom("stockItems"),this.imageConfigs=w.createAtom("imageConfigs"),this.recentStickers=w.createAtom("recentStickers"),this.favoriteStickers=w.createAtom("favoriteStickers"),this.hasAvatar=E.createAtom("hasAvatar",s.SyncAtomType.BOOLEAN),this.recentEmoji=E.createAtom("recentEmoji",s.SyncAtomType.OBJECT),this.tabbarActiveTab=E.createAtom("tabbarActiveTab",s.SyncAtomType.STRING),this.stickersActiveTab=E.createAtom("stickersActiveTab",s.SyncAtomType.NUMBER);const _=(0,n.createAsyncStore)({dbName:"stickers-ugc",storeName:`${t}-${r}`,version:1});this.ugcAsync=_,this.ugcInfo=_.createAtom("ugcInfo"),this.ugcPacks=_.createAtom("ugcPacks"),this.getStickersImageConfigs=this.imageConfigs.get.bind(this.imageConfigs)}}},744165:(e,t,r)=>{"use strict";r.d(t,{isUgcStickersEnabled:()=>n});var o=r(616912);const n=()=>{return e="stickers.ugc",Boolean(o.$userEnv.getState()[e]);var e}},533404:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var o=r(537170),n=/^\s+/;const s=function(e){return e?e.slice(0,(0,o.default)(e)+1).replace(n,""):e}},537170:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var o=/\s/;const n=function(e){for(var t=e.length;t--&&o.test(e.charAt(t)););return t}},453434:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var o=r(777226),n=r(425222),s=r(925742),i=Math.max,a=Math.min;const l=function(e,t,r){var l,c,u,d,h,p,m=0,v=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=l,o=c;return l=c=void 0,m=t,d=e.apply(o,r)}function b(e){var r=e-p;return void 0===p||r>=t||r<0||f&&e-m>=u}function E(){var e=(0,n.default)();if(b(e))return w(e);h=setTimeout(E,function(e){var r=t-(e-p);return f?a(r,u-(e-m)):r}(e))}function w(e){return h=void 0,g&&l?y(e):(l=c=void 0,d)}function k(){var e=(0,n.default)(),r=b(e);if(l=arguments,c=this,p=e,r){if(void 0===h)return function(e){return m=e,h=setTimeout(E,t),v?y(e):d}(p);if(f)return clearTimeout(h),h=setTimeout(E,t),y(p)}return void 0===h&&(h=setTimeout(E,t)),d}return t=(0,s.default)(t)||0,(0,o.default)(r)&&(v=!!r.leading,u=(f="maxWait"in r)?i((0,s.default)(r.maxWait)||0,t):u,g="trailing"in r?!!r.trailing:g),k.cancel=function(){void 0!==h&&clearTimeout(h),m=0,l=p=c=h=void 0},k.flush=function(){return void 0===h?d:w((0,n.default)())},k}},425222:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var o=r(966092);const n=function(){return o.default.Date.now()}},300111:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var o=r(453434),n=r(777226);const s=function(e,t,r){var s=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,n.default)(r)&&(s="leading"in r?!!r.leading:s,i="trailing"in r?!!r.trailing:i),(0,o.default)(e,t,{leading:s,maxWait:t,trailing:i})}},925742:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var o=r(533404),n=r(777226),s=r(72714),i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;const u=function(e){if("number"==typeof e)return e;if((0,s.default)(e))return NaN;if((0,n.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,n.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,o.default)(e);var r=a.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):i.test(e)?NaN:+e}},53416:(e,t,r)=>{"use strict";r.d(t,{nanoid:()=>o});let o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},997650:(e,t,r)=>{"use strict";r.d(t,{InView:()=>p,observe:()=>u,useInView:()=>m});var o=r(667294);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n.apply(this,arguments)}const s=new Map,i=new WeakMap;let a,l=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(i.has(r)||(l+=1,i.set(r,l.toString())),i.get(r)):"0"):e[t]}`;var r})).toString()}function u(e,t,r={},o=a){if(void 0===window.IntersectionObserver&&void 0!==o){const n=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:n,observer:i,elements:l}=function(e){let t=c(e),r=s.get(t);if(!r){const o=new Map;let n;const i=new IntersectionObserver((t=>{t.forEach((t=>{var r;const s=t.isIntersecting&&n.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(r=o.get(t.target))||r.forEach((e=>{e(s,t)}))}))}),e);n=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:i,elements:o},s.set(t,r)}return r}(r);let u=l.get(e)||[];return l.has(e)||l.set(e,u),u.push(t),i.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(l.delete(e),i.unobserve(e)),0===l.size&&(i.disconnect(),s.delete(n))}}const d=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function h(e){return"function"!=typeof e.children}class p extends o.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),h(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:r,trackVisibility:o,delay:n,fallbackInView:s}=this.props;this._unobserveCb=u(this.node,this.handleChange,{threshold:e,root:t,rootMargin:r,trackVisibility:o,delay:n},s)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!h(this.props)){const{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}const e=this.props,{children:t,as:r}=e,s=function(e,t){if(null==e)return{};var r,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,d);return o.createElement(r||"div",n({ref:this.handleNode},s),t)}}function m({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:s,triggerOnce:i,skip:a,initialInView:l,fallbackInView:c,onChange:d}={}){var h;const[p,m]=o.useState(null),v=o.useRef(),[f,g]=o.useState({inView:!!l,entry:void 0});v.current=d,o.useEffect((()=>{if(a||!p)return;let o;return o=u(p,((e,t)=>{g({inView:e,entry:t}),v.current&&v.current(e,t),t.isIntersecting&&i&&o&&(o(),o=void 0)}),{root:s,rootMargin:n,threshold:e,trackVisibility:r,delay:t},c),()=>{o&&o()}}),[Array.isArray(e)?e.toString():e,p,s,n,i,a,r,c,t]);const y=null==(h=f.entry)?void 0:h.target,b=o.useRef();p||!y||i||a||b.current===y||(b.current=y,g({inView:!!l,entry:void 0}));const E=[m,f.inView,f.entry];return E.ref=E[0],E.inView=E[1],E.entry=E[2],E}},269329:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var o=r(300111),n=r(453434),s=r(931807),i=function(){return i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},a=null,l=null;function c(){if(null===a){if("undefined"==typeof document)return a=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var r=t.getBoundingClientRect().right;e.removeChild(t),a=r}return a}function u(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function d(e){return e&&e.ownerDocument?e.ownerDocument:document}s&&window.addEventListener("resize",(function(){l!==window.devicePixelRatio&&(l=window.devicePixelRatio,a=null)}));var h=function(e){return Array.prototype.reduce.call(e,(function(e,t){var r=t.name.match(/data-simplebar-(.+)/);if(r){var o=r[1].replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}));switch(t.value){case"true":e[o]=!0;break;case"false":e[o]=!1;break;case void 0:e[o]=!0;break;default:e[o]=t.value}}return e}),{})};function p(e,t){var r;e&&(r=e.classList).add.apply(r,t.split(" "))}function m(e,t){e&&t.split(" ").forEach((function(t){e.classList.remove(t)}))}function v(e){return".".concat(e.split(" ").join("."))}var f=Object.freeze({__proto__:null,getElementWindow:u,getElementDocument:d,getOptions:h,addClasses:p,removeClasses:m,classNamesToQuery:v}),g=u,y=d,b=h,E=p,w=m,k=v,_=function(){function e(t,r){void 0===r&&(r={});var s=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var e=g(s.el);s.scrollXTicking||(e.requestAnimationFrame(s.scrollX),s.scrollXTicking=!0),s.scrollYTicking||(e.requestAnimationFrame(s.scrollY),s.scrollYTicking=!0),s.isScrolling||(s.isScrolling=!0,E(s.el,s.classNames.scrolling)),s.showScrollbar("x"),s.showScrollbar("y"),s.onStopScrolling()},this.scrollX=function(){s.axis.x.isOverflowing&&s.positionScrollbar("x"),s.scrollXTicking=!1},this.scrollY=function(){s.axis.y.isOverflowing&&s.positionScrollbar("y"),s.scrollYTicking=!1},this._onStopScrolling=function(){w(s.el,s.classNames.scrolling),s.options.autoHide&&(s.hideScrollbar("x"),s.hideScrollbar("y")),s.isScrolling=!1},this.onMouseEnter=function(){s.isMouseEntering||(E(s.el,s.classNames.mouseEntered),s.showScrollbar("x"),s.showScrollbar("y"),s.isMouseEntering=!0),s.onMouseEntered()},this._onMouseEntered=function(){w(s.el,s.classNames.mouseEntered),s.options.autoHide&&(s.hideScrollbar("x"),s.hideScrollbar("y")),s.isMouseEntering=!1},this._onMouseMove=function(e){s.mouseX=e.clientX,s.mouseY=e.clientY,(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseMoveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseMoveForAxis("y")},this.onMouseLeave=function(){s.onMouseMove.cancel(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseLeaveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseLeaveForAxis("y"),s.mouseX=-1,s.mouseY=-1},this._onWindowResize=function(){s.scrollbarWidth=s.getScrollbarWidth(),s.hideNativeScrollbar()},this.onPointerEvent=function(e){var t,r;s.axis.x.track.el&&s.axis.y.track.el&&s.axis.x.scrollbar.el&&s.axis.y.scrollbar.el&&(s.axis.x.track.rect=s.axis.x.track.el.getBoundingClientRect(),s.axis.y.track.rect=s.axis.y.track.el.getBoundingClientRect(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&(t=s.isWithinBounds(s.axis.x.track.rect)),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&(r=s.isWithinBounds(s.axis.y.track.rect)),(t||r)&&(e.stopPropagation(),"pointerdown"===e.type&&"touch"!==e.pointerType&&(t&&(s.axis.x.scrollbar.rect=s.axis.x.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.x.scrollbar.rect)?s.onDragStart(e,"x"):s.onTrackClick(e,"x")),r&&(s.axis.y.scrollbar.rect=s.axis.y.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.y.scrollbar.rect)?s.onDragStart(e,"y"):s.onTrackClick(e,"y")))))},this.drag=function(t){var r,o,n,i,a,l,c,u,d,h,p;if(s.draggedAxis&&s.contentWrapperEl){var m=s.axis[s.draggedAxis].track,v=null!==(o=null===(r=m.rect)||void 0===r?void 0:r[s.axis[s.draggedAxis].sizeAttr])&&void 0!==o?o:0,f=s.axis[s.draggedAxis].scrollbar,g=null!==(i=null===(n=s.contentWrapperEl)||void 0===n?void 0:n[s.axis[s.draggedAxis].scrollSizeAttr])&&void 0!==i?i:0,y=parseInt(null!==(l=null===(a=s.elStyles)||void 0===a?void 0:a[s.axis[s.draggedAxis].sizeAttr])&&void 0!==l?l:"0px",10);t.preventDefault(),t.stopPropagation();var b=("y"===s.draggedAxis?t.pageY:t.pageX)-(null!==(u=null===(c=m.rect)||void 0===c?void 0:c[s.axis[s.draggedAxis].offsetAttr])&&void 0!==u?u:0)-s.axis[s.draggedAxis].dragOffset,E=(b="x"===s.draggedAxis&&s.isRtl?(null!==(h=null===(d=m.rect)||void 0===d?void 0:d[s.axis[s.draggedAxis].sizeAttr])&&void 0!==h?h:0)-f.size-b:b)/(v-f.size)*(g-y);"x"===s.draggedAxis&&s.isRtl&&(E=(null===(p=e.getRtlHelpers())||void 0===p?void 0:p.isScrollingToNegative)?-E:E),s.contentWrapperEl[s.axis[s.draggedAxis].scrollOffsetAttr]=E}},this.onEndDrag=function(e){var t=y(s.el),r=g(s.el);e.preventDefault(),e.stopPropagation(),w(s.el,s.classNames.dragging),t.removeEventListener("mousemove",s.drag,!0),t.removeEventListener("mouseup",s.onEndDrag,!0),s.removePreventClickId=r.setTimeout((function(){t.removeEventListener("click",s.preventClick,!0),t.removeEventListener("dblclick",s.preventClick,!0),s.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=i(i({},e.defaultOptions),r),this.classNames=i(i({},e.defaultOptions.classNames),r.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},"object"!=typeof this.el||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=(0,o.default)(this._onMouseMove,64),this.onWindowResize=(0,n.default)(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=(0,n.default)(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=(0,n.default)(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement("div");t.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var r=t.firstElementChild,o=null==r?void 0:r.firstElementChild;if(!o)return null;document.body.appendChild(r),r.scrollLeft=0;var n=e.getOffset(r),s=e.getOffset(o);r.scrollLeft=-999;var i=e.getOffset(o);return document.body.removeChild(r),e.rtlHelpers={isScrollOriginAtZero:n.left!==s.left,isScrollingToNegative:s.left!==i.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:c()}catch(e){return c()}},e.getOffset=function(e){var t=e.getBoundingClientRect(),r=y(e),o=g(e);return{top:t.top+(o.pageYOffset||r.documentElement.scrollTop),left:t.left+(o.pageXOffset||r.documentElement.scrollLeft)}},e.prototype.init=function(){s&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){var e,t;this.wrapperEl=this.el.querySelector(k(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(k(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(k(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(k(this.classNames.offset)),this.maskEl=this.el.querySelector(k(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,k(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(k(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(k(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(k(this.classNames.track)).concat(k(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(k(this.classNames.track)).concat(k(this.classNames.vertical))),this.axis.x.scrollbar.el=(null===(e=this.axis.x.track.el)||void 0===e?void 0:e.querySelector(k(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=(null===(t=this.axis.y.track.el)||void 0===t?void 0:t.querySelector(k(this.classNames.scrollbar)))||null,this.options.autoHide||(E(this.axis.x.scrollbar.el,this.classNames.visible),E(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var e,t=this,r=g(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),null===(e=this.contentWrapperEl)||void 0===e||e.addEventListener("scroll",this.onScroll),r.addEventListener("resize",this.onWindowResize),this.contentEl){if(window.ResizeObserver){var o=!1,n=r.ResizeObserver||ResizeObserver;this.resizeObserver=new n((function(){o&&r.requestAnimationFrame((function(){t.recalculate()}))})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),r.requestAnimationFrame((function(){o=!0}))}this.mutationObserver=new r.MutationObserver((function(){r.requestAnimationFrame((function(){t.recalculate()}))})),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(this.heightAutoObserverEl&&this.contentEl&&this.contentWrapperEl&&this.wrapperEl&&this.placeholderEl){var e=g(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,r=this.heightAutoObserverEl.offsetHeight<=1,o=this.heightAutoObserverEl.offsetWidth<=1||t>0,n=this.contentWrapperEl.offsetWidth,s=this.elStyles.overflowX,i=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var a=this.contentEl.scrollHeight,l=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=r?"auto":"100%",this.placeholderEl.style.width=o?"".concat(t||l,"px"):"auto",this.placeholderEl.style.height="".concat(a,"px");var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&l>t,this.axis.y.isOverflowing=a>c,this.axis.x.isOverflowing="hidden"!==s&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==i&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var u=this.axis.x.isOverflowing?this.scrollbarWidth:0,d=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&l>n-d,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&a>c-u,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},e.prototype.getScrollbarSize=function(e){var t,r;if(void 0===e&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var o,n=this.contentEl[this.axis[e].scrollSizeAttr],s=null!==(r=null===(t=this.axis[e].track.el)||void 0===t?void 0:t[this.axis[e].offsetSizeAttr])&&void 0!==r?r:0,i=s/n;return o=Math.max(~~(i*s),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(o=Math.min(o,this.options.scrollbarMaxSize)),o},e.prototype.positionScrollbar=function(t){var r,o,n;void 0===t&&(t="y");var s=this.axis[t].scrollbar;if(this.axis[t].isOverflowing&&this.contentWrapperEl&&s.el&&this.elStyles){var i=this.contentWrapperEl[this.axis[t].scrollSizeAttr],a=(null===(r=this.axis[t].track.el)||void 0===r?void 0:r[this.axis[t].offsetSizeAttr])||0,l=parseInt(this.elStyles[this.axis[t].sizeAttr],10),c=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];c="x"===t&&this.isRtl&&(null===(o=e.getRtlHelpers())||void 0===o?void 0:o.isScrollOriginAtZero)?-c:c,"x"===t&&this.isRtl&&(c=(null===(n=e.getRtlHelpers())||void 0===n?void 0:n.isScrollingToNegative)?c:-c);var u=c/(i-l),d=~~((a-s.size)*u);d="x"===t&&this.isRtl?-d+(a-s.size):d,s.el.style.transform="x"===t?"translate3d(".concat(d,"px, 0, 0)"):"translate3d(0, ".concat(d,"px, 0)")}},e.prototype.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=this.axis[e].track.el,r=this.axis[e].scrollbar.el;t&&r&&this.contentWrapperEl&&(this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?r.style.display="block":r.style.display="none")},e.prototype.showScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(E(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(w(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},e.prototype.onMouseMoveForAxis=function(e){void 0===e&&(e="y");var t=this.axis[e];t.track.el&&t.scrollbar.el&&(t.track.rect=t.track.el.getBoundingClientRect(),t.scrollbar.rect=t.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(t.track.rect)?(this.showScrollbar(e),E(t.track.el,this.classNames.hover),this.isWithinBounds(t.scrollbar.rect)?E(t.scrollbar.el,this.classNames.hover):w(t.scrollbar.el,this.classNames.hover)):(w(t.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},e.prototype.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),w(this.axis[e].track.el,this.classNames.hover),w(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},e.prototype.onDragStart=function(e,t){var r;void 0===t&&(t="y");var o=y(this.el),n=g(this.el),s=this.axis[t].scrollbar,i="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=i-((null===(r=s.rect)||void 0===r?void 0:r[this.axis[t].offsetAttr])||0),this.draggedAxis=t,E(this.el,this.classNames.dragging),o.addEventListener("mousemove",this.drag,!0),o.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(o.addEventListener("click",this.preventClick,!0),o.addEventListener("dblclick",this.preventClick,!0)):(n.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(e,t){var r,o,n,s,i=this;void 0===t&&(t="y");var a=this.axis[t];if(this.options.clickOnTrack&&a.scrollbar.el&&this.contentWrapperEl){e.preventDefault();var l=g(this.el);this.axis[t].scrollbar.rect=a.scrollbar.el.getBoundingClientRect();var c=null!==(o=null===(r=this.axis[t].scrollbar.rect)||void 0===r?void 0:r[this.axis[t].offsetAttr])&&void 0!==o?o:0,u=parseInt(null!==(s=null===(n=this.elStyles)||void 0===n?void 0:n[this.axis[t].sizeAttr])&&void 0!==s?s:"0px",10),d=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],h=("y"===t?this.mouseY-c:this.mouseX-c)<0?-1:1,p=-1===h?d-u:d+u,m=function(){i.contentWrapperEl&&(-1===h?d>p&&(d-=40,i.contentWrapperEl[i.axis[t].scrollOffsetAttr]=d,l.requestAnimationFrame(m)):d<p&&(d+=40,i.contentWrapperEl[i.axis[t].scrollOffsetAttr]=d,l.requestAnimationFrame(m)))};m()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=g(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.prototype.findChild=function(e,t){var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,(function(e){return r.call(e,t)}))[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=b,e.helpers=f,e}()},24087:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var o=r(667294),n=r(269329),s=function(){return s=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};var i=o.forwardRef((function(e,t){var r=e.children,i=e.scrollableNodeProps,a=void 0===i?{}:i,l=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["children","scrollableNodeProps"]),c=o.useRef(),u=o.useRef(),d=o.useRef(),h={},p={};Object.keys(l).forEach((function(e){Object.prototype.hasOwnProperty.call(n.default.defaultOptions,e)?h[e]=l[e]:p[e]=l[e]}));var m=s(s({},n.default.defaultOptions.classNames),h.classNames),v=s(s({},a),{className:"".concat(m.contentWrapper).concat(a.className?" ".concat(a.className):""),tabIndex:0,role:"region","aria-label":h.ariaLabel||n.default.defaultOptions.ariaLabel});return o.useEffect((function(){var e;return u.current=v.ref?v.ref.current:u.current,c.current&&(e=new n.default(c.current,s(s(s({},h),u.current&&{scrollableNode:u.current}),d.current&&{contentNode:d.current})),"function"==typeof t?t(e):t&&(t.current=e)),function(){null==e||e.unMount(),e=null,"function"==typeof t&&t(null)}}),[]),o.createElement("div",s({"data-simplebar":"init",ref:c},p),o.createElement("div",{className:m.wrapper},o.createElement("div",{className:m.heightAutoObserverWrapperEl},o.createElement("div",{className:m.heightAutoObserverEl})),o.createElement("div",{className:m.mask},o.createElement("div",{className:m.offset},"function"==typeof r?r({scrollableNodeRef:u,scrollableNodeProps:s(s({},v),{ref:u}),contentNodeRef:d,contentNodeProps:{className:m.contentEl,ref:d}}):o.createElement("div",s({},v),o.createElement("div",{className:m.contentEl},r)))),o.createElement("div",{className:m.placeholder})),o.createElement("div",{className:"".concat(m.track," simplebar-horizontal")},o.createElement("div",{className:m.scrollbar})),o.createElement("div",{className:"".concat(m.track," simplebar-vertical")},o.createElement("div",{className:m.scrollbar})))}));i.displayName="SimpleBar"}}]);try{stManager.done("dist/ddeda4e7b7efaf6cead78c93ee724ebf.e2a0c33ee5f523e34c42.js")}catch(e){}