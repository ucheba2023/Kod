(()=>{"use strict";var e,t,n,r={59985:(e,t,n)=>{n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>r,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>c,REACTION_ID_DEFAULT:()=>i,REACTION_ID_MAX:()=>s,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>u,REACTION_SET_ITEMS_MIN_COUNT:()=>l,SHOW_TOOLTIP_TIMEOUT:()=>o});const r=600,o=140,i=0,s=7,a=0,u=void 0,l=2,c=i},192441:(e,t,n)=>{n.d(t,{reactionCountsBrandUnwrap:()=>o,reactionCountsBrandWrap:()=>i});var r=n(640971);const o=e=>(0,r.unwrap)(e),i=e=>(0,r.wrap)(e)},822715:(e,t,n)=>{n.d(t,{areCountersEqual:()=>T,calcCounters:()=>S,calcCountersSum:()=>y,calcCountersWeightedSum:()=>E,counterForReactionId:()=>R,getDefaultReaction:()=>l,getDefaultReactionTitle:()=>c,getReaction:()=>u,hasReactionsForCounts:()=>O,isReactionIdSet:()=>p,isReactionIdUnset:()=>v,isUnknownObject:()=>a,isValidReactionId:()=>g,parseReactionId:()=>b,parseReactionIdOrUnset:()=>f,parseReactionMenuConfig:()=>I,prepareReactionMenuSet:()=>_,validateReactionSetPayloaditems:()=>m});var r=n(59985),o=n(192441),i=n(659397);const s=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),a=e=>null!==e&&"object"==typeof e,u=(e,t)=>e.itemsById[t],l=e=>u(e,r.REACTION_ID_DEFAULT),c=e=>{var t;return null==(t=l(e))?void 0:t.title},d=(e,t)=>0===e.length?"":((e,t,n=!0)=>e.reduce(((e,r)=>{const o=t(r),i=t(e);return i===o?n?e:r:i<o?e:r})))(e,(e=>Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)),!1).url,_=(e,t,n)=>{const r=t.map((({asset:e,color_sets:t,id:r,score:o,title:i})=>{var s,a;return{animationURL:e.animation_url||void 0,backgroundColor:null==(s=t)?void 0:s.background,id:r,imageMenuURL:d(e.images,n.imageMenuSize),imagePreviewURL:"imagePreviewSize"in n?d(e.images,n.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in n?d(e.images,n.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in n?d(e.images,n.imageStoryPreviewSize):void 0,score:o,title:i,titleColor:null==(a=t)?void 0:a.foreground}})),o={};return r.forEach((e=>{o[e.id]=e})),{id:e,items:r,itemsById:o}},p=e=>e!==r.REACTION_ID_UNSET,v=e=>e===r.REACTION_ID_UNSET,g=e=>s(e)&&e>=r.REACTION_ID_MIN&&e<=r.REACTION_ID_MAX,b=e=>{const t=parseInt(e,10);return g(t)?{isValid:!0,value:t}:{isValid:!1}},f=e=>{const t=b(e);return t.isValid?t.value:r.REACTION_ID_UNSET},m=(e,t)=>{if(e.length<r.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},I=e=>{if(!a(e))return;const t={},{animationShowStaticAfterEnd:n,menuShowDelay:o,openedDefaultReactionId:i,reportJsErrors:s}=e;return"number"!=typeof o&&void 0!==o||(t.menuShowDelay=o),"boolean"==typeof n&&(t.animationShowStaticAfterEnd=n),"boolean"==typeof s&&(t.reportJsErrors=s),"number"==typeof i||null===i?null===i?t.openedDefaultReactionId=void 0:g(i)&&(t.openedDefaultReactionId=i):t.openedDefaultReactionId=r.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},S=(e,t)=>{const n=(0,o.reactionCountsBrandWrap)({});return Object.entries((0,o.reactionCountsBrandUnwrap)(e)).forEach((([e,r])=>{var o,i,s;const a=e;var u;const l=null!=(u=null==(s=t)||null==(i=s.itemsById)||null==(o=i[a])?void 0:o.score)?u:1;n[a]=l*(r||0)})),n},y=e=>Object.values((0,o.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),E=e=>y((0,o.reactionCountsBrandWrap)(e)),O=e=>y(e)>0;var w;const R=(e,t)=>null!=(w=e[t])?w:void 0,T=(e,t)=>e&&t?(0,i.isEqual)(e,t):e===t},640971:(e,t,n)=>{n.d(t,{unwrap:()=>r,wrap:()=>o});const r=e=>e,o=e=>e},126299:(e,t,n)=>{n.d(t,{PostSubscribeSuggest:()=>f});var r=n(11010),o=n(785893),i=n(667294),s=n(659397),a=n(869048),u=n(86894),l=n(832550),c=n(29271),d=n(851793),_=n(896509),p=n(170864),v=n(693982),g=n(822715),b=n(505426);const f=({groupId:e,avatarUrl:t,objectId:n,isLast:f,ajaxService:m})=>{const[I,S]=(0,i.useState)(!1),[y,E]=(0,i.useState)(!1),[O,w]=(0,i.useState)(!1),R=(0,i.useRef)(null);(0,i.useEffect)((()=>{f&&(()=>{const e=(0,p.getPostElem)(n);e&&(R.current=e.querySelector(".PostActivityBar"))})()}),[]),(0,i.useEffect)((()=>{R.current&&R.current.classList.toggle("PostActivityBar--isLast")}),[I]);const T=(0,r._)((function*(){w(!0);try{yield m.groupsJoin({group_id:e}),(0,b.emitEvent)(b.WallDataEvents.post_subscribe_update,{groupId:e,isSubscribed:!0})}catch(e){console.log(e)}finally{w(!1)}})),h=(0,r._)((function*(){w(!0);try{yield m.groupsLeave({group_id:e}),(0,b.emitEvent)(b.WallDataEvents.post_subscribe_update,{groupId:e,isSubscribed:!1})}catch(e){console.log(e)}finally{w(!1)}}));return(0,d.useReactionsGlobalUpdateEventsForObject)((0,v.likePostObjectId)(n),(({reactionIdState:e,suggestSubscribe:t})=>{(0,g.isReactionIdSet)(e.reactionId)&&t&&S(!0)})),(0,_.useSubscribeGlobalUpdateEventsForObject)(e,(({isSubscribed:e})=>{E(e)})),I?(0,o.jsx)(a.AppRootProvider,{children:(0,o.jsxs)("div",{className:(0,s.classNames)("PostSubscribeSuggest",{PostSubscribeSuggest__isLast:f}),children:[(0,o.jsx)(u.Avatar,{size:24,src:t}),(0,o.jsx)("span",{className:"PostSubscribeSuggest__message",children:c.getLang("groups_post_subscribe_suggest_message")}),(0,o.jsx)(l.Button,{onClick:y?h:T,size:"s",appearance:"accent",mode:y?"secondary":"primary",className:"PostSubscribeSuggest__button",loading:O,children:y?c.getLang("groups_post_subscribe_suggest_btn_unsubscribe"):c.getLang("groups_post_subscribe_suggest_btn_subscribe")})]})}):null}},467253:(e,t,n)=>{n.d(t,{AjaxServiceInstance:()=>o});var r=n(256837);const o={groupsJoin:r.Groups.join,groupsLeave:r.Groups.leave}},256837:(e,t,n)=>{n.d(t,{Groups:()=>a});var r=n(11010),o=n(434788),i=n(393356),s=n(599809);const a={join:(0,r._)((function*(e){return(0,s.api)("groups.join",(0,o._)({},e),{version:i.API_VERSION})})),leave:(0,r._)((function*(e){return(0,s.api)("groups.leave",(0,o._)({},e),{version:i.API_VERSION})})),toggle:(0,r._)((function*({apiParams:e,isMember:t}){return t?a.leave(e):a.join(e)})),getById:(0,r._)((function*({group_ids:e,fields:t}){var n,r;if(!e)return null;var o;return null!=(o=null==(r=yield(0,s.api)("groups.getById",{group_ids:e,fields:t},{version:i.API_VERSION}).catch((e=>console.error(e))))||null==(n=r.groups)?void 0:n[0])?o:null})),edit:(0,r._)((function*(e){return(0,s.api)("groups.edit",(0,o._)({},e),{version:i.API_VERSION})})),getMembers:(0,r._)((function*(e){return(0,s.api)("groups.getMembers",(0,o._)({},e),{version:i.API_VERSION})}))}},811973:(e,t,n)=>{var r,o,i,s=n(434788),a=n(785893),u=n(973935),l=n(126299),c=n(467253),d=n(283452),_=n(321850);(null==(o=window.vk)||null==(r=o.pe)?void 0:r.static_manager_dynamic_imports)&&(null==(i=window.vk)?void 0:i.stDomain)&&(n.p=window.vk.stDomain+"/dist/");const p={init(e,t){u.render((0,a.jsx)(l.PostSubscribeSuggest,(0,s._)({},t,{ajaxService:c.AjaxServiceInstance})),e),e&&(0,_.pushNavDestroy)((()=>u.unmountComponentAtNode(e)))}};try{window.stManager.done(window.jsc("web/ecomm_feed_post_subscribe_suggest.js")),(0,d.tq)().setStartupHandler("EcommFeedPostSubscribeSuggest/init",(({payload:e})=>{const{target:t,data:n}=e;p.init(t,n)}))}catch(e){}},693982:(e,t,n)=>{function r(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,n,r]=t;return{objectType:n,objectId:r}}n.d(t,{getElementLikeButtonCount:()=>a,getElementLikeButtonIcon:()=>l,getElementLikeButtonLabel:()=>d,likePostObjectId:()=>o,likeReplyObjectId:()=>i,parseLikeObjectId:()=>r});const o=e=>`wall${e}`,i=e=>`wall_reply${e}`;var s;const a=e=>{var t;return null!=(s=null==(t=e)?void 0:t.querySelector(".like_button_count, ._like_button_count"))?s:void 0};var u;const l=e=>{var t;return null!=(u=null==(t=e)?void 0:t.querySelector(".like_button_icon, ._like_button_icon"))?u:void 0};var c;const d=e=>null!=(c=e.querySelector(".like_button_label, ._like_button_label"))?c:void 0},282795:(e,t,n)=>{n.d(t,{ReactionMenuTitleVariants:()=>i,TITLE_VARIANT_DEFAULT:()=>o,TitleVariantWithLikedUsers:()=>r});const r="WithLikedUsers",o=r,i=[r,"TitleOnly"]},851793:(e,t,n)=>{n.d(t,{useReactionsGlobalStateForObject:()=>u,useReactionsGlobalUpdateEventsForObject:()=>l});var r=n(667294),o=n(822715),i=n(505426),s=n(693982),a=n(249823);function u(e,{payloadIsSuitable:t}={}){const[n,i]=(0,r.useState)(void 0),s=(0,a.usePreviousRef)(n);return l(e,(0,r.useCallback)((function(e){var n;t&&!t(e)||e.counts&&!(0,o.areCountersEqual)(e.counts,null!=(n=s.current)?n:void 0)&&i(e.counts)}),[e])),{counts:n}}function l(e,t){!function({onAnyPostCountsAnyUpdate:e}){(0,r.useEffect)((()=>(0,i.registerNonGlobalNonUniqueListener)(i.WallDataEvents.post_reactions_counts_update,e)),[e])}({onAnyPostCountsAnyUpdate:(0,r.useCallback)((function(n){(0,s.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},225960:(e,t,n)=>{n.d(t,{ButtonStyleVariant:()=>r});const r={Post:"post",Reply:"reply"}},249823:(e,t,n)=>{n.d(t,{isValidButtonStyleVariant:()=>_,isValidButtonTitleVariant:()=>d,isValidEnvironment:()=>s,preloadImage:()=>a,usePrevious:()=>u,usePreviousRef:()=>l});var r=n(667294),o=n(282795),i=n(225960);const s=()=>{var e,t,n;return"function"==typeof(null==(e=window.cur)?void 0:e.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null==(n=window.Widgets)||null==(t=n.oauth)||t.call(n),!1)},a=e=>new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t(),r.onerror=()=>n()})),u=e=>{const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e})),t.current},l=e=>{const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e})),t},c=Object.values(i.ButtonStyleVariant),d=e=>o.ReactionMenuTitleVariants.includes(e),_=e=>c.includes(e)},505426:(e,t,n)=>{n.d(t,{WallDataEvents:()=>s,emitEvent:()=>d,registerNonGlobalNonUniqueListener:()=>c,registerUniqueListener:()=>l});var r=n(434788),o=n(980602),i=n(367431);const s={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},a=(0,i.makeSharedState)("wall-data",(()=>({emitter:new o.default,keyedListeners:Object.create(null)})),{version:0}),u=(e,t,n)=>{var o,i;const s=a(),u=null==(i=s.keyedListeners)||null==(o=i[e])?void 0:o[t];return u&&s.emitter.removeListener(e,u),((e,t,n)=>{const o=a();return o.emitter.addListener(e,n),o.keyedListeners[e]=(0,r._)({},o.keyedListeners[e],{[t]:n}),()=>{var r,i;o.emitter.removeListener(e,n),(null==(r=o.keyedListeners[e])?void 0:r[t])===n&&(null==(i=o.keyedListeners[e])||delete i[t])}})(e,t,n)},l=(e,t,n)=>u(t,e,n),c=(e,t)=>((e,t)=>{const n=a();return n.emitter.addListener(e,t),()=>{n.emitter.removeListener(e,t)}})(e,t),d=(e,t)=>{a().emitter.emit(e,t)}},896509:(e,t,n)=>{n.d(t,{useSubscribeGlobalUpdateEventsForObject:()=>i});var r=n(667294),o=n(505426);const i=(e,t)=>{const n=(0,r.useCallback)((function(n){n.groupId===e&&t(n)}),[e]);(0,r.useEffect)((()=>(0,o.registerNonGlobalNonUniqueListener)(o.WallDataEvents.post_subscribe_update,n)),[n])}},170864:(e,t,n)=>{n.d(t,{getPostElem:()=>i,replyUserImageImg:()=>l,replyUserImageLinkClosest:()=>a});var r,o;const i=(e,t)=>{var n;return null!=(o=null!=(r=(e=>{var t;if("string"==typeof e)return null!=(t=document.querySelector(`#post${e}`))?t:void 0})(e))?r:null==(n=t)?void 0:n.closest("._post, .wl_post"))?o:void 0};var s;const a=e=>null!=(s=e.closest(".reply_image, ._reply_image"))?s:void 0;var u;const l=e=>null!=(u=e.querySelector("img.reply_img"))?u:void 0}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.m=r,e=[],i.O=(t,n,r,o)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,r,o]=e[c],a=!0,u=0;u<n.length;u++)(!1&o||s>=o)&&Object.keys(i.O).every((e=>i.O[e](n[u])))?n.splice(u--,1):(a=!1,o<s&&(s=o));if(a){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);i.r(o);var s={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,i.d(o,s),o},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.e=()=>Promise.resolve(),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/dist/",(()=>{var e={67147:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[s,a,u]=n,l=0;if(s.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(u)var c=u(i)}for(t&&t(n);l<s.length;l++)o=s[l],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[75514,98066,56990,68592],(()=>i(811973)));s=i.O(s)})();