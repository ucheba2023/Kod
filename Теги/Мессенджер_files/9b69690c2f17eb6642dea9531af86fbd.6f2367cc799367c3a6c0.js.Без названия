/*! For license information please see 9b69690c2f17eb6642dea9531af86fbd.6f2367cc799367c3a6c0.js.LICENSE.txt */
"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[25901],{279513:(e,t,r)=>{r.d(t,{Icon12Add:()=>o});var o=(0,r(28178).makeIcon)("Icon12Add","add_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 12 12" id="add_12"><path d="M6.75 1.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" /></symbol>',12,12,!1,void 0)},62128:(e,t,r)=>{r.d(t,{Icon16Repost:()=>o});var o=(0,r(28178).makeIcon)("Icon16Repost","repost_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="repost_16"><path fill="currentColor" d="m8.583 1.914.061-.087a.6.6 0 0 1 .758-.128l.088.063 3.272 2.805.04.043a.6.6 0 0 1 .01.768l-.075.078L9.49 8.238a.6.6 0 0 1-.982-.358L8.5 7.783V5.999L5 6a1 1 0 0 0-.993.883L4 7v4a1 1 0 0 0 .883.993L5 12h4a1 1 0 0 1 .117 1.993L9 14H5a3 3 0 0 1-2.995-2.824L2 11V7a3 3 0 0 1 2.824-2.995L5 4h3.5V2.216a.6.6 0 0 1 .083-.303l.061-.087z" /></symbol>',16,16,!1,void 0)},979075:(e,t,r)=>{r.d(t,{Icon20AddCircleOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20AddCircleOutline","add_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="add_circle_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17Zm7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-7 4a.75.75 0 0 1-.75-.75v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5A.75.75 0 0 1 10 14Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},689291:(e,t,r)=>{r.d(t,{Icon20FlipHorizontal:()=>o});var o=(0,r(28178).makeIcon)("Icon20FlipHorizontal","flip_horizontal_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="flip_horizontal_20"><path fill-rule="evenodd" d="M8.465 7.531A.75.75 0 0 1 9 8.25v8a.75.75 0 0 1-.75.75H3a.75.75 0 0 1-.627-1.162l5.25-8a.75.75 0 0 1 .842-.307ZM4.389 15.5H7.5v-4.74L4.39 15.5ZM6.53 1.47a.75.75 0 0 1 0 1.06l-.72.72h8.38l-.72-.72a.75.75 0 0 1 1.06-1.06l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 1 1-1.06-1.06l.72-.72H5.81l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0Zm5.005 6.061a.75.75 0 0 1 .842.308l5.25 8A.75.75 0 0 1 17 17h-5.25a.75.75 0 0 1-.75-.75v-8a.75.75 0 0 1 .535-.719Zm.965 3.229v4.74h3.11l-3.11-4.74Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},228729:(e,t,r)=>{r.d(t,{Icon20FlipVertical:()=>o});var o=(0,r(28178).makeIcon)("Icon20FlipVertical","flip_vertical_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="flip_vertical_20"><path fill-rule="evenodd" d="M3.394 2.34a.75.75 0 0 1 .767.033l8 5.25A.75.75 0 0 1 11.75 9h-8A.75.75 0 0 1 3 8.25V3a.75.75 0 0 1 .394-.66ZM4.5 4.39V7.5h4.74L4.5 4.39ZM3 11.75a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 .412 1.377l-8 5.25A.75.75 0 0 1 3 17v-5.25Zm1.5.75v3.11l4.74-3.11H4.5Zm10.97-9.03a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1-1.06 1.06l-.72-.72v8.38l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 1 1 1.06-1.06l.72.72V5.81l-.72.72a.75.75 0 1 1-1.06-1.06l2-2Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},189625:(e,t,r)=>{r.d(t,{Icon20FullscreenOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20FullscreenOutline","fullscreen_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="fullscreen_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M11.75 3.75A.75.75 0 0 1 12.5 3h3.75a.75.75 0 0 1 .75.75V7.5a.75.75 0 0 1-1.5 0V5.56l-3.224 3.224a.75.75 0 0 1-1.06-1.061L14.439 4.5H12.5a.75.75 0 0 1-.75-.75Zm-2.967 7.466a.75.75 0 0 1 0 1.06L5.561 15.5H7.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75V12.5a.75.75 0 0 1 1.5 0v1.94l3.223-3.224a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},892097:(e,t,r)=>{r.d(t,{Icon20RemoveCircleOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20RemoveCircleOutline","remove_circle_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="remove_circle_outline_20"><path d="M6.75 9.25a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5ZM10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17Zm7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},866428:(e,t,r)=>{r.d(t,{Icon20RotateLeft:()=>o});var o=(0,r(28178).makeIcon)("Icon20RotateLeft","rotate_left_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="rotate_left_20"><path fill-rule="evenodd" d="M9.2 9.5H6.8c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 0 0-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 0 0 .656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 0 0 .655-.656c.038-.074.095-.225.128-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.128-.633a1.5 1.5 0 0 0-.655-.656c-.074-.037-.225-.094-.633-.127C10.623 9.5 10.065 9.5 9.2 9.5Zm-6.873.138C2 10.28 2 11.12 2 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311C4.28 18 5.12 18 6.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311C14 15.72 14 14.88 14 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C11.72 8 10.88 8 9.2 8H6.8c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311ZM13.53 1.97a.75.75 0 0 1 0 1.06l-.72.72H13a4.75 4.75 0 0 1 4.75 4.75V11a.75.75 0 0 1-1.5 0V8.5A3.25 3.25 0 0 0 13 5.25h-.19l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},553750:(e,t,r)=>{r.d(t,{Icon20RotateRight:()=>o});var o=(0,r(28178).makeIcon)("Icon20RotateRight","rotate_right_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="rotate_right_20"><path fill-rule="evenodd" d="M13.2 9.5h-2.4c-.865 0-1.423.001-1.848.036-.408.033-.559.09-.633.127a1.5 1.5 0 0 0-.656.656c-.037.074-.094.225-.127.633-.035.425-.036.983-.036 1.848v.4c0 .865.001 1.423.036 1.848.033.408.09.559.127.633a1.5 1.5 0 0 0 .656.656c.074.037.225.094.633.127.425.035.983.036 1.848.036h2.4c.865 0 1.423-.001 1.848-.036.408-.033.559-.09.633-.127a1.5 1.5 0 0 0 .656-.656c.037-.074.094-.225.127-.633.035-.425.036-.983.036-1.848v-.4c0-.865-.001-1.423-.036-1.848-.033-.408-.09-.559-.127-.633a1.5 1.5 0 0 0-.656-.656c-.074-.037-.225-.094-.633-.127-.425-.035-.983-.036-1.848-.036Zm-6.873.138C6 10.28 6 11.12 6 12.8v.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311C8.28 18 9.12 18 10.8 18h2.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311C18 15.72 18 14.88 18 13.2v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C15.72 8 14.88 8 13.2 8h-2.4c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311ZM6.47 1.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H7A3.25 3.25 0 0 0 3.75 8.5V11a.75.75 0 0 1-1.5 0V8.5A4.75 4.75 0 0 1 7 3.75h.19l-.72-.72a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},77199:(e,t,r)=>{r.d(t,{Icon20Stars:()=>o});var o=(0,r(28178).makeIcon)("Icon20Stars","stars_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="stars_20"><path fill-rule="evenodd" d="M12.004 8.13c-.368.835-.857 1.717-1.507 2.367-.65.65-1.532 1.14-2.367 1.507.835.367 1.717.857 2.367 1.507.65.65 1.14 1.532 1.507 2.367.367-.835.857-1.717 1.507-2.367.65-.65 1.532-1.14 2.367-1.507-.835-.368-1.717-.857-2.367-1.507-.65-.65-1.14-1.532-1.507-2.367Zm-.785-2.178c-.421 1.317-1.014 2.716-1.782 3.485-.769.768-2.168 1.36-3.485 1.782a21.073 21.073 0 0 1-1.162.338c-.38.1-.38.793 0 .894a27.146 27.146 0 0 1 .912.26c.083.025.166.05.25.078 1.317.421 2.716 1.014 3.485 1.782.768.768 1.36 2.168 1.782 3.485a20.843 20.843 0 0 1 .27.907l.068.255c.1.38.793.38.894 0a27.487 27.487 0 0 1 .26-.912c.025-.083.05-.166.078-.25.421-1.317 1.014-2.717 1.782-3.485.768-.768 2.168-1.36 3.485-1.782a20.843 20.843 0 0 1 .907-.27l.255-.068c.38-.1.38-.793 0-.894a27.487 27.487 0 0 1-.912-.26 20.843 20.843 0 0 1-.25-.078c-1.317-.421-2.717-1.014-3.485-1.782-.768-.769-1.36-2.168-1.782-3.485a21.13 21.13 0 0 1-.338-1.162c-.1-.38-.793-.38-.894 0a27.146 27.146 0 0 1-.26.912 21.13 21.13 0 0 1-.078.25ZM4.365.763a.385.385 0 0 0-.73 0l-.414 1.24a1.926 1.926 0 0 1-1.218 1.218l-1.24.414a.385.385 0 0 0 0 .73l1.24.414a1.926 1.926 0 0 1 1.218 1.218l.414 1.24a.385.385 0 0 0 .73 0l.414-1.24a1.926 1.926 0 0 1 1.218-1.218l1.24-.414a.385.385 0 0 0 0-.73l-1.24-.414a1.926 1.926 0 0 1-1.218-1.218L4.365.763Z" /></symbol>',20,20,!1,void 0)},625812:(e,t,r)=>{r.d(t,{Icon20WaterDropOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon20WaterDropOutline","water_drop_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="water_drop_outline_20"><path fill-rule="evenodd" d="M5.4 8.683c-.419.85-.65 1.647-.65 2.317a5.25 5.25 0 1 0 10.5 0c0-.67-.231-1.467-.65-2.317-.414-.842-.988-1.69-1.615-2.447-.628-.759-1.292-1.408-1.874-1.86a4.888 4.888 0 0 0-.76-.499 1.644 1.644 0 0 0-.255-.106A.419.419 0 0 0 10 3.75a.42.42 0 0 0-.096.02c-.065.02-.15.054-.254.107a4.854 4.854 0 0 0-.76.5c-.583.451-1.247 1.1-1.875 1.859-.627.757-1.201 1.605-1.615 2.447Zm3.573-6.145c.308-.155.667-.288 1.027-.288.36 0 .72.133 1.027.288.322.163.662.389 1.003.654.684.53 1.425 1.26 2.11 2.087.686.828 1.33 1.774 1.806 2.742.473.96.804 1.992.804 2.979a6.75 6.75 0 0 1-13.5 0c0-.987.331-2.018.804-2.979.476-.969 1.12-1.914 1.806-2.742.685-.827 1.426-1.557 2.11-2.087a6.44 6.44 0 0 1 1.003-.654Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},95471:(e,t,r)=>{r.d(t,{Icon24AddCircleDottedOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24AddCircleDottedOutline","add_circle_dotted_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="add_circle_dotted_outline_24"><g fill="currentColor"><path d="M13 13v3a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2z" /><path fill-rule="evenodd" d="M10.069 2.288a9.944 9.944 0 0 1 3.862 0 .9.9 0 1 1-.35 1.766 8.144 8.144 0 0 0-3.163 0 .9.9 0 1 1-.349-1.766zM7.747 4.015A.9.9 0 0 1 7.5 5.264 8.145 8.145 0 0 0 5.264 7.5.9.9 0 0 1 3.768 6.5a9.944 9.944 0 0 1 2.73-2.731.9.9 0 0 1 1.25.247zm8.506 0a.9.9 0 0 1 1.248-.247 9.945 9.945 0 0 1 2.731 2.73.9.9 0 0 1-1.496 1.002A8.143 8.143 0 0 0 16.5 5.264a.9.9 0 0 1-.247-1.249zm4.401 5.346a.9.9 0 0 1 1.058.708 9.942 9.942 0 0 1 0 3.862.9.9 0 1 1-1.766-.35 8.14 8.14 0 0 0 0-3.163.9.9 0 0 1 .708-1.057zm-17.308 0a.9.9 0 0 1 .708 1.057 8.144 8.144 0 0 0 0 3.164.9.9 0 0 1-1.766.349 9.944 9.944 0 0 1 0-3.862.9.9 0 0 1 1.058-.708zm.67 6.892a.9.9 0 0 1 1.248.247A8.14 8.14 0 0 0 7.5 18.736.9.9 0 0 1 6.5 20.232a9.95 9.95 0 0 1-2.731-2.73.9.9 0 0 1 .247-1.25zm15.969 0a.9.9 0 0 1 .247 1.248 9.943 9.943 0 0 1-2.73 2.731.9.9 0 0 1-1.002-1.496 8.146 8.146 0 0 0 2.236-2.236.9.9 0 0 1 1.249-.247zM9.36 20.654a.9.9 0 0 1 1.057-.708 8.14 8.14 0 0 0 3.164 0 .9.9 0 1 1 .349 1.766 9.943 9.943 0 0 1-3.862 0 .9.9 0 0 1-.708-1.058z" clip-rule="evenodd" /></g></symbol>',24,24,!1,void 0)},589612:(e,t,r)=>{r.d(t,{Icon24ArrowUturnLeftOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ArrowUturnLeftOutline","arrow_uturn_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_uturn_left_outline_24"><path fill-rule="evenodd" d="M10.236 3.264a.9.9 0 0 1 0 1.272L7.673 7.1H12a5.9 5.9 0 1 1 0 11.8H7.9a.9.9 0 1 1 0-1.8H12a4.1 4.1 0 0 0 0-8.2H7.673l2.563 2.564a.9.9 0 0 1-1.272 1.272l-4.1-4.1a.9.9 0 0 1 0-1.272l4.1-4.1a.9.9 0 0 1 1.272 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},318455:(e,t,r)=>{r.d(t,{Icon24ArrowUturnRightOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ArrowUturnRightOutline","arrow_uturn_right_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_uturn_right_outline_24"><path fill-rule="evenodd" d="M13.764 3.264a.9.9 0 0 1 1.272 0l4.1 4.1a.9.9 0 0 1 0 1.272l-4.1 4.1a.9.9 0 0 1-1.272-1.272L16.327 8.9H12a4.1 4.1 0 1 0 0 8.2h4.1a.9.9 0 0 1 0 1.8H12a5.9 5.9 0 1 1 0-11.8h4.327l-2.563-2.564a.9.9 0 0 1 0-1.272Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},563952:(e,t,r)=>{r.d(t,{Icon24BrushOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24BrushOutline","brush_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="brush_outline_24"><path d="M20.377 3.467a1.857 1.857 0 0 0-2.558.09l-6.93 6.866a.911.911 0 0 0-.007 1.285.904.904 0 0 0 1.281.008l6.935-6.87c.044-.045.117-.018.07.04l-6.154 7.74a.911.911 0 0 0 .143 1.278.904.904 0 0 0 1.273-.143l6.15-7.735a1.85 1.85 0 0 0-.203-2.56Z" /><path fill-rule="evenodd" d="M8.488 12.624c-2.003 0-3.476 1.63-3.56 3.533-.043.938-.454 1.416-.83 1.732-.382.321-.894.553-1.052 1.065-.13.418.033.863.373 1.128.763.593 2.355 1.343 4.654.622 2.399-.752 3.977-2.509 3.977-4.506a3.568 3.568 0 0 0-3.562-3.574Zm-1.75 3.614c.046-1.037.82-1.796 1.75-1.796.967 0 1.75.786 1.75 1.756 0 .947-.789 2.17-2.705 2.77-.866.272-1.549.249-2.057.123.59-.56 1.198-1.442 1.261-2.853Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},800142:(e,t,r)=>{r.d(t,{Icon24Crop:()=>o});var o=(0,r(28178).makeIcon)("Icon24Crop","crop_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="crop_24"><g fill="currentColor"><path d="M6 1.006a.9.9 0 0 1 .9.9V14.8c0 .575 0 .952.024 1.24.023.278.062.394.096.46a1.1 1.1 0 0 0 .48.48c.067.034.182.073.46.096.288.023.665.024 1.24.024h12.898a.9.9 0 0 1 0 1.8H18.9v3.198a.9.9 0 1 1-1.8 0V18.9H9.165c-.53 0-.981 0-1.352-.03-.389-.032-.768-.102-1.13-.286a2.9 2.9 0 0 1-1.267-1.267c-.184-.362-.254-.741-.286-1.13-.03-.37-.03-.822-.03-1.352V6.9H1.903a.9.9 0 0 1 0-1.8H5.1V1.906a.9.9 0 0 1 .9-.9z" /><path d="M16.04 6.924c-.288-.023-.665-.024-1.24-.024H9.907a.9.9 0 1 1 0-1.8h4.928c.53 0 .981 0 1.352.03.39.032.768.102 1.13.286a2.9 2.9 0 0 1 1.267 1.267c.184.362.254.74.286 1.13.03.37.03.822.03 1.352V14.1a.9.9 0 1 1-1.8 0V9.2c0-.575 0-.952-.024-1.24-.023-.278-.062-.394-.096-.46a1.1 1.1 0 0 0-.48-.48c-.067-.034-.182-.073-.46-.096z" /></g></symbol>',24,24,!1,void 0)},521829:(e,t,r)=>{r.d(t,{Icon24Done:()=>o});var o=(0,r(28178).makeIcon)("Icon24Done","done_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="done_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" d="m9 16.2-3.5-3.5a.99.99 0 1 0-1.4 1.4l4.193 4.193a1 1 0 0 0 1.414 0L20.3 7.7a.99.99 0 0 0-1.4-1.4L9 16.2Z" /></g></symbol>',24,24,!1,void 0)},479049:(e,t,r)=>{r.d(t,{Icon24Filter:()=>o});var o=(0,r(28178).makeIcon)("Icon24Filter","filter_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="filter_24"><path fill-rule="evenodd" d="M6.242 8.9a2.901 2.901 0 0 0 5.516 0H20a.9.9 0 1 0 0-1.8h-8.242a2.901 2.901 0 0 0-5.515 0H4a.9.9 0 1 0 0 1.8h2.242ZM9 6.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2ZM3.1 16a.9.9 0 0 1 .9-.9h8.242a2.901 2.901 0 0 1 5.516 0H20a.9.9 0 1 1 0 1.8h-2.242a2.901 2.901 0 0 1-5.516 0H4a.9.9 0 0 1-.9-.9Zm10.8 0a1.1 1.1 0 1 1 2.2 0 1.1 1.1 0 0 1-2.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},25184:(e,t,r)=>{r.d(t,{Icon24Fullscreen:()=>o});var o=(0,r(28178).makeIcon)("Icon24Fullscreen","fullscreen_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="fullscreen_24"><path fill-rule="evenodd" d="M14 4.9a.9.9 0 0 1 .9-.9h4.2a.9.9 0 0 1 .9.9v4.2a.9.9 0 1 1-1.8 0V7.073l-3.664 3.663a.9.9 0 1 1-1.272-1.272L16.927 5.8H14.9a.9.9 0 0 1-.9-.9Zm-3.264 8.364a.9.9 0 0 1 0 1.272L7.073 18.2h2.025a.9.9 0 1 1 0 1.8H4.9a.9.9 0 0 1-.9-.9v-4.2a.9.9 0 0 1 1.8 0v2.027l3.664-3.663a.9.9 0 0 1 1.272 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},322031:(e,t,r)=>{r.d(t,{Icon24FullscreenExit:()=>o});var o=(0,r(28178).makeIcon)("Icon24FullscreenExit","fullscreen_exit_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="fullscreen_exit_24"><path fill-rule="evenodd" d="M5 13.9a.9.9 0 0 1 .9-.9h4.2a.9.9 0 0 1 .9.9v4.2a.9.9 0 1 1-1.8 0v-2.027l-3.664 3.663a.9.9 0 1 1-1.272-1.272L7.927 14.8H5.9a.9.9 0 0 1-.9-.9Zm14.736-9.636a.9.9 0 0 1 0 1.272L16.073 9.2h2.025a.9.9 0 0 1 0 1.8H13.9a.9.9 0 0 1-.9-.9V5.9a.9.9 0 1 1 1.8 0v2.027l3.664-3.663a.9.9 0 0 1 1.272 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},370281:(e,t,r)=>{r.d(t,{Icon24ImageFilterOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24ImageFilterOutline","image_filter_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="image_filter_outline_24"><path d="M8.983 15.8a3.8 3.8 0 0 0 0-7.6A7.166 7.166 0 0 0 7.9 12c0 1.395.396 2.696 1.083 3.8Z" /><path fill-rule="evenodd" d="M8.9 4.6A7.4 7.4 0 1 0 12 18.721a7.4 7.4 0 1 0 0-13.443A7.372 7.372 0 0 0 8.9 4.6ZM3.3 12a5.6 5.6 0 1 1 11.2 0 5.6 5.6 0 0 1-11.2 0Zm10.586-5.468A7.38 7.38 0 0 1 16.3 12a7.38 7.38 0 0 1-2.414 5.468 5.6 5.6 0 1 0 0-10.936Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},50466:(e,t,r)=>{r.d(t,{Icon24RecentOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24RecentOutline","recent_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="recent_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M12 21.428A9.428 9.428 0 0 1 2.571 12 9.428 9.428 0 0 1 12 2.57c5.206 0 9.429 4.221 9.429 9.429 0 5.207-4.223 9.428-9.429 9.428Zm0-1.8a7.63 7.63 0 1 0-.001-15.258A7.63 7.63 0 0 0 12 19.628Zm4.085-6.387a.9.9 0 1 1-.575 1.706l-4.226-1.427a.9.9 0 0 1-.613-.853V8.353a.9.9 0 1 1 1.8 0v3.668l3.614 1.22Z" /></g></symbol>',24,24,!1,void 0)},427323:(e,t,r)=>{r.d(t,{Icon24SmileOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24SmileOutline","smile_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="smile_outline_24"><path d="M8.438 14.297a.9.9 0 0 1 1.259.133c.013.016.196.223.53.432.383.24.97.488 1.773.488a3.3 3.3 0 0 0 1.773-.488c.191-.12.382-.26.53-.432a.9.9 0 0 1 1.4 1.132 4.045 4.045 0 0 1-.976.826A5.094 5.094 0 0 1 12 17.15a5.094 5.094 0 0 1-2.727-.762 3.987 3.987 0 0 1-.976-.826.9.9 0 0 1 .14-1.265Zm1.812-4.047a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM15 11.5A1.25 1.25 0 1 0 15 9a1.25 1.25 0 0 0 0 2.5Zm-3-9.4c-5.468 0-9.9 4.432-9.9 9.9s4.432 9.9 9.9 9.9 9.9-4.432 9.9-9.9-4.432-9.9-9.9-9.9ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},135826:(e,t,r)=>{r.d(t,{Icon24StorefrontOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24StorefrontOutline","storefront_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="storefront_outline_24"><path fill-rule="evenodd" d="M7 14a.9.9 0 0 1 .9.9v4.2h8.2v-4.2a.9.9 0 0 1 1.8 0V20a.9.9 0 0 1-.9.9H7a.9.9 0 0 1-.9-.9v-5.1A.9.9 0 0 1 7 14Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 20a.9.9 0 0 1 .9-.9h16.2a.9.9 0 1 1 0 1.8H3.9A.9.9 0 0 1 3 20Zm13.9-10a1.1 1.1 0 0 0 2.2 0h1.8a2.9 2.9 0 0 1-5.8 0h1.8Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M16 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 1 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M4 9.1a.9.9 0 0 1 .9.9 1.1 1.1 0 0 0 2.2 0 .9.9 0 0 1 1.8 0 2.9 2.9 0 0 1-5.8 0 .9.9 0 0 1 .9-.9Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M8.703 3.1h6.594c.553 0 1.019-.001 1.453.137a2.9 2.9 0 0 1 1.033.585c.342.301.581.7.865 1.175l.056.094 1.612 2.686.027.045c.143.239.264.44.352.66.077.195.133.397.167.604.038.234.038.47.038.747V10h-1.8v-.114c0-.358-.003-.438-.014-.51a1.1 1.1 0 0 0-.064-.228c-.027-.068-.066-.138-.25-.445L17.16 6.017c-.37-.618-.462-.752-.566-.843a1.1 1.1 0 0 0-.392-.222c-.131-.042-.294-.052-1.014-.052H8.812c-.72 0-.883.01-1.014.052a1.1 1.1 0 0 0-.392.222c-.104.091-.196.225-.566.843L5.228 8.703c-.185.307-.223.377-.25.445a1.1 1.1 0 0 0-.064.228c-.011.072-.014.152-.014.51V10H3.1v-.167c0-.278 0-.513.038-.747a2.9 2.9 0 0 1 .167-.603c.088-.22.209-.422.352-.66l.027-.046L5.296 5.09l.056-.094c.284-.474.523-.874.865-1.175a2.9 2.9 0 0 1 1.033-.585c.434-.138.9-.138 1.453-.137Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},821046:(e,t,r)=>{r.d(t,{Icon24TextOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon24TextOutline","text_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="text_outline_24"><path fill-rule="evenodd" d="M3.038 18.111c.566 0 .881-.278 1.104-1.002l.872-2.616h4.583l.872 2.616c.213.715.547 1.002 1.113 1.002.603 0 1.002-.352 1.002-.909 0-.232-.056-.482-.158-.788L8.947 6.57c-.315-.937-.77-1.336-1.614-1.336-.844 0-1.299.409-1.624 1.336L2.23 16.414c-.12.352-.176.593-.176.816 0 .538.4.881.984.881Zm2.477-5.232 1.744-5.353h.102l1.735 5.353H5.515Zm14.25 3.85h.102v.436c.046.585.408.928.974.928.64 0 1.002-.408 1.002-1.113v-5.613c0-2.134-1.383-3.322-3.86-3.322-1.02 0-1.8.177-2.393.501-.826.446-1.216 1.002-1.216 1.568 0 .446.297.752.752.752.353 0 .594-.093.844-.334.566-.575 1.104-.854 1.883-.854 1.253 0 1.93.575 1.93 1.68v.871h-2.449c-2.19.01-3.507 1.114-3.507 2.923 0 1.781 1.29 2.987 3.2 2.987 1.216 0 2.2-.5 2.738-1.41Zm-3.869-1.68c0-.9.63-1.41 1.726-1.41h2.161v1.058c0 1.058-.918 1.874-2.115 1.874-1.058 0-1.772-.612-1.772-1.521Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},308964:(e,t,r)=>{r.d(t,{Icon28CameraOutline:()=>o});var o=(0,r(28178).makeIcon)("Icon28CameraOutline","camera_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="camera_outline_28"><path fill-rule="evenodd" d="M11 14a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-5a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm-1.337-6h-.076c-.469 0-.822 0-1.161.058a4 4 0 0 0-2.223 1.19c-.237.25-.433.543-.693.934l-.042.063-.086.129a3.862 3.862 0 0 1-.18.261 1 1 0 0 1-.673.36A3.86 3.86 0 0 1 7.212 6h-.09c-.574 0-.98 0-1.338.057a4.5 4.5 0 0 0-3.727 3.727C2 10.141 2 10.548 2 11.122v3.922c0 1.363 0 2.447.071 3.322.074.895.227 1.659.583 2.358a6 6 0 0 0 2.622 2.622c.7.356 1.463.51 2.359.583.874.071 1.958.071 3.321.071h6.088c1.363 0 2.447 0 3.322-.071.895-.074 1.659-.227 2.358-.583a6.001 6.001 0 0 0 2.622-2.622c.356-.7.51-1.463.583-2.358.071-.875.071-1.96.071-3.322v-3.922c0-.574 0-.98-.057-1.338a4.5 4.5 0 0 0-3.727-3.727C21.859 6 21.452 6 20.878 6h-.09a3.86 3.86 0 0 1-.317-.005 1 1 0 0 1-.673-.36 3.877 3.877 0 0 1-.18-.261l-.086-.129-.042-.063c-.26-.39-.456-.684-.693-.934a4 4 0 0 0-2.223-1.19C16.235 3 15.882 3 15.413 3h-2.75Zm0 2c-.578 0-.748.003-.897.03a2 2 0 0 0-1.112.594c-.104.11-.201.25-.522.73l-.085.129-.02.03a4.814 4.814 0 0 1-.28.392 3 3 0 0 1-2.018 1.08C7.579 8 7.424 8 7.249 8h-.037c-.7 0-.932.003-1.11.032a2.5 2.5 0 0 0-2.07 2.07c-.029.178-.032.41-.032 1.11V15c0 1.417 0 2.419.065 3.203.063.771.182 1.243.371 1.613a4 4 0 0 0 1.748 1.748c.37.189.842.308 1.613.371C8.581 22 9.583 22 11 22h6c1.417 0 2.419 0 3.203-.065.771-.063 1.243-.182 1.613-.37a4 4 0 0 0 1.748-1.749c.189-.37.308-.841.371-1.613C24 17.419 24 16.417 24 15v-3.788c0-.7-.003-.932-.032-1.11a2.5 2.5 0 0 0-2.07-2.07c-.178-.029-.41-.032-1.11-.032h-.036c-.176 0-.33 0-.481-.015a3 3 0 0 1-2.018-1.08 4.888 4.888 0 0 1-.28-.392l-.02-.03-.085-.128c-.32-.482-.418-.621-.522-.731a2 2 0 0 0-1.112-.595c-.149-.026-.319-.029-.897-.029h-2.674Z" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},108679:(e,t,r)=>{var o=r(659864),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return o.isMemo(e)?i:a[e.$$typeof]||n}a[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[o.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,r,o){if("string"!=typeof r){if(_){var n=p(r);n&&n!==_&&e(t,n,o)}var i=d(r);h&&(i=i.concat(h(r)));for(var a=l(t),g=l(r),m=0;m<i.length;++m){var f=i[m];if(!(s[f]||o&&o[f]||g&&g[f]||a&&a[f])){var v=u(r,f);try{c(t,f,v)}catch(e){}}}}return t}},441143:e=>{e.exports=function(e,t,r,o,n,s,i,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,o,n,s,i,a],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},27473:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ClickableZones-module__root--GSAKQ"}},663301:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ColorPicker-module__root--acT7x",item:"ColorPicker-module__item--UhrPK",itemWhite:"ColorPicker-module__itemWhite--R_9cf"}},223097:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"DropBox-module__root--fMtc3",cap:"DropBox-module__cap--RMq26",hover:"DropBox-module__hover--_o57e"}},997872:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorTabs-module__root--fP6Cw",header:"EditorTabs-module__header--oVeQU",item:"EditorTabs-module__item--wSzxM",disabled:"EditorTabs-module__disabled--BLUNe",current:"EditorTabs-module__current--eUENI",itemDisabled:"EditorTabs-module__itemDisabled--CCSyH",itemCurrent:"EditorTabs-module__itemCurrent--w9XX_",content:"EditorTabs-module__content--iAEOb",tab:"EditorTabs-module__tab--eQl8p",tabCurrent:"EditorTabs-module__tabCurrent--PutYP",tooltip:"EditorTabs-module__tooltip--U8zft",tooltipText:"EditorTabs-module__tooltipText--byS4G"}},516356:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorText-module__root--ftVRm",inner:"EditorText-module__inner--RJh4t",textArea:"EditorText-module__textArea--NSvuj"}},256310:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Layer-module__root--fFYF7",locked:"Layer-module__locked--rZAmS",inner:"Layer-module__inner--TCdrT",innerDisabled:"Layer-module__innerDisabled--BIYSz"}},894750:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"LayerControls-module__root--oiN84",handler:"LayerControls-module__handler--XphVu",handlerNw:"LayerControls-module__handlerNw--MDIxB",handlerNe:"LayerControls-module__handlerNe--m_V4v",handlerSw:"LayerControls-module__handlerSw--aS0Sc",handlerSe:"LayerControls-module__handlerSe--l4EaO"}},976817:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"Layers-module__root--peQ15",background:"Layers-module__background--eswQB",items:"Layers-module__items--tbVfj"}},370518:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SwitchMode-module__root--OkxGq",mode:"SwitchMode-module__mode--xF2VU",icon:"SwitchMode-module__icon--nixtS",active:"SwitchMode-module__active--tJDpV"}},596300:(e,t,r)=>{r.d(t,{default:()=>o});const o={title:"Zoom-module__title--bqebY",wrapper:"Zoom-module__wrapper--XSpHL"}},19410:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"BaseEditor-module__root--_48Id",canvas:"BaseEditor-module__canvas--vj92A",tabs:"BaseEditor-module__tabs--oO1T9",inner:"BaseEditor-module__inner--MUXrM",actions:"BaseEditor-module__actions--nPXhB",preview:"BaseEditor-module__preview--kRK_d",fontPreload:"BaseEditor-module__fontPreload--RX3Gl",inputFile:"BaseEditor-module__inputFile--qYELf",submit:"BaseEditor-module__submit--SbS3X",buttons:"BaseEditor-module__buttons--L_XBM",imageContainer:"BaseEditor-module__imageContainer--L3jgB"}},554984:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ColorCorrectionPanel-module__root--bAFJu",items:"ColorCorrectionPanel-module__items--ruILA",item:"ColorCorrectionPanel-module__item--FdNqa",itemName:"ColorCorrectionPanel-module__itemName--sBmJj",linkBox:"ColorCorrectionPanel-module__linkBox--aj_D4",link:"ColorCorrectionPanel-module__link--LKCdo",icon:"ColorCorrectionPanel-module__icon--Se981",box:"ColorCorrectionPanel-module__box--Xw_2u",select:"ColorCorrectionPanel-module__select--w3wOe",slider:"ColorCorrectionPanel-module__slider--AFhvJ",dvd:"ColorCorrectionPanel-module__dvd--P9Xd8"}},668660:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"CropControls-module__root--lcpaJ",inner:"CropControls-module__inner--ia1J2",grid:"CropControls-module__grid--Y7RUl",line:"CropControls-module__line--eMEkh",lineH:"CropControls-module__lineH--RyAgF",lineV:"CropControls-module__lineV--TvBCu",handle:"CropControls-module__handle--TDNsr",handleCorner:"CropControls-module__handleCorner--F1bAv",handleCornerNw:"CropControls-module__handleCornerNw--mdnlB",handleCornerNe:"CropControls-module__handleCornerNe--igEAl",handleCornerSw:"CropControls-module__handleCornerSw--lcgLK",handleCornerSe:"CropControls-module__handleCornerSe--z8vW4",handleN:"CropControls-module__handleN--Q9mU4",handleS:"CropControls-module__handleS--IeThe",handleW:"CropControls-module__handleW--bl2cs",handleE:"CropControls-module__handleE--h7gPQ",buttons:"CropControls-module__buttons--fUf7a",buttonsTop:"CropControls-module__buttonsTop--RWMSS",buttonsSmall:"CropControls-module__buttonsSmall--I6oOY",buttonSmall:"CropControls-module__buttonSmall--UCjKU",separator:"CropControls-module__separator--UfjBg"}},840436:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"CropPanel-module__root--qtMf2",title:"CropPanel-module__title--McTLt",tabs:"CropPanel-module__tabs--R__kk",tabsItem:"CropPanel-module__tabsItem--rCiby",tabsButton:"CropPanel-module__tabsButton--oT2D3",tabsButtonActive:"CropPanel-module__tabsButtonActive--NHBnS",settings:"CropPanel-module__settings--jopjZ",settingsItem:"CropPanel-module__settingsItem--epz76"}},357841:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"DrawPanel-module__root--EFjUE",sliders:"DrawPanel-module__sliders--PDdlP",slider:"DrawPanel-module__slider--LLVCO",title:"DrawPanel-module__title--kRFoP"}},686933:(e,t,r)=>{r.d(t,{default:()=>o});const o={canvas:"DrawingLayer-module__canvas--U7H8x",draw:"DrawingLayer-module__draw--hM14K",disabled:"DrawingLayer-module__disabled--NIRV3"}},731026:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"EditorCanvas-module__root--TAUyx",scaleButton:"EditorCanvas-module__scaleButton--kzD_2",blurCursor:"EditorCanvas-module__blurCursor--YvQlZ",postIcon:"EditorCanvas-module__postIcon--ZanKI",postIconToolTip:"EditorCanvas-module__postIconToolTip--rhnHe"}},218791:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"FilterItem-module__root--zWowR",active:"FilterItem-module__active--ZIE3w",checked:"FilterItem-module__checked--YEjGA",inner:"FilterItem-module__inner--UiF5w",image:"FilterItem-module__image--vVuoT",name:"FilterItem-module__name--sQ3_I"}},374667:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"FiltersPanel-module__root--r_QWV",header:"FiltersPanel-module__header--kSvjL",inner:"FiltersPanel-module__inner--Bpqtl",slider:"FiltersPanel-module__slider--TZjc5",title:"FiltersPanel-module__title--_3WhY"}},753148:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"ImageLayer-module__root--Jc2Ut"}},940378:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"MoveImage-module__root--vdpkU"}},576678:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SegmentationPane-module__root--zQ6nc",positive:"SegmentationPane-module__positive--mL8kG",negative:"SegmentationPane-module__negative--W_JIf",loading:"SegmentationPane-module__loading--PkWof"}},71814:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SegmentationPanel-module__root--n7iVW",title:"SegmentationPanel-module__title--EjZPo",scale:"SegmentationPanel-module__scale--wcsPR",scaleText:"SegmentationPanel-module__scaleText--zpVVW",selection:"SegmentationPanel-module__selection--J9v2d",colors:"SegmentationPanel-module__colors--bRwdo"}},653927:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StatusPanel-module__root--d7Llj",inner:"StatusPanel-module__inner--DB7re",link:"StatusPanel-module__link--UmNWP",info:"StatusPanel-module__info--YFYei",backgrounds:"StatusPanel-module__backgrounds--U9Qec",background:"StatusPanel-module__background--SA1IK",backgroundActive:"StatusPanel-module__backgroundActive--v__RN",arrow:"StatusPanel-module__arrow--gyvAO",arrowIcon:"StatusPanel-module__arrowIcon--CBJeJ",arrowLeft:"StatusPanel-module__arrowLeft--xeDoN",arrowRight:"StatusPanel-module__arrowRight--yinX7",square:"StatusPanel-module__square--zbkX7"}},119504:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickerPacksPanel-module__root--Cs2xQ",header:"StickerPacksPanel-module__header--rfkna",scroll:"StickerPacksPanel-module__scroll--fTDhF",tab:"StickerPacksPanel-module__tab--myqJ5",tabSelected:"StickerPacksPanel-module__tabSelected--Oo8H7",arrow:"StickerPacksPanel-module__arrow--hB7l6",arrowIcon:"StickerPacksPanel-module__arrowIcon--fM7lm",arrowLeft:"StickerPacksPanel-module__arrowLeft--IaeqU",arrowRight:"StickerPacksPanel-module__arrowRight--DCIgN",arrowRightDark:"StickerPacksPanel-module__arrowRightDark--K4cWy",arrowLeftDark:"StickerPacksPanel-module__arrowLeftDark--SYwWx",content:"StickerPacksPanel-module__content--hNxxV",preview:"StickerPacksPanel-module__preview--IfZAn",previewImage:"StickerPacksPanel-module__previewImage--eHJ1e"}},443940:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"StickersPanel-module__root--kZemz",content:"StickersPanel-module__content--zqKKY",preview:"StickersPanel-module__preview--Cd37C",previewImage:"StickersPanel-module__previewImage--g4tCd"}},560707:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"TextPanel-module__root--uLviH",button:"TextPanel-module__button--mAGGg",fonts:"TextPanel-module__fonts--VI1Qb",fontSize:"TextPanel-module__fontSize--Wggv3",title:"TextPanel-module__title--yZMh8",radio:"TextPanel-module__radio--C6pOb",colors:"TextPanel-module__colors--YD4_W"}},507591:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"UndoRedo-module__root--EqrtK",scaleButton:"UndoRedo-module__scaleButton--iFweF",scaleButtonActive:"UndoRedo-module__scaleButtonActive--iXvgL"}},208973:(e,t,r)=>{r.d(t,{default:()=>o});const o={classic:"font-style-module__classic--ul2dx",cursive:"font-style-module__cursive--R5tf4",marker:"font-style-module__marker--AISc3",italics:"font-style-module__italics--sFk_w",typewriter:"font-style-module__typewriter--i43cs",poster:"font-style-module__poster--SRYxi",retro:"font-style-module__retro--Rwp8N",impact:"font-style-module__impact--Arlbi",lobster:"font-style-module__lobster--UP_KH"}},405519:(e,t,r)=>{r.d(t,{default:()=>o});const o="attribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// convert the rectangle from pixels to 0.0 to 1.0\n\tvec2 zeroToOne = a_position / u_resolution;\n\n\t// convert from 0->1 to 0->2\n\tvec2 zeroToTwo = zeroToOne * 2.0;\n\n\t// convert from 0->2 to -1->+1 (clipspace)\n\tvec2 clipSpace = zeroToTwo - 1.0;\n\n\tgl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n\t// pass the texCoord to the fragment shader\n\t// The GPU will interpolate this value between points.\n\tv_texCoord = a_texCoord;\n}\n"},989900:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0; // image\nuniform sampler2D u_image1; // contrast_negative.png\nuniform sampler2D u_image2; // contrast_positive.png\nuniform sampler2D u_image3; // exposure_negative.png\nuniform sampler2D u_image4; // exposure_positive.png\nuniform sampler2D u_image5; // warm_negative_lut.png\nuniform sampler2D u_image6; // warm_positive_lit.png\nuniform sampler2D u_image7; // color table\n\nuniform float u_exposure;\nuniform float u_contrast;\nuniform float u_saturation;\nuniform float u_warmth;\nuniform float u_amount;\n\nvec3 ContrastSaturationBrightness(vec3 color, float brt, float sat, float con) {\n\tconst float AvgLumR = 0.5;\n\tconst float AvgLumG = 0.5;\n\tconst float AvgLumB = 0.5;\n\n\tconst vec3 LumCoeff = vec3(0.2125, 0.7154, 0.0721);\n\n\tvec3 AvgLumin = vec3(AvgLumR, AvgLumG, AvgLumB);\n\tvec3 brtColor = color * brt;\n\tvec3 intensity = vec3(dot(brtColor, LumCoeff));\n\tvec3 satColor = mix(intensity, brtColor, sat);\n\tvec3 conColor = mix(AvgLumin, satColor, con);\n\n\treturn conColor;\n}\n\nfloat BF_SoftLight(float base, float blend) {\n\treturn 2.0 * base * blend + base * base * (1.0 - 2.0 * blend);\n}\n\nvec3 BF_SoftLight(vec3 base, vec3 blend) {\n\treturn vec3(BF_SoftLight(base.r, blend.r), BF_SoftLight(base.g, blend.g), BF_SoftLight(base.b, blend.b));\n}\n\nvec3 Exposure(vec3 view, float intensity) {\n\tvec3 exposure1;\n\texposure1.r = texture2D(u_image3, vec2(view.r, 0.5)).r;\n\texposure1.g = texture2D(u_image3, vec2(view.g, 0.5)).g;\n\texposure1.b = texture2D(u_image3, vec2(view.b, 0.5)).b;\n\n\tvec3 exposure2;\n\texposure2.r = texture2D(u_image4, vec2(view.r, 0.5)).r;\n\texposure2.g = texture2D(u_image4, vec2(view.g, 0.5)).g;\n\texposure2.b = texture2D(u_image4, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, exposure2, intensity);\n\t} else {\n\t\tresult = mix(view, exposure1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Contrast(vec3 view, float intensity) {\n\tvec3 contrast1;\n\tcontrast1.r = texture2D(u_image1, vec2(view.r, 0.5)).r;\n\tcontrast1.g = texture2D(u_image1, vec2(view.g, 0.5)).g;\n\tcontrast1.b = texture2D(u_image1, vec2(view.b, 0.5)).b;\n\n\tvec3 contrast2;\n\tcontrast2.r = texture2D(u_image2, vec2(view.r, 0.5)).r;\n\tcontrast2.g = texture2D(u_image2, vec2(view.g, 0.5)).g;\n\tcontrast2.b = texture2D(u_image2, vec2(view.b, 0.5)).b;\n\n\tvec3 result;\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, contrast2, intensity);\n\t} else {\n\t\tresult = mix(view, contrast1, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 ColorTemp(vec3 view, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 960.0 + ((0.125 - 1.0 / 960.0) * view.g);\n\n\tvec3 coldColor1 = texture2D(u_image5, texPos1).rgb;\n\tvec3 coldColor2 = texture2D(u_image5, texPos2).rgb;\n\tvec3 coldColor = mix(coldColor1, coldColor2, fract(blueColor));\n\n\tvec3 warmColor1 = texture2D(u_image6, texPos1).rgb;\n\tvec3 warmColor2 = texture2D(u_image6, texPos2).rgb;\n\tvec3 warmColor = mix(warmColor1, warmColor2, fract(blueColor));\n\n\tvec3 result;\n\n\tif (intensity >= 0.0) {\n\t\tresult = mix(view, warmColor, intensity);\n\t} else {\n\t\tresult = mix(view, coldColor, -intensity);\n\t}\n\n\treturn result;\n}\n\nvec3 Saturation(vec3 view, float intensity) {\n\treturn ContrastSaturationBrightness(view, 1.0, intensity, 1.0);\n}\n\nvec3 Lut(vec3 view, sampler2D tex, float intensity) {\n\tfloat blueColor = view.b * 63.0;\n\n\tvec2 quad1;\n\tquad1.y = floor(floor(blueColor) / 8.0);\n\tquad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n\tvec2 quad2;\n\tquad2.y = floor(ceil(blueColor) / 8.0);\n\tquad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n\tvec2 texPos1;\n\ttexPos1.x = (quad1.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos1.y = (quad1.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec2 texPos2;\n\ttexPos2.x = (quad2.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.r);\n\ttexPos2.y = (quad2.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * view.g);\n\n\tvec3 newColor1 = texture2D(tex, texPos1).rgb;\n\tvec3 newColor2 = texture2D(tex, texPos2).rgb;\n\n\tvec3 newColor = mix(newColor1, newColor2, fract(blueColor));\n\tvec3 color = mix(view, newColor, intensity);\n\n\treturn color;\n}\n\n// [-1.0; 1.0]\nvec3 pExposure(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Exposure(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pContrast(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn Contrast(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pColorTemp(vec3 view, float intensity) {\n\tintensity = clamp(intensity, -1.0, 1.0);\n\treturn ColorTemp(view, intensity);\n}\n\n// [-1.0; 1.0]\nvec3 pSaturation(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.6);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? 1.0 + (range.y - 1.0) * intensity : range.x + (1.0 - range.x) * (intensity + 1.0);\n\treturn Saturation(view, intensity);\n}\n\n// [0.0; 1.0]\nvec3 pLut(vec3 view,sampler2D tex, float intensity) {\n\tvec2 range = vec2(0.0, 1.0);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\treturn Lut(view, tex, intensity);\n}\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 texture = texture2D(u_image0, texelCoord);\n\n\ttexture.rgb = pColorTemp(texture.rgb, u_warmth);\n\ttexture.rgb = pLut(texture.rgb, u_image7, u_amount);\n\ttexture.rgb = pExposure(texture.rgb, u_exposure);\n\ttexture.rgb = pContrast(texture.rgb, u_contrast);\n\ttexture.rgb = pSaturation(texture.rgb, u_saturation);\n\n\tgl_FragColor = texture;\n}\n"},810151:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tfloat distanceFromCenter = distance(u_position, texelCoord);\n\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(0.3 - 0.2, 0.3, distanceFromCenter), 0.0, 1.0));\n\tgl_FragColor = color;\n}\n"},217368:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // blurred image\nuniform sampler2D u_image1; // original image\nuniform vec2 u_position;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t// Хак для того, чтобы перевернуть текстуру\n\tvec2 texelCoord = v_texCoord;\n\ttexelCoord.y = 1. - texelCoord.y;\n\n\tvec4 color = texture2D(u_image0, texelCoord);\n\tvec2 realPosition = u_position;\n\trealPosition.x = texelCoord.x;\n\n\tfloat distanceFromCenter = distance(realPosition, texelCoord);\n\tcolor = mix(texture2D(u_image1, texelCoord), color, clamp(smoothstep(0.2 - 0.1, 0.2, distanceFromCenter), 0.0, 1.0));\n\n\tgl_FragColor = color;\n}\n"},205483:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_texture, vec2(v_texCoord.x, 1.0 - v_texCoord.y));\n\tgl_FragColor = color;\n}\n"},175811:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image0;\n\nuniform float u_vignette;\nuniform float u_sharpness;\nuniform float u_grain;\n\nuniform vec2 u_sourceSize;\n\nvec4 rnm(in vec2 tc) {\n\tfloat timer = 0.4;\n\tfloat noise = sin(dot(tc + vec2(timer, timer), vec2(12.9898, 78.233))) * 43758.5453;\n\n\tfloat noiseR = fract(noise) * 2.0 - 1.0;\n\tfloat noiseG = fract(noise * 1.2154) * 2.0 - 1.0;\n\tfloat noiseB = fract(noise * 1.3453) * 2.0 - 1.0;\n\tfloat noiseA = fract(noise * 1.3647) * 2.0 - 1.0;\n\n\treturn vec4(noiseR,noiseG,noiseB,noiseA);\n}\n\nfloat fade(in float t) {\n\treturn t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat pnoise3D(in vec3 p) {\n\tvec3 pi = 0.00195313 * floor(p) + 0.00195313;\n\tvec3 pf = fract(p); // Fractional part for interpolation\n\n\t// Noise contributions from (x=0, y=0), z=0 and z=1\n\tfloat perm00 = rnm(pi.xy).a ;\n\tvec3  grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n000 = dot(grad000, pf);\n\tvec3  grad001 = rnm(vec2(perm00, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=0, y=1), z=0 and z=1\n\tfloat perm01 = rnm(pi.xy + vec2(0.0, 0.00195313)).a ;\n\tvec3  grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));\n\tvec3  grad011 = rnm(vec2(perm01, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));\n\n\t// Noise contributions from (x=1, y=0), z=0 and z=1\n\tfloat perm10 = rnm(pi.xy + vec2(0.00195313, 0.0)).a ;\n\tvec3  grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));\n\tvec3  grad101 = rnm(vec2(perm10, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));\n\n\t// Noise contributions from (x=1, y=1), z=0 and z=1\n\tfloat perm11 = rnm(pi.xy + vec2(0.00195313, 0.00195313)).a ;\n\tvec3  grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));\n\tvec3  grad111 = rnm(vec2(perm11, pi.z + 0.00195313)).rgb * 4.0 - 1.0;\n\tfloat n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));\n\n\t// Blend contributions along x\n\tvec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));\n\n\t// Blend contributions along y\n\tvec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));\n\n\t// Blend contributions along z\n\tfloat n_xyz = mix(n_xy.x, n_xy.y, fade(pf.z));\n\n\t// We're done, return the final noise value.\n\treturn n_xyz;\n}\n\n//2d coordinate orientation thing\nvec2 coordRot(in vec2 tc, in float angle) {\n\tfloat aspect = u_sourceSize.x / u_sourceSize.y;\n\tvec2 uv = (tc * 2.0) - 1.0;\n\tfloat rotX = (uv.x * aspect * cos(angle)) - (uv.y * sin(angle));\n\tfloat rotY = (uv.y * cos(angle)) + (uv.x * aspect * sin(angle));\n\trotX = ((rotX / aspect) * 0.5 + 0.5);\n\trotY = rotY * 0.5 + 0.5;\n\treturn vec2(rotX, rotY);\n}\n\nvec3 BF_Multiply(vec3 base, vec3 blend) {\n\treturn base * blend;\n}\n\nfloat BF_Screen(float base, float blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 BF_Screen(vec3 base, vec3 blend) {\n\treturn 1.0 - ((1.0 - base) * (1.0 - blend));\n}\n\nvec3 Sharpness(vec3 view, float intensity) {\n\tvec2 uv = v_texCoord;\n\tvec2 step = 1.0 / u_sourceSize;\n\n\tvec3 texA = texture2D(u_image0, uv + vec2(-step.x, -step.y) * 1.0).rgb;\n\tvec3 texB = texture2D(u_image0, uv + vec2( step.x, -step.y) * 1.0).rgb;\n\tvec3 texC = texture2D(u_image0, uv + vec2(-step.x,  step.y) * 1.0).rgb;\n\tvec3 texD = texture2D(u_image0, uv + vec2( step.x,  step.y) * 1.0).rgb;\n\n\tvec3 around = 0.25 * (texA + texB + texC + texD);\n\tvec3 center  = texture2D(u_image0, uv ).rgb;\n\tvec3 col = center + (center - around) * intensity;\n\n\treturn col;\n}\n\nvec3 Grain(vec3 view, float intensity) {\n\tvec2 texCoord = v_texCoord;\n\n\tfloat timer = 0.4;\n\tfloat coloramount = 0.4;\n\tfloat grainsize = 2.0;\n\tfloat lumamount = 0.3;\n\n\tbool colored = true;\n\n\tvec3 rotOffset = vec3(1.425, 3.892, 5.835); // rotation offset values\n\tvec2 rotCoordsR = coordRot(texCoord, timer + rotOffset.x);\n\tvec3 noise = vec3(pnoise3D(vec3(rotCoordsR * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 0.0)));\n\n\tif (colored) {\n\t\tvec2 rotCoordsG = coordRot(texCoord, timer + rotOffset.y);\n\t\tvec2 rotCoordsB = coordRot(texCoord, timer + rotOffset.z);\n\t\tnoise.g = mix(noise.r, pnoise3D(vec3(rotCoordsG * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 1.0)), coloramount);\n\t\tnoise.b = mix(noise.r, pnoise3D(vec3(rotCoordsB * vec2(u_sourceSize.x / grainsize, u_sourceSize.y / grainsize), 2.0)), coloramount);\n\t}\n\n\tvec3 col = view.rgb;\n\tvec3 lumcoeff = vec3(0.299, 0.587, 0.114);\n\tfloat luminance = lumamount * dot(col, lumcoeff);\n\tfloat lum = smoothstep(0.2, 0.0, luminance);\n\n\tlum += luminance;\n\tnoise = mix(noise, vec3(0.0), pow(lum, 4.0));\n\tcol = col + noise * intensity;\n\n\treturn col;\n}\n\nvec3 Vignette(vec3 view, float intensity) {\n\tfloat inten = abs(intensity);\n\tfloat dist = distance(v_texCoord, vec2(0.5, 0.5));\n\tfloat size = 0.5 - inten * 0.4;\n\tfloat amount = inten * inten * 0.1 + 0.5 * inten;\n\tfloat vignette = smoothstep(0.8, size * 0.799, dist * (amount + size));\n\treturn (intensity >= 0.0) ? view * vignette : BF_Screen(view,vec3(1.0-vignette));\n}\n\n// [-1; 1]\nvec3 pSharpness(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 1.5);\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity+1.0) + range.x;\n\treturn Sharpness(view, intensity);\n}\n\n// [0; 1]\nvec3 pGrain(vec3 view, float intensity) {\n\tvec2 range = vec2(0.0, 0.2);\n\n\tintensity = clamp(intensity, 0.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Grain(view, intensity);\n}\n\n// [-1; 1]\nvec3 pVignette(vec3 view, float intensity) {\n\tvec2 range = vec2(-1.0, 1.0);\n\tintensity = clamp(intensity, -1.0, 1.0);\n\tintensity = (intensity >= 0.0) ? range.y * intensity : -range.x * (intensity + 1.0) + range.x;\n\treturn Vignette(view, intensity);\n}\n\nvoid main() {\n\tvec4 texture = texture2D(u_image0, v_texCoord);\n\n\ttexture.rgb = pSharpness(texture.rgb, u_sharpness);\n\ttexture.rgb = pVignette(texture.rgb, u_vignette);\n\ttexture.rgb = pGrain(texture.rgb, u_grain);\n\n\tgl_FragColor = texture;\n}\n"},5973:(e,t,r)=>{r.d(t,{default:()=>o});const o="precision mediump float;\n\nuniform sampler2D u_image0; // original image\nuniform vec2 u_delta;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\tfloat offset = fract(sin(dot(gl_FragCoord.xyz, vec3(12.9898, 78.233, 151.7182))) * 43758.5453);\n\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sampleColor = texture2D(u_image0, v_texCoord + u_delta * percent);\n\t\tsampleColor.rgb *= sampleColor.a;\n\n\t\tcolor += sampleColor * weight;\n\t\ttotal += weight;\n\t}\n\n\tcolor = color / total;\n\tcolor.rgb /= color.a + 0.00001;\n\tgl_FragColor = color;\n}\n"},869921:(e,t)=>{var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,_=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,f=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,S=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function T(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case d:case h:case s:case a:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case m:case g:case l:return e;default:return t}}case n:return t}}}function y(e){return T(e)===h}t.AsyncMode=d,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=o,t.ForwardRef=u,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=n,t.Profiler=a,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return y(e)||T(e)===d},t.isConcurrentMode=y,t.isContextConsumer=function(e){return T(e)===c},t.isContextProvider=function(e){return T(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return T(e)===u},t.isFragment=function(e){return T(e)===s},t.isLazy=function(e){return T(e)===m},t.isMemo=function(e){return T(e)===g},t.isPortal=function(e){return T(e)===n},t.isProfiler=function(e){return T(e)===a},t.isStrictMode=function(e){return T(e)===i},t.isSuspense=function(e){return T(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===i||e===p||e===_||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===u||e.$$typeof===v||e.$$typeof===S||e.$$typeof===E||e.$$typeof===f)},t.typeOf=T},659864:(e,t,r)=>{e.exports=r(869921)},929804:(e,t,r)=>{var o=r(14890).compose;t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o:o.apply(null,arguments)}},942236:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=t.ActionTypes=void 0;var r={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionTypes=r;var o={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}};t.ActionCreators=o},18823:(e,t)=>{function r(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){o=e},t.start=function(e,t){void(n={header:[],prev:[],action:[],next:[],msgs:[]}),o&&(console.group?(n.header=["%credux-undo","font-style: italic","action",e.type],n.action=i("action",s.action,e),n.prev=i("prev history",s.prevState,t)):(n.header=["redux-undo action",e.type],n.action=["action",e],n.prev=["prev history",t]))},t.end=function(e){o&&(console.group?n.next=i("next history",s.nextState,e):n.next=["next history",e],function(){var e=n,t=e.header,o=e.prev,s=e.next,i=e.action,a=e.msgs;if(console.group){var l,c,d,h,u;(l=console).groupCollapsed.apply(l,r(t)),(c=console).log.apply(c,r(o)),(d=console).log.apply(d,r(i)),(h=console).log.apply(h,r(s)),(u=console).log.apply(u,r(a)),console.groupEnd()}else{var p,_,g,m,f;(p=console).log.apply(p,r(t)),(_=console).log.apply(_,r(o)),(g=console).log.apply(g,r(i)),(m=console).log.apply(m,r(s)),(f=console).log.apply(f,r(a))}}())},t.log=function(){if(o){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.msgs=n.msgs.concat([].concat(t,["\n"]))}};var s={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function i(e,t,r){return["%c".concat(e),"color: ".concat(t,"; font-weight: bold"),r]}},891619:(e,t)=>{function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.includeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return function(r,o,n){return e(r,o,n)&&t(r,o,n)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:r,group:o,_latestUnfiltered:t,index:e.length,limit:e.length+r.length+1}}},21090:(e,t,r)=>{Object.defineProperty(t,"ActionCreators",{enumerable:!0,get:function(){return n.ActionCreators}}),Object.defineProperty(t,"includeAction",{enumerable:!0,get:function(){return s.includeAction}}),Object.defineProperty(t,"combineFilters",{enumerable:!0,get:function(){return s.combineFilters}}),Object.defineProperty(t,"newHistory",{enumerable:!0,get:function(){return s.newHistory}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var o,n=r(942236),s=r(891619),i=(o=r(582479))&&o.__esModule?o:{default:o}},582479:(e,t,r)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.set(t.debug);var r,o=c({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:s.ActionTypes.UNDO,redoType:s.ActionTypes.REDO,jumpToPastType:s.ActionTypes.JUMP_TO_PAST,jumpToFutureType:s.ActionTypes.JUMP_TO_FUTURE,jumpType:s.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},t,{initTypes:(0,i.parseActions)(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,i.parseActions)(t.clearHistoryType,[s.ActionTypes.CLEAR_HISTORY])}),a=o.neverSkipReducer?function(t,r){for(var o=arguments.length,n=new Array(o>2?o-2:0),s=2;s<o;s++)n[s-2]=arguments[s];return c({},t,{present:e.apply(void 0,[t.present,r].concat(n))})}:function(e){return e};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.start(s,t);for(var l,c,d=t,m=arguments.length,f=new Array(m>2?m-2:0),v=2;v<m;v++)f[v-2]=arguments[v];if(!r){if(n.log("history is uninitialized"),void 0===t){return d=u(e.apply(void 0,[t,{type:"@@redux-undo/CREATE_HISTORY"}].concat(f)),o.ignoreInitialState),n.log("do not set initialState on probe actions"),n.end(d),d}(0,i.isHistory)(t)?(d=r=o.ignoreInitialState?t:(0,i.newHistory)(t.past,t.present,t.future),n.log("initialHistory initialized: initialState is a history",r)):(d=r=u(t,o.ignoreInitialState),n.log("initialHistory initialized: initialState is not a history",r))}switch(s.type){case void 0:return d;case o.undoType:return l=g(d,-1),n.log("perform undo"),n.end(l),a.apply(void 0,[l,s].concat(f));case o.redoType:return l=g(d,1),n.log("perform redo"),n.end(l),a.apply(void 0,[l,s].concat(f));case o.jumpToPastType:return l=_(d,s.index),n.log("perform jumpToPast to ".concat(s.index)),n.end(l),a.apply(void 0,[l,s].concat(f));case o.jumpToFutureType:return l=p(d,s.index),n.log("perform jumpToFuture to ".concat(s.index)),n.end(l),a.apply(void 0,[l,s].concat(f));case o.jumpType:return l=g(d,s.index),n.log("perform jump to ".concat(s.index)),n.end(l),a.apply(void 0,[l,s].concat(f));case c=s.type,o.clearHistoryType.indexOf(c)>-1?c:!c:return l=u(d.present,o.ignoreInitialState),n.log("perform clearHistory"),n.end(l),a.apply(void 0,[l,s].concat(f));default:if(l=e.apply(void 0,[d.present,s].concat(f)),o.initTypes.some((function(e){return e===s.type})))return n.log("reset history due to init action"),n.end(r),r;if(d._latestUnfiltered===l)return d;if("function"==typeof o.filter&&!o.filter(s,l,d)){var S=(0,i.newHistory)(d.past,l,d.future,d.group);return o.syncFilter||(S._latestUnfiltered=d._latestUnfiltered),n.log("filter ignored action, not storing it in past"),n.end(S),S}var E=o.groupBy(s,l,d);if(null!=E&&E===d.group){var T=(0,i.newHistory)(d.past,l,d.future,d.group);return n.log("groupBy grouped the action with the previous action"),n.end(T),T}return d=function(e,t,r,o){var s=e.past.length+1;n.log("inserting",t),n.log("new free: ",r-s);var a=e.past,l=e._latestUnfiltered,c=r&&r<=s,d=a.slice(c?1:0),u=null!=l?[].concat(h(d),[l]):d;return(0,i.newHistory)(u,t,[],o)}(d,l,o.limit,E),n.log("inserted new state into history"),n.end(d),d}}};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=n?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}r.default=e,t&&t.set(e,r);return r}(r(18823)),s=r(942236),i=r(891619);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){var r=(0,i.newHistory)([],e,[]);return t&&(r._latestUnfiltered=null),r}function p(e,t){if(t<0||t>=e.future.length)return e;var r=e.past,o=e.future,n=e._latestUnfiltered,s=[].concat(h(r),[n],h(o.slice(0,t))),a=o[t],l=o.slice(t+1);return(0,i.newHistory)(s,a,l)}function _(e,t){if(t<0||t>=e.past.length)return e;var r=e.past,o=e.future,n=e._latestUnfiltered,s=r.slice(0,t),a=[].concat(h(r.slice(t+1)),[n],h(o)),l=r[t];return(0,i.newHistory)(s,l,a)}function g(e,t){return t>0?p(e,t-1):t<0?_(e,e.past.length+t):e}},733775:(e,t,r)=>{var o;r.d(t,{StoryStatsEvent:()=>o}),function(e){e.MarkAdvertiser="mark_advertiser",e.EditAdvertiserMark="edit_advertiser_mark",e.OpenAdvertiser="open_advertiser_information",e.CopyERID="copy_ERID",e.OpenNarrativeStories="narrative_open_stories",e.OpenNarrative="narrative_open",e.NarrativeOther="narrative_other",e.GoToAuthor="go_to_author",e.MusicAdded="music_added",e.PlayNext="play_next",e.ClickToUnlike="click_to_unlike",e.ClickToLike="click_to_like",e.GoToNextAuthor="go_to_next_author",e.GoToPreviousAuthor="go_to_previous_author",e.CloseAutoByTime="close_auto_by_time",e.GoToNextStoryAuto="go_to_next_story_auto_by_time",e.GoToSettings="go_to_settings",e.OpenEmptyFeedback="open_empty_feedback",e.OpenRepliesList="open_replies_list",e.OpenAdvancedStatistic="open_advanced_statistic",e.CommentTap="comment_tap",e.Delete="delete",e.PauseLongTap="pause_long_tap",e.ResumeRelease="resume_release",e.ClickOnClickableSticker="click_on_clickable_sticker",e.CloseSwipeDown="close_swipe_down",e.GoToPreviouseStory="go_to_previous_story",e.GoToNextStoryTap="go_to_next_story_tap",e.LinkClick="link_click",e.CommentSend="comment_send",e.MarkNotInterested="mark_not_interested",e.OpenParentStory="open_parent_story",e.HidePrivacyBlock="hide_privacy_block",e.CloseTap="close_tap",e.QuestionReplyPublish="question_reply_publish",e.QuestionReply="question_reply",e.QuestionReplyAnonymous="question_reply_anonymous",e.QuestionDelete="question_delete",e.QuestionSendMesage="question_send_message",e.QuestionShowAll="question_show_all"}(o||(o={}))},128396:(e,t,r)=>{r.d(t,{sendPerformanceStats:()=>a});var o=r(434788),n=r(306733),s=r(121677);const i=new n.PerformanceStatsCollector,a=e=>{var t;i.logEvent((0,o._)({},e,{value:e.value.toString(),network_effective_type:null!=(t=e.networkEffectiveType)?t:s.default.getConnectionEffectiveType()}))}},306733:(e,t,r)=>{r.d(t,{PerformanceStatsCollector:()=>s});var o=r(957973),n=r(193452);class s{logEvent(e){const t={type:o.ActionProductionStatEventTypes.TYPE_PERFORMANCE_STATS_ITEM,[o.ActionProductionStatEventTypes.TYPE_PERFORMANCE_STATS_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.actionStatCollector=new n.ActionStatCollector(this.productionStatCollector)}}},227340:(e,t,r)=>{r.d(t,{fetchStickers:()=>c,getPhotoEditorData:()=>h,logPhotoEditorRenderingTime:()=>u,showStickerShop:()=>d});var o=r(363444),n=r(514986),s=r(584356),i=r(29271),a=r(128396),l=r(745163);const c=(e,t)=>{window.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:e,onFail:t})},d=e=>{(0,n.showBox)("al_im.php",{act:"stickers_store",box:1},{stat:["im.css",window.jsc("web/imn.js"),"page_help.css",window.jsc("web/sorter.js")],params:{onDestroy:()=>{e()}}})},h=e=>new Promise(((t,r)=>{o.ajax.post("al_photos.php",{act:"get_editor_data"},{onDone:e=>{t(e)},onFail:()=>((0,n.showFastBox)({title:i.getLang("global_error")},i.getLang("global_error"),i.getLang("global_close"),(()=>{var t;(0,s.curBox)().hide(),null==(t=e)||t()})),r(),!0)})}));function u(e,t){(0,a.sendPerformanceStats)({module:l.navigationStat.getModule(),entity:t,event:"render_photo_editor",value:e})}},856505:(e,t,r)=>{r.d(t,{getPhotoEditorLangMap:()=>n,loadPhotoEditorLangs:()=>s});var o=r(29271);const n=()=>({photos_pe_texts_placeholders:o.getLang("photos_pe_texts_placeholders").split("<br>"),photos_pe_fonts:o.getLang("photos_pe_fonts").split("<br>"),photos_pe_save_action:o.getLang("photos_pe_save_action"),photos_pe_publish_action:o.getLang("photos_pe_publish_action"),global_error:o.getLang("global_error"),stories_create_image_incorrect:o.getLang("stories_create_image_incorrect"),photos_pe_filters_disabled_text:o.getLang("photos_pe_filters_disabled_text"),photos_pe_filters_disabled_button:o.getLang("photos_pe_filters_disabled_button"),photos_pe_correction_exposure:o.getLang("photos_pe_correction_exposure"),photos_pe_correction_contrast:o.getLang("photos_pe_correction_contrast"),photos_pe_correction_saturation:o.getLang("photos_pe_correction_saturation"),photos_pe_correction_warmth:o.getLang("photos_pe_correction_warmth"),photos_pe_correction_vignette:o.getLang("photos_pe_correction_vignette"),photos_pe_correction_sharpness:o.getLang("photos_pe_correction_sharpness"),photos_pe_correction_grain:o.getLang("photos_pe_correction_grain"),photos_pe_correction_auto:o.getLang("photos_pe_correction_auto"),photos_pe_correction_auto_enabled:o.getLang("photos_pe_correction_auto_enabled"),photos_pe_cancel:o.getLang("photos_pe_cancel"),photos_pe_correction_blur_type_round:o.getLang("photos_pe_correction_blur_type_round"),photos_pe_correction_blur_type_rec:o.getLang("photos_pe_correction_blur_type_rec"),photos_pe_correction_blur:o.getLang("photos_pe_correction_blur"),photos_pe_correction_blur_enabled:o.getLang("photos_pe_correction_blur_enabled"),photos_pe_crop_cancel:o.getLang("photos_pe_crop_cancel"),photos_pe_crop_apply:o.getLang("photos_pe_crop_apply"),photos_pe_crop_aspect_title:o.getLang("photos_pe_crop_aspect_title"),photos_pe_crop_aspect_free:o.getLang("photos_pe_crop_aspect_free"),photos_pe_crop_aspect_original:o.getLang("photos_pe_crop_aspect_original"),photos_pe_crop_aspect_16_9:o.getLang("photos_pe_crop_aspect_16_9"),photos_pe_crop_aspect_4_3:o.getLang("photos_pe_crop_aspect_4_3"),photos_pe_crop_aspect_1_1:o.getLang("photos_pe_crop_aspect_1_1"),photos_pe_crop_aspect_3_4:o.getLang("photos_pe_crop_aspect_3_4"),photos_pe_crop_aspect_9_16:o.getLang("photos_pe_crop_aspect_9_16"),photos_pe_rotate_right:o.getLang("photos_pe_rotate_right"),photos_pe_rotate_left:o.getLang("photos_pe_rotate_left"),photos_pe_flip_horizontal:o.getLang("photos_pe_flip_horizontal"),photos_pe_flip_vertical:o.getLang("photos_pe_flip_vertical"),photos_pe_intensity:o.getLang("photos_pe_intensity"),photos_pe_line_width:o.getLang("photos_pe_line_width"),photos_pe_color:o.getLang("photos_pe_color"),photos_pe_attached_post:o.getLang("photos_pe_attached_post"),photos_pe_filter_regular:o.getLang("photos_pe_filter_regular"),photos_pe_filter_nox:o.getLang("photos_pe_filter_nox"),photos_pe_filter_vesper:o.getLang("photos_pe_filter_vesper"),photos_pe_filter_latona:o.getLang("photos_pe_filter_latona"),photos_pe_filter_liber:o.getLang("photos_pe_filter_liber"),photos_pe_filter_luna:o.getLang("photos_pe_filter_luna"),photos_pe_filter_minerva:o.getLang("photos_pe_filter_minerva"),photos_pe_filter_mitra:o.getLang("photos_pe_filter_mitra"),photos_pe_filter_pro:o.getLang("photos_pe_filter_pro"),photos_pe_filter_terra:o.getLang("photos_pe_filter_terra"),photos_pe_filter_veles:o.getLang("photos_pe_filter_veles"),photos_pe_filter_vesta:o.getLang("photos_pe_filter_vesta"),photos_pe_filter_zaria:o.getLang("photos_pe_filter_zaria"),photos_pe_filter_sepia:o.getLang("photos_pe_filter_sepia"),photos_pe_filter_genius:o.getLang("photos_pe_filter_genius"),photos_pe_filter_horus:o.getLang("photos_pe_filter_horus"),photos_pe_filter_fortuna:o.getLang("photos_pe_filter_fortuna"),photos_pe_filter_disabled:o.getLang("photos_pe_filter_disabled"),photos_pe_filter_enabled:o.getLang("photos_pe_filter_enabled"),photos_pe_delete_sticker:o.getLang("photos_pe_delete_sticker"),photos_pe_delete_text:o.getLang("photos_pe_delete_text"),photos_pe_save_text:o.getLang("photos_pe_save_text"),photos_filtered_restore:o.getLang("photos_filtered_restore"),photos_will_be_saved_to_pe_album:o.getLang("photos_will_be_saved_to_pe_album"),photos_pe_change_photo:o.getLang("photos_pe_change_photo"),photos_pe_add_text:o.getLang("photos_pe_add_text"),photos_pe_font:o.getLang("photos_pe_font"),photos_pe_font_size:o.getLang("photos_pe_font_size"),photos_pe_cancel_action:o.getLang("photos_pe_cancel_action")}),s=()=>new Promise(((e,t)=>{window.ajax.post("al_photos.php",{act:"get_editor_langs"},{onDone:e,onFail:()=>(t(),!0)})}))},540394:(e,t,r)=>{r.d(t,{EVENTS:()=>l,prepareMediaEditorStat:()=>u,prepareStat:()=>h,sendStat:()=>d});var o=r(945263),n=r(643897),s=r(839470),i=r(733775),a=r(813412);const l={FLIP_X:"flipX",FLIP_Y:"flipY",ADD_FILTER:"add_filter",REMOVE_FILTER:"remove_filter",UNDO:"undo",REDO:"redo",ENABLE_AUTOCORRECTION:"enable_autocorrection",DISABLE_AUTOCORRECTION:"disable_autocorrection",ENABLE_BLUR:"enable_blur",DISABLE_BLUR:"disable_blur",ZOOM:"zoom",UNZOOM:"unzoom",TURN_LEFT:"turn_left",TURN_RIGHT:"turn_right",ADD_STORY:"add_story",ADD_STORY_FROM_SHARING:"add_story_from_sharing",CLICK_TO_CAMERA_ICON:"click_to_camera_icon",CLICK_TO_GRADIENT_ICON:"click_to_gradient_icon",ADD_TEXT:"add_text",EDIT_TEXT:"edit_text",DELETE_TEXT:"delete_text",ADD_STICKER:"add_sticker",DELETE_STICKER:"delete_sticker",ADD_GRAFFITI:"add_graffiti",SELECT_BACKGROUND:"select_background",MARK_ADVERTISER:i.StoryStatsEvent.MarkAdvertiser,EDIT_ADVERTISER_MARK:i.StoryStatsEvent.EditAdvertiserMark},c=[l.ADD_STORY,l.ADD_STORY_FROM_SHARING,l.CLICK_TO_CAMERA_ICON,l.CLICK_TO_GRADIENT_ICON,l.ADD_TEXT,l.EDIT_TEXT,l.DELETE_TEXT,l.ADD_STICKER,l.DELETE_STICKER,l.ADD_GRAFFITI,l.SELECT_BACKGROUND,l.MARK_ADVERTISER,l.EDIT_ADVERTISER_MARK];function d(e){let t=0,r=0;if(window.cur.pvCurPhoto){const[e,o]=window.cur.pvCurPhoto.id.split("_");t=parseInt(e),r=parseInt(o)}const i={event_type:e,media_type:window.cur.storyPublishContext?"story":"photo",media_owner_id:t,media_id:r};(0,s.partConfigEnabled)("story_publish_analytics_log")&&(0,n.debugLog)(i),(0,o.statlogsValueEvent)("media_editor_product_analytics",i),c.includes(e)&&(0,o.statlogsValueEvent)("story_create_product_analytics",{event_type:e,story_type:"photo"})}function h(e,t,r,o){let n=0,s="photo";r===a.BACKGROUND_MODES.BACKGROUND&&(n=o||0,s=n>=300?"colors":n>=200?"advice_gradients":n>=100?"emojies":"gradients");const i={has_text:0,has_sticker:0,has_graffiti:0,background_type:s,background_id:n},l=[],c=[],d=[];return e.forEach((e=>{if(e.type===a.LAYER_TYPES.STICKER){const t=e,[r,o]=t.id.split("_");let n=parseInt(r);l.push({id:parseInt(o),pack_id:n||0,type:n?"from_pack":"individual"})}else if(e.type===a.LAYER_TYPES.TEXT){const t=e;c.push({text:t.text,font:t.fontStyle,size:Math.round(t.fontSize*a.FONT_SIZE_COEFFICIENT),color:t.color.slice(1),background:"none",align:"center"})}})),c.length&&(i.has_text=1,i.texts=c),l.length&&(i.has_sticker=1,i.stickers=l),t.forEach((e=>{d.push({brush:e.opacity,size:e.width,color:e.color.slice(1)})})),d.length&&(i.has_graffiti=1,i.graffities=d),i}function u(e,t){let r=0,o=0;if(window.cur.pvCurPhoto){const[e,t]=window.cur.pvCurPhoto.id.split("_");r=parseInt(e),o=parseInt(t)}const n={media_type:window.cur.storyPublishContext?"story":"photo",media_owner_id:r,media_id:o,is_cropped:t.isCropped,is_autocorrected:t.isAutoCorrection,rotation:t.rotation,filter:t.filter.name,filter_value:100*t.filter.value,ratio:t.cropAspect,photo_correction:[{type:"exposure",value:100*t.colorCorrection.exposure},{type:"contrast",value:100*t.colorCorrection.contrast},{type:"saturation",value:100*t.colorCorrection.saturation},{type:"warmth",value:100*t.colorCorrection.warmth},{type:"vignette",value:100*t.colorCorrection.vignette},{type:"sharpness",value:100*t.colorCorrection.sharpness},{type:"grain",value:100*t.colorCorrection.grain}]};t.blur.isEnabled&&(n.blur_type=t.blur.form,n.blur_value=t.blur.size);const s=[];return e.forEach((e=>{if(e.type===a.LAYER_TYPES.TEXT){const t=e;s.push({text:t.text,font:t.fontStyle,size:Math.round(t.fontSize*a.FONT_SIZE_COEFFICIENT),color:t.color.slice(1),background:"none",align:"center"})}})),s.length&&(n.has_text=1,n.texts=s),n}},945263:(e,t,r)=>{r.d(t,{statlogsProbValueEvent:()=>i,statlogsValueEvent:()=>s});var o=r(839470),n=r(504867);function s(e,t,r,o,s){return(0,n.statlogsValueEvent)(e,t,r,o,s)}function i(e,t,r,n,i,a){(0,o.randEnabled)(e)&&s(t,r,n,i,a)}},237203:(e,t,r)=>{r.d(t,{AnswerQuestionSticker:()=>l});var o=r(714548),n=r(281504),s=r(273800),i=r(624334),a=r(336383);class l extends o.Sticker{prepareData(){return new Promise(((e,t)=>{const{questionOwnerPhoto:r,answerOwnerPhoto:o,cornerIcon:n,cornerIconFlipped:s}=this.props,i={questionOwnerPhoto:r,answerOwnerPhoto:o,cornerIcon:n,cornerIconFlipped:s};this.loadImages(i).then((()=>e(1))).catch((e=>t(e)))}))}render(){return new Promise(((e,t)=>{this.prepareData().then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const e=this.drawQuestion(a.AnswerQuestionStickerStyles.question.top,a.AnswerQuestionStickerStyles.question.left),t=this.drawAnswer(e.bottom+a.AnswerQuestionStickerStyles.answer.top,a.AnswerQuestionStickerStyles.answer.left);this.setWidth(t.right),this.setHeight(t.bottom),this.drawScene()}drawQuestion(e,t){const r=a.AnswerQuestionStickerStyles.question.width-2*a.AnswerQuestionStickerStyles.question.padding,o=new s.ImageItem({x:t+a.AnswerQuestionStickerStyles.questionCorner.marginLeft,image:this.getImage("cornerIcon"),width:a.AnswerQuestionStickerStyles.questionCorner.width,height:a.AnswerQuestionStickerStyles.questionCorner.height}),l=new n.RectItem({x:t+a.AnswerQuestionStickerStyles.question.marginLeft,y:e,width:a.AnswerQuestionStickerStyles.question.width,radius:a.AnswerQuestionStickerStyles.question.borderRadius,background:a.AnswerQuestionStickerStyles.question.background}),c=new s.ImageItem({x:l.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.question.padding,y:l.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.question.padding,image:this.getImage("questionOwnerPhoto"),width:a.AnswerQuestionStickerStyles.avatar.width,height:a.AnswerQuestionStickerStyles.avatar.height,radius:a.AnswerQuestionStickerStyles.avatar.width/2,borderSize:a.AnswerQuestionStickerStyles.avatar.borderSize,borderColor:a.AnswerQuestionStickerStyles.avatar.borderColor}),d=new i.TextItem({x:c.getBoundingClientRect().right+a.AnswerQuestionStickerStyles.questionOwnerName.marginLeft,y:c.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.questionOwnerName.marginTop,text:this.props.questionOwnerName,fontSize:a.AnswerQuestionStickerStyles.questionOwnerName.fontSize,lineHeight:a.AnswerQuestionStickerStyles.questionOwnerName.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.questionOwnerName.fontFamily,color:a.AnswerQuestionStickerStyles.questionOwnerName.color,maxWidth:r-c.getBoundingClientRect().width-a.AnswerQuestionStickerStyles.questionOwnerName.marginLeft,maxLines:1}),h=new i.TextItem({x:l.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.question.padding,y:c.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.questionText.marginTop,text:this.props.questionText,fontSize:a.AnswerQuestionStickerStyles.questionText.fontSize,lineHeight:a.AnswerQuestionStickerStyles.questionText.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.questionText.fontFamily,fontWeight:a.AnswerQuestionStickerStyles.questionText.fontWeight,color:a.AnswerQuestionStickerStyles.questionText.color,maxWidth:r,maxLines:8});return l.setHeight(h.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.question.padding-8),o.setY(l.getBoundingClientRect().bottom-124),this.add(o),this.add(l),this.add(c),this.add(d),this.add(h),l.getBoundingClientRect()}drawAnswer(e,t){const r=a.AnswerQuestionStickerStyles.answer.width-2*a.AnswerQuestionStickerStyles.answer.padding,o=new n.RectItem({x:t,y:e,width:a.AnswerQuestionStickerStyles.answer.width,radius:a.AnswerQuestionStickerStyles.answer.borderRadius,background:a.AnswerQuestionStickerStyles.answer.background}),l=new s.ImageItem({x:o.getBoundingClientRect().right+a.AnswerQuestionStickerStyles.answerCorner.marginLeft,image:this.getImage("cornerIconFlipped"),width:a.AnswerQuestionStickerStyles.answerCorner.width,height:a.AnswerQuestionStickerStyles.answerCorner.height}),c=new s.ImageItem({x:o.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.answer.padding,y:o.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.answer.padding,image:this.getImage("answerOwnerPhoto"),width:a.AnswerQuestionStickerStyles.avatar.width,height:a.AnswerQuestionStickerStyles.avatar.height,radius:a.AnswerQuestionStickerStyles.avatar.width/2,borderSize:a.AnswerQuestionStickerStyles.avatar.borderSize,borderColor:a.AnswerQuestionStickerStyles.avatar.borderColor}),d=new i.TextItem({x:c.getBoundingClientRect().right+a.AnswerQuestionStickerStyles.answerOwnerName.marginLeft,y:c.getBoundingClientRect().top+a.AnswerQuestionStickerStyles.answerOwnerName.marginTop,text:this.props.answerOwnerName,fontSize:a.AnswerQuestionStickerStyles.answerOwnerName.fontSize,lineHeight:a.AnswerQuestionStickerStyles.answerOwnerName.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.answerOwnerName.fontFamily,maxWidth:r-c.getBoundingClientRect().width-a.AnswerQuestionStickerStyles.answerOwnerName.marginLeft,maxLines:1,color:a.AnswerQuestionStickerStyles.answerOwnerName.color}),h=new i.TextItem({x:o.getBoundingClientRect().left+a.AnswerQuestionStickerStyles.answer.padding,y:c.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.answerText.marginTop,text:this.props.answerText,fontSize:a.AnswerQuestionStickerStyles.answerText.fontSize,lineHeight:a.AnswerQuestionStickerStyles.answerText.lineHeight,fontFamily:a.AnswerQuestionStickerStyles.answerText.fontFamily,fontWeight:a.AnswerQuestionStickerStyles.answerText.fontWeight,color:a.AnswerQuestionStickerStyles.answerText.color,maxWidth:r,maxLines:8});return o.setHeight(h.getBoundingClientRect().bottom+a.AnswerQuestionStickerStyles.answer.padding-16-e),l.setY(o.getBoundingClientRect().bottom-124),this.add(l),this.add(o),this.add(c),this.add(d),this.add(h),l.getBoundingClientRect()}constructor(e){super(),this.props=e}}},336383:(e,t,r)=>{r.d(t,{AnswerQuestionStickerStyles:()=>o});const o={avatar:{width:96,height:96,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"},question:{top:0,left:0,width:968,padding:64,marginLeft:32,borderRadius:64,background:"#fff"},questionOwnerName:{marginLeft:32,marginTop:20,fontSize:60,lineHeight:80,fontFamily:"SF Pro Text, sans-serif",color:"#000"},questionText:{marginTop:48,fontSize:84,lineHeight:104,fontFamily:"SF Pro Text, sans-serif",fontWeight:"600",color:"#000"},questionCorner:{width:132,height:132,marginLeft:4},answer:{top:80,left:168,width:968,padding:64,borderRadius:64,background:"#fff"},answerOwnerName:{marginLeft:32,marginTop:20,fontSize:60,lineHeight:80,fontFamily:"SF Pro Text, sans-serif",color:"#2C2D2E"},answerText:{marginTop:48,fontSize:80,lineHeight:96,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#000"},answerCorner:{width:132,height:132,marginLeft:-100}}},618742:(e,t,r)=>{r.d(t,{AskQuestionAvatar:()=>s});var o=r(714548),n=r(273800);class s extends o.Sticker{render(){return new Promise(((e,t)=>{this.loadImages({photo:this.props.photoUrl}).then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const{size:e,borderSize:t=0,borderColor:r=""}=this.props,o=4*e,s=4*t,i=new n.ImageItem({image:this.getImage("photo"),width:o,height:o,radius:o/2,borderSize:s,borderColor:r});this.add(i),this.setWidth(i.getWidth()),this.setHeight(i.getHeight()),this.drawScene()}constructor(e){super(),this.props=e}}},857247:(e,t,r)=>{r.d(t,{AskQuestionText:()=>i});var o=r(714548),n=r(624334),s=r(34390);class i extends o.Sticker{render(){return new Promise((e=>{this.draw(),e(1)}))}draw(){const e=new n.TextItem({text:this.props.text,fontSize:s.AskQuestionTextStyles.fontSize,lineHeight:s.AskQuestionTextStyles.lineHeight,fontFamily:s.AskQuestionTextStyles.fontFamily,fontWeight:s.AskQuestionTextStyles.fontWeight,color:s.AskQuestionTextStyles.color,fillColor:s.AskQuestionTextStyles.fillColor,fillRadius:s.AskQuestionTextStyles.fillRadius,padding:{top:s.AskQuestionTextStyles.paddingTop,bottom:s.AskQuestionTextStyles.paddingBottom,left:s.AskQuestionTextStyles.paddingLeft,right:s.AskQuestionTextStyles.paddingRight}});this.add(e),this.setWidth(e.getWidth()),this.setHeight(e.getHeight()),this.drawScene()}constructor(e){super(),this.props=e}}},34390:(e,t,r)=>{r.d(t,{AskQuestionTextStyles:()=>o});const o={fontSize:136,lineHeight:144,fontFamily:"VK Sans Display, SF Pro Text, sans-serif",fontWeight:"600",color:"#000",fillColor:"#fff",fillRadius:48,paddingTop:64,paddingBottom:40,paddingLeft:72,paddingRight:72}},109848:(e,t,r)=>{r.d(t,{CommentSticker:()=>I});var o=r(714548),n=r(281504),s=r(273800),i=r(624334),a=r(486171),l=r(854422),c=r(746337),d=r(432315),h=r(575928),u=r(480631),p=r(655246),_=r(709222),g=r(589810),m=r(495191),f=r(763613),v=r(492232),S=r(917564),E=r(569559),T=r(546337),y=r(291772),x=r(816630),w=r(173360);const C=80,b="SF Pro Text, sans-serif";class I extends o.Sticker{static getReplyMediaIcon(e){let t="";switch(e){case"photo":t=(0,a.getIcon20CameraOutline)().icon;break;case"video":t=(0,l.getIcon20VideoCircleOutline)().icon;break;case"audio":t=(0,c.getIcon20MusicOutline)().icon;break;case"doc":t=(0,d.getIcon20DocumentOutline)().icon;break;case"article":t=(0,h.getIcon20ArticleOutline)().icon;break;case"narrative":t=(0,u.getIcon20NarrativeOutline)().icon;break;default:t=(0,p.getIcon20Attach)().icon}return t}static getPostMediaIcon(e){let t="";switch(e){case"audio":t=(0,_.getIcon28MusicOutline)().icon;break;case"video":t=(0,g.getIcon28VideoOutline)().icon;break;case"poll":t=(0,m.getIcon28PollSquareOutline)().icon;break;case"narrative":t=(0,f.getIcon28NarrativeOutline)().icon;break;case"audio_playlist":t=(0,v.getIcon28PlaylistOutline)().icon;break;case"market":t=(0,S.getIcon28MarketOutline)().icon;break;case"geo":t=(0,E.getIcon28PlaceOutline)().icon;break;case"doc":t=(0,T.getIcon28DocumentOutline)().icon;break;case"article":t=(0,y.getIcon28ArticleOutline)().icon;break;default:t=(0,x.getIcon28AttachOutline)().icon}return t}prepareData(){return new Promise(((e,t)=>{const{replyOwnerPhoto:r,replyMediaType:o,replyMediaPreviewUrl:n,postOwnerPhoto:s,postMediaType:i,postMediaPreviewUrl:a}=this.props,l={replyOwnerPhoto:r,postOwnerPhoto:s,replyIcon:this.getIconUrl((0,w.getIcon12Repost)().icon.replace("currentColor","#99A2AD"))};if(n)l.replySticker=n;else if(o){const e=I.getReplyMediaIcon(o);e&&(l.replyMediaIcon=this.getIconUrl(e.replace("currentColor","#3F8AE0")))}if(a)l.postPreview=a;else if(i){const e=I.getPostMediaIcon(i);e&&(l.postMediaIcon=this.getIconUrl(e.replace("currentColor","#99A2AD")))}this.loadImages(l).then((()=>e(1))).catch((e=>t(e)))}))}render(){return new Promise(((e,t)=>{this.prepareData().then((()=>{this.draw(),e(1)})).catch((e=>{t(e)}))}))}draw(){const e=new n.RectItem({x:0,y:0,radius:72,background:"#fff"});this.add(e);const t=this.renderReplyHeader(C,C),r=this.renderReplyMessage(C,t.bottom+46),o=r?r.bottom:t.bottom,{bottom:s}=this.renderPost(C,o+52);this.setHeight(s+C),e.setWidth(this.getWidth()),e.setHeight(this.getHeight()),this.drawScene()}renderReplyHeader(e,t){const r=new s.ImageItem({x:e,y:t,image:this.getImage("replyOwnerPhoto"),width:160,height:160,radius:80,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}),o=r.getBoundingClientRect(),n=o.right+52,a=new i.TextItem({x:n,y:o.top+20,text:this.props.replyOwnerName,fontSize:60,lineHeight:80,fontFamily:b,fontWeight:"500",maxWidth:this.getInnerWidth()-o.width-52,maxLines:1,color:"#000"}),l=new s.ImageItem({x:n,y:a.getBoundingClientRect().bottom,image:this.getImage("replyIcon"),width:44,height:44,radius:0}),c=new i.TextItem({x:l.getBoundingClientRect().right+20,y:l.getBoundingClientRect().top,text:this.props.replySubtitle,fontSize:48,lineHeight:56,fontFamily:b,fontWeight:"400",maxWidth:880,maxLines:1,color:"#818C99"});return this.add(r),this.add(a),this.add(l),this.add(c),o}renderReplyMessage(e,t){let r={bottom:t};if(this.props.replyMediaPreviewUrl){const o=new s.ImageItem({x:e,y:t,image:this.getImage("replySticker"),width:288,height:288});r=o.getBoundingClientRect(),this.add(o)}else if(this.props.replyText){const o=new i.TextItem({x:e,y:t,text:this.props.replyText,fontSize:68,lineHeight:88,fontFamily:"SF Pro Text, sans-serif",fontWeight:"400",color:"#2C2D2E",maxWidth:1152,maxLines:3});r=o.getBoundingClientRect(),this.add(o)}if(this.props.replyMediaType&&"sticker"!==this.props.replyMediaType){const o=r?r.bottom+4:t;r=this.renderReplyAttach(e,o)}return r}renderReplyAttach(e,t){const r=new s.ImageItem({x:e,y:t,image:this.getImage("replyMediaIcon"),width:76,height:76});return this.add(r),this.add(new i.TextItem({x:r.getBoundingClientRect().right+32,y:r.getBoundingClientRect().top+12,text:this.props.replyMediaName,fontSize:56,lineHeight:72,fontFamily:"SF Pro Text, sans-serif",color:"#3F8AE0"})),r.getBoundingClientRect()}renderPost(e,t){const{postMediaType:r}=this.props,o=48,a=192,l=this.getInnerWidth()-96,c=l-a-32,d=new s.ImageItem({x:e+o,y:t+o,image:this.getImage("postOwnerPhoto"),width:96,height:96,radius:48,borderSize:2,borderColor:"rgba(0, 0, 0, 0.08)"}),h=l-d.getBoundingClientRect().width-32,u=h-a-32,p=new i.TextItem({x:d.getBoundingClientRect().right+32,y:d.getBoundingClientRect().top+20,text:this.props.postOwnerName,fontSize:56,lineHeight:72,fontFamily:b,fontWeight:"400",maxWidth:r?u:h,maxLines:1,color:"#000"});let _,g;this.props.postText&&(_=new i.TextItem({x:e+o,y:d.getBoundingClientRect().bottom+34,text:this.props.postText,fontSize:52,lineHeight:64,fontFamily:b,fontWeight:"400",color:"#000",maxWidth:r?c:l,maxLines:2})),g=_?_.getBoundingClientRect().bottom+20:d.getBoundingClientRect().bottom+48;const m=new i.TextItem({x:e+o,y:g,text:this.props.postDate,fontSize:48,lineHeight:56,fontFamily:b,fontWeight:"400",color:"#818C99"}),f=new n.RectItem({x:C,y:t,width:this.getInnerWidth(),height:m.getBoundingClientRect().bottom-t+36,radius:64,background:"#fff",borderSize:4,borderColor:"#E1E3E6"});if(this.add(f),this.add(d),this.add(p),this.add(m),_&&this.add(_),r){const i=e+o+c+32;if("photo"===r&&this.props.postMediaPreviewUrl)this.add(new s.ImageItem({x:i,y:t+o,image:this.getImage("postPreview"),width:a,height:a,radius:32,borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"}));else{const e=new n.RectItem({x:i,y:t+o,width:a,height:a,radius:32,background:"#F5F5F5",borderSize:4,borderColor:"rgba(0, 0, 0, 0.08)"});this.add(e);const r=e.getBoundingClientRect(),l=96;this.add(new s.ImageItem({x:r.left+(e.getWidth()/2-l/2),y:r.top+(e.getHeight()/2-l/2),image:this.getImage("postMediaIcon"),width:l,height:l,radius:0}))}}return f.getBoundingClientRect()}getInnerWidth(){return this.getWidth()-160}constructor(e){super(),this.props=e,this.setWidth(1400)}}},106439:(e,t,r)=>{r.d(t,{MusicSticker:()=>d});var o=r(714548),n=r(624334),s=r(273800),i=r(202758),a=r(281504),l=r(985447),c=r(721259);class d extends o.Sticker{get coverSize(){return this.data.isCoverImagePlaceholder?d.PLACEHOLDER_COVER_SIZE:d.COVER_SIZE}render(){return new Promise(((e,t)=>{const r=(0,l.getIcon24Explicit)().icon.replace(/currentColor/,"rgba(255, 255, 255, 0.6)"),o=(0,i.getIcon56SongOutline)().icon.replace(/currentColor/,"rgba(0, 0, 0, 0.24)"),n={};this.data.isExplicit&&(n.explicit="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this.data.isCoverImagePlaceholder?n.placeholder="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o):(n.cover=this.data.audioImageUrl,n.label=this.data.labelUrl),this.loadImages(n).then((()=>{this.doRender(),e(1)})).catch(t)}))}doRender(){let e;this.data.isCoverImagePlaceholder?this.doRenderPlaceholderCover():this.doRenderCover();const t=this.doRenderTitle(),r=this.doRenderArtist(t.getBoundingClientRect().bottom);e=r,this.data.isCoverImagePlaceholder||(e=this.doRenderLabel(r.getBoundingClientRect().bottom));const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setWidth(d.STICKER_WIDTH),this.setHeight(o),this.drawScene()}doRenderPlaceholderCover(){const e=new a.RectItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,width:this.coverSize,height:this.coverSize,radius:48,background:"rgba(255, 255, 255, 1)",shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=132,r=new s.ImageItem({x:(d.STICKER_WIDTH-t)/2,y:d.STICKER_VPADDING+(this.coverSize-t)/2,width:t,height:t,image:this.getImage("placeholder")});this.add(r);const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(o)}doRenderCover(){const e=new s.ImageItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,image:this.getImage("cover"),width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(t)}doRenderTitle(){const e=this.data.isExplicit?84:0,t=new n.TextItem({x:0,y:d.STICKER_VPADDING+this.coverSize+60,text:this.data.audioTitle,fontSize:60,lineHeight:72,fontWeight:"500",maxWidth:d.STICKER_WIDTH,maxLines:3,align:n.Align.CENTER,color:"#fff",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)",afterPadding:e});if(this.add(t),this.data.isExplicit){const e=t.getLinesWidth(),r=e[e.length-1],o=r+(d.STICKER_WIDTH-r)/2-72,n=c.browser.safari?0:4,i=t.getBoundingClientRect().bottom-72-n,a=new s.ImageItem({x:o,y:i,image:this.getImage("explicit"),width:72,height:72});this.add(a)}return t}doRenderArtist(e){const t=new n.TextItem({x:0,y:e+24,text:this.data.audioArtist,fontSize:48,lineHeight:60,fontWeight:"400",maxWidth:d.STICKER_WIDTH,maxLines:2,align:n.Align.CENTER,color:"rgba(255, 255, 255, 0.6)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)"});return this.add(t),t}doRenderLabel(e){const t=new s.ImageItem({x:(d.STICKER_WIDTH-354)/2,y:e+240,image:this.getImage("label"),width:354,height:108,cropType:s.ImageItemCropType.FULL});return this.add(t),t}getClickableHeight(){return this.clickableHeight}setClickableHeight(e){this.clickableHeight=e}constructor(e){super(),this.clickableHeight=0,this.data=e}}d.STICKER_WIDTH=936,d.STICKER_VPADDING=48,d.PLACEHOLDER_COVER_SIZE=396,d.COVER_SIZE=696},540724:(e,t,r)=>{r.d(t,{PlaylistSticker:()=>d});var o=r(714548),n=r(624334),s=r(273800),i=r(613039),a=r(281504),l=r(985447),c=r(721259);class d extends o.Sticker{get coverSize(){return this.data.isCoverImagePlaceholder?d.PLACEHOLDER_COVER_SIZE:d.COVER_SIZE}render(){return new Promise(((e,t)=>{const r=(0,l.getIcon24Explicit)().icon.replace(/currentColor/,"rgba(255, 255, 255, 0.6)"),o=(0,i.getIcon56PlaylistOutline)().icon.replace(/currentColor/,"rgba(0, 0, 0, 0.24)"),n={};this.data.isExplicit&&(n.explicit="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)),this.data.isCoverImagePlaceholder?n.placeholder="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o):(n.cover=this.data.playlistImageUrl,n.label=this.data.labelUrl),this.loadImages(n).then((()=>{this.doRender(),e(1)})).catch(t)}))}doRender(){let e;this.data.isCoverImagePlaceholder?this.doRenderPlaceholderCover():this.doRenderCover();const t=this.doRenderTitle(),r=this.doRenderArtist(t.getBoundingClientRect().bottom);e=r,this.data.isCoverImagePlaceholder||(e=this.doRenderLabel(r.getBoundingClientRect().bottom));const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setWidth(d.STICKER_WIDTH),this.setHeight(o),this.drawScene()}doRenderPlaceholderCover(){const e=new a.RectItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)",background:"rgba(255, 255, 255, 1)"});this.add(e);const t=132,r=new s.ImageItem({x:(d.STICKER_WIDTH-t)/2,y:d.STICKER_VPADDING+(this.coverSize-t)/2,width:t,height:t,image:this.getImage("placeholder")});this.add(r);const o=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(o)}doRenderCover(){const e=new s.ImageItem({x:(d.STICKER_WIDTH-this.coverSize)/2,y:d.STICKER_VPADDING,image:this.getImage("cover"),width:this.coverSize,height:this.coverSize,radius:48,shadowBlur:48,shadowColor:"rgba(0, 0, 0, 0.16)"});this.add(e);const t=e.getBoundingClientRect().bottom+d.STICKER_VPADDING;this.setClickableHeight(t)}doRenderTitle(){const e=this.data.isExplicit?84:0,t=new n.TextItem({x:0,y:d.STICKER_VPADDING+this.coverSize+60,text:this.data.playlistTitle,fontSize:60,lineHeight:72,fontWeight:"500",maxWidth:d.STICKER_WIDTH,maxLines:3,align:n.Align.CENTER,color:"#fff",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)",afterPadding:e});if(this.add(t),this.data.isExplicit){const e=t.getLinesWidth(),r=e[e.length-1],o=r+(d.STICKER_WIDTH-r)/2-72,n=c.browser.safari?0:4,i=t.getBoundingClientRect().bottom-72-n,a=new s.ImageItem({x:o,y:i,image:this.getImage("explicit"),width:72,height:72});this.add(a)}return t}doRenderArtist(e){const t=new n.TextItem({x:0,y:e+24,text:this.data.playlistAuthorName,fontSize:48,lineHeight:60,fontWeight:"400",maxWidth:d.STICKER_WIDTH,maxLines:2,align:n.Align.CENTER,color:"rgba(255, 255, 255, 0.6)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.08)"});return this.add(t),t}doRenderLabel(e){const t=new s.ImageItem({x:(d.STICKER_WIDTH-354)/2,y:e+240,image:this.getImage("label"),width:354,height:108,cropType:s.ImageItemCropType.FULL});return this.add(t),t}getClickableHeight(){return this.clickableHeight}setClickableHeight(e){this.clickableHeight=e}constructor(e){super(),this.clickableHeight=0,this.data=e}}d.STICKER_WIDTH=936,d.STICKER_VPADDING=48,d.PLACEHOLDER_COVER_SIZE=396,d.COVER_SIZE=696},273800:(e,t,r)=>{r.d(t,{ImageItem:()=>s,ImageItemCropType:()=>o});var o,n=r(72081);!function(e){e.FULL="FULL",e.CENTER="CENTER"}(o||(o={}));class s extends n.Shape{draw(e){const{x:t=0,y:r=0,image:n,width:s=0,height:i=0,radius:a=0,borderSize:l=0,borderColor:c="transparent",shadowBlur:d=0,shadowColor:h="",cropType:u=o.CENTER}=this.props;let p,_,g,m;switch(u){case o.FULL:p=0,_=0,g=n.width,m=n.height;break;case o.CENTER:{const e=Math.min(n.width,n.height);p=(n.width-e)/2,_=(n.height-e)/2,g=e,m=e;break}}e.save(),e.lineWidth=l,e.strokeStyle=c,d&&h&&(e.shadowBlur=d,e.shadowColor=h,e.shadowOffsetX=1e4+t,e.shadowOffsetY=1e4+r,e.fillRect(-1e4,-1e4,s,s)),e.beginPath(),e.arc(t+a,r+a,a,Math.PI,Math.PI+Math.PI/2),e.lineTo(t+s-a,r),e.arc(t+s-a,r+a,a,Math.PI+Math.PI/2,2*Math.PI),e.lineTo(t+s,r+i-a),e.arc(t+s-a,r+i-a,a,2*Math.PI,Math.PI/2),e.lineTo(t+a,r+i),e.arc(t+a,r+i-a,a,Math.PI/2,Math.PI),e.closePath(),e.clip(),e.drawImage(n,p,_,g,m,t,r,s,i),e.stroke(),e.restore()}getWidth(){return this.props.width}setWidth(e){this.props.width=e}getHeight(){return this.props.height}setWeight(e){this.props.height=e}}},281504:(e,t,r)=>{r.d(t,{RectItem:()=>n});var o=r(72081);class n extends o.Shape{draw(e){const{x:t=0,y:r=0,width:o=0,height:n=0,background:s="transparent",borderSize:i=0,borderColor:a="transparent",shadowBlur:l=0,shadowColor:c=""}=this.props;let{radius:d=0}=this.props;o<2*d&&(d=o/2),n<2*d&&(d=n/2),e.save(),l&&c&&(e.shadowBlur=l,e.shadowColor=c),e.beginPath(),e.fillStyle=s,e.lineWidth=i,e.strokeStyle=a,e.moveTo(t+d,r),e.arcTo(t+o,r,t+o,r+n,d),e.arcTo(t+o,r+n,t,r+n,d),e.arcTo(t,r+n,t,r,d),e.arcTo(t,r,t+o,r,d),e.closePath(),e.stroke(),e.fill(),e.restore()}getWidth(){const{width:e=0}=this.props;return e}setWidth(e){this.props.width=e}getHeight(){const{height:e=0}=this.props;return e}setHeight(e){this.props.height=e}}},72081:(e,t,r)=>{r.d(t,{Shape:()=>o});class o{getBoundingClientRect(){const{x:e=0,y:t=0}=this.props;return{width:this.getWidth(),height:this.getHeight(),top:t,left:e,right:e+this.getWidth(),bottom:t+this.getHeight()}}setX(e){this.props.x=e}setY(e){this.props.y=e}constructor(e){this.props=e}}},624334:(e,t,r)=>{r.d(t,{Align:()=>o,TextItem:()=>i});var o,n=r(72081),s=r(659397);!function(e){e.LEFT="LEFT",e.CENTER="CENTER"}(o||(o={}));class i extends n.Shape{draw(e){const{x:t=0,y:r=0,color:n="#000",lineHeight:s,fillColor:a,fillRadius:l=0,align:c=o.LEFT,maxWidth:d=0,shadowBlur:h,shadowColor:u,maxLines:p,afterPadding:_=0}=this.props;if(e.save(),this.setFont(e),e.fillStyle=n,e.textBaseline="top",e.textAlign="left",h&&u&&(e.shadowBlur=h,e.shadowColor=u),a){const r=this.getPadding();let n=0;this.splitText.forEach(((h,u)=>{let{width:g}=e.measureText(h);p&&u===this.splitText.length-1&&(g+=_);let m=t;c===o.CENTER&&(m=t+(d-g)/2);let f=0;f=0===u?r.top:r.top/2;let v=0;v=u===this.splitText.length-1?r.bottom:r.bottom/2;let S={tl:0,tr:0,bl:0,br:0};if(0===u){S.tl=l,S.tr=l;const{width:t}=e.measureText(this.splitText[u]),{width:r}=e.measureText(this.splitText[u+1]);t>r&&(S.bl=0,S.br=l)}else if(u===this.splitText.length-1){S.bl=l,S.br=l;const{width:t}=e.measureText(this.splitText[u]),{width:r}=e.measureText(this.splitText[u-1]);t>r&&(S.tl=0,S.tr=l)}else{const{width:t}=e.measureText(this.splitText[u]),{width:r}=e.measureText(this.splitText[u-1]),{width:o}=e.measureText(this.splitText[u+1]);t>r&&(S.tl=0,S.tr=l),t>o&&(S.bl=0,S.br=l)}const E=s+f+v;i.drawFill(e,m,n,g+r.left+r.right,E,a,S),e.fillText(h,m+r.left,n+f),n+=E}))}else this.splitText.forEach(((n,i)=>{let{width:a}=e.measureText(n);p&&i===this.splitText.length-1&&(a+=_);let l=t;c===o.CENTER&&(l=t+(d-a)/2),e.fillText(n,l,r+s*i)}));e.restore()}static drawFill(e,t,r,o,n,s,i){e.save(),e.beginPath(),e.fillStyle=s,e.lineWidth=0,e.strokeStyle="transparent",e.moveTo(t+i.tl,r),e.lineTo(t+o-i.tr,r),e.quadraticCurveTo(t+o,r,t+o,r+i.tr),e.lineTo(t+o,r+n-i.br),e.quadraticCurveTo(t+o,r+n,t+o-i.br,r+n),e.lineTo(t+i.bl,r+n),e.quadraticCurveTo(t,r+n,t,r+n-i.bl),e.lineTo(t,r+i.tl),e.quadraticCurveTo(t,r,t+i.tl,r),e.closePath(),e.stroke(),e.fill(),e.restore()}setFont(e){const{fontSize:t,lineHeight:r,fontFamily:o="sans-serif",fontWeight:n="normal"}=this.props;e.font=`${n} ${t}px/${r}px ${o}`}splitLongWords(e){const{context:t}=this,{maxWidth:r=0}=this.props,o=[];return t&&r?(this.setFont(t),e.forEach((e=>{if("\n"===e)return void o.push(e);const{width:n}=t.measureText(e);if(n<=r)return void o.push(e);const s=Array.from(e).reduce(((e,o)=>{const{width:n}=t.measureText(e.current+o);return n>r?{current:o,items:[...e.items,e.current]}:{current:e.current+o,items:[...e.items]}}),{current:"",items:[]});o.push(...s.items,s.current)})),o):e}splitTextIntoLines(){const{context:e}=this;let{text:t,maxWidth:r=0,maxLines:o=0,afterPadding:n=0}=this.props;const i=String((0,s.decodeHTMLEntities)(t)).replace(/(?:<br\s*\/?>)+/gim,"\n");if(!e)return i.split(/\n/);if(r<=0)return i.split(/\n/);this.setFont(e);const a=this.splitLongWords(i.replaceAll("\n"," \n ").split(" "));let l=0,c=[];for(;a.length;)if(o&&c.length>=o-1){const t=a.splice(0).join(" "),{width:o}=e.measureText(t);if(o+n<=r)c.push(t);else{const o="...",{width:s}=e.measureText(o);let i=!1;const a=Array.from(t).reduce(((t,o)=>{const{width:a}=e.measureText(t+o);return!i&&a+s+n<=r?t+o:(i=!0,t)}),"");c.push(a.trim()+o)}}else{const t=l+1,o="\n"===a[l],s=a.slice(0,t).join(" ");let{width:i}=e.measureText(s);if(t>=a.length&&(i+=n),i>r||t>a.length||o){const e=a.splice(0,o?t:t-1);c.push(e.join(" ")),l=0}else l++}return c}getWidth(){const e=this.getLinesWidth();return 0===e.length?0:Math.max(...e)}getLinesWidth(){const{context:e}=this,{maxLines:t,afterPadding:r=0}=this.props;if(!e)return[];this.setFont(e);const o=this.getPadding();let n=[];for(let s=0;s<this.splitText.length;s++){let{width:i}=e.measureText(this.splitText[s]);t&&s===this.splitText.length-1&&(i+=r),i+=o.left+o.right,n.push(Math.round(i))}return n}getHeight(){const e=this.getPadding(),{fillColor:t,lineHeight:r}=this.props;if(t){const t=this.splitText.length*r,o=(this.splitText.length-1)*(e.top+e.bottom)/2;return e.top+t+o+e.bottom}return this.splitText.length*(r+e.top+e.bottom)}getPadding(){const{padding:e=0}=this.props;return"number"==typeof e?{top:e,bottom:e,left:e,right:e}:e}constructor(e){super(e),this.context=document.createElement("canvas").getContext("2d"),this.splitText=this.splitTextIntoLines()}}},714548:(e,t,r)=>{r.d(t,{Sticker:()=>n});var o=r(531202);class n{drawScene(){const e=this.ctx;e&&(this.canvas.width=this.getWidth(),this.canvas.height=this.getHeight(),e.clearRect(0,0,this.canvas.width,this.canvas.height),this.layers.forEach((t=>{t.draw(e)})))}add(e){this.layers.push(e)}getCanvas(){return this.canvas}toBlob(){return new Promise(((e,t)=>{this.canvas.toBlob((r=>{r?e(r):t()}),"image/png",1)}))}getWidth(){return this.width}getHeight(){return this.height}setWidth(e){this.width=e}setHeight(e){this.height=e}loadImages(e){return new Promise(((t,r)=>{const n=[];for(const[t,r]of Object.entries(e))t&&r&&n.push((0,o.loadImage)(r,t));Promise.all(n).then((e=>{this.images=e,t(1)})).catch((e=>{r(e)}))}))}getIconUrl(e){return URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}))}getImage(e){return this.images.find((t=>t.dataset.name===e))}constructor(){this.layers=[],this.images=[],this.width=0,this.height=0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}}},173360:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="m7.58.92.06-.1A.6.6 0 0 1 8.4.7l.08.06 2.78 2.32.04.05a.6.6 0 0 1 0 .76l-.07.08-2.75 2.29a.6.6 0 0 1-.97-.37l-.01-.1V4.5H4a1 1 0 0 0-1 .88V8a1 1 0 0 0 .88 1H8a1 1 0 0 1 .12 2H4a3 3 0 0 1-3-2.82V5.5a3 3 0 0 1 2.82-3H7.5V1.2c0-.1.03-.2.08-.3l.06-.08z" fill="currentColor"/></svg>',name:"repost_12"}}r.d(t,{getIcon12Repost:()=>o})},575928:(e,t,r)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.5 5.25a.75.75 0 0 0-.74-.75H3.24a.75.75 0 0 0-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75Zm0 5a.75.75 0 0 0-.74-.75H3.24a.75.75 0 0 0-.74.75c0 .41.34.75.74.75h13.52c.4 0 .74-.33.74-.75Zm-15 5c0 .41.34.75.76.75h8.98c.42 0 .76-.33.76-.75a.75.75 0 0 0-.76-.75H3.26a.75.75 0 0 0-.76.75Z" id="article_outline_20__path-1"/></defs><g id="article_outline_20__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="article_outline_20__article_outline_20"><path id="article_outline_20__Shape" d="M0 0h20v20H0z"/><mask id="article_outline_20__mask-2" fill="#fff"><use xlink:href="#article_outline_20__path-1"/></mask><use id="article_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero" xlink:href="#article_outline_20__path-1"/></g></g></svg>',name:"article_outline_20"}}r.d(t,{getIcon20ArticleOutline:()=>o})},655246:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M14.95 3.8a2.72 2.72 0 0 0-3.86 0L5.56 9.35a4.5 4.5 0 0 0 0 6.34 4.46 4.46 0 0 0 6.32 0l2.88-2.86a.75.75 0 0 1 1.06 1.06l-2.88 2.86a5.96 5.96 0 0 1-8.44 0 6 6 0 0 1 0-8.46l5.53-5.55a4.22 4.22 0 0 1 5.98 0 4.24 4.24 0 0 1 0 6l-5.53 5.54a2.49 2.49 0 1 1-3.52-3.52l3.1-3.09a.75.75 0 0 1 1.06 1.07l-3.1 3.08a1 1 0 0 0 0 1.4.99.99 0 0 0 1.4 0l5.53-5.55a2.74 2.74 0 0 0 0-3.87z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"attach_20"}}r.d(t,{getIcon20Attach:()=>o})},486171:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 5.5c.57 0 1-.2 1.34-.52.24-.24.43-.54.55-.74l.06-.1c.15-.23.26-.37.39-.47.11-.08.3-.17.66-.17h3c.36 0 .55.09.66.17.13.1.24.24.4.48l.05.09c.12.2.3.5.55.74.33.32.77.52 1.34.52.73 0 .99 0 1.19.04.9.18 1.59.88 1.77 1.77.04.2.04.46.04 1.19v3.45c0 .85 0 1.45-.04 1.9-.04.46-.1.72-.2.92-.22.42-.57.77-.99.98-.2.1-.46.17-.91.21-.46.04-1.06.04-1.91.04h-6.9c-.85 0-1.45 0-1.91-.04a2.4 2.4 0 0 1-.91-.2 2.25 2.25 0 0 1-.99-.99 2.4 2.4 0 0 1-.2-.91c-.04-.46-.04-1.06-.04-1.91V8.5c0-.73 0-.99.04-1.19.18-.9.88-1.59 1.77-1.77.2-.04.46-.04 1.19-.04zm3-3.5c-.64 0-1.14.16-1.54.46-.39.27-.62.63-.78.9l-.08.11c-.13.22-.2.34-.3.43-.06.05-.12.1-.3.1h-.09c-.61 0-1.03 0-1.4.07a3.75 3.75 0 0 0-2.94 2.95C1 7.38 1 7.8 1 8.42v3.56c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.18.04 2 .04H13.48c.81 0 1.47 0 2-.04a3.84 3.84 0 0 0 1.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V8.41c0-.61 0-1.03-.07-1.4a3.75 3.75 0 0 0-2.95-2.94 7.5 7.5 0 0 0-1.4-.07h-.08c-.18 0-.24-.05-.3-.1-.1-.1-.17-.2-.3-.43l-.08-.12c-.16-.26-.4-.62-.78-.9-.4-.29-.9-.45-1.54-.45zm3.75 8.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm1.5 0a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"camera_outline_20"}}r.d(t,{getIcon20CameraOutline:()=>o})},432315:(e,t,r)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10.18 1.5H9c-.8 0-1.47 0-2.01.05-.63.05-1.17.16-1.67.41a4.25 4.25 0 0 0-1.86 1.86c-.25.5-.36 1.04-.41 1.67C3 6.1 3 6.86 3 7.82v4.36c0 .95 0 1.71.05 2.33.05.63.16 1.17.41 1.67a4.25 4.25 0 0 0 1.86 1.86c.5.25 1.04.36 1.67.4.61.06 1.37.06 2.33.06h1.36c.96 0 1.72 0 2.33-.05a4.39 4.39 0 0 0 1.67-.41 4.25 4.25 0 0 0 1.86-1.86c.25-.5.36-1.04.41-1.67.05-.62.05-1.38.05-2.33V8.32c0-.48 0-.73-.06-.96-.05-.2-.13-.4-.24-.58-.12-.2-.3-.37-.64-.72l-3.62-3.62a4.27 4.27 0 0 0-.72-.65 2 2 0 0 0-.58-.24c-.23-.05-.48-.05-.96-.05Zm5.32 10.65c0 1 0 1.7-.04 2.24a2.9 2.9 0 0 1-.26 1.1A2.75 2.75 0 0 1 14 16.7c-.25.13-.57.21-1.11.26-.55.04-1.25.04-2.24.04h-1.3c-1 0-1.7 0-2.24-.04a2.9 2.9 0 0 1-1.1-.26 2.75 2.75 0 0 1-1.21-1.2 2.94 2.94 0 0 1-.26-1.11c-.04-.55-.04-1.25-.04-2.24v-4.3c0-1 0-1.7.04-2.24.05-.53.13-.86.26-1.1A2.75 2.75 0 0 1 6 3.3c.25-.13.57-.21 1.11-.26C7.66 3 8.36 3 9.35 3H10v2.35c0 .4 0 .76.02 1.05.03.3.09.61.24.9.21.4.54.73.94.94.29.15.6.21.9.24.29.02.64.02 1.05.02h2.35v3.65ZM14.88 7 11.5 3.62v1.7c0 .45 0 .74.02.95.02.22.05.3.07.33a.75.75 0 0 0 .3.31c.05.02.12.05.33.07.22.02.51.02.96.02h1.7Z" clip-rule="evenodd"/></svg>',name:"document_outline_20"}}r.d(t,{getIcon20DocumentOutline:()=>o})},746337:(e,t,r)=>{function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_20__Icons-20/music_outline_20"><g id="music_outline_20__music_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.73 2.05a2.28 2.28 0 0 1 2.75 2.23v7.99c0 3.57-3.5 5.4-5.39 3.51-1.9-1.9-.06-5.38 3.52-5.38h.37V6.76L8 8.43v5.82c0 3.5-3.35 5.34-5.27 3.62l-.11-.1c-1.9-1.9-.06-5.4 3.51-5.4h.37V6.24c0-.64.05-1 .19-1.36l.05-.13c.17-.38.43-.7.76-.93.36-.26.7-.4 1.41-.54ZM6.5 13.88h-.37c-2.32 0-3.34 1.94-2.45 2.82.88.89 2.82-.13 2.82-2.45v-.37Zm9.48-1.98h-.37c-2.32 0-3.34 1.94-2.46 2.82.89.89 2.83-.13 2.83-2.45v-.37Zm-.02-7.78a.78.78 0 0 0-.92-.6L9.06 4.77c-.4.09-.54.15-.68.25a.8.8 0 0 0-.27.33c-.08.18-.1.35-.1.88v.67l7.97-1.67V4.2Z" id="music_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"music_outline_20"}}r.d(t,{getIcon20MusicOutline:()=>o})},480631:(e,t,r)=>{function o(){return{icon:'<svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z"/><path d="M10.53 1.5c.69.17 1.29.51 1.77 1.03.53.56.82 1.16 1.16 2.44l.3 1.14a.75.75 0 1 1-1.44.38l-.3-1.13c-.3-1.07-.48-1.45-.81-1.8-.28-.3-.62-.5-1.02-.6-.44-.1-.84-.08-1.75.16l-.22.05-2.23.6c-.88.24-1.3.42-1.6.63l-.07.06-.14.12c-.3.28-.49.62-.58 1.01-.1.41-.09.78.1 1.55l.1.42 1.9 7.06.11.42c.23.76.4 1.09.7 1.4.27.29.61.48 1 .58.48.1.9.08 1.98-.2l.56-.16a.75.75 0 0 1 .4 1.45l-.57.15c-1.3.34-1.96.4-2.7.22a3.48 3.48 0 0 1-1.77-1.02 4.76 4.76 0 0 1-1.1-2.2L4.25 15l-1.9-7.06c-.34-1.29-.39-1.95-.21-2.7.14-.6.43-1.15.86-1.61l.17-.17.18-.15a5.1 5.1 0 0 1 2-.93l.25-.07 2.23-.6c1.3-.34 1.96-.39 2.7-.21zm5.6 6.75a3.2 3.2 0 0 1 3.12 3.28c0 1.75-.66 2.64-3.32 4.84l-1.15.96c-.45.37-1.1.37-1.56 0l-1.41-1.17c-2.44-2.05-3.06-2.93-3.06-4.63a3.2 3.2 0 0 1 5.12-2.65l.13.1.13-.1a3.44 3.44 0 0 1 1.78-.62zm0 1.5c-.59 0-1.1.24-1.58.75l-.19.2a.5.5 0 0 1-.72 0l-.19-.2c-.47-.51-.99-.75-1.58-.75-.88 0-1.62.78-1.62 1.78 0 1.16.44 1.75 2.77 3.69l.98.8.98-.8c2.25-1.87 2.74-2.49 2.77-3.58v-.11c0-1-.74-1.78-1.62-1.78z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"narrative_outline_20"}}r.d(t,{getIcon20NarrativeOutline:()=>o})},854422:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 17a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-8.5-7a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0zm8.65 3.38 2.7-1.56a2.1 2.1 0 0 0 0-3.64l-2.7-1.56A2.1 2.1 0 0 0 7 8.44v3.12a2.1 2.1 0 0 0 3.15 1.82zm1.95-3.9c.4.23.4.8 0 1.04l-2.7 1.56a.6.6 0 0 1-.9-.52V8.44c0-.46.5-.75.9-.52z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"video_circle_outline_20"}}r.d(t,{getIcon20VideoCircleOutline:()=>o})},985447:(e,t,r)=>{function o(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.65 4c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13.26.5.4.98.4 2.32v7.8c0 1.34-.14 1.83-.4 2.32-.26.48-.65.87-1.13 1.13-.5.26-.98.4-2.32.4h-7.8c-1.34 0-1.83-.14-2.32-.4a2.73 2.73 0 0 1-1.13-1.13c-.26-.5-.4-.98-.4-2.32v-7.8c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13.5-.26.98-.4 2.32-.4h7.8Zm-.21 1.5H8.06c-.89 0-1.21.1-1.54.27-.32.17-.58.43-.75.75-.18.33-.27.65-.27 1.54v7.38c0 .89.1 1.21.27 1.54.17.32.43.58.75.75.33.18.65.27 1.54.27h7.38c.89 0 1.21-.1 1.54-.27.32-.17.58-.43.75-.75.18-.33.27-.65.27-1.54V8.06c0-.89-.1-1.21-.27-1.54a1.82 1.82 0 0 0-.75-.75c-.33-.18-.65-.27-1.54-.27Zm-5.94 10V8h5v1.5H11V11h3.5v1.5H11V14h3.5v1.5h-5Z" fill="currentColor"/></svg>',name:"explicit_24"}}r.d(t,{getIcon24Explicit:()=>o})},291772:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.59 3c2.18 0 3.23.2 4.32.79a5.54 5.54 0 0 1 2.3 2.3c.59 1.09.79 2.14.79 4.32v7.18c0 2.18-.2 3.23-.79 4.32a5.54 5.54 0 0 1-2.3 2.3c-1.09.59-2.14.79-4.32.79h-7.18c-2.18 0-3.23-.2-4.32-.79a5.54 5.54 0 0 1-2.3-2.3C3.2 20.82 3 19.77 3 17.6v-7.18c0-2.18.2-3.23.79-4.32a5.54 5.54 0 0 1 2.3-2.3C7.18 3.2 8.23 3 10.4 3h7.18Zm0 2h-7.18c-1.88 0-2.62.14-3.38.55-.64.34-1.14.84-1.48 1.48-.4.76-.55 1.5-.55 3.38v7.18c0 1.88.14 2.62.55 3.38.34.64.84 1.14 1.48 1.48.76.4 1.5.55 3.38.55h7.18c1.88 0 2.62-.14 3.38-.55a3.54 3.54 0 0 0 1.48-1.48c.4-.76.55-1.5.55-3.38v-7.18c0-1.88-.14-2.62-.55-3.38a3.54 3.54 0 0 0-1.48-1.48c-.76-.4-1.5-.55-3.38-.55ZM13 17.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h4Zm6-4.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h10Zm0-4.5a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h10Z" fill="currentColor"/></svg>',name:"article_outline_28"}}r.d(t,{getIcon28ArticleOutline:()=>o})},816630:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="attach_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="attach_outline_28__attach_outline_28"><path d="M0 0h28v28H0z"/><path d="M14.19 10.9a1 1 0 1 1 1.41 1.41l-4.17 4.17a1.5 1.5 0 0 0 0 2.12c.6.6 1.56.57 2.12 0l7.78-7.77a4 4 0 0 0-5.66-5.66L7.9 12.95a6.52 6.52 0 0 0 0 9.19 6.52 6.52 0 0 0 9.19 0l4.17-4.17a1 1 0 0 1 1.41 1.41l-4.17 4.17a8.52 8.52 0 0 1-12.02 0 8.52 8.52 0 0 1 0-12.02l7.78-7.77a6 6 0 0 1 8.48 8.48l-7.77 7.78a3.5 3.5 0 0 1-4.95-4.95l4.17-4.17Z" id="attach_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"attach_outline_28"}}r.d(t,{getIcon28AttachOutline:()=>o})},546337:(e,t,r)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 28 28"><path fill-rule="evenodd" d="M11.7 2c-2.46 0-3.53.22-4.63.8A5.47 5.47 0 0 0 4.8 5.07C4.22 6.17 4 7.24 4 9.69v8.62c0 2.45.22 3.53.8 4.62a5.46 5.46 0 0 0 2.27 2.27c1.1.58 2.17.8 4.62.8h4.62c2.45 0 3.53-.22 4.62-.8a5.46 5.46 0 0 0 2.27-2.27c.59-1.1.8-2.17.8-4.62v-5.95c0-.8-.03-1.16-.12-1.56a3.61 3.61 0 0 0-.47-1.13 6.4 6.4 0 0 0-1.02-1.2l-4.87-4.86c-.56-.57-.84-.8-1.2-1.02a3.61 3.61 0 0 0-1.12-.47A5.3 5.3 0 0 0 14 2h-2.3Zm0 2c-2.34 0-3.03.21-3.69.56a3.47 3.47 0 0 0-1.44 1.45C6.2 6.67 6 7.36 6 9.7v8.62c0 2.33.21 3.02.56 3.68a3.47 3.47 0 0 0 1.45 1.45c.66.35 1.35.56 3.68.56h4.62c2.33 0 3.02-.21 3.68-.56a3.47 3.47 0 0 0 1.45-1.45c.35-.66.56-1.35.56-3.68V12h-5.5A2.5 2.5 0 0 1 14 9.5V4H11.7Zm4.4 1.02-.1-.1V9.5a.5.5 0 0 0 .41.5h4.68a25.43 25.43 0 0 0-.11-.1L16.1 5.01Z" clip-rule="evenodd"/></svg>',name:"document_outline_28"}}r.d(t,{getIcon28DocumentOutline:()=>o})},917564:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.15 8c1.34 0 1.83.14 2.32.4.48.26.87.65 1.13 1.13l.1.19c.2.44.3.96.3 2.13v7.68c-.04 2.02-.3 2.83-.73 3.66a5 5 0 0 1-2.08 2.08c-.9.47-1.79.73-4.24.73H9.47c-2.02-.04-2.83-.3-3.66-.73a5 5 0 0 1-2.08-2.08c-.45-.86-.7-1.71-.73-3.94v-7.4c0-1.34.14-1.83.4-2.32.26-.48.65-.87 1.13-1.13l.19-.1c.4-.18.88-.28 1.88-.3h14.55Zm0 2H6.5c-.63.01-.82.06-1.01.16a.73.73 0 0 0-.32.32c-.1.2-.15.42-.16 1.18v7.29c0 1.93.13 2.6.5 3.3a3 3 0 0 0 1.26 1.25c.69.37 1.36.5 3.3.5h7.89c1.93 0 2.6-.13 3.3-.5a3 3 0 0 0 1.25-1.26c.37-.69.5-1.36.5-3.3v-7.1c0-.91-.04-1.14-.16-1.36a.73.73 0 0 0-.32-.32c-.2-.1-.38-.15-1.01-.16h-.36ZM19 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2ZM9 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm5-10a6 6 0 0 1 6 6h-2a4 4 0 0 0-8 0H8a6 6 0 0 1 6-6Z" fill="currentColor"/></svg>',name:"market_outline_28"}}r.d(t,{getIcon28MarketOutline:()=>o})},709222:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_28__music_outline_28"><path d="M0 0h28v28H0z"/><path d="M11 16.93v2.46c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H11Zm-2 2h-.46c-3.02 0-4.34 2.52-3.2 3.66C6.48 23.73 9 22.4 9 19.39v-.46Zm10.39-15.4A3 3 0 0 1 23 6.45v10.43c0 4.7-4.58 7.1-7.07 4.61-2.5-2.49-.08-7.07 4.6-7.07H21v-4.7L11 11.8V18H9V8.92c0-.95.08-1.43.31-1.96.23-.5.56-.9 1-1.23.47-.33.93-.51 1.85-.7ZM21 16.42h-.46c-3.02 0-4.34 2.52-3.2 3.66 1.14 1.14 3.66-.18 3.66-3.2v-.46Zm-.02-10.17a1 1 0 0 0-1.18-.78l-7.23 1.5c-.67.15-.88.23-1.08.37-.16.12-.27.25-.35.43-.1.23-.14.45-.14 1.14v.85l10-2.08V6.46a1 1 0 0 0 0-.1Z" id="music_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"music_outline_28"}}r.d(t,{getIcon28MusicOutline:()=>o})},763613:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M24.11 19.09c.64-.88.88-1.86.89-2.93 0-2.3-1.86-4.16-4.16-4.16a5 5 0 0 0-2.7.82l-.14.1-.14-.1a4.76 4.76 0 0 0-2.7-.82A4.16 4.16 0 0 0 11 16.16c0 1.07.25 2.06.89 2.93.66.91 1.77 1.9 3.55 3.3l1.65 1.3c.53.42 1.29.42 1.82 0l1.65-1.3c1.77-1.4 2.89-2.39 3.55-3.3zm-10.6-1.18c.48.66 1.37 1.5 3.17 2.9L18 21.87l1.32-1.04c1.8-1.42 2.7-2.25 3.18-2.9.39-.54.5-1.1.5-1.76 0-1.2-.97-2.16-2.16-2.16-.8 0-1.5.3-2.13.94l-.36.35a.5.5 0 0 1-.7 0l-.36-.35a2.9 2.9 0 0 0-2.13-.94c-1.2 0-2.16.97-2.16 2.16 0 .65.12 1.22.5 1.75z"/><path d="m7.65 3.47 3.36-.9c.78-.2 1.42-.38 1.95-.48.56-.1 1.08-.13 1.62-.02a4 4 0 0 1 2.14 1.23c.36.4.6.88.78 1.41.18.52.36 1.16.56 1.93l.68 2.54a1 1 0 0 1-1.93.52l-.67-2.5c-.22-.83-.37-1.39-.52-1.81a2.16 2.16 0 0 0-.39-.75 2 2 0 0 0-1.07-.62c-.17-.03-.4-.04-.84.04-.44.08-1 .23-1.83.46L8.2 5.4c-.82.22-1.38.37-1.81.52-.41.15-.61.27-.74.39a2 2 0 0 0-.62 1.07c-.04.17-.04.4.04.83.08.45.23 1.01.45 1.84L8.2 20.09c.22.83.37 1.4.52 1.82.15.41.27.61.4.74a2 2 0 0 0 1.06.62c.34.07.79.01 2.1-.33a1 1 0 0 1 .5 1.93c-1.18.31-2.12.55-3.01.36a4 4 0 0 1-2.15-1.24c-.36-.4-.59-.88-.78-1.4-.18-.52-.35-1.16-.56-1.94L3.58 10.53c-.21-.78-.39-1.42-.48-1.96a4.09 4.09 0 0 1-.03-1.6 4 4 0 0 1 1.24-2.15c.4-.36.88-.6 1.4-.78.52-.19 1.16-.36 1.94-.57z"/></g></svg>',name:"narrative_outline_28"}}r.d(t,{getIcon28NarrativeOutline:()=>o})},569559:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="place_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="place_outline_28__place_outline_28"><path d="M0 0h28v28H0z"/><path d="M23 12.01a9 9 0 1 0-18 0c0 3.55 2.18 7.83 6.48 12.92a3.3 3.3 0 0 0 5.04 0c4.3-5.09 6.48-9.37 6.48-12.92ZM14.84 23.8a1.3 1.3 0 0 1-1.83-.15C8.98 18.88 7 14.98 7 12a7 7 0 1 1 14 0c0 2.97-1.98 6.87-6 11.63l-.16.15ZM10 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0Zm2 0a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z" id="place_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"place_outline_28"}}r.d(t,{getIcon28PlaceOutline:()=>o})},492232:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_28__playlist_outline_28"><path d="M0 0h28v28H0z"/><path d="M24.78 4.02A1 1 0 0 1 26 5v2.1a3.6 3.6 0 0 1-2.67 3.48l-3.33.89v7.92c0 4.7-4.58 7.1-7.07 4.61-2.58-2.57-.11-6.8 5.07-7.06v-6.22a1 1 0 0 1 0-.04V8.93c-.03-1.92.91-3.29 2.68-3.88.64-.21 2-.55 4.1-1.03ZM18 18.94c-3.54.2-4.84 2.46-3.66 3.65 1.14 1.14 3.66-.18 3.66-3.2ZM8.5 17a1 1 0 0 1 0 2h-4a1 1 0 0 1 0-2h4Zm5-6a1 1 0 0 1 0 2h-9a1 1 0 0 1 0-2h9ZM24 6.26c-1.35.31-2.25.54-2.68.69-.94.31-1.34.89-1.32 1.97v.48l2.81-.75A1.6 1.6 0 0 0 24 7.1ZM15 5a1 1 0 0 1 0 2H4.5a1 1 0 1 1 0-2H15Z" id="playlist_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_28"}}r.d(t,{getIcon28PlaylistOutline:()=>o})},495191:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="poll_square_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="poll_square_outline_28__poll_square_outline_28"><path id="poll_square_outline_28__poll_outline_28" d="M0 0h28v28H0z"/><path d="M10.7 5c-2.14 0-2.9.15-3.69.57-.63.33-1.1.81-1.44 1.44C5.15 7.8 5 8.56 5 10.7v6.62c0 2.13.15 2.9.57 3.68.33.63.81 1.1 1.44 1.44.78.42 1.55.57 3.68.57h6.62c2.13 0 2.9-.15 3.68-.57A3.45 3.45 0 0 0 22.43 21c.42-.78.57-1.55.57-3.68v-6.62c0-2.13-.15-2.9-.57-3.68A3.45 3.45 0 0 0 21 5.57C20.2 5.15 19.44 5 17.3 5h-6.62Zm0-2h6.6c2.68 0 3.65.28 4.63.8a5.45 5.45 0 0 1 2.27 2.27c.52.98.8 1.95.8 4.62v6.62c0 2.67-.28 3.64-.8 4.62a5.45 5.45 0 0 1-2.27 2.27c-.98.52-1.95.8-4.62.8h-6.62c-2.67 0-3.64-.28-4.62-.8a5.45 5.45 0 0 1-2.27-2.27c-.52-.98-.8-1.95-.8-4.62v-6.62c0-2.67.28-3.64.8-4.62A5.45 5.45 0 0 1 6.07 3.8c.98-.52 1.95-.8 4.62-.8Zm.3 16a1 1 0 0 1-2 0v-6a1 1 0 0 1 2 0v6Zm4 0a1 1 0 0 1-2 0V9a1 1 0 0 1 2 0v10Zm4 0a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0v4Z" id="poll_square_outline_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"poll_square_outline_28"}}r.d(t,{getIcon28PollSquareOutline:()=>o})},589810:(e,t,r)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="video_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="video_outline_28__video_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm-2.05 5.12c.35 0 .68.1.98.26l5.08 2.93a1.95 1.95 0 0 1 0 3.38l-5.08 2.93a1.95 1.95 0 0 1-2.93-1.7v-5.84c0-1.08.88-1.96 1.95-1.96Zm.05 2.03v5.7L16.94 14 12 11.15Z" id="video_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"video_outline_28"}}r.d(t,{getIcon28VideoOutline:()=>o})},613039:(e,t,r)=>{function o(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_56__Icons-56/playlist_outline_56" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_56__playlist_outline_28"><path id="playlist_outline_56__playlist_outline_56" d="M0 0h56v56H0z"/><path d="M39 38.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.04-2.04-2.3-5.5-.58-8.3C27 36.44 30.77 34.61 36 34.5V16.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 51 9.5v4.2a6.7 6.7 0 0 1-4.97 6.48L39 22.05Zm-3-1.42h-.4c-4 .18-6.67 1.53-7.91 3.54-1.02 1.66-.88 3.6.14 4.62.98.98 2.96 1.14 4.7.22 2.12-1.11 3.47-3.5 3.47-6.96V37.5ZM27.5 22a1.5 1.5 0 0 1 0 3h-19a1.5 1.5 0 0 1 0-3h19ZM48 11.38a83.8 83.8 0 0 0-6.03 1.54l-.21.08c-1.93.71-2.8 2.05-2.76 4.33v1.62l6.25-1.67A3.7 3.7 0 0 0 48 13.71ZM30.5 10a1.5 1.5 0 0 1 0 3h-22a1.5 1.5 0 0 1 0-3h22Z" id="playlist_outline_56__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_56"}}r.d(t,{getIcon56PlaylistOutline:()=>o})},202758:(e,t,r)=>{function o(){return{icon:'<svg fill="none" height="56" viewBox="0 0 56 56" width="56" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M29 39.5v2.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.03-2.04-2.29-5.5-.57-8.3C17 39.94 20.77 38.11 26 38V11.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 41 4.5v4.2a6.7 6.7 0 0 1-4.97 6.48L29 17.05V38zm6.25-27.22L29 13.95v-1.62c-.03-2.28.83-3.62 2.76-4.33l.21-.08A83.8 83.8 0 0 1 38 6.38v2.33a3.7 3.7 0 0 1-2.75 3.57zM26 42.42c0 3.47-1.35 5.85-3.46 6.97-1.75.91-3.73.76-4.7-.23-1.02-1.01-1.17-2.95-.15-4.61 1.24-2.02 3.9-3.36 7.92-3.54L26 41z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"song_outline_56"}}r.d(t,{getIcon56SongOutline:()=>o})},909438:(e,t,r)=>{r.d(t,{ERRORS:()=>o});const o={NOT_FOUND_WEBGL_CONTEXT:"WebGL context not found",TEXTURE_CREATE_FAILED:"Create texture failed",SHADER_COMPILE_FAILED:"Shader compile failed",PROGRAM_CREATE_FAILED:"Create program failed",PROGRAM_CREATE_FRAMEBUFFER_FAILED:"Create framebuffer failed",PROGRAM_FRAMEBUFFER_INCOMPLETE:"Incomplete framebuffer",FILTER_NOT_FOUND:"Filter not found",FILTER_LOADING_TEXTURES_FAILED:"Filter loading textures failed"}},153137:(e,t,r)=>{r.d(t,{Renderer:()=>E});var o=r(601951),n=r(730991),s=r(909438),i=r(405519),a=r(989900),l=r(175811),c=r(205483),d=r(5973),h=r(810151),u=r(217368),p=r(330995),_=r(134773),g=r(813412);const m={preserveDrawingBuffer:!0,premultipliedAlpha:!1},f=document.createElement("canvas"),v=f.getContext("webgl",m)||f.getContext("experimental-webgl",m),S={};class E{static getOrCreateTexture(e,t,r){const o=r?`${t.src}_auto`:t.src;if(!S[o]){let s;s=r?E.getAuto(t):t;const i=new n.Texture(e);i.attachImage(e,s),S[o]=i}return S[o]}static loadTextures(e,t){return new Promise((r=>{const o=[],n=t.map((e=>p.imageCacheGlobal.get(e)));Promise.all(n).then((t=>{t.forEach((t=>{const r=E.getOrCreateTexture(e,t);o.push(r)})),r(o)})).catch((()=>{}))}))}static getAuto(e){var t;const r=document.createElement("canvas");let o=r.getContext("2d");if(!o)return r;r.width=e.width,r.height=e.height,o.drawImage(e,0,0,e.width,e.height);let n=e.width*e.height,s=255,i=o.getImageData(0,0,e.width,e.height),a=i.data;function l(e,t,r,o){t+r>=e&&(t=(e-1)/2,r=(e-1)/2);const n=function(e,t,r,o){let n,s=256,i=[];for(let e=0;e<256;e++)i.push(0);let l=0;for(n=0;n<e;n++)l=4*n,i[a[l+o]]+=1;for(n=1;n<s;n++)i[n]+=i[n-1];let c={};for(n=0;n<s&&i[n]<=t;)n++;for(c.min=n,n=255;n<s&&i[n]>e-r;)n--;return n<255&&n++,c.max=n,c}(e,t,r,o),{min:i,max:l}=n;!function(e,t,r,o){let n,i;if(r<=t)for(n=0;n<e;n++)i=4*n,a[i+o]=127.5;else{let l=new Array(256);for(n=0;n<t;n++)l[n]=0;for(n=t;n<r;n++)l[n]=(n-t)*s/(r-t)+.5;for(n=r;n<256;n++)l[n]=s;for(n=0;n<e;n++)i=4*n,a[i+o]=l[a[i+o]]}}(e,i,l,o)}!function(e,t,r){l(e,t,r,0),l(e,t,r,1),l(e,t,r,2)}(n,.01*n,.01*n),o.putImageData(i,0,0);const c=document.createElement("canvas");return c.width=e.width,c.height=e.height,o=c.getContext("2d"),null==(t=o)||t.drawImage(r,0,0,r.width,r.height),r}render(e,t,r,o,n={},i,a){return new Promise((l=>{requestAnimationFrame((()=>{if(!v)throw new Error(s.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const c=(0,_.getColorTable)(o);if(!c)throw new Error(s.ERRORS.FILTER_NOT_FOUND);const d=E.getOrCreateTexture(v,r,a);E.loadTextures(v,c).then((r=>{let o=this.postProcessTexture;if(this.baseColorCorrectionProgram.draw({width:e,height:t,uniforms:{u_exposure:n.exposure,u_contrast:n.contrast,u_warmth:n.warmth,u_saturation:n.saturation,u_amount:n.amount},textures:[d,...r]},this.colorCorrectionTexture),this.postProcessProgram.draw({width:e,height:t,uniforms:{u_vignette:n.vignette,u_sharpness:n.sharpness,u_sourceSize:n.sourceSize,u_grain:n.grain},textures:[this.colorCorrectionTexture]},this.postProcessTexture),i&&i.isEnabled){const r=i.form===g.BLUR_TYPES.ROUND?this.roundBlurProgram:this.squareBlurProgram;this.triangleBlurProgram.draw({width:e,height:t,uniforms:{u_delta:[i.size/e,0]},textures:[this.postProcessTexture]},this.blurTexture1),this.triangleBlurProgram.draw({width:e,height:t,uniforms:{u_delta:[0,i.size/t]},textures:[this.blurTexture1]},this.blurTexture2),o=this.blurTexture2,i.position&&(r.draw({width:e,height:t,uniforms:{u_position:i.position},textures:[this.blurTexture2,this.postProcessTexture]},this.resultBlurTexture),o=this.resultBlurTexture)}return this.flippedProgram.draw({width:e,height:t,uniforms:{},textures:[o]}),l(f)})).catch((e=>{console.error(new Error(e))}))}))}))}constructor(){this.baseColorCorrectionProgram=new o.ShaderProgram(v,i.default,a.default),this.postProcessProgram=new o.ShaderProgram(v,i.default,l.default),this.flippedProgram=new o.ShaderProgram(v,i.default,c.default),this.triangleBlurProgram=new o.ShaderProgram(v,i.default,d.default),this.roundBlurProgram=new o.ShaderProgram(v,i.default,h.default),this.squareBlurProgram=new o.ShaderProgram(v,i.default,u.default),this.colorCorrectionTexture=new n.Texture(v),this.postProcessTexture=new n.Texture(v),this.blurTexture1=new n.Texture(v),this.blurTexture2=new n.Texture(v),this.resultBlurTexture=new n.Texture(v)}}},636577:(e,t,r)=>{r.d(t,{Shader:()=>n});var o=r(909438);class n{constructor(e,t,r){const n=e.createShader(r);if(!n)throw new Error(o.ERRORS.SHADER_COMPILE_FAILED);e.shaderSource(n,t),e.compileShader(n);if(!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(`${e.getShaderInfoLog(n)}`);this.shader=n}}},601951:(e,t,r)=>{r.d(t,{ShaderProgram:()=>a});var o=r(636577),n=r(730991),s=r(909438),i=r(659397);class a{createProgram(e,t){const r=this.gl.createProgram();if(!r)throw new Error(s.ERRORS.PROGRAM_CREATE_FAILED);this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r);if(!this.gl.getProgramParameter(r,this.gl.LINK_STATUS))throw new Error(`${this.gl.getProgramInfoLog(r)}`);return r}destroy(){this.gl.deleteProgram(this.program)}attribute(e,t){const r=this.gl.getAttribLocation(this.program,e),o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(r),this.gl.vertexAttribPointer(r,2,this.gl.FLOAT,!1,0,0)}uniforms(e){this.gl.useProgram(this.program);for(let t in e){if(!e.hasOwnProperty(t))continue;const r=this.gl.getUniformLocation(this.program,t),o=e[t];if(Array.isArray(o))switch(o.length){case 1:this.gl.uniform1fv(r,new Float32Array(o));break;case 2:this.gl.uniform2fv(r,new Float32Array(o));break;case 3:this.gl.uniform3fv(r,new Float32Array(o));break;case 4:this.gl.uniform4fv(r,new Float32Array(o))}else(0,i.isNumber)(o)&&this.gl.uniform1f(r,o)}}textures(e,t){this.gl.useProgram(this.program),e.forEach(((e,r)=>{t?(e.use(this.gl,r),this.gl.uniform1i(this.gl.getUniformLocation(this.program,`u_image${r}`),r)):n.Texture.unuse(this.gl,r)}))}draw(e,t){this.gl.useProgram(this.program),t&&(t.updateSize(this.gl,e.width,e.height),this.bindTexture(t.texture)),this.gl.canvas.width=e.width,this.gl.canvas.height=e.height,this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight);const r=e.width,o=e.height;this.attribute("a_position",[0,0,r,0,0,o,0,o,r,0,r,o]),this.attribute("a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1]),this.uniforms(Object.assign(e.uniforms,{u_resolution:[e.width,e.height]})),e.textures&&this.textures(e.textures,!0),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,6),e.textures&&this.textures(e.textures,!1),t&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}bindTexture(e,t){if(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0),t){const e=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(e!==this.gl.FRAMEBUFFER_COMPLETE){let t="";switch(e){case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:t="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:t="There is no attachment.";break;case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:t="Height and width of the attachment are not the same.";break;case this.gl.FRAMEBUFFER_UNSUPPORTED:t="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer."}throw new Error(`${s.ERRORS.PROGRAM_FRAMEBUFFER_INCOMPLETE}. ${t}`)}}}constructor(e,t,r){if(!e)throw new Error(s.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const n=new o.Shader(e,t,e.VERTEX_SHADER).shader,i=new o.Shader(e,r,e.FRAGMENT_SHADER).shader;this.gl=e,this.program=this.createProgram(n,i),this.framebuffer=e.createFramebuffer()}}},730991:(e,t,r)=>{r.d(t,{Texture:()=>n});var o=r(909438);class n{attachImage(e,t){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}updateSize(e,t,r){e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null)}use(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}static unuse(e,t){e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}destroy(e){e.deleteTexture(this.texture)}constructor(e,t,r){if(!e)throw new Error(o.ERRORS.NOT_FOUND_WEBGL_CONTEXT);const n=e.createTexture();if(!n)throw new Error(o.ERRORS.TEXTURE_CREATE_FAILED);this.texture=n,e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&r&&this.updateSize(e,t,r),e.bindTexture(e.TEXTURE_2D,null)}}},134773:(e,t,r)=>{r.d(t,{getColorTable:()=>R});var o=r(600582),n=r(780699),s=r(99847),i=r(137429),a=r(804194),l=r(167811),c=r(940760),d=r(93790),h=r(350704),u=r(791417),p=r(393353),_=r(702146),g=r(527622),m=r(265558),f=r(770805),v=r(450795),S=r(239022),E=r(619978),T=r(713932),y=r(150531),x=r(773333),w=r(825727),C=r(128399);const b={regular:o,nox:n,vesper:s,latona:i,liber:a,luna:l,minerva:c,mitra:d,pro:h,terra:u,veles:p,vesta:_,zaria:g,sepia:m,genius:f,horus:v,fortuna:S},I=[E,T,y,x,w,C];function R(e){const t=b[e];if(t)return[...I,t]}},330995:(e,t,r)=>{r.d(t,{imageCacheGlobal:()=>n});var o=r(531202);const n=new class{get(e){return new Promise(((t,r)=>{const n=this.images[e];n?t(n):(0,o.loadImage)(e).then((r=>{this.setImage(e,r),t(r)})).catch(r)}))}setImage(e,t){this.images[e]=t}constructor(){this.images={}}}},493809:(e,t,r)=>{r.d(t,{rendererScene:()=>a});var o=r(842386),n=r(813412),s=r(531202),i=r(779870);const a=new class{draw(e,t,r,n,s,i,a,l){return new Promise(((c,d)=>{const h=r[0];this.canvas.width=e,this.canvas.height=t,(0,o.drawBlurFromImage)(this.canvas,h.canvas,h.avgColor);const u=h.width*h.scale,p=h.height*h.scale,_=h.x-u/2,g=h.y-p/2;if(this.drawImage(h.canvas,u*s,p*s,_*s,g*s,h.rotate),l){const e=document.createElement("canvas");e.width=u*s,e.height=p*s;const t=e.getContext("2d"),r=l.getContext("2d");if(r&&t){const o=r.getImageData(0,0,u*s,p*s);t.putImageData(o,0,0),t.drawImage(e,0,0,u*s,p*s),this.drawImage(e,u*s,p*s,_*s,g*s,h.rotate)}}this.drawBrush(n,s),this.drawLayers(r,s,e,t,i,a).then((()=>{this.canvas.toBlob((e=>{c({blob:e,width:this.canvas.width,height:this.canvas.height})}),"image/jpeg",1)})).catch((e=>{d(e)}))}))}drawImage(e,t,r,o,n,s){this.context&&(this.context.save(),this.context.imageSmoothingEnabled=!0,this.context.translate(o,n),this.context.translate(t/2,r/2),this.context.rotate(s*Math.PI/180),this.context.translate(-t/2,-r/2),this.context.drawImage(e,0,0,t,r),this.context.restore())}drawBrush(e,t){const{context:r}=this;r&&(r.save(),r.lineCap="round",r.lineJoin="round",e.forEach((e=>{r.lineWidth=e.width*n.BRUSH_WIDTH_COEFFICIENT*t,r.strokeStyle=(0,o.hexToRgba)(e.color,e.opacity),r.beginPath(),r.moveTo(e.path[0][0]*t/e.scale,e.path[0][1]*t/e.scale),e.path.forEach((o=>{r.lineTo(o[0]*t/e.scale,o[1]*t/e.scale)})),r.stroke()})),r.restore())}drawLayers(e,t,r,o,s,a){return new Promise(((r,o)=>{const l=[];e.forEach(((e,r)=>{let o=null;if(e.type!==n.LAYER_TYPES.BACKGROUND){if(e.type===n.LAYER_TYPES.STICKER){const t=s(e.id,n.STICKER_LARGE);o=this.fetchImage(t,e.width*e.scale/e.baseScale,e.height*e.scale/e.baseScale,e.x,e.y,e.rotate)}else if(e.type===n.LAYER_TYPES.IMAGE)o=this.fetchImage(e.url,e.width*e.scale,e.height*e.scale,e.x,e.y,e.rotate);else if(e.type===n.LAYER_TYPES.TEXT){const n=document.querySelector(`[data-index="${r}"] [data-name="${i.layerSelector}"]`);n&&(o=this.drawTextLayer(e,n,t,a))}o&&l.push(o)}})),Promise.all(l).then((e=>{e.forEach((e=>{const r=e.width,o=e.height,n=e.x-r/2,s=e.y-o/2;this.drawImage(e.image,r*t,o*t,n*t,s*t,e.rotate)})),r()})).catch((e=>{o(e)}))}))}drawTextLayer(e,t,r,s){return new Promise(((i,a)=>{const l=document.createElement("canvas"),c=l.getContext("2d");if(!c)return a();const d=100;l.width=t.offsetWidth/s*n.CANVAS_SCALE*r+d,l.height=t.offsetHeight/s*n.CANVAS_SCALE*r+d;let h="";switch(e.fontStyle){case"classic":h="RobotoPE";break;case"cursive":h="PacificoPE";break;case"marker":h="AmaticPE";break;case"italics":h="TTCommonsPE";break;case"typewriter":h="GoraPE";break;case"poster":h="DinPE";break;case"retro":h="Rodchenko";break;case"impact":h="Impact";break;case"lobster":h="Lobster"}const u=e.fontSize*e.scale*n.FONT_SIZE_COEFFICIENT*n.CANVAS_SCALE*r/e.baseScale;c.font=`${u}px ${h}, serif`,c.fillStyle=e.color,c.textAlign="center",c.textBaseline="top",(0,o.printAtWordWrap)(c,e.text,l.width/2,50,u,l.width-d),i({image:l,width:l.width/n.CANVAS_SCALE/r,height:l.height/n.CANVAS_SCALE/r,x:e.x,y:e.y,rotate:e.rotate})}))}fetchImage(e,t,r,o,n,i){return new Promise((a=>{(0,s.loadImage)(e).then((e=>{a({image:e,width:t,height:r,x:o,y:n,rotate:i})})).catch((e=>{console.error(e)}))}))}constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}}},455566:(e,t,r)=>{r.d(t,{ADD_DRAWING:()=>q,ADD_LAYER_IMAGE:()=>B,ADD_LAYER_STICKER:()=>D,ADD_LAYER_TEXT:()=>M,DELETE_LAYER:()=>K,RESET_SEGMENTATION_DATA:()=>ne,SET_CURRENT_BACKGROUND_ID:()=>te,SET_CURRENT_BACKGROUND_TYPE:()=>J,SET_CURRENT_LAYER:()=>P,SET_CURRENT_PHOTO_URL:()=>ee,SET_CURRENT_STICKER_PACK_INDEX:()=>a,SET_CURRENT_TAB:()=>i,SET_DATA:()=>re,SET_DATA_LOADED:()=>o,SET_HEADER_SCROLL_POSITION:()=>l,SET_LAYERS_SCALE:()=>U,SET_LAYERS_SHIFT:()=>j,SET_LAYER_COLOR:()=>W,SET_LAYER_FONT_SIZE:()=>Y,SET_LAYER_FONT_STYLE:()=>z,SET_LAYER_POSITION:()=>F,SET_LAYER_SCALE:()=>H,SET_LAYER_TEXT:()=>Z,SET_SAVE_LOADING:()=>s,SET_SEGMENTATION_DATA:()=>oe,SET_SETTING_AUTO_CORRECTION:()=>T,SET_SETTING_BLUR_ENABLE:()=>f,SET_SETTING_BLUR_FORM:()=>v,SET_SETTING_BLUR_POSITION:()=>E,SET_SETTING_BLUR_SIZE:()=>S,SET_SETTING_BRUSH_OPACITY:()=>h,SET_SETTING_BRUSH_WIDTH:()=>d,SET_SETTING_COLOR:()=>c,SET_SETTING_COLOR_CORRECTION:()=>_,SET_SETTING_CROPPED:()=>x,SET_SETTING_CROP_ASPECT:()=>y,SET_SETTING_ENHANCE:()=>O,SET_SETTING_FILTER:()=>g,SET_SETTING_FILTER_AMOUNT:()=>m,SET_SETTING_FLIP_X:()=>w,SET_SETTING_FLIP_Y:()=>C,SET_SETTING_FONT_FAMILY:()=>p,SET_SETTING_FONT_SIZE:()=>u,SET_SETTING_LOADING:()=>k,SET_SETTING_ROTATE:()=>b,SET_SETTING_SEGMENTATION:()=>I,SET_SETTING_SEGMENTATION_BACKGROUND_COLOR:()=>N,SET_SETTING_SEGMENTATION_DELETE:()=>A,SET_SETTING_SEGMENTATION_INVERSE:()=>R,SET_SETTING_SEGMENTATION_RESET:()=>L,SET_SHOW_DROP_BOX:()=>n,START_LAYER_SCALE:()=>G,TOGGLE_TEXT_EDIT:()=>X,UPDATE_BACKGROUND_LAYER:()=>V,UPDATE_DRAWING:()=>Q,UPDATE_LAYERS_AFTER_CROP:()=>$});const o="SET_DATA_LOADED",n="SET_SHOW_DROP_BOX",s="SET_SAVE_LOADING",i="SET_CURRENT_TAB",a="SET_CURRENT_STICKER_PACK_INDEX",l="SET_HEADER_SCROLL_POSITION",c="SET_SETTING_COLOR",d="SET_SETTING_BRUSH_WIDTH",h="SET_SETTING_BRUSH_OPACITY",u="SET_SETTING_FONT_SIZE",p="SET_SETTING_FONT_FAMILY",_="SET_SETTING_COLOR_CORRECTION",g="SET_SETTING_FILTER",m="SET_SETTING_FILTER_AMOUNT",f="SET_SETTING_BLUR_ENABLE",v="SET_SETTING_BLUR_FORM",S="SET_SETTING_BLUR_SIZE",E="SET_SETTING_BLUR_POSITION",T="SET_SETTING_AUTO_CORRECTION",y="SET_SETTING_CROP_ASPECT",x="SET_SETTING_CROPPED",w="SET_SETTING_FLIP_X",C="SET_SETTING_FLIP_Y",b="SET_SETTING_ROTATE",I="SET_SETTING_SEGMENTATION",R="SET_SETTING_SEGMENTATION_INVERSE",A="SET_SETTING_SEGMENTATION_DELETE",L="SET_SETTING_SEGMENTATION_RESET",N="SET_SETTING_SEGMENTATION_BACKGROUND_COLOR",k="SET_SETTING_LOADING",O="SET_SETTING_ENHANCE",P="SET_CURRENT_LAYER",D="ADD_LAYER_STICKER",M="ADD_LAYER_TEXT",B="ADD_LAYER_IMAGE",F="SET_LAYER_POSITION",H="SET_LAYER_SCALE",U="SET_LAYERS_SCALE",j="SET_LAYERS_SHIFT",G="START_LAYER_SCALE",W="SET_LAYER_COLOR",Y="SET_LAYER_FONT_SIZE",z="SET_LAYER_FONT_STYLE",Z="SET_LAYER_TEXT",X="TOGGLE_TEXT_EDITOR",V="UPDATE_BACKGROUND_LAYER",K="DELETE_LAYER",$="UPDATE_LAYERS_AFTER_CROP",q="ADD_VECTOR",Q="UPDATE_DRAWING",J="SET_CURRENT_BACKGROUND_TYPE",ee="SET_CURRENT_PHOTO_URL",te="SET_CURRENT_BACKGROUND_ID",re="SET_DATA",oe="SET_SEGMENTATION_DATA",ne="RESET_SEGMENTATION_DATA"},428661:(e,t,r)=>{r.d(t,{setBackgroundType:()=>n,setCurrentBackgroundId:()=>i,setCurrentPhotoUrl:()=>s});var o=r(455566);const n=(e,t=!0)=>({type:o.SET_CURRENT_BACKGROUND_TYPE,value:e,canUndo:t}),s=(e,t=!0)=>({type:o.SET_CURRENT_PHOTO_URL,value:e,canUndo:t}),i=(e,t=!0)=>({type:o.SET_CURRENT_BACKGROUND_ID,value:e,canUndo:t})},891687:(e,t,r)=>{r.d(t,{setCrop:()=>c});var o=r(50533),n=r(428661),s=r(2413),i=r(709483),a=r(234448),l=r(822188);const c=e=>t=>{(0,o.batch)((()=>{e.hasOwnProperty("url")&&t((0,n.setCurrentPhotoUrl)(e.url)),e.hasOwnProperty("data")&&t((0,s.setData)(e.data)),e.hasOwnProperty("isCropped")&&t((0,i.setCropped)(e.isCropped)),e.hasOwnProperty("flipX")&&t((0,i.setFlipX)(e.flipX)),e.hasOwnProperty("flipY")&&t((0,i.setFlipY)(e.flipY)),e.hasOwnProperty("rotate")&&t((0,i.setRotate)(e.rotate)),e.hasOwnProperty("layers")&&t((0,a.updateLayersAfterCrop)(e.layers)),e.hasOwnProperty("drawings")&&t((0,l.updateDrawings)(e.drawings))}))}},2413:(e,t,r)=>{r.d(t,{setData:()=>n});var o=r(455566);const n=e=>({type:o.SET_DATA,payload:e})},822188:(e,t,r)=>{r.d(t,{addDrawing:()=>n,updateDrawings:()=>s});var o=r(455566);const n=e=>({type:o.ADD_DRAWING,payload:e}),s=e=>({type:o.UPDATE_DRAWING,payload:e})},234448:(e,t,r)=>{r.d(t,{addLayerImage:()=>u,addLayerSticker:()=>h,addLayerText:()=>p,closeTextEditor:()=>b,deleteLayer:()=>C,setCurrentLayer:()=>c,setLayerColor:()=>S,setLayerFontSize:()=>E,setLayerFontStyle:()=>T,setLayerPosition:()=>m,setLayerScale:()=>f,setLayerText:()=>y,setLayersScale:()=>_,setLayersShift:()=>g,startLayerScale:()=>v,toggleTextEditor:()=>x,updateBackgroundLayer:()=>w,updateLayersAfterCrop:()=>I});var o=r(350409),n=r(489143),s=r(455566),i=r(659397),a=r(842386),l=r(813412);const c=e=>({type:s.SET_CURRENT_LAYER,index:e}),d=(e,t,r=!0,o)=>(n,s)=>{const{items:i}=s().present.layers;n({type:e,payload:t,canUndo:o}),r&&n(c(i.length))},h=(e,t=!0)=>d(s.ADD_LAYER_STICKER,{type:l.LAYER_TYPES.STICKER,id:e.id,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,canDelete:e.canDelete,scale:e.scale,baseScale:e.baseScale},!0,t),u=(e,t=!0)=>d(s.ADD_LAYER_IMAGE,{type:l.LAYER_TYPES.IMAGE,url:e.url,x:e.x,y:e.y,width:e.width,height:e.height,rotate:e.rotate,clickableZones:e.clickableZones,canDelete:e.canDelete,scale:e.scale,baseScale:1},!0,t),p=(e,t,r=!0)=>(c,h)=>{var u;const{data:p,settings:_,layers:g}=h().present,{shiftX:m,shiftY:f,globalScale:v}=g,S=(0,o.getMarginTop)(h());let E,T=p.artboardWidth/2,y=p.artboardHeight/2-S,x=(0,i.decodeHTMLEntities)(p.placeholders[(0,a.irand)(0,p.placeholders.length-1)]),w=0,C=!1,b=_.fontStyle,I=_.color,R=_.fontSize,A=1,L=1;t&&(T=void 0!==t.x?t.x:T,y=void 0!==t.y?t.y:y,x=void 0!==t.text?t.text:x,w=void 0!==t.rotate?t.rotate:w,C=void 0!==t.isEdit?t.isEdit:C,b=void 0!==t.style?t.style:b,I=void 0!==t.color?t.color:I,R=void 0!==t.fontSize?t.fontSize:R,E=t.initialFontSize,A=void 0!==t.scale?t.scale:A,L=void 0!==t.baseScale?t.baseScale:L),T=1!==L?T/L:T,y=1!==L?y/L:y,null==(u=p.helpers)||u.sendStat("add_text"),e&&c((0,n.setMode)(l.TABS.TEXT)),c(d(s.ADD_LAYER_TEXT,{type:l.LAYER_TYPES.TEXT,text:x,x:T-m/v,y:y-f/v,rotate:w,isEdit:C,fontSize:R,initialFontSize:E,fontStyle:b,color:I,scale:A,canDelete:!0,baseScale:L},e,r))},_=(e,t)=>(r,o)=>{const{layers:n}=o().present,{items:i,shiftX:a,shiftY:c}=n,d=i.find((e=>e.type===l.BACKGROUND_MODES.BACKGROUND)),h=(d.width*t-d.width)/a,u=(d.height*t-d.height)/c,p=d.width*e-d.width,_=d.height*e-d.height,g=1===t?-p/2:-p/Math.abs(h),m=1===t?-_/2:-_/Math.abs(u);r({type:s.SET_LAYERS_SCALE,payload:{scale:e,shiftX:g,shiftY:m}})},g=(e,t)=>(r,o)=>{const{layers:n}=o().present,{shiftX:i,shiftY:a,items:c,globalScale:d}=n,h=c.find((e=>e.type===l.BACKGROUND_MODES.BACKGROUND));if(!h)return;const u=i+e,p=a+t,_=h.width-h.width*d,g=h.height-h.height*d,m=u>0?0:u<_?_:u,f=p>0?0:p<g?g:p;r({type:s.SET_LAYERS_SHIFT,payload:{shiftX:m,shiftY:f}})},m=(e,t)=>(r,o)=>{const{currentIndex:n,items:i}=o().present.layers;null!==n&&i[n]&&r({type:s.SET_LAYER_POSITION,payload:{x:e,y:t}})},f=(e,t)=>(r,o)=>{const{currentIndex:n,items:i}=o().present.layers;null!==n&&i[n]&&r({type:s.SET_LAYER_SCALE,payload:{scale:e,rotate:t}})},v=()=>({type:s.START_LAYER_SCALE}),S=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:s.SET_LAYER_COLOR,payload:{color:e}})},E=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:s.SET_LAYER_FONT_SIZE,payload:{fontSize:e}})},T=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:s.SET_LAYER_FONT_STYLE,payload:{fontStyle:e}})},y=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:s.SET_LAYER_TEXT,payload:{text:e}})},x=e=>(t,r)=>{const{currentIndex:o,items:n}=r().present.layers;null!==o&&n[o]&&t({type:s.TOGGLE_TEXT_EDIT,payload:{isEdit:e}})},w=(e,t=!0)=>({type:s.UPDATE_BACKGROUND_LAYER,payload:e,canUndo:t}),C=()=>(e,t)=>{const{currentIndex:r,items:o}=t().present.layers,{helpers:i}=t().present.data;if(null===r)return;const a=o[r];if(a){var c;if(a.type===l.LAYER_TYPES.STICKER)null==(c=i)||c.sendStat("delete_sticker");else if(a.type===l.LAYER_TYPES.TEXT){var d;null==(d=i)||d.sendStat("delete_text")}e((0,n.setShowDropBox)(!1)),e({type:s.DELETE_LAYER,index:r})}},b=()=>(e,t)=>{const{currentIndex:r,items:o}=t().present.layers;if(null===r)return;const n=o[r];n&&n.type===l.LAYER_TYPES.TEXT&&(o[r].text.trim()?e(x(!1)):e(C()))},I=e=>({type:s.UPDATE_LAYERS_AFTER_CROP,items:e})},72353:(e,t,r)=>{r.d(t,{resetSegmentationData:()=>s,setSegmentationData:()=>n});var o=r(455566);const n=e=>({type:o.SET_SEGMENTATION_DATA,payload:e}),s=()=>({type:o.RESET_SEGMENTATION_DATA})},709483:(e,t,r)=>{r.d(t,{resetSegmentationSettings:()=>I,setAspect:()=>v,setAutoCorrection:()=>f,setBlurEnable:()=>p,setBlurForm:()=>_,setBlurPosition:()=>m,setBlurSize:()=>g,setBrushOpacity:()=>a,setBrushWidth:()=>i,setColor:()=>s,setColorCorrection:()=>d,setCropped:()=>S,setEnhance:()=>R,setFilter:()=>h,setFilterAmount:()=>u,setFlipX:()=>E,setFlipY:()=>T,setFontSize:()=>l,setFontStyle:()=>c,setLoading:()=>A,setRotate:()=>y,setSegmentation:()=>x,setSegmentationBackgroundColor:()=>C,setSegmentationDelete:()=>b,setSegmentationInverse:()=>w});var o=r(234448),n=r(455566);const s=e=>(t,r)=>{const{currentIndex:s,items:i}=r().present.layers;s&&!i[s]||t((0,o.setLayerColor)(e)),t({type:n.SET_SETTING_COLOR,color:e})},i=e=>({type:n.SET_SETTING_BRUSH_WIDTH,brushWidth:Math.max(.1,e)}),a=e=>({type:n.SET_SETTING_BRUSH_OPACITY,brushOpacity:e}),l=e=>(t,r)=>{const{currentIndex:s,items:i}=r().present.layers;s&&!i[s]||t((0,o.setLayerFontSize)(e)),t({type:n.SET_SETTING_FONT_SIZE,fontSize:e})},c=e=>(t,r)=>{const{currentIndex:s,items:i}=r().present.layers;s&&!i[s]||t((0,o.setLayerFontStyle)(e)),t({type:n.SET_SETTING_FONT_FAMILY,fontStyle:e})},d=(e,t)=>({type:n.SET_SETTING_COLOR_CORRECTION,filter:e,value:t}),h=e=>({type:n.SET_SETTING_FILTER,name:e}),u=e=>({type:n.SET_SETTING_FILTER_AMOUNT,value:e}),p=e=>({type:n.SET_SETTING_BLUR_ENABLE,isEnabled:e}),_=e=>({type:n.SET_SETTING_BLUR_FORM,form:e}),g=e=>({type:n.SET_SETTING_BLUR_SIZE,size:e}),m=e=>({type:n.SET_SETTING_BLUR_POSITION,position:e}),f=e=>({type:n.SET_SETTING_AUTO_CORRECTION,isAutoCorrection:e}),v=e=>({type:n.SET_SETTING_CROP_ASPECT,aspect:e}),S=e=>({type:n.SET_SETTING_CROPPED,isCropped:e}),E=e=>({type:n.SET_SETTING_FLIP_X,value:e}),T=e=>({type:n.SET_SETTING_FLIP_Y,value:e}),y=e=>({type:n.SET_SETTING_ROTATE,value:e}),x=e=>({type:n.SET_SETTING_SEGMENTATION,value:e}),w=e=>({type:n.SET_SETTING_SEGMENTATION_INVERSE,value:e}),C=e=>({type:n.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR,value:e}),b=e=>({type:n.SET_SETTING_SEGMENTATION_DELETE,value:e}),I=({canUndo:e})=>({type:n.SET_SETTING_SEGMENTATION_RESET,canUndo:e||!1}),R=e=>({type:n.SET_SETTING_ENHANCE,value:e}),A=e=>({type:n.SET_SETTING_LOADING,value:e})},489143:(e,t,r)=>{r.d(t,{setCurrentStickerPackIndex:()=>d,setDataLoaded:()=>i,setHeaderScrollPosition:()=>h,setMode:()=>c,setSaveLoading:()=>l,setShowDropBox:()=>a});var o=r(234448),n=r(455566),s=r(813412);const i=()=>({type:n.SET_DATA_LOADED}),a=e=>({type:n.SET_SHOW_DROP_BOX,value:e}),l=e=>({type:n.SET_SAVE_LOADING,value:e}),c=e=>(t,r)=>{const{items:i,currentIndex:a}=r().present.layers;null!==a&&(i[a].type===s.LAYER_TYPES.TEXT&&t((0,o.closeTextEditor)()),[s.TABS.PAINT,s.TABS.FILTERS,s.TABS.COLOR,s.TABS.CROP].includes(e)&&t((0,o.setCurrentLayer)(null))),t({type:n.SET_CURRENT_TAB,value:e})},d=e=>({type:n.SET_CURRENT_STICKER_PACK_INDEX,value:e}),h=e=>({type:n.SET_HEADER_SCROLL_POSITION,value:e})},809776:(e,t,r)=>{r.d(t,{BackgroundCanvas:()=>i});var o=r(785893),n=r(667294),s=r(813412);class i extends n.PureComponent{componentDidUpdate(){this.drawImage()}render(){const{layer:e,globalScale:t}=this.props,r=e.width*t,n=e.height*t;return(0,o.jsx)("canvas",{ref:this.canvasBg,width:r*s.CANVAS_SCALE,height:n*s.CANVAS_SCALE,style:{width:r,height:n},"data-name":"background-canvas"})}drawImage(){var e;const{layer:t,globalScale:r,shiftY:o,shiftX:n}=this.props,{current:i}=this.canvasBg,a=null==(e=i)?void 0:e.getContext("2d");if(a){const e=t.width*r,i=t.height*r;a.drawImage(t.canvas,n*s.CANVAS_SCALE,o*s.CANVAS_SCALE,e*s.CANVAS_SCALE,i*s.CANVAS_SCALE)}}constructor(e){super(e),this.canvasBg=(0,n.createRef)()}}},641012:(e,t,r)=>{r.d(t,{StoryBackgroundCanvas:()=>i});var o=r(785893),n=r(667294),s=r(813412);class i extends n.PureComponent{componentDidUpdate(){this.drawImage()}render(){const{layer:e}=this.props,t=e.width*e.scale,r=e.height*e.scale;return(0,o.jsx)("canvas",{ref:this.canvasBg,width:t*s.CANVAS_SCALE,height:r*s.CANVAS_SCALE,style:{width:t,height:r}})}drawImage(){var e;const{layer:t}=this.props,{current:r}=this.canvasBg,o=null==(e=r)?void 0:e.getContext("2d");if(o){const e=t.width*t.scale,r=t.height*t.scale;o.drawImage(t.canvas,0,0,e*s.CANVAS_SCALE,r*s.CANVAS_SCALE)}}constructor(e){super(e),this.canvasBg=(0,n.createRef)()}}},864400:(e,t,r)=>{r.d(t,{ClickableZones:()=>i});var o=r(785893),n=r(667294),s=r(27473);class i extends n.Component{render(){return this.props.isDev?this.props.clickableZones.map((({clickable_area:e},t)=>{const r=100*Math.abs(e[1].x-e[0].x),n=100*Math.abs(e[2].y-e[1].y);return(0,o.jsx)("div",{className:s.default.root,style:{top:100*e[0].y+"%",left:100*e[0].x+"%",width:`${r}%`,height:`${n}%`}},t)})):null}}},95756:(e,t,r)=>{r.d(t,{ColorPicker:()=>d});var o=r(785893),n=r(667294),s=r(842386),i=r(659397),a=r(521829),l=r(813412),c=r(663301);class d extends n.Component{shouldComponentUpdate(e){return JSON.stringify(e.avgColor)!==JSON.stringify(this.props.avgColor)&&(this.colors=this.getColors(e.avgColor)),!0}render(){return(0,o.jsx)("div",{className:c.default.root,children:this.colors.map(((e,t)=>{const r=e===this.props.color,n=(0,i.classNames)(c.default.item,"#FFFFFF"===e&&c.default.itemWhite);return(0,o.jsx)("div",{className:n,style:{backgroundColor:e},onClick:()=>this.props.setColor(e),children:r&&(0,o.jsx)(a.Icon24Done,{})},t)}))})}getColors(e){const t=(0,s.rgb2hsv)(e.r,e.g,e.b),r=[];return l.AVERAGE_COLORS_MAP.forEach((e=>{const o=Math.round(Math.min(Math.max(t.s+e.s,0),100)),n=Math.round(Math.min(Math.max(t.v+e.v,0),100));r.push((0,s.hsl2hex)(t.h,o,n).toUpperCase())})),(0,i.uniqueArray)([...l.COLORS,...r]).slice(0,30)}constructor(e){super(e),this.colors=this.getColors(e.avgColor)}}},798211:(e,t,r)=>{r.d(t,{DropBox:()=>a});var o=r(785893),n=r(667294),s=r(659397),i=r(223097);class a extends n.PureComponent{render(){const e=(0,s.classNames)(i.default.root,this.state.onHover&&i.default.hover);return(0,o.jsx)("div",{className:e,onMouseOver:()=>this.setState({onHover:!0}),onMouseOut:()=>this.setState({onHover:!1}),onMouseUp:this.props.onDelete,children:a.renderIcon()})}static renderIcon(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"none",children:[(0,o.jsx)("path",{fill:"#fff",d:"M17.5 18.38a1 1 0 00-2 .24l1.8 15.23a3 3 0 002.98 2.65h9.44a3 3 0 002.98-2.65l1.8-15.23a1 1 0 10-2-.24l-1.78 15.24a1 1 0 01-1 .88h-9.44a1 1 0 01-1-.88L17.5 18.38z"}),(0,o.jsx)("path",{fill:"#fff",d:"M22 21.45a1 1 0 00-2 .1l.5 10a1 1 0 102-.1l-.5-10zm8 .1a1 1 0 00-2-.1l-.5 10a1 1 0 102 .1l.5-10zm-4-.05a1 1 0 10-2 0v10a1 1 0 002 0v-10z"}),(0,o.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M20.62 16.5c.08-.35.2-.77.42-1.2.32-.64.8-1.19 1.38-1.59A4.55 4.55 0 0125 13c1.05 0 1.9.27 2.58.71.59.4 1.06.95 1.38 1.6.21.42.34.84.42 1.19H36a1 1 0 010 2H14a1 1 0 010-2h6.63zm6.68 0a2.9 2.9 0 00-.13-.3c-.16-.33-.4-.61-.7-.82-.31-.2-.77-.38-1.47-.38s-1.16.17-1.47.38c-.32.2-.54.5-.7.82-.05.1-.1.2-.13.3h4.6z",className:i.default.cap,clipRule:"evenodd"})]})}constructor(e){super(e),this.state={onHover:!1}}}},702952:(e,t,r)=>{r.d(t,{EditorTabs:()=>f});var o=r(785893),n=r(667294),s=r(659397),i=r(385235),a=r(86894),l=r(997872),c=r(427323),d=r(821046),h=r(563952),u=r(800142),p=r(479049),_=r(370281),g=r(95471),m=r(813412);class f extends n.Component{render(){return(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("div",{className:l.default.header,children:n.Children.map(this.props.children,(e=>{if((0,n.isValidElement)(e))return this.getHeaderItem(e)}))}),(0,o.jsx)("div",{className:l.default.content,children:n.Children.map(this.props.children,(e=>{if((0,n.isValidElement)(e))return this.getTabContentItem(e)}))})]})}static getIcon(e){let t;switch(e){case m.TABS.STICKERS:t=(0,o.jsx)(c.Icon24SmileOutline,{});break;case m.TABS.TEXT:t=(0,o.jsx)(d.Icon24TextOutline,{});break;case m.TABS.PAINT:t=(0,o.jsx)(h.Icon24BrushOutline,{});break;case m.TABS.CROP:t=(0,o.jsx)(u.Icon24Crop,{});break;case m.TABS.COLOR:t=(0,o.jsx)(p.Icon24Filter,{});break;case m.TABS.FILTERS:t=(0,o.jsx)(_.Icon24ImageFilterOutline,{});break;case m.TABS.SEGMENTATION:t=(0,o.jsx)(g.Icon24AddCircleDottedOutline,{})}return t}constructor(){super(...arguments),this.getHeaderItem=e=>{const t=e.props["data-disabled"],r=(0,s.classNames)(l.default.item,this.props.current===e.props["data-mode"]&&l.default.itemCurrent,t&&l.default.itemDisabled),n=(0,o.jsx)("div",{className:r,onClick:()=>this.onTabClick(e.props["data-mode"],t),children:f.getIcon(e.props["data-mode"])},e.props["data-mode"]);if(t){var c,d;const e=(0,o.jsxs)("div",{className:l.default.tooltip,children:[(0,o.jsx)("span",{className:l.default.tooltipText,children:null==(c=this.props.langMap)?void 0:c.photos_pe_filters_disabled_text}),(0,o.jsx)(i.Link,{onClick:()=>this.props.setMode(m.BACKGROUND_MODES.PHOTO),children:null==(d=this.props.langMap)?void 0:d.photos_pe_filters_disabled_button})]});return(0,o.jsx)(a.unstable_RichTooltip,{content:e,children:n})}return n},this.getTabContentItem=e=>{const t=(0,s.classNames)(e.props.className,l.default.tab,this.props.current===e.props["data-mode"]&&l.default.tabCurrent);return(0,n.cloneElement)(e,{className:t})},this.onTabClick=(e,t)=>{t||this.props.change(e)}}}},289584:(e,t,r)=>{r.d(t,{EditorText:()=>d});var o=r(785893),n=r(667294),s=r(659397),i=r(813412),a=r(842386),l=r(516356);const c="editor-text-inner";class d extends n.Component{componentDidUpdate(e){e.layer.fontSize===this.props.layer.fontSize&&e.layer.fontStyle===this.props.layer.fontStyle||this.onChange()}constructor(e){super(e),this.componentDidMount=()=>{const{current:e}=this.textareaEl;e&&(this.onChange(),e.select())},this.render=()=>{const{layer:e}=this.props;let t=Math.max(10,e.fontSize*i.FONT_SIZE_COEFFICIENT);return e.initialFontSize&&(t=e.initialFontSize*i.FONT_SIZE_COEFFICIENT),(0,o.jsx)("div",{className:l.default.root,children:(0,o.jsx)("div",{className:l.default.inner,"data-name":c,children:(0,o.jsx)("textarea",{ref:this.textareaEl,className:(0,s.classNames)(l.default.textArea,(0,a.getComputedFontFamily)(e.fontStyle)),defaultValue:(0,s.decodeHTMLEntities)(e.text).replace(/(\v)/gm,""),autoFocus:!0,onKeyDown:this.onKeyDown,onChange:this.onChange,onInput:this.onChange,onPaste:this.onChange,style:{color:e.color,fontSize:t,height:this.state.height}})})})},this.onKeyDown=e=>{if("Enter"===e.key)if(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey||e.shiftKey){const{current:t}=this.textareaEl;if(t){const r=e.target.selectionStart,o=e.target.selectionEnd;t.value=t.value.substring(0,r)+"\n"+t.value.substring(o),t.selectionStart=t.selectionEnd=r+1,this.onChange()}}else this.props.closeTextEditor()},this.onChange=()=>{const{current:e}=this.textareaEl;e&&(this.setState({height:0},(()=>{this.setState({height:e.scrollHeight})})),this.props.onChange(this.applyLineBreaks(e)))},this.applyLineBreaks=e=>{const t=e.value,r=e.cloneNode(!0);document.querySelector(`[data-name="${c}"]`).appendChild(r),r.setAttribute("wrap","off"),r.value="";const o=r.scrollWidth;for(let e=0,n=-1;e<t.length;e++){const s=t.charAt(e);if(" "!==s&&"-"!==s&&"+"!==s||(n=e),r.value+=s,r.scrollWidth>o){let o="";if(n>=0){for(let r=n+1;r<e;r++)o+=t.charAt(r);n=-1}o+=s,r.value=r.value.substr(0,r.value.length-o.length),r.value+="\n\v"+o}}return r.remove(),r.value.replace(/(\n\v)/gm,"\v")},this.state={height:0},this.textareaEl=(0,n.createRef)(),(0,s.isFunction)(this.props.sendStat)&&this.props.sendStat("edit_text")}}},779870:(e,t,r)=>{r.d(t,{Layer:()=>m,layerSelector:()=>g});var o=r(785893),n=r(667294),s=r(973935),i=r(809776),a=r(199167),l=r(864400),c=r(659397),d=r(813412),h=r(842386),u=r(256310),p=r(723969),_=r(641012);const g="editor-layer";class m extends n.Component{render(){const{layer:e,index:t}=this.props;let r=null;const o=(0,c.classNames)(u.default.root,e.locked&&u.default.locked,e.type===d.LAYER_TYPES.TEXT&&(0,h.getComputedFontFamily)(e.fontStyle));switch(e.type){case d.LAYER_TYPES.STICKER:r=this.renderLayerSticker(e,t,o);break;case d.LAYER_TYPES.TEXT:r=this.renderLayerText(e,t,o);break;case d.LAYER_TYPES.IMAGE:r=this.renderLayerImage(e,t,o);break;case d.LAYER_TYPES.BACKGROUND:r=this.props.context===d.CONTEXT_TYPES.STORY?this.renderStoriesLayerBackground(e,t,o):this.renderPhotoLayerBackground(e,t)}if(e.isBackground){const e=document.querySelector(`[data-name="${p.layersSelector}"`);return e?s.createPortal(r,e):null}return r}renderStoriesLayerBackground(e,t,r){return(0,o.jsx)("div",{"data-name":g,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:u.default.inner,"data-name":g,children:[(0,o.jsx)(_.StoryBackgroundCanvas,{layer:e}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:1,shiftX:0,shiftY:0})]})},t)}renderPhotoLayerBackground(e,t){const{globalScale:r,shiftY:n,shiftX:s}=this.props;return(0,o.jsxs)("div",{"data-name":g,"data-index":t,children:[(0,o.jsx)(i.BackgroundCanvas,{layer:e,globalScale:r,shiftX:s,shiftY:n}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY})]},t)}renderLayerSticker(e,t,r){const{disabled:n,getStickerUrlById:s,globalScale:i,shiftY:l,shiftX:h}=this.props,p=s(e.id,d.STICKER_LARGE);return(0,o.jsx)("div",{"data-name":g,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x*i+h}px, ${e.y*i+l}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsx)("div",{className:(0,c.classNames)(u.default.inner,n&&u.default.innerDisabled),"data-name":g,style:{width:e.width*e.scale*(i/e.baseScale),height:e.height*e.scale*(i/e.baseScale),backgroundImage:`url('${p}')`},children:this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY})})},t)}renderLayerImage(e,t,r){const{disabled:n,globalScale:s}=this.props;return(0,o.jsx)("div",{"data-name":g,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x}px, ${e.y}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:(0,c.classNames)(u.default.inner,n&&u.default.innerDisabled),"data-name":g,style:{width:e.width*e.scale,height:e.height*e.scale,backgroundImage:`url('${e.url}')`},children:[this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:s,shiftX:this.props.shiftX,shiftY:this.props.shiftY}),e.clickableZones&&(0,o.jsx)(l.ClickableZones,{clickableZones:e.clickableZones})]})},t)}renderLayerText(e,t,r){const{disabled:n,globalScale:s,shiftY:i,shiftX:l}=this.props,h={fontSize:Math.max(10,e.fontSize*d.FONT_SIZE_COEFFICIENT)*e.scale*(s/e.baseScale),color:e.color};return this.props.currentIndex===t&&e.isEdit?null:(0,o.jsx)("div",{"data-name":g,className:r,"data-index":t,style:{width:1,height:1,transform:`translate(${e.x*s+l}px, ${e.y*s+i}px) rotateZ(${e.rotate}deg)`},children:(0,o.jsxs)("div",{className:(0,c.classNames)(u.default.inner,n&&u.default.innerDisabled),"data-name":g,style:h,onDoubleClick:this.handleDoubleClick,children:[(0,o.jsx)("div",{children:(0,c.decodeHTMLEntities)(e.text.replace(/(\v)/gm,"\n"))}),this.props.currentIndex===t&&(0,o.jsx)(a.LayerControls,{layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,globalScale:this.props.globalScale,shiftX:this.props.shiftX,shiftY:this.props.shiftY})]})},t)}constructor(){super(...arguments),this.handleDoubleClick=()=>{this.props.toggleTextEditor(!0)}}}},199167:(e,t,r)=>{r.d(t,{LayerControls:()=>h});var o=r(785893),n=r(667294),s=r(842386),i=r(813412),a=r(659397),l=r(894750),c=r(779870),d=r(952052);class h extends n.Component{render(){return(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerNw),onMouseDown:e=>this.controlMouseDown(e,"nw")}),(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerNe),onMouseDown:e=>this.controlMouseDown(e,"ne")}),(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerSw),onMouseDown:e=>this.controlMouseDown(e,"sw")}),(0,o.jsx)("div",{className:(0,a.classNames)(l.default.handler,l.default.handlerSe),onMouseDown:e=>this.controlMouseDown(e,"se")})]})}constructor(){super(...arguments),this.controlMouseDown=(e,t)=>{if(e.preventDefault(),e.stopPropagation(),this.props.startLayerScale(),this.layer=this.props.layer,this.layer.type===i.LAYER_TYPES.TEXT){const t=e.target.closest(`[data-name="${c.layerSelector}"]`);if(!t)return;this.width=t.offsetWidth/this.layer.scale,this.height=t.offsetHeight/this.layer.scale}else this.width=this.layer.width*this.props.globalScale/this.layer.baseScale,this.height=this.layer.height*this.props.globalScale/this.layer.baseScale;if(void 0!==this.width&&void 0!==this.height){switch(window.addEventListener("mousemove",this.controlMouseMove),window.addEventListener("mouseup",this.controlMouseUp),t){case"se":this.offsetFromCenter={x:this.width/2,y:this.height/2};break;case"sw":this.offsetFromCenter={x:-this.width/2,y:this.height/2};break;case"ne":this.offsetFromCenter={x:this.width/2,y:-this.height/2};break;case"nw":this.offsetFromCenter={x:-this.width/2,y:-this.height/2}}void 0!==this.offsetFromCenter&&(this.distanceToZero=Math.sqrt(this.offsetFromCenter.x*this.offsetFromCenter.x+this.offsetFromCenter.y*this.offsetFromCenter.y))}},this.controlMouseMove=e=>{var t,r;const{x:o,y:n}=(0,s.getRelativeXY)(e,document.querySelector(`[data-name="${d.drawingLayerSelector}"]`));if(void 0===this.offsetFromCenter||void 0===this.distanceToZero||void 0===this.width||void 0===this.height)return;const a={x:o-((null==(t=this.layer)?void 0:t.x)||0)*this.props.globalScale-this.props.shiftX,y:n-((null==(r=this.layer)?void 0:r.y)||0)*this.props.globalScale-this.props.shiftY},l=180*(Math.atan2(a.y,a.x)-Math.atan2(this.offsetFromCenter.y,this.offsetFromCenter.x))/Math.PI,c=Math.max(i.LAYER_MIN_SIZE,Math.sqrt(a.x*a.x+a.y*a.y))/this.distanceToZero;this.props.setLayerScale(c,l)},this.controlMouseUp=()=>{window.removeEventListener("mousemove",this.controlMouseMove),window.removeEventListener("mouseup",this.controlMouseUp),delete this.width,delete this.height,delete this.centerCoordinates,delete this.offsetFromCenter,delete this.distanceToZero}}}},723969:(e,t,r)=>{r.d(t,{Layers:()=>d,layersSelector:()=>c});var o=r(785893),n=r(667294),s=r(779870),i=r(659397),a=r(813412),l=r(976817);const c="photo-editor-image-layer-bg";class d extends n.Component{render(){const{items:e,currentIndex:t,shiftX:r,shiftY:n}=this.props.layers,d=[a.TABS.PAINT,a.TABS.FILTERS,a.TABS.COLOR,a.TABS.CROP].includes(this.props.currentMode);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,i.classNames)(l.default.root,l.default.items),children:e.map(((e,i)=>(0,o.jsx)(s.Layer,{index:i,currentIndex:t,layer:e,setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,toggleTextEditor:this.props.toggleTextEditor,getStickerUrlById:this.props.getStickerUrlById,globalScale:this.props.globalScale,shiftX:r,shiftY:n,disabled:d,context:this.props.context},i)))}),(0,o.jsx)("div",{className:(0,i.classNames)(l.default.root,l.default.background),"data-name":c})]})}}},700631:(e,t,r)=>{r.d(t,{SwitchMode:()=>h,switchModeSelector:()=>d});var o=r(785893),n=r(667294),s=r(659397),i=r(308964),a=r(813412),l=r(370518),c=r(903478);const d="switch-mode";class h extends n.PureComponent{render(){return(0,o.jsx)("div",{className:l.default.root,"data-name":d,children:Object.values(a.BACKGROUND_MODES).map((e=>{const t=(0,s.classNames)(l.default.mode,e===this.props.current&&l.default.active),r=e===a.BACKGROUND_MODES.PHOTO?(0,o.jsx)(i.Icon28CameraOutline,{}):null;return(0,o.jsx)("span",{className:t,onClick:()=>this.setMode(e),children:e===a.BACKGROUND_MODES.BACKGROUND?(0,o.jsx)("img",{src:c,className:l.default.icon},e):r},e)}))})}constructor(){super(...arguments),this.setMode=e=>{(0,s.isFunction)(this.props.sendStat)&&(e===a.BACKGROUND_MODES.PHOTO?this.props.sendStat("click_to_camera_icon"):e===a.BACKGROUND_MODES.BACKGROUND&&this.props.sendStat("click_to_gradient_icon")),this.props.setMode(e)}}}},686191:(e,t,r)=>{r.d(t,{Zoom:()=>a});var o=r(785893),n=r(667294),s=r(596300),i=r(86894);const a=({globalScale:e,scale:t,disabled:r})=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsxs)("div",{className:s.default.wrapper,children:[(0,o.jsx)("span",{className:s.default.title,children:"Масштабирование"})," ",(0,o.jsxs)("span",{className:s.default.title,children:[Math.round(100*e*100)/100,"%"]})]}),(0,o.jsx)(i.Slider,{step:.05,min:1,max:3,value:Number(e),"aria-labelledby":"with-step",onChange:e=>{t(e)},disabled:r}),(0,o.jsx)(i.Spacing,{size:25})]})},813412:(e,t,r)=>{r.d(t,{AVERAGE_COLORS_MAP:()=>a,BACKGROUND_MODES:()=>s,BLUR_TYPES:()=>d,BOTTOM_PANEL_HEIGHT:()=>S,BRUSH_WIDTH_COEFFICIENT:()=>w,CANVAS_SCALE:()=>E,COLORS:()=>i,CONTEXT_TYPES:()=>u,CROP_ASPECTS:()=>m,CROP_ASPECT_FREE:()=>_,CROP_ASPECT_ORIGINAL:()=>g,CROP_MIN_SIZE:()=>k,CROP_SIDES:()=>p,DRAWING_PREVIEW_HEIGHT:()=>N,DRAWING_PREVIEW_WIDTH:()=>L,FILTER_PREVIEW_HEIGHT:()=>A,FILTER_PREVIEW_WIDTH:()=>R,FONTS:()=>l,FONT_SIZE_COEFFICIENT:()=>C,LAYER_DEFAULT_SIZE:()=>I,LAYER_MIN_SIZE:()=>b,LAYER_TYPES:()=>h,PHOTO_FILTERS:()=>c,STICKER_LARGE:()=>x,STICKER_MEDIUM:()=>y,STICKER_THUMB:()=>T,STORY_BASE_HEIGHT:()=>v,STORY_BASE_WIDTH:()=>f,TABS:()=>n});var o=r(659397);const n={STICKERS:"stickers",TEXT:"text",PAINT:"paint",CROP:"crop",FILTERS:"filters",COLOR:"color",SEGMENTATION:"segmentation"},s={PHOTO:"photo",BACKGROUND:"background"},i=["#FFFFFF","#000000","#FF3301","#FF8C49","#F9D827","#2EBA48","#4189E8","#9F4BED","#69E4B3","#FF84A0","#F7A978","#F8786C","#8B3232","#93B658","#556E35","#5B4490","#1B1B1B","#333333","#4D4D4D","#666666","#808080","#999999","#B3B3B3","#CCCCCC"],a=[{s:12,v:-40},{s:9,v:-30},{s:6,v:-20},{s:3,v:-10},{s:0,v:0},{s:-3,v:10},{s:-6,v:20},{s:-9,v:30},{s:-12,v:40}],l=["classic","cursive","marker","italics","typewriter","poster","retro","impact","lobster"],c=["regular","nox","vesper","latona","liber","luna","minerva","mitra","pro","terra","veles","vesta","zaria","sepia","genius","horus","fortuna"],d={ROUND:"round",RECTANGULAR:"rectangular"},h={STICKER:"sticker",TEXT:"text",IMAGE:"image",BACKGROUND:"background",STORY_BACKGROUND:"story_background"},u={PHOTO:"photo",STORY:"story"},p={CENTER:"center",NW:"nw",NE:"ne",SW:"sw",SE:"se",N:"n",S:"s",W:"w",E:"e"},_=0,g=-1,m=[{title:"photos_pe_crop_aspect_free",value:_},{title:"photos_pe_crop_aspect_original",value:g},{title:"photos_pe_crop_aspect_16_9",value:16/9},{title:"photos_pe_crop_aspect_4_3",value:4/3},{title:"photos_pe_crop_aspect_1_1",value:1},{title:"photos_pe_crop_aspect_3_4",value:3/4},{title:"photos_pe_crop_aspect_9_16",value:9/16}],f=1080,v=1920,S=50,E=(0,o.isRetina)()?2:1,T="thumb",y=(0,o.isRetina)()?"256":"128",x=512,w=40,C=100,b=30,I=128,R=127,A=95,L=270,N=110,k=100},774893:(e,t,r)=>{r.d(t,{BaseEditor:()=>Y});var o=r(434788),n=r(785893),s=r(667294),i=r(832550),a=r(50533),l=r(21090),c=r(489143),d=r(234448),h=r(2413),u=r(709483),p=r(428661),_=r(813412),g=r(612764),m=r(702952),f=r(847542),v=r(565836),S=r(992774),E=r(2293),T=r(575213),y=r(330141),x=r(493809),w=r(659397),C=r(842386),b=r(86894),I=r(540724),R=r(618742),A=r(109848),L=r(857247),N=r(106439),k=r(237203),O=r(19410),P=r(531202),D=r(815660),M=r(952052),B=r(700631),F=r(779870),H=r(993661),U=r(651242),j=r(855829);class G extends s.Component{setBackground({advice_gradients:e,colors:t},r,o=!0){var n;let s=_.BACKGROUND_MODES.PHOTO;this.props.data.context===_.CONTEXT_TYPES.STORY&&(s=this.props.data.photoUrl?_.BACKGROUND_MODES.PHOTO:_.BACKGROUND_MODES.BACKGROUND),this.props.setBackgroundType(s,o),this.props.data.photoUrl&&this.props.setCurrentPhotoUrl(this.props.data.photoUrl,o);const i=[...e,...t];let a;if(r)a=r;else{var l;a=(null==(l=i[Math.floor(Math.random()*i.length)])?void 0:l.id)||0}return this.props.setCurrentBackgroundId(a,o),null==(n=this.props.data.helpers)||n.sendStat("select_background"),a}constructor(e){super(e),this.componentDidMount=()=>{var e,t,r;const o=()=>this.props.data.close(!1,!0);if(window.addEventListener("keydown",this.handleKeyDown,{capture:!0}),window.addEventListener("mousedown",this.canvasMouseDown),this.undoSub=H.undoAction.watch((()=>{this.props.undo()})),this.redoSub=H.redoAction.watch((()=>{this.props.redo()})),(0,w.isFunction)(null==(e=this.props.data)?void 0:e.saveCb)&&(this.getEditedPhotoSub=H.getEditedPhoto.watch((()=>{this.renderImageFromState().then(this.props.data.saveCb)}))),(0,w.isFunction)(null==(t=this.props.data)?void 0:t.undoRedoStatusCb)&&(this.undoRedoStatusSub=H.$undoRedoStatusFiltered.watch(this.props.data.undoRedoStatusCb)),(0,w.isFunction)(null==(r=this.props.data.helpers)?void 0:r.getPhotoEditorData))this.props.data.helpers.getPhotoEditorData(o).then((e=>{var t,r,o,n,s,i,a;const{stickers:l,backgrounds:c,storyUploadUrlHash:d,storySaveHash:h}=e,u=this.setBackground(c,null==(t=this.props.data)?void 0:t.backgroundId,!1),p={};l.forEach((e=>{e.items.forEach((e=>{p[e.id]=e}))})),this.props.setData({stickers:l,stickersMap:p,backgrounds:c,placeholders:null==(o=this.props.data)||null==(r=o.langMap)?void 0:r.photos_pe_texts_placeholders,fontsPlaceholders:null==(s=this.props.data)||null==(n=s.langMap)?void 0:n.photos_pe_fonts,storyUploadUrlHash:d,storySaveHash:h}),this.props.setDataLoaded(),(null==(a=this.props.data)||null==(i=a.serviceInfo)?void 0:i.open_text_editor)?this.props.addLayerText(!0,{isEdit:!0,text:""},!1):this.props.stickers||this.props.background.currentBackgroundType!==_.BACKGROUND_MODES.BACKGROUND||(this.props.addLayerText(!0,{isEdit:!0,color:[201,206,203,207,205,202,204,303,306,307].includes(u)?"#333333":"#FFFFFF"},!1),this.props.closeTextEditor(),this.props.setCurrentLayer(null)),this.props.stickers&&this.prepareStickers(this.props.stickers)}));else{var n,s,i,a,l;const e={colors:[],emojies:[],gradients:[],advice_gradients:[]};this.setBackground(e,null==(n=this.props.data)?void 0:n.backgroundId,!1),this.props.setMode(_.TABS.TEXT),this.props.setData({backgrounds:e,placeholders:null==(i=this.props.data)||null==(s=i.langMap)?void 0:s.photos_pe_texts_placeholders,fontsPlaceholders:null==(l=this.props.data)||null==(a=l.langMap)?void 0:a.photos_pe_fonts}),this.props.setDataLoaded()}},this.componentWillUnmount=()=>{var e,t,r,o;window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),window.removeEventListener("mousedown",this.canvasMouseDown),null==(e=this.undoSub)||e.unsubscribe(),null==(t=this.redoSub)||t.unsubscribe(),null==(r=this.undoRedoStatusSub)||r.unsubscribe(),null==(o=this.getEditedPhotoSub)||o.unsubscribe()},this.render=()=>{var e,t;const{ui:r,data:o}=this.props,s=(null==(e=o)?void 0:e.showStatusActions)?_.BOTTOM_PANEL_HEIGHT:0,i=parseInt(o.artboardHeight)+s;let a;o.artboardContainer||(a={width:o.artboardWidth,height:i}),this.isSaveDisabled=!1;const l=(null==(t=this.props.data)?void 0:t.showStatusActions)?(0,n.jsx)("div",{className:O.default.canvas,style:a,children:(0,n.jsx)(g.EditorCanvas,{getStickerUrlById:this.getStickerUrlById,uploadPhoto:this.uploadPhoto,setMode:this.setMode})}):(0,n.jsx)("div",{className:O.default.imageContainer,style:{width:o.imageContainerWidth},children:(0,n.jsx)("div",{className:O.default.canvas,style:a,children:(0,n.jsx)(g.EditorCanvas,{getStickerUrlById:this.getStickerUrlById,uploadPhoto:this.uploadPhoto,setMode:this.setMode})})});return(0,n.jsxs)("div",{className:O.default.root,style:{height:parseInt(o.artboardHeight)+s},children:[l,(0,n.jsx)("div",{className:O.default.tabs,children:r.isDataLoaded?this.renderTabs():(0,n.jsx)(b.Spinner,{})}),(0,n.jsx)("input",{type:"file",accept:"image/*",className:O.default.inputFile,onChange:this.handleChooseFile,ref:this.inputFile}),!r.isDataLoaded&&this.renderFontsPreloading()]})},this.renderTabs=()=>{var e,t,r,o,s,a,l,c,d,h;const{data:u,background:p}=this.props,{isNewFeaturesEnabled:g}=u,x=u.context===_.CONTEXT_TYPES.STORY&&p.currentBackgroundType===_.BACKGROUND_MODES.BACKGROUND;let w=null==(t=this.props.data)||null==(e=t.langMap)?void 0:e.photos_pe_save_action;var C,I;this.props.data.context===_.CONTEXT_TYPES.STORY&&(w=null==(I=this.props.data)||null==(C=I.langMap)?void 0:C.photos_pe_publish_action);return(0,n.jsxs)("div",{className:O.default.inner,children:[(0,n.jsxs)(m.EditorTabs,{current:this.props.ui.currentMode,change:this.props.setMode,setMode:this.setMode,langMap:null==(r=this.props.data)?void 0:r.langMap,children:[(null==(o=this.props.data.stickers)?void 0:o.length)&&(0,n.jsx)("div",{"data-mode":_.TABS.STICKERS,children:(0,n.jsx)(y.StickerPacksPanel,{stickerMouseDown:this.addSticker})}),(null==(s=this.props.data.customStickers)?void 0:s.length)&&(0,n.jsx)("div",{"data-mode":_.TABS.STICKERS,children:(0,n.jsx)(U.StickersPanel,{stickerMouseDown:this.addSticker,customStickers:this.props.data.customStickers})}),(0,n.jsx)("div",{"data-mode":_.TABS.TEXT,children:(0,n.jsx)(S.TextPanel,{})}),(0,n.jsx)("div",{"data-mode":_.TABS.PAINT,children:(0,n.jsx)(f.DrawPanel,{})}),!u.disableCrop&&u.context===_.CONTEXT_TYPES.PHOTO&&(0,n.jsx)("div",{"data-mode":_.TABS.CROP,children:(0,n.jsx)(v.CropPanel,{})}),(0,n.jsx)("div",{"data-mode":_.TABS.FILTERS,"data-disabled":x,children:(0,n.jsx)(T.FiltersPanel,{})}),(0,n.jsx)("div",{"data-mode":_.TABS.COLOR,"data-disabled":x,children:(0,n.jsx)(E.ColorCorrectionPanel,{})}),g&&(0,n.jsx)("div",{"data-mode":_.TABS.SEGMENTATION,children:(0,n.jsx)(j.SegmentationPanelComponent,{})})]}),(null==(a=this.props.data)?void 0:a.showStatusActions)&&(0,n.jsx)("div",{className:O.default.actions,children:(0,n.jsxs)(b.ButtonGroup,{gap:"m",align:"right",stretched:!0,children:[(null==(l=this.props.data)?void 0:l.statusPanelLeftSideNode)&&(null==(c=this.props.data)?void 0:c.statusPanelLeftSideNode),(0,n.jsx)(i.Button,{mode:"secondary",onClick:this.props.data.close,stretched:!0,children:null==(h=this.props.data)||null==(d=h.langMap)?void 0:d.photos_pe_cancel_action}),(0,n.jsx)(i.Button,{mode:"primary",loading:this.props.ui.isSaveLoading,disabled:this.isSaveDisabled,onClick:this.save,children:w})]})})]})},this.renderFontsPreloading=()=>(0,n.jsx)("div",{className:O.default.fontPreload,children:_.FONTS.map((e=>(0,n.jsx)("span",{className:(0,C.getComputedFontFamily)(e)},e)))}),this.save=()=>{this.props.closeTextEditor(),this.props.setCurrentLayer(null),this.props.setSaveLoading(!0),setTimeout((()=>{this.renderImageFromState().then((({blob:e,width:t,height:r})=>{var o,n,s,i;const{layers:a,drawings:l,background:c,settings:d}=this.props,h=null==(n=this.props.data)||null==(o=n.helpers)?void 0:o.prepareStat(a.items,l,c.currentBackgroundType,c.currentBackgroundId),u=null==(i=this.props.data)||null==(s=i.helpers)?void 0:s.prepareMediaEditorStat(a.items,d),p=[];this.props.layers.items.forEach((e=>{e.clickableZones&&e.clickableZones.forEach((t=>{p.push(this.getPreparedClickableZone(e,t))}))}));const _={original_width:t,original_height:r,clickable_stickers:p};this.props.data.save(e,(()=>{this.props.setSaveLoading(!1)}),{attachment:this.props.data.attachment,storyUploadUrlHash:this.props.data.storyUploadUrlHash,storySaveHash:this.props.data.storySaveHash,analytics:JSON.stringify(h),mediaEditorAnalytics:JSON.stringify(u),clickableStickers:JSON.stringify(_)})})).catch((e=>{this.props.setSaveLoading(!1),console.error(e)}))}),0)},this.renderImageFromState=()=>{var e;const{layers:t,drawings:r,data:o,settings:n}=this.props,{globalScale:s}=t,{artboardWidth:i,originalWidth:a,originalHeight:l}=o,c=a/i,d=(null==(e=n.segmentation)?void 0:e.delete)?o.maskCanvas:null;return new Promise(((e,o)=>{x.rendererScene.draw(a,l,t.items,r,c,this.getStickerUrlById,s,d).then((({blob:t,width:r,height:o})=>{e({blob:t,width:r,height:o})})).catch((e=>{o(e)}))}))},this.getPreparedClickableZone=(e,t)=>{var r;const o=this.props.data.originalWidth/this.props.data.artboardWidth,n=e.rotate*(Math.PI/180),s=e.width*e.scale,i=e.height*e.scale,a=e.x-s/2,l=e.y-i/2,c=parseFloat(e.x)+(a-e.x)*Math.cos(n)-(l-e.y)*Math.sin(n),d=parseFloat(e.y)+(l-e.y)*Math.cos(n)+(a-e.x)*Math.sin(n),h=null==(r=t.clickable_area)?void 0:r.map((e=>{const t=e.x*s,r=e.y*i,a=t*Math.cos(n)-r*Math.sin(n),l=t*Math.sin(n)+r*Math.cos(n);return{x:(c+a)*o,y:(d+l)*o}})),u={type:t.action_type,clickable_area:h};return"link"===t.action_type?(u.link=t.action.link,t.action.tooltip_text_key&&(u.tooltip_text_key=t.action.tooltip_text_key)):"app"===t.action_type?(u.app_id=t.action.app_id,t.action.app_context&&(u.app_context=t.action.app_context)):"music"===t.action_type?(u.audio_owner_id=t.action.audioOwnerId,u.audio_id=t.action.audioId):"playlist"===t.action_type&&(u.playlist_owner_id=t.action.playlistOwnerId,u.playlist_id=t.action.playlistId),u},this.handleKeyDown=e=>{if("Escape"===e.key&&this.props.layers.currentIndex&&this.props.layers.items[this.props.layers.currentIndex].isEdit&&(e.preventDefault(),e.stopPropagation(),this.props.closeTextEditor()),(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.shiftKey?this.props.redo():this.props.undo()),null!==this.props.layers.currentIndex&&"TEXTAREA"!==e.target.nodeName)if(["Backspace","Delete"].includes(e.key))e.preventDefault(),this.props.layers.items[this.props.layers.currentIndex].canDelete&&this.props.deleteLayer();else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){const t=this.getCurrentLayer();if(!t)return;const r={x:t.x,y:t.y},o=e.shiftKey?10:1;switch(e.key){case"ArrowUp":r.y-=o;break;case"ArrowDown":r.y+=o;break;case"ArrowLeft":r.x-=o;break;case"ArrowRight":r.x+=o}this.props.setLayerPosition(r.x,r.y)}},this.canvasMouseDown=e=>{const t=this.getCurrentLayer(),r=e.target;if("TEXTAREA"!==r.tagName)return!!r.closest(`[data-name="${g.editorCanvasSelector}"]`)&&(!r.closest(`[data-name="${B.switchModeSelector}"]`)&&void([_.TABS.PAINT,_.TABS.FILTERS].includes(this.props.ui.currentMode)||(t&&t.type===_.LAYER_TYPES.TEXT&&t.isEdit?this.props.closeTextEditor():(this.props.ui.currentMode===_.TABS.COLOR&&this.props.settings.blur.isEnabled&&this.moveBlurStart(e),r.closest(`[data-name="${F.layerSelector}"]`)?this.layerDragStart(e):t&&this.props.setCurrentLayer(null)))))},this.moveBlurStart=e=>{window.addEventListener("mousemove",this.moveBlurProcess),window.addEventListener("mouseup",this.moveBlurFinish),this.moveBlurProcess(e)},this.moveBlurProcess=e=>{const{x:t,y:r,width:o,height:n}=(0,C.getRelativeXY)(e,document.querySelector(`[data-name="${D.imageLayerSelector}"]`)),s=[Math.max(0,Math.min(t/o,1)),1-Math.max(0,Math.min(r/n,1))];this.props.setBlurPosition(s)},this.moveBlurFinish=()=>{window.removeEventListener("mousemove",this.moveBlurProcess),window.removeEventListener("mouseup",this.moveBlurFinish)},this.getCurrentLayer=()=>{const{items:e,currentIndex:t}=this.props.layers;return null===t?t:e[t]},this.layerDragStart=e=>{const{globalScale:t}=this.props.layers;window.addEventListener("mousemove",this.layerDragProcess),window.addEventListener("mouseup",this.layerDragFinish);const r=e.target.closest("[data-index]");let o;o=r?Number((0,C.domData)(r,"index")):this.props.layers.currentIndex,this.props.layers.currentIndex!==o&&this.props.setCurrentLayer(o);const{x:n,y:s}=(0,C.getRelativeXY)(e,document.querySelector(`[data-name="${M.drawingLayerSelector}"]`));if(this.currentLayer=this.getCurrentLayer(),!this.currentLayer)return;const i=this.currentLayer;i.isBackground&&i.locked?this.props.setCurrentLayer(null):(this.clientX=e.clientX,this.clientY=e.clientY,this.shiftX=n/t-this.currentLayer.x,this.shiftY=s/t-this.currentLayer.y)},this.layerDragProcess=e=>{const{globalScale:t}=this.props.layers;if(!this.currentLayer)return;const r=document.querySelector(`[data-name="${M.drawingLayerSelector}"]`);if(!r)return;const{x:o,y:n}=(0,C.getRelativeXY)(e,r);if(void 0===this.shiftX||void 0===this.shiftY)return;let s=o/t-this.shiftX,i=n/t-this.shiftY;this.props.setLayerPosition(s,i),this.props.ui.isShowDropBox||this.props.setShowDropBox(!0)},this.layerDragFinish=e=>{const{globalScale:t}=this.props.layers;window.removeEventListener("mousemove",this.layerDragProcess),window.removeEventListener("mouseup",this.layerDragFinish);if(!this.getCurrentLayer())return;if(!this.currentLayer)return;if(void 0===this.shiftX||void 0===this.shiftY)return;const r=document.querySelector(`[data-name="${M.drawingLayerSelector}"]`);if(!r)return;const{x:o,y:n}=(0,C.getRelativeXY)(e,r);let s=o/t-this.shiftX,i=n/t-this.shiftY;this.props.setLayerPosition(Math.round(s),Math.round(i)),this.props.setShowDropBox(!1),delete this.currentLayer,delete this.shiftX,delete this.shiftY,delete this.clientX,delete this.clientY},this.getStickerUrlById=(e,t)=>{var r,o,n,s,i;const a=null==(o=this.props.data)||null==(r=o.stickersMap)?void 0:r[e],l=(null==(s=this.props.data)||null==(n=s.customStickers)?void 0:n.length)?null==(i=this.props.data)?void 0:i.customStickers.find((t=>e===t.id)):null;return a?a.sizes[t]:l?l.sizes[t]:""},this.addSticker=(e,t)=>{var r;const{globalScale:o,shiftX:n,shiftY:s}=this.props.layers,{artboardWidth:i,artboardHeight:a}=this.props.data,l=i/2/o-n/o,c=a/2/o-s/o;e.persist(),this.props.addLayerSticker({id:t,x:l,y:c,width:_.LAYER_DEFAULT_SIZE,height:_.LAYER_DEFAULT_SIZE,rotate:0,canDelete:!0,scale:1,baseScale:o}),null==(r=this.props.data.helpers)||r.sendStat("add_sticker")},this.prepareStickers=e=>{const{artboardWidth:t,artboardHeight:r}=this.props.data;e.forEach((e=>{let{gravity:o="center",rotation:n=0,translation_x:s=0,translation_y:i=0,relation_width:a}=e.sticker.transform||{};if(s=Math.min(Math.max(s,-1),1),i=Math.min(Math.max(i,-1),1),a&&(a=Math.min(Math.max(a,.1),1)),"renderable"===e.sticker_type)this.prepareRenderableSticker(e.sticker,o,s,i,a).then((({url:t,x:r,y:o,stickerWidth:s,stickerHeight:i,clickableZones:a})=>{this.props.addLayerImage({url:t,x:r,y:o,width:Math.round(s),height:Math.round(i),rotate:-n,clickableZones:a,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));else if("native"===e.sticker_type)switch(e.sticker.action_type){case"sticker":{let c=a?t*a:_.LAYER_DEFAULT_SIZE,d=a?t*a:_.LAYER_DEFAULT_SIZE;const h=`${e.sticker.action.pack_id}_${e.sticker.action.sticker_id}`;if(this.props.data.stickersMap[h]){var l;const{x:e,y:a}=(0,C.getPositionWithGravity)(o,t,r,c/2,d/2,s*t,i*r);this.props.addLayerSticker({id:h,x:e,y:a,width:Math.round(c),height:Math.round(d),rotate:-n,canDelete:!0,scale:1,baseScale:1}),null==(l=this.props.data.helpers)||l.sendStat("add_sticker")}break}case"text":{let l=.5;a&&(l=this.getFontSize(e.sticker.action.text,t*a,e.sticker.action.style));const{width:c,height:d}=this.getTextRect(e.sticker.action.text,l*_.FONT_SIZE_COEFFICIENT,e.sticker.action.style),{x:h,y:u}=(0,C.getPositionWithGravity)(o,t,r,c/2,d/2,s*t,i*r);this.props.addLayerText(!0,{isEdit:!0,text:e.sticker.action.text,style:e.sticker.action.style,color:e.sticker.action.selection_color,fontSize:l,initialFontSize:l,rotate:-n,scale:1,x:h,y:u}),this.props.closeTextEditor(),this.props.setCurrentLayer(null);break}case"comment":{const{postRawId:n,replyId:a}=e.sticker.action,l=new A.CommentSticker(e.sticker.action);l.render().then((()=>{l.toBlob().then((c=>{var d,h;const{x:u,y:p}=(0,C.getPositionWithGravity)(o,t,r,l.getWidth()/2,l.getHeight()/2,s*t,i*r),_=l.getWidth()/t,g=l.getWidth()/_,m=l.getHeight()/_;this.props.addLayerImage({url:URL.createObjectURL(c),x:u,y:p,width:Math.round(g),height:Math.round(m),rotate:0,clickableZones:[{action_type:"link",action:{link:`https://${null==(h=this.props.data)||null==(d=h.helpers)?void 0:d.getHostName()}/wall${n}?reply=${a}`,tooltip_text_key:"tooltip_open_post"},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]}],canDelete:Boolean(e.sticker.can_delete),scale:.8,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"answer_question":{const l=new k.AnswerQuestionSticker(e.sticker.action);l.render().then((()=>{l.toBlob().then((c=>{const d=l.getHeight()/l.getWidth(),h=a?t*a:l.getWidth()/4,u=a?h*d:l.getHeight()/4,{x:p,y:_}=(0,C.getPositionWithGravity)(o,t,r,h/2,u/2,s*t,i*r);this.props.addLayerImage({url:URL.createObjectURL(c),x:p,y:_,width:Math.round(h),height:Math.round(u),rotate:-n,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"ask_question_avatar":{const a=new R.AskQuestionAvatar(e.sticker.action);a.render().then((()=>{a.toBlob().then((l=>{const c=a.props.size,d=a.props.size,{x:h,y:u}=(0,C.getPositionWithGravity)(o,t,r,c/2,d/2,s*t,i*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:h,y:u,width:Math.round(c),height:Math.round(d),rotate:-n,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"ask_question_text":{const a=new L.AskQuestionText(e.sticker.action);a.render().then((()=>{a.toBlob().then((l=>{const c=a.getWidth()/4,d=a.getHeight()/4,{x:h,y:u}=(0,C.getPositionWithGravity)(o,t,r,c/2,d/2,s*t,i*r);this.props.addLayerImage({url:URL.createObjectURL(l),x:h,y:u,width:Math.round(c),height:Math.round(d),rotate:-n,canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{console.error(e)}))})).catch((e=>{console.error(e)}));break}case"music":{const n=e.sticker.action,s=new N.MusicSticker(n);s.render().then((()=>{s.toBlob().then((i=>{const a=s.getWidth()+198,l=t*s.getWidth()/a,c=s.getWidth()/l,d=s.getHeight()/c,h=s.getClickableHeight()/c/d,{x:u,y:p}=(0,C.getPositionWithGravity)(o,t,r,s.getWidth()/2,s.getHeight()/2,0,0);this.props.addLayerImage({url:URL.createObjectURL(i),x:u,y:p,width:l,height:d,rotate:0,clickableZones:[{action_type:"music",action:{audioOwnerId:n.audioOwnerId,audioId:n.audioId},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:h},{x:0,y:h}]}],canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}case"playlist":{const n=e.sticker.action,s=new I.PlaylistSticker(n);s.render().then((()=>{s.toBlob().then((i=>{const a=s.getWidth()+198,l=t*s.getWidth()/a,c=s.getWidth()/l,d=s.getHeight()/c,h=s.getClickableHeight()/c/d,{x:u,y:p}=(0,C.getPositionWithGravity)(o,t,r,s.getWidth()/2,s.getHeight()/2,0,0);this.props.addLayerImage({url:URL.createObjectURL(i),x:u,y:p,width:l,height:d,rotate:0,clickableZones:[{action_type:"playlist",action:{playlistOwnerId:n.playlistOwnerId,playlistId:n.playlistId},clickable_area:[{x:0,y:0},{x:1,y:0},{x:1,y:h},{x:0,y:h}]}],canDelete:Boolean(e.sticker.can_delete),scale:1,baseScale:1},!1)})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}))})).catch((e=>{var t,r;null==(r=this.props.data)||null==(t=r.helpers)||t.logError(e,{environment:"photoEditor"})}));break}}}))},this.prepareRenderableSticker=(e,t,r,n,s)=>{const{artboardWidth:i,artboardHeight:a,originalWidth:l}=this.props.data,c=l/i;return new Promise(((l,d)=>{"string"!=typeof e.url&&"string"!=typeof e.blob&&d();const h=e.url||e.blob||"";(0,P.loadImage)(h).then((d=>{const u=d.height/d.width;let p=0,_=0;s?(p=i*s,_=p*u):(p=d.width/c,_=d.height/c,p>i&&(p=i,_=p*u));const{x:g,y:m}=(0,C.getPositionWithGravity)(t,i,a,p/2,_/2,r*i,n*a);let f;e.clickable_zones&&(f=e.clickable_zones.map((e=>{let t;return t=e.clickable_area?e.clickable_area.map((e=>({x:e.x/d.width,y:e.y/d.height}))):[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}],(0,o._)({},e,{clickable_area:t})}))),l({url:h,x:g,y:m,stickerWidth:p,stickerHeight:_,clickableZones:f})})).catch((()=>{d()}))}))},this.getTextRect=(e,t,r)=>{const o=document.createElement("span");o.innerHTML=(0,C.clean)(e),o.style.display="inline-block",o.style.fontSize=`${t}px`,o.style.lineHeight="1em",o.style.whiteSpace="pre";const n=(0,C.getComputedFontFamily)(r);n&&o.classList.add(n),document.body.appendChild(o);const s=o.getBoundingClientRect();return o.remove(),s},this.getFontSize=(e,t,r)=>{let o=2*t;const n=document.createElement("span");for(n.innerHTML=(0,C.clean)(e),n.style.display="inline-block",n.style.width=`${t}px`,n.style.fontSize=`${o}px`,n.style.lineHeight="1em",n.style.whiteSpace="pre",r&&n.classList.add(`PhotoEditorFontStyle--${r}`),document.body.appendChild(n);o&&n.scrollWidth>Math.round(t);)o--,n.style.fontSize=`${o}px`;return n.remove(),o/100},this.uploadPhoto=()=>{var e;null==(e=this.inputFile.current)||e.click()},this.setMode=e=>{const{ui:t}=this.props,{currentBackgroundType:r,currentPhotoUrl:o}=this.props.background;this.props.setCurrentLayer(null),e===_.BACKGROUND_MODES.PHOTO&&!o||r===_.BACKGROUND_MODES.PHOTO&&r===e?this.uploadPhoto():(this.props.setBackgroundType(e),e===_.BACKGROUND_MODES.BACKGROUND&&[_.TABS.COLOR,_.TABS.FILTERS].includes(t.currentMode)&&this.props.setMode(_.TABS.STICKERS))},this.handleChooseFile=e=>{var t;const r=null==(t=e.target.files)?void 0:t.item(0);if(!r)return void console.error("File not found");const o=URL.createObjectURL(r);(0,P.loadImage)(o).then((()=>{(0,C.getOrientation)(r).then((e=>{-1===e||-2===e||1===e?(this.props.setCurrentPhotoUrl(o),this.props.setBackgroundType(_.BACKGROUND_MODES.PHOTO,!1)):(0,C.resetOrientation)(o,e).then((e=>{this.props.setCurrentPhotoUrl(e),this.props.setBackgroundType(_.BACKGROUND_MODES.PHOTO,!1)})).catch((()=>{}))})).catch((()=>{}))})).catch((()=>{var e,t,r,o,n,s;null==(s=this.props.data)||null==(n=s.helpers)||n.showErrorBox({title:null==(t=this.props.data)||null==(e=t.langMap)?void 0:e.global_error},null==(o=this.props.data)||null==(r=o.langMap)?void 0:r.stories_create_image_incorrect)}))},this.inputFile=(0,s.createRef)()}}const W=Object.assign(l.ActionCreators,{setMode:c.setMode,addLayerSticker:d.addLayerSticker,addLayerText:d.addLayerText,addLayerImage:d.addLayerImage,setLayerPosition:d.setLayerPosition,deleteLayer:d.deleteLayer,setCurrentLayer:d.setCurrentLayer,setDataLoaded:c.setDataLoaded,setShowDropBox:c.setShowDropBox,setSaveLoading:c.setSaveLoading,closeTextEditor:d.closeTextEditor,setData:h.setData,setBlurPosition:u.setBlurPosition,setBackgroundType:p.setBackgroundType,setCurrentPhotoUrl:p.setCurrentPhotoUrl,setCurrentBackgroundId:p.setCurrentBackgroundId}),Y=(0,a.connect)((e=>((0,H.undoRedoStatus)({canUndo:e.past.length>0,canRedo:e.future.length>0}),{ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data})),W,null,{forwardRef:!0})(G)},2293:(e,t,r)=>{r.d(t,{ColorCorrectionPanel:()=>v});var o=r(785893),n=r(667294),s=r(50533),i=r(709483),a=r(86894),l=r(189625),c=r(77199),d=r(625812),h=r(279207),u=r(385235),p=r(832550),_=r(813412),g=r(554984);class m extends n.Component{render(){var e,t,r,n,s,i,a;const{settings:l,setColorCorrection:c,langMap:d,enhanceEnabled:u}=this.props;return(0,o.jsxs)("div",{className:g.default.root,children:[(0,o.jsxs)("div",{className:g.default.items,children:[(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(e=d)?void 0:e.photos_pe_correction_exposure}),(0,o.jsx)(h.Slider,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.exposure,onChange:e=>c("exposure",e),formatHint:e=>Math.round(100*e)})]}),(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(t=d)?void 0:t.photos_pe_correction_contrast}),(0,o.jsx)(h.Slider,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.contrast,onChange:e=>c("contrast",e),formatHint:e=>Math.round(100*e)})]}),(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(r=d)?void 0:r.photos_pe_correction_saturation}),(0,o.jsx)(h.Slider,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.saturation,onChange:e=>c("saturation",e),formatHint:e=>Math.round(100*e)})]}),(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(n=d)?void 0:n.photos_pe_correction_warmth}),(0,o.jsx)(h.Slider,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.warmth,onChange:e=>c("warmth",e),formatHint:e=>Math.round(100*e)})]}),(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(s=d)?void 0:s.photos_pe_correction_vignette}),(0,o.jsx)(h.Slider,{min:-1,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.vignette,onChange:e=>c("vignette",e),formatHint:e=>Math.round(100*e)})]}),(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(i=d)?void 0:i.photos_pe_correction_sharpness}),(0,o.jsx)(h.Slider,{min:0,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.sharpness,onChange:e=>c("sharpness",e),formatHint:e=>Math.round(100*e)})]}),(0,o.jsxs)("div",{className:g.default.item,children:[(0,o.jsx)("span",{className:g.default.itemName,children:null==(a=d)?void 0:a.photos_pe_correction_grain}),(0,o.jsx)(h.Slider,{min:0,max:1,gravity:2,isShowHandle:!0,isShowZero:!0,value:l.colorCorrection.grain,onChange:e=>c("grain",e),formatHint:e=>Math.round(100*e)})]})]}),(0,o.jsx)("div",{className:g.default.link,children:this.renderAutoCorrectionPanel()}),(0,o.jsx)("div",{className:g.default.link,children:this.renderBlurPanel()}),u&&(0,o.jsx)("div",{className:g.default.link,children:this.renderEnhancePanel()})]})}renderEnhancePanel(){var e;const{settings:t,langMap:r,setEnhance:n}=this.props;var s;return(null==(e=t.enhance)?void 0:e.active)?(0,o.jsx)("div",{className:g.default.box,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"Вы увеличили разрешение"}),(0,o.jsx)("span",{className:g.default.dvd}),(0,o.jsx)(u.Link,{onClick:()=>n({active:!1}),children:null==(s=r)?void 0:s.photos_pe_cancel})]})}):(0,o.jsx)(p.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(l.Icon20FullscreenOutline,{className:g.default.icon}),onClick:this.scaleImage,loading:t.loading.enhance,children:"Увеличение разрешения"})}renderAutoCorrectionPanel(){const{settings:e,setAutoCorrection:t,helpers:r,langMap:n}=this.props,s=e=>{var o,n;e?null==(o=r)||o.sendStat("enable_autocorrection"):null==(n=r)||n.sendStat("disable_autocorrection");t(e)};var i,a,l;return e.isAutoCorrection?(0,o.jsx)("div",{className:g.default.box,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:null==(i=n)?void 0:i.photos_pe_correction_auto_enabled}}),(0,o.jsx)("span",{className:g.default.dvd}),(0,o.jsx)(u.Link,{onClick:()=>s(!1),children:null==(a=n)?void 0:a.photos_pe_cancel})]})}):(0,o.jsx)(p.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(c.Icon20Stars,{className:g.default.icon}),onClick:()=>s(!0),children:null==(l=n)?void 0:l.photos_pe_correction_auto})}renderBlurPanel(){var e,t;const{settings:r,setBlurEnable:n,setBlurForm:s,setBlurSize:i,helpers:l,langMap:c}=this.props,{blur:m}=r,f=e=>{var t,r;e?null==(t=l)||t.sendStat("enable_blur"):null==(r=l)||r.sendStat("disable_blur");n(e)},v=[{label:null==(e=c)?void 0:e.photos_pe_correction_blur_type_round,value:_.BLUR_TYPES.ROUND},{label:null==(t=c)?void 0:t.photos_pe_correction_blur_type_rec,value:_.BLUR_TYPES.RECTANGULAR}];var S,E,T;return m.isEnabled?(0,o.jsxs)("div",{className:g.default.box,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:null==(S=c)?void 0:S.photos_pe_correction_blur_enabled}}),(0,o.jsx)("span",{className:g.default.dvd}),(0,o.jsx)(u.Link,{onClick:()=>f(!1),children:null==(E=c)?void 0:E.photos_pe_cancel})]}),(0,o.jsx)("div",{className:g.default.slider,children:(0,o.jsx)(h.Slider,{min:0,max:100,gravity:2,isShowHandle:!0,isShowZero:!0,value:r.blur.size,onChange:e=>i(e),formatHint:e=>Math.round(e)})}),(0,o.jsx)(a.CustomSelect,{className:g.default.select,value:m.form,options:v,onChange:e=>s(String(e.target.value))})]}):(0,o.jsx)(p.Button,{mode:"tertiary",size:"s",before:(0,o.jsx)(d.Icon20WaterDropOutline,{className:g.default.icon}),onClick:()=>f(!0),children:null==(T=c)?void 0:T.photos_pe_correction_blur})}constructor(){super(...arguments),this.scaleImage=()=>{const{enhanceCb:e,setEnhance:t,setLoading:r}=this.props;e&&e&&(r({enhance:!0}),e((e=>{e&&t({active:!0,url:e}),r({enhance:!1})})))}}}const f={setColorCorrection:i.setColorCorrection,setBlurEnable:i.setBlurEnable,setBlurForm:i.setBlurForm,setBlurSize:i.setBlurSize,setAutoCorrection:i.setAutoCorrection,setLoading:i.setLoading,setEnhance:i.setEnhance},v=(0,s.connect)((e=>({enhanceCb:e.present.data.enhanceCb,enhanceEnabled:e.present.data.enhanceEnabled,settings:e.present.settings,helpers:e.present.data.helpers,langMap:e.present.data.langMap})),f)(m)},307312:(e,t,r)=>{r.d(t,{CropControls:()=>S});var o=r(434788),n=r(785893),s=r(667294),i=r(832550),a=r(709483),l=r(891687),c=r(50533),d=r(350409),h=r(842386),u=r(659397),p=r(330995),_=r(813412),g=r(668660);const m=(e,t,r)=>{[_.CROP_ASPECT_ORIGINAL,_.CROP_ASPECT_FREE].includes(e)&&(e=t/r);let o=t,n=o/e;return n>r&&(n=r,o=n*e),{x:t/2-o/2,y:r/2-n/2,width:o,height:n}};class f extends s.Component{shouldComponentUpdate(e){return e.cropAspect===this.props.cropAspect&&e.artboardWidth===this.props.artboardWidth&&e.artboardHeight===this.props.artboardHeight||this.setState(m(e.cropAspect,e.artboardWidth,e.artboardHeight)),!0}render(){var e,t;const{artboardWidth:r,artboardHeight:o,langMap:s}=this.props,{x:a,y:l,width:c,height:d,isButtonDisable:h}=this.state,p=c<210,m=p?100:60,f=(0,u.classNames)(g.default.buttons,l+d+m>=o&&g.default.buttonsTop,p&&g.default.buttonsSmall),v=0!==a||0!==l||c!==r||d!==o;return(0,n.jsx)("div",{className:g.default.root,ref:this.containerEl,children:(0,n.jsxs)("div",{className:g.default.inner,ref:this.areaEl,style:{top:l,left:a,width:c,height:d},children:[v&&(0,n.jsxs)("div",{className:f,children:[(0,n.jsx)(i.Button,{size:"s",className:(0,u.classNames)(p&&g.default.buttonSmall),mode:"secondary",appearance:"overlay",onClick:()=>this.reset(this.props.artboardWidth,this.props.artboardHeight),children:null==(e=s)?void 0:e.photos_pe_crop_cancel}),(0,n.jsx)("div",{className:g.default.separator}),(0,n.jsx)(i.Button,{size:"s",className:(0,u.classNames)(p&&g.default.buttonSmall),onClick:this.cropImage,appearance:"overlay",disabled:h,children:null==(t=s)?void 0:t.photos_pe_crop_apply})]}),(0,n.jsxs)("div",{className:g.default.grid,onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.CENTER),children:[(0,n.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineV),style:{left:"33.3333%"}}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineV),style:{left:"66.6666%"}}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineH),style:{top:"33.3333%"}}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.line,g.default.lineH),style:{top:"66.6666%"}}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerNw),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.NW)}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerNe),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.NE)}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerSw),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.SW)}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handleCorner,g.default.handleCornerSe),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.SE)}),this.props.cropAspect===_.CROP_ASPECT_FREE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleN),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.N)}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleS),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.S)}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleW),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.W)}),(0,n.jsx)("div",{className:(0,u.classNames)(g.default.handle,g.default.handleE),onMouseDown:e=>this.controlMouseDown(e,_.CROP_SIDES.E)})]})]})]})})}constructor(e){super(e),this.controlMouseDown=(e,t)=>{e.stopPropagation();const{current:r}=this.areaEl;if(!r)return;window.addEventListener("mousemove",this.controlMouseMove),window.addEventListener("mouseup",this.controlMouseUp);const{x:o,y:n}=(0,h.getRelativeXY)(e.nativeEvent,r);this.shiftX=o,this.shiftY=n,this.initCrop=this.state,this.side=t},this.controlMouseMove=e=>{const{current:t}=this.containerEl;if(!t||void 0===this.shiftX||void 0===this.shiftY||void 0===this.initCrop||void 0===this.side)return;const r=this.state,{artboardWidth:o,artboardHeight:n,cropAspect:s}=this.props,i=s===_.CROP_ASPECT_ORIGINAL?o/n:s,{x:a,y:l,width:c,height:d}=(0,h.getRelativeXY)(e,t);let u=r.x,p=r.y,g=r.width,m=r.height,f=_.CROP_MIN_SIZE,v=_.CROP_MIN_SIZE;if(i&&(i>1?f=_.CROP_MIN_SIZE*i:i<1&&(v=_.CROP_MIN_SIZE/i)),this.side===_.CROP_SIDES.CENTER)u=Math.min(Math.max(0,a-this.shiftX),c-g),p=Math.min(Math.max(0,l-this.shiftY),d-m);else{const e=Math.max(0,a-this.shiftX),t=Math.max(0,l-this.shiftY);switch(this.side){case _.CROP_SIDES.S:m=l-p-(this.shiftY-this.initCrop.height);break;case _.CROP_SIDES.N:p=t,m-=p-r.y;break;case _.CROP_SIDES.W:u=e,g-=u-r.x;break;case _.CROP_SIDES.E:g=a-u-(this.shiftX-this.initCrop.width);break;case _.CROP_SIDES.NW:u=e,p=t,g-=u-r.x,m-=p-r.y;break;case _.CROP_SIDES.NE:p=t,g=a-u-(this.shiftX-this.initCrop.width),m-=p-r.y;break;case _.CROP_SIDES.SW:u=e,g-=u-r.x,m=l-p-(this.shiftY-this.initCrop.height);break;case _.CROP_SIDES.SE:g=a-u-(this.shiftX-this.initCrop.width),m=l-p-(this.shiftY-this.initCrop.height)}if(i){let e=Math.min(g,c-u)/i;if([_.CROP_SIDES.NW,_.CROP_SIDES.NE].includes(this.side)&&(p=Math.max(0,p+m-e)),d-(p+e)<0)return;m=e}g=Math.min(Math.max(f,g),c-u),m=Math.min(Math.max(v,m),d-p),g-f<=0&&(u=r.x,g=r.width),m-v<=0&&(p=r.y,m=r.height)}this.setState({x:u,y:p,width:g,height:m})},this.controlMouseUp=()=>{window.removeEventListener("mousemove",this.controlMouseMove),window.removeEventListener("mouseup",this.controlMouseUp),delete this.shiftX,delete this.shiftY,delete this.initCrop,delete this.side},this.cropImage=()=>{let{width:e,height:t,x:r,y:n}=this.state;const{currentBackgroundUrl:s,artboardWidth:i,artboardHeight:a,prevCropWidth:l,prevCropHeight:c,prevCropY:d,prevCropX:h}=this.props;this.setState({isButtonDisable:!0});const _=document.createElement("canvas"),g=_.getContext("2d");g&&p.imageCacheGlobal.get(s).then((s=>{const p=s.width/i,m=s.height/a;_.width=e*p,_.height=t*m,g.drawImage(s,r*p,n*m,e*p,t*m,0,0,_.width,_.height),_.toBlob((s=>{s&&(this.props.setCrop({url:URL.createObjectURL(s),isCropped:!0,data:{artboardWidth:e,originalWidth:_.width,originalHeight:_.height,addons:(0,o._)({},this.props.addons,{photoHeight:t}),croppedX:r+((0,u.isNumber)(h)?h:0),croppedY:n+((0,u.isNumber)(d)?d:0),croppedWidth:i-e+((0,u.isNumber)(l)?l:0),croppedHeight:a-t+((0,u.isNumber)(c)?c:0)},layers:this.props.layers.items.map((e=>(0,o._)({},e,{x:e.x-r,y:e.y-n}))),drawings:this.props.drawings.map((e=>(0,o._)({},e,{path:e.path.map((e=>[e[0]-r,e[1]-n]))})))}),this.reset(e,t))}),"image/jpeg",1)})).catch((e=>{console.error(e)}))},this.reset=(e,t)=>{this.props.setAspect(_.CROP_ASPECT_FREE),this.setState({x:0,y:0,width:e,height:t,isButtonDisable:!1})},this.containerEl=(0,s.createRef)(),this.areaEl=(0,s.createRef)();const{cropAspect:t,artboardWidth:r,artboardHeight:n}=e;this.state=(0,o._)({isButtonDisable:!1},m(t,r,n))}}const v={setAspect:a.setAspect,setCrop:l.setCrop},S=(0,c.connect)((e=>({currentBackgroundUrl:(0,d.getCurrentImageUrl)(e),cropAspect:e.present.settings.cropAspect,addons:e.present.data.addons,prevCropWidth:e.present.data.croppedWidth,prevCropHeight:e.present.data.croppedHeight,prevCropY:e.present.data.croppedY,prevCropX:e.present.data.croppedX,layers:e.present.layers,drawings:e.present.drawings,langMap:e.present.data.langMap})),v)(f)},565836:(e,t,r)=>{r.d(t,{CropPanel:()=>x});var o=r(434788),n=r(785893),s=r(667294),i=r(832550),a=r(50533),l=r(350409),c=r(891687),d=r(709483),h=r(234448),u=r(659397),p=r(330995),_=r(553750),g=r(866428),m=r(689291),f=r(228729),v=r(813412),S=r(840436),E=r(485243);class T extends s.Component{render(){var e,t,r,o,s;const{langMap:a,layers:l,data:c}=this.props,{isNewFeaturesEnabled:d}=c,{globalScale:h}=l,p=1!==h;return(0,n.jsxs)("div",{className:S.default.root,children:[d&&(0,n.jsx)(E.ZoomWrapper,{}),(0,n.jsx)("span",{className:S.default.title,children:null==(e=a)?void 0:e.photos_pe_crop_aspect_title}),(0,n.jsx)("ul",{className:S.default.tabs,children:v.CROP_ASPECTS.map((e=>{const t=(0,u.classNames)(S.default.tabsButton,this.props.cropAspect===e.value&&S.default.tabsButtonActive);return(0,n.jsx)("li",{className:S.default.tabsItem,children:(0,n.jsx)("button",{className:t,onClick:()=>this.props.setAspect(e.value),children:a&&a[e.title]})},e.title)}))}),(0,n.jsxs)("ul",{className:S.default.settings,children:[(0,n.jsx)("li",{className:S.default.settingsItem,children:(0,n.jsx)(i.Button,{mode:"tertiary",size:"s",before:(0,n.jsx)(_.Icon20RotateRight,{}),onClick:()=>this.rotate(!1),disabled:p,children:null==(t=a)?void 0:t.photos_pe_rotate_right})}),(0,n.jsx)("li",{className:S.default.settingsItem,children:(0,n.jsx)(i.Button,{mode:"tertiary",size:"s",before:(0,n.jsx)(g.Icon20RotateLeft,{}),onClick:()=>this.rotate(!0),disabled:p,children:null==(r=a)?void 0:r.photos_pe_rotate_left})}),(0,n.jsx)("li",{className:S.default.settingsItem,children:(0,n.jsx)(i.Button,{mode:"tertiary",size:"s",before:(0,n.jsx)(m.Icon20FlipHorizontal,{}),onClick:()=>this.flip(!0,!1),disabled:p,children:null==(o=a)?void 0:o.photos_pe_flip_horizontal})}),(0,n.jsx)("li",{className:S.default.settingsItem,children:(0,n.jsx)(i.Button,{mode:"tertiary",size:"s",before:(0,n.jsx)(f.Icon20FlipVertical,{}),onClick:()=>this.flip(!1,!0),disabled:p,children:null==(s=a)?void 0:s.photos_pe_flip_vertical})})]})]})}constructor(){super(...arguments),this.flip=(e,t)=>{var r;const o=document.createElement("canvas"),n=null==(r=o)?void 0:r.getContext("2d"),{currentBackgroundUrl:s}=this.props;n&&p.imageCacheGlobal.get(s).then((r=>{o.width=r.width,o.height=r.height,e?(n.translate(o.width,0),n.scale(-1,1)):t&&(n.translate(0,o.height),n.scale(1,-1)),n.drawImage(r,0,0),o.toBlob((r=>{if(!r)return;const o={url:URL.createObjectURL(r)};e&&(o.flipX=!this.props.flipX),t&&(o.flipY=!this.props.flipY),this.props.setCrop(o)}),"image/jpeg",1)})).catch((e=>{console.error(e)}))},this.rotate=e=>{var t;const r=document.createElement("canvas"),n=null==(t=r)?void 0:t.getContext("2d"),{currentBackgroundUrl:s,originalWidth:i,originalHeight:a}=this.props;n&&p.imageCacheGlobal.get(s).then((t=>{r.width=t.height,r.height=t.width;const s=e?-90:90;n.translate(r.width/2,r.height/2),n.rotate(s*Math.PI/180),n.drawImage(t,-t.width/2,-t.height/2),r.toBlob((e=>{var t;if(!e)return;const n=r.height/r.width,l=((0,u.isNumber)(this.props.rotate)?this.props.rotate:0)+s;var c,d;this.props.rotate>l?null==(c=this.props.helpers)||c.sendStat("turn_left"):null==(d=this.props.helpers)||d.sendStat("turn_right");const h=(null==(t=this.props.data)?void 0:t.showStatusActions)?v.BOTTOM_PANEL_HEIGHT:0,p=this.props.data.imageContainerWidth,_=this.props.data.imageContainerHeight?this.props.data.imageContainerHeight-h:this.props.data.artboardHeight;let g,m;n>=.67?(g=_/n,m=_):(g=p,m=p*n),this.props.setCrop({url:URL.createObjectURL(e),data:{artboardWidth:g,originalWidth:a,originalHeight:i,addons:(0,o._)({},this.props.addons,{photoHeight:m})},rotate:l>270?0:l})}),"image/jpeg",1)})).catch((e=>{console.error(e)}))}}}const y={setCrop:c.setCrop,setAspect:d.setAspect,updateBackgroundLayer:h.updateBackgroundLayer},x=(0,a.connect)((e=>({flipX:e.present.settings.flipX,flipY:e.present.settings.flipY,rotate:e.present.settings.rotation,cropAspect:e.present.settings.cropAspect,currentBackgroundUrl:(0,l.getCurrentImageUrl)(e),addons:e.present.data.addons,artboardWidth:e.present.data.artboardWidth,artboardHeight:e.present.data.artboardHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,helpers:e.present.data.helpers,langMap:e.present.data.langMap,data:e.present.data,layers:e.present.layers})),y)(T)},847542:(e,t,r)=>{r.d(t,{DrawPanel:()=>_});var o=r(785893),n=r(667294),s=r(50533),i=r(709483),a=r(95756),l=r(842386),c=r(279207),d=r(813412),h=r(357841);class u extends n.Component{constructor(e){super(e),this.componentDidMount=()=>{this.updateDrawingPreview()},this.render=()=>{var e,t,r;const{settings:n,setColor:s,setBrushWidth:i,setBrushOpacity:l,avgColor:u,langMap:p}=this.props;return this.updateDrawingPreview(),(0,o.jsxs)("div",{className:h.default.root,children:[(0,o.jsx)("canvas",{ref:this.previewCanvas,width:d.DRAWING_PREVIEW_WIDTH*d.CANVAS_SCALE,height:d.DRAWING_PREVIEW_HEIGHT*d.CANVAS_SCALE,style:{width:d.DRAWING_PREVIEW_WIDTH,height:d.DRAWING_PREVIEW_HEIGHT}}),(0,o.jsxs)("div",{className:h.default.sliders,children:[(0,o.jsxs)("div",{className:h.default.slider,children:[(0,o.jsx)("div",{className:h.default.title,children:null==(e=p)?void 0:e.photos_pe_intensity}),(0,o.jsx)(c.Slider,{min:0,max:1,isShowHandle:!0,defaultValue:n.brushOpacity,formatHint:e=>`${Math.round(100*e)}%`,onChange:e=>l(e)})]}),(0,o.jsxs)("div",{className:h.default.slider,children:[(0,o.jsx)("div",{className:h.default.title,children:null==(t=p)?void 0:t.photos_pe_line_width}),(0,o.jsx)(c.Slider,{min:0,max:1,isShowHandle:!0,defaultValue:n.brushWidth,formatHint:e=>`${Math.round(100*e)}%`,onChange:e=>i(e)})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:h.default.title,children:null==(r=p)?void 0:r.photos_pe_color}),(0,o.jsx)(a.ColorPicker,{color:n.color,avgColor:u,setColor:s})]})]})},this.updateDrawingPreview=()=>{const{current:e}=this.previewCanvas,{settings:t}=this.props;if(!e)return;const r=e.getContext("2d");if(!r)return;const{width:o,height:n}=r.canvas;r.clearRect(0,0,o,n);const s=d.CANVAS_SCALE,i=new Path2D(`M${69*s} ${65*s}L${93*s} ${41*s}L${121*s} ${69*s}L${149*s} ${41*s}L${177*s} ${69*s}L${201*s} ${45*s}`),a="#FFFFFF"===t.color?"#F1F1F1":t.color;r.lineWidth=t.brushWidth*d.BRUSH_WIDTH_COEFFICIENT*s,r.strokeStyle=(0,l.hexToRgba)(a,t.brushOpacity),r.lineJoin=r.lineCap="round",r.stroke(i)},this.previewCanvas=(0,n.createRef)()}}const p={setColor:i.setColor,setBrushWidth:i.setBrushWidth,setBrushOpacity:i.setBrushOpacity},_=(0,s.connect)((e=>({settings:e.present.settings,drawings:e.present.drawings,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap})),p)(u)},952052:(e,t,r)=>{r.d(t,{DrawingLayer:()=>m,drawingLayerSelector:()=>u});var o=r(785893),n=r(667294),s=r(50533),i=r(822188),a=r(234448),l=r(842386),c=r(659397),d=r(813412),h=r(686933);const u="photo-editor-drawing-layer",p=(e,t)=>{const r=e>t?e/t:t/e;return{canvasWidth:e>t?Math.round(1e3*r):1e3,canvasHeight:t>e?Math.round(1e3*r):1e3}};class _ extends n.PureComponent{render(){const{data:e,width:t,height:r,ui:n}=this.props,{originalWidth:s,originalHeight:i}=e,{canvasWidth:a,canvasHeight:l}=p(s,i),_=(0,c.classNames)(h.default.canvas,h.default.draw,n.currentMode!==d.TABS.PAINT&&h.default.disabled);return(0,o.jsx)("canvas",{ref:this.canvas,className:_,onMouseDown:this.drawStart,width:a,height:l,"data-name":u,style:{width:t,height:r}})}componentDidMount(){this.renderDrawings()}drawImage(){var e;const{data:t,width:r,height:o,globalScale:n,shiftY:s,shiftX:i}=this.props,{current:a}=this.canvas,{originalWidth:l,originalHeight:c}=t,d=null==(e=a)?void 0:e.getContext("2d");if(d&&a){const{canvasWidth:e,canvasHeight:t}=p(l,c);a.width=e,a.height=t,a.style.width=`${r}px`,a.style.height=`${o}px`,d.drawImage(a,i,s,e*n,t*n)}}componentDidUpdate(e){e.globalScale!==this.props.globalScale&&this.drawImage(),this.renderDrawings()}constructor(e){super(e),this.renderDrawings=()=>{const{drawings:e,globalScale:t,height:r,width:o,shiftX:n,shiftY:s,data:i}=this.props,{originalWidth:a,originalHeight:c}=i,{current:h}=this.canvas;if(!h)return;const u=h.getContext("2d");if(!u)return;const{canvasWidth:_,canvasHeight:g}=p(a*t,c*t),m=g/r,f=_/o,v=g/r*t;u.clearRect(0,0,h.width,h.height),u.lineCap="round",u.lineJoin="round",e.forEach((e=>{const t=v/e.scale,r=n*m,o=s*f;u.lineWidth=e.width*d.BRUSH_WIDTH_COEFFICIENT*v,u.strokeStyle=(0,l.hexToRgba)(e.color,e.opacity),u.beginPath(),u.moveTo(e.path[0][0]*t+r,e.path[0][1]*t+o),e.path.forEach((e=>{u.lineTo(e[0]*t+r+.01,e[1]*t+o+.01)})),u.stroke()}))},this.drawStart=e=>{var t;const{globalScale:r,shiftX:o,shiftY:n}=this.props;if(this.props.ui.currentMode!==d.TABS.PAINT)return;window.addEventListener("mousemove",this.drawProcess),window.addEventListener("mouseup",this.drawFinish);const{x:s,y:i}=(0,l.getRelativeXY)(e.nativeEvent,this.canvas.current);this.currentDrawing=[[s-o,i-n]];const{settings:a}=this.props;this.props.addDrawing({color:a.color,width:a.brushWidth,opacity:a.brushOpacity,path:this.currentDrawing,scale:r,shiftX:o,shiftY:n}),null==(t=this.props.data.helpers)||t.sendStat("add_graffiti"),this.renderDrawings()},this.drawProcess=e=>{const{x:t,y:r}=(0,l.getRelativeXY)(e,this.canvas.current),{shiftX:o,shiftY:n}=this.props;this.currentDrawing.push([t-o,r-n]),this.renderDrawings()},this.drawFinish=()=>{window.removeEventListener("mousemove",this.drawProcess),window.removeEventListener("mouseup",this.drawFinish),this.currentDrawing=[],this.renderDrawings()},this.canvas=(0,n.createRef)(),this.currentDrawing=[]}}const g={addDrawing:i.addDrawing,addLayerText:a.addLayerText},m=(0,s.connect)((e=>({ui:e.present.ui,settings:e.present.settings,drawings:e.present.drawings,data:e.present.data})),g)(_)},612764:(e,t,r)=>{r.d(t,{EditorCanvas:()=>P,editorCanvasSelector:()=>N});var o=r(785893),n=r(667294),s=r(973935),i=r(50533),a=r(350409),l=r(428661),c=r(234448),d=r(72353),h=r(709483),u=r(952052),p=r(815660),_=r(393522),g=r(307312),m=r(723969),f=r(289584),v=r(700631),S=r(798211),E=r(86894),T=r(659397),y=r(62128),x=r(25184),w=r(322031),C=r(813412),b=r(731026),I=r(846726),R=r(690723),A=r(388380),L=r(578683);const N="editor-canvas";class k extends n.Component{constructor(){super(...arguments),this.render=()=>{const{artboardContainer:e}=this.props.data;return e?s.createPortal(this.renderCanvas(),e):this.renderCanvas()},this.checkIsMoveImageActive=(e,t,r)=>{if([C.TABS.CROP,C.TABS.SEGMENTATION].includes(e.currentMode)&&1!==r)return C.TABS.SEGMENTATION===e.currentMode?!t.segmentation.enabled:1!==r},this.getMaskPhotoEditorApi=(e,t)=>{var r,o,n;const{settings:s,data:i,setLoading:a}=this.props,{addons:l,segmentationCb:c}=i;if(!l)return;const d=null==(r=s.segmentation)?void 0:r.mode,{segmentation:h}=this.props;if(!c)return;const u=[...(null==(o=h)?void 0:o.clicks)||[],{col:Math.round(e),row:Math.round(t),positive:"positive"===d}];a({segmentation:!0}),c(u,(null==(n=h)?void 0:n.mask)||"",(r=>{r?this.props.setSegmentationData({click:{col:Math.round(e),row:Math.round(t),positive:"positive"===d},mask:r}):this.props.setSegmentation({mode:"positive",enabled:!1}),a({segmentation:!1})}))},this.renderCanvas=()=>{var e,t,r,s,i,a,l,c,d;const{layers:h,background:k,data:O,ui:P,settings:D,langMap:M,globalScale:B,setLayersShift:F}=this.props,{shiftX:H,shiftY:U}=h,{addons:j,artboardWidth:G,artboardHeight:W,attachment:Y,originalWidth:z,croppedWidth:Z,croppedHeight:X}=O,{currentIndex:V,items:K}=this.props.layers,$=null!==V&&K[V],q=!h.items[0].locked,Q=$&&$.type===C.LAYER_TYPES.TEXT&&$.isEdit,J=this.props.ui.isDataLoaded&&this.props.data.context===C.CONTEXT_TYPES.STORY,ee=this.props.marginTop;let te=W;(null==(e=j)?void 0:e.photoHeight)&&(te=j.photoHeight);const re=(0,T.classNames)(b.default.root,C.TABS.COLOR===P.currentMode&&D.blur.isEnabled&&b.default.blurCursor),oe=z/G,ne=this.checkIsMoveImageActive(P,D,B),se=(0,o.jsx)("div",{className:b.default.postIconToolTip,children:null==(t=M)?void 0:t.photos_pe_attached_post});return(0,o.jsxs)(n.Fragment,{children:[(null==(r=this.props.data)?void 0:r.showStatusActions)&&(0,o.jsx)(L.UndoRedo,{}),(0,o.jsxs)("div",{style:{width:G,height:te,marginTop:ee},"data-name":N,className:re,children:[this.props.ui.isDataLoaded&&P.currentMode===C.TABS.CROP&&1===B&&(0,o.jsx)(g.CropControls,{artboardWidth:G,artboardHeight:te}),ne&&(0,o.jsx)(I.MoveImage,{width:G,height:te,move:F}),P.currentMode===C.TABS.SEGMENTATION&&(0,o.jsx)(R.SegmentationPane,{globalScale:B,width:G,height:te,shiftX:H,shiftY:U,croppedWidth:Z,croppedHeight:X,aspectRatio:oe,mode:D.segmentation.enabled&&(null==(s=D.segmentation)?void 0:s.mode),loading:D.loading.segmentation,click:this.getMaskPhotoEditorApi}),(0,o.jsx)(m.Layers,{setLayerScale:this.props.setLayerScale,startLayerScale:this.props.startLayerScale,toggleTextEditor:this.props.toggleTextEditor,currentMode:this.props.ui.currentMode,getStickerUrlById:this.props.getStickerUrlById,layers:h,globalScale:B,context:null==(i=this.props.data)?void 0:i.context}),Q&&$?(0,o.jsx)(f.EditorText,{layer:$,onChange:this.onChangeText,closeTextEditor:this.props.closeTextEditor,sendStat:null==(a=this.props.data.helpers)?void 0:a.sendStat}):J&&(0,o.jsxs)(n.Fragment,{children:[!!Y&&!P.isShowDropBox&&(0,o.jsx)(E.unstable_RichTooltip,{content:se,children:(0,o.jsx)("span",{className:b.default.postIcon,children:(0,o.jsx)(y.Icon16Repost,{})})}),!P.isShowDropBox&&!this.props.data.locked&&this.props.background.currentBackgroundType===C.BACKGROUND_MODES.PHOTO&&[C.TABS.STICKERS,C.TABS.TEXT].includes(this.props.ui.currentMode)&&(0,o.jsx)("button",{className:b.default.scaleButton,onClick:this.onClickScaleButton,children:q?(0,o.jsx)(x.Icon24Fullscreen,{}):(0,o.jsx)(w.Icon24FullscreenExit,{})}),!P.isShowDropBox&&(0,o.jsx)(v.SwitchMode,{current:k.currentBackgroundType,setMode:this.props.setMode,sendStat:null==(c=this.props.data)||null==(l=c.helpers)?void 0:l.sendStat})]}),P.isShowDropBox&&$&&$.canDelete&&(0,o.jsx)(S.DropBox,{onDelete:this.props.deleteLayer}),this.props.ui.isDataLoaded&&(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(u.DrawingLayer,{width:G,height:te,globalScale:B,shiftX:H,shiftY:U}),(0,o.jsx)(A.SegmentationLayer,{globalScale:B,shiftX:H,shiftY:U,width:G,height:te})]}),this.props.ui.isDataLoaded&&(0,o.jsx)(p.ImageLayer,{width:G,height:te})]}),this.props.ui.isDataLoaded&&(null==(d=this.props.data)?void 0:d.showStatusActions)&&(0,o.jsx)(_.StatusPanel,{currentBackgroundId:k.currentBackgroundId,setCurrentBackgroundId:this.props.setCurrentBackgroundId,currentBackgroundType:k.currentBackgroundType,uploadPhoto:this.props.uploadPhoto,backgrounds:this.props.data.backgrounds})]})},this.onClickScaleButton=()=>{const e=this.props.layers.items[0],t={},{artboardWidth:r,artboardHeight:o}=this.props.data,n=e.height/e.width;let s,i;n>1.77?(i=o,s=i/n):(s=r,i=r*n);const a=r/2,l=o/2;var c,d;e.locked?(null==(c=this.props.data.helpers)||c.sendStat("zoom"),Object.assign(t,{locked:!1,scale:.7})):(null==(d=this.props.data.helpers)||d.sendStat("unzoom"),Object.assign(t,{locked:!0,rotate:0,x:a,y:l,width:s,height:i,scale:1}));this.props.updateBackgroundLayer(t),this.props.setCurrentLayer(e.locked?0:null)},this.onChangeText=e=>{this.props.setLayerText(e)}}}const O={setCurrentBackgroundId:l.setCurrentBackgroundId,setLayerScale:c.setLayerScale,startLayerScale:c.startLayerScale,setLayerText:c.setLayerText,toggleTextEditor:c.toggleTextEditor,deleteLayer:c.deleteLayer,updateBackgroundLayer:c.updateBackgroundLayer,setCurrentLayer:c.setCurrentLayer,setBackgroundType:l.setBackgroundType,closeTextEditor:c.closeTextEditor,setLayersShift:c.setLayersShift,setSegmentationData:d.setSegmentationData,setSegmentation:h.setSegmentation,setLoading:h.setLoading},P=(0,i.connect)((e=>({ui:e.present.ui,settings:e.present.settings,layers:e.present.layers,drawings:e.present.drawings,background:e.present.background,data:e.present.data,marginTop:(0,a.getMarginTop)(e),langMap:e.present.data.langMap,globalScale:e.present.layers.globalScale,segmentation:e.present.ml.segmentation})),O)(k)},981574:(e,t,r)=>{r.d(t,{FiltersItem:()=>f});var o=r(785893),n=r(667294),s=r(350409),i=r(50533),a=r(153137),l=r(330995),c=r(709483),d=r(842386),h=r(659397),u=r(519979),p=r(813412),_=r(218791);class g extends n.Component{componentDidMount(){this.update(this.props.currentBackgroundUrl)}render(){const{langMap:e}=this.props,t=this.props.currentFilterName===this.props.filter,r=(0,h.classNames)(_.default.root,t&&_.default.active),n=t?(0,o.jsx)("div",{className:_.default.checked,children:(0,o.jsx)(u.Icon16Done,{})}):null;return(0,o.jsx)("div",{className:r,onClick:this.handleClick,children:(0,o.jsxs)("div",{className:_.default.inner,style:{width:p.FILTER_PREVIEW_WIDTH},children:[(0,o.jsx)("canvas",{className:_.default.image,ref:this.canvas,width:p.FILTER_PREVIEW_WIDTH*p.CANVAS_SCALE,height:p.FILTER_PREVIEW_HEIGHT*p.CANVAS_SCALE,style:{width:p.FILTER_PREVIEW_WIDTH,height:p.FILTER_PREVIEW_HEIGHT}}),(0,o.jsx)("span",{className:_.default.name,children:this.getFilterLang(this.props.filter,e)}),n]})})}getFilterLang(e,t){if(t)switch(e){case"regular":return t.photos_pe_filter_regular;case"nox":return t.photos_pe_filter_nox;case"vesper":return t.photos_pe_filter_vesper;case"latona":return t.photos_pe_filter_latona;case"liber":return t.photos_pe_filter_liber;case"luna":return t.photos_pe_filter_luna;case"minerva":return t.photos_pe_filter_minerva;case"mitra":return t.photos_pe_filter_mitra;case"pro":return t.photos_pe_filter_pro;case"terra":return t.photos_pe_filter_terra;case"veles":return t.photos_pe_filter_veles;case"vesta":return t.photos_pe_filter_vesta;case"zaria":return t.photos_pe_filter_zaria;case"sepia":return t.photos_pe_filter_sepia;case"genius":return t.photos_pe_filter_genius;case"horus":return t.photos_pe_filter_horus;case"fortuna":return t.photos_pe_filter_fortuna;default:return}}update(e){e&&l.imageCacheGlobal.get(e).then((e=>{this.renderImage(e)})).catch((e=>{console.error(e)}))}renderImage(e){this.renderer.render(p.FILTER_PREVIEW_WIDTH*p.CANVAS_SCALE,p.FILTER_PREVIEW_HEIGHT*p.CANVAS_SCALE,e,this.props.filter,{amount:.75,sourceSize:[e.width,e.height]}).then((t=>{if(!t)return;const r=this.canvas.current;if(!r)return;const o=r.getContext("2d");if(!o)return;const n=+(e.height/e.width).toFixed(2);let s,i;n>1.77?(s=r.height/n,i=r.height):(s=r.width,i=r.width*n);const a=r.width/2-s/2,l=r.height/2-i/2;(0,d.drawBlurFromImage)(r,t,this.props.avgColor),o.drawImage(t,a,l,s,i)})).catch((e=>{console.error(new Error(e))}))}constructor(e){super(e),this.shouldComponentUpdate=e=>{const{currentBackgroundUrl:t,currentFilterName:r}=this.props,o=t!==e.currentBackgroundUrl;return r!==e.currentFilterName||(o&&this.update(e.currentBackgroundUrl),!1)},this.handleClick=()=>{var e,t;(this.props.setFilter(this.props.filter),"regular"===this.props.filter)?null==(e=this.props.helpers)||e.sendStat("remove_filter"):null==(t=this.props.helpers)||t.sendStat("add_filter")},this.canvas=(0,n.createRef)(),this.renderer=new a.Renderer}}const m={setFilter:c.setFilter},f=(0,i.connect)((e=>({currentFilterName:e.present.settings.filter.name,currentBackgroundUrl:(0,s.getCurrentImageUrl)(e),helpers:e.present.data.helpers,langMap:e.present.data.langMap})),m)(g)},575213:(e,t,r)=>{r.d(t,{FiltersPanel:()=>p});var o=r(785893),n=r(667294),s=r(981574),i=r(709483),a=r(50533),l=r(279207),c=r(813412),d=r(374667);class h extends n.Component{render(){return(0,o.jsxs)("div",{className:d.default.root,children:[(0,o.jsx)("div",{className:d.default.header,children:this.renderHeader()}),(0,o.jsx)("div",{className:d.default.inner,children:c.PHOTO_FILTERS.map((e=>(0,o.jsx)(s.FiltersItem,{avgColor:this.props.avgColor,filter:e},e)))})]})}renderHeader(){var e;const{settings:t,langMap:r}=this.props;var n;return"regular"===t.filter.name?(0,o.jsx)("span",{children:null==(n=r)?void 0:n.photos_pe_filter_disabled}):(0,o.jsxs)("div",{className:d.default.slider,children:[(0,o.jsx)("span",{className:d.default.title,children:null==(e=r)?void 0:e.photos_pe_filter_enabled}),(0,o.jsx)(l.Slider,{min:0,max:1,value:t.filter.value,isShowHandle:!0,onChange:this.props.setFilterAmount,formatHint:e=>`${Math.round(100*e)}%`})]})}}const u={setFilterAmount:i.setFilterAmount},p=(0,a.connect)((e=>({settings:e.present.settings,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap})),u)(h)},815660:(e,t,r)=>{r.d(t,{ImageLayer:()=>v,imageLayerSelector:()=>g});var o=r(785893),n=r(667294),s=r(50533),i=r(350409),a=r(234448),l=r(842386),c=r(330995),d=r(153137),h=r(813412),u=r(659397),p=r(753148);const _={},g="photo-editor-image-layer";class m extends n.PureComponent{componentDidMount(){this.update(!1)}componentDidUpdate(e){var t,r,o,n;const{originalWidth:s,originalHeight:i,background:a}=this.props,l=s!==e.originalWidth||i!==e.originalHeight;this.needUpdateSize=l||JSON.stringify(a)!==JSON.stringify(e.background),this.needUpdateSegmentation=(null==(r=e.ml)||null==(t=r.segmentation)?void 0:t.mask)!==(null==(n=this.props.ml)||null==(o=n.segmentation)?void 0:o.mask),this.update()}render(){const{originalWidth:e,originalHeight:t}=this.props;return(0,o.jsx)("canvas",{ref:this.canvas,className:p.default.root,width:e,height:t,"data-name":g,style:{width:this.props.width,height:this.props.height}})}update(e=!0){var t,r;const{currentBackgroundUrl:o,enhance:n}=this.props;let s=o;(null==(t=n)?void 0:t.active)&&(null==(r=n)?void 0:r.url)&&(s=n.url),s&&c.imageCacheGlobal.get(s).then((t=>{this.renderImage(t,e)})).catch((e=>{console.error(e)}))}renderImage(e,t){const{current:r}=this.canvas;if(!r)return;if(!r.getContext("2d"))return;const{background:o}=this.props;let{colorCorrection:n,filter:s,blur:i,isAutoCorrection:a}=this.props;o.currentBackgroundType===h.BACKGROUND_MODES.BACKGROUND&&(s={name:h.PHOTO_FILTERS[0],value:0},n={exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},i={isEnabled:!1,form:i.form,size:i.size,position:i.position},a=!1);const c={exposure:n.exposure,contrast:n.contrast,saturation:n.saturation,warmth:n.warmth,amount:s.value,vignette:n.vignette,sharpness:n.sharpness,grain:n.grain,sourceSize:[e.width,e.height]};this.renderer.render(e.width,e.height,e,s.name,c,i,a).then((o=>{if(!o)return;const n=e.height/e.width;let s,i;n>1.77?(s=this.props.height/n,i=this.props.height):(s=this.props.width,i=this.props.width*n);const a=Math.floor(this.props.width/2),c=Math.floor(this.props.height/2),d=(0,l.copyCanvas)(o);let h=_[e.src];h||(_[e.src]=(0,l.getAverageRGB)(d),h=_[e.src]),(0,l.drawBlurFromImage)(r,d,h);const u={canvas:d,width:s,height:i,avgColor:h};this.needUpdateSize&&Object.assign(u,{x:a,y:c,locked:!0,rotate:0,scale:1}),this.props.updateBackgroundLayer(u,t),this.firstRender&&(this.props.renderTime(performance.now()-this.props.renderStart),this.firstRender=!1)})).catch((e=>{console.error(new Error(e))}))}constructor(e){super(e),this.firstRender=!0,this.canvas=(0,n.createRef)(),this.renderer=new d.Renderer,this.needUpdateSize=!0,this.needUpdateSegmentation=!1}}const f={updateBackgroundLayer:a.updateBackgroundLayer},v=(0,s.connect)((e=>{var t;return{currentBackgroundUrl:(0,i.getCurrentImageUrl)(e),originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,background:e.present.background,isAutoCorrection:e.present.settings.isAutoCorrection,colorCorrection:e.present.settings.colorCorrection,filter:e.present.settings.filter,blur:e.present.settings.blur,ml:e.present.ml,enhance:e.present.settings.enhance,renderTime:(null==(t=e.present.data.helpers)?void 0:t.renderTime)||u.noop,renderStart:e.present.data.renderStart}}),f)(m)},846726:(e,t,r)=>{r.d(t,{MoveImage:()=>i});var o=r(785893),n=r(940378),s=r(667294);const i=({width:e,height:t,move:r})=>{const i=(0,s.useRef)(0),a=(0,s.useRef)(0),l=e=>{r(e.clientX-i.current,e.clientY-a.current),i.current=e.clientX,a.current=e.clientY},c=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",c)};return(0,o.jsx)("div",{className:n.default.root,style:{width:e,height:t},onMouseDown:e=>{i.current=e.clientX,a.current=e.clientY,window.addEventListener("mousemove",l),window.addEventListener("mouseup",c)}})}},690723:(e,t,r)=>{r.d(t,{SegmentationPane:()=>l});var o=r(785893),n=r(576678),s=r(667294),i=r(842386),a=r(659397);const l=({width:e,height:t,aspectRatio:r,globalScale:l,shiftX:c,shiftY:d,click:h,mode:u,croppedWidth:p=0,croppedHeight:_=0,loading:g=!1})=>{const m=(0,s.useRef)(null);return(0,o.jsx)("div",{ref:m,className:(0,a.classNames)(n.default.root,"positive"===u&&n.default.positive,"negative"===u&&n.default.negative,g&&n.default.loading),style:{width:e,height:t},onMouseDown:t=>{if(!u||g)return;const{x:o,y:n}=(0,i.getRelativeXY)(t.nativeEvent,m.current),s=e*r/(e*l);h(o*s-c*s+p*s*l,n*s-d*s+_*s*l)}})}},855829:(e,t,r)=>{r.d(t,{SegmentationPanelComponent:()=>f});var o=r(434788),n=r(785893),s=r(71814),i=r(667294),a=r(832550),l=r(86894),c=r(979075),d=r(892097),h=r(485243),u=r(709483),p=r(72353),_=r(50533),g=r(95756);const m={setSegmentation:u.setSegmentation,resetSegmentationData:p.resetSegmentationData,setSegmentationInverse:u.setSegmentationInverse,setSegmentationDelete:u.setSegmentationDelete,resetSegmentationSettings:u.resetSegmentationSettings,setSegmentationBackgroundColor:u.setSegmentationBackgroundColor},f=(0,_.connect)((e=>({settings:e.present.settings,segmentation:e.present.ml.segmentation,avgColor:e.present.layers.items[0].avgColor})),m)((({setSegmentation:e,settings:t,segmentation:r,resetSegmentationData:u,setSegmentationDelete:p,setSegmentationInverse:_,resetSegmentationSettings:m,avgColor:f,setSegmentationBackgroundColor:v})=>{var S;const E=t.segmentation.enabled,T="positive"===t.segmentation.mode,y="negative"===t.segmentation.mode,x=t.segmentation.color,w=!(null==(S=r)?void 0:S.mask),C=t.segmentation.delete;return(0,n.jsxs)("div",{className:s.default.root,children:[(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(h.ZoomWrapper,{}),(0,n.jsx)("span",{className:s.default.title,children:"Выделение объекта"}),(0,n.jsxs)("ul",{className:s.default.selection,children:[(0,n.jsx)(a.Button,{mode:T&&E?"secondary":"tertiary",size:"s",before:(0,n.jsx)(c.Icon20AddCircleOutline,{}),disabled:C,onClick:()=>e((0,o._)({},t.segmentation,{enabled:!(E&&T),mode:"positive"})),children:"Добавить выделение"}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(a.Button,{mode:y&&E?"secondary":"tertiary",size:"s",before:(0,n.jsx)(d.Icon20RemoveCircleOutline,{}),onClick:()=>e((0,o._)({},t.segmentation,{enabled:!(E&&y),mode:"negative"})),disabled:w||C,children:"Снять выделение"})]})]}),(0,n.jsx)("span",{className:s.default.title,children:"Выделить или убрать выделение объектов можно с помощью нажатия на них"}),(0,n.jsx)(l.Spacing,{size:25}),!C&&(0,n.jsxs)("ul",{className:s.default.selection,children:[(0,n.jsxs)(l.ButtonGroup,{stretched:!0,children:[(0,n.jsx)(a.Button,{stretched:!0,mode:"secondary",size:"s",disabled:w,onClick:()=>{_(!Boolean(t.segmentation.inverse))},children:"Инвертировать"}),(0,n.jsx)(a.Button,{stretched:!0,mode:"secondary",size:"s",disabled:w,onClick:()=>{u(),m({canUndo:!1})},children:"Сбросить"})]}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(a.Button,{stretched:!0,mode:"secondary",size:"s",disabled:w,onClick:()=>{p(!C)},children:"Удалить выбранную область"})]}),C&&(0,n.jsxs)("div",{className:s.default.colors,children:[(0,n.jsx)("div",{className:s.default.title,children:"Цвет фона"}),(0,n.jsx)(g.ColorPicker,{color:x,avgColor:f,setColor:v})]})]})}))},388380:(e,t,r)=>{r.d(t,{SegmentationLayer:()=>p});var o=r(785893),n=r(667294),s=r(350409),i=r(50533),a=r(842386),l=r(330995),c=r(2413),d=r(659397);class h extends n.PureComponent{componentDidUpdate(e){var t,r;const o=e.inverse!==this.props.inverse,n=e.delete!==this.props.delete,s=(null==(t=e.segmentation)?void 0:t.mask)!==(null==(r=this.props.segmentation)?void 0:r.mask),i=e.color!==this.props.color,a=e.croppedWidth!==this.props.croppedWidth||e.croppedHeight!==this.props.croppedHeight,l=s||o||n||i||a;this.update(l)}update(e){const{currentBackgroundUrl:t}=this.props;t&&l.imageCacheGlobal.get(t).then((t=>{const r=t.width,o=t.height;this.drawImage(e,r,o)})).catch((e=>{console.error(e)}))}drawImage(e,t,r){var o;const{globalScale:n,shiftY:s,shiftX:i,segmentation:l,croppedHeight:c=0,croppedWidth:h=0,croppedY:u=0,croppedX:p=0,width:_,height:g}=this.props,{current:m}=this.canvasBg,{r:f,g:v,b:S}=(0,a.hexToRgbaValues)(this.props.color),E=null==(o=m)?void 0:o.getContext("2d"),{imageWidth:T,imageHeight:y}=this.getWH(_,g),x=T*n,w=y*n,{imageWidth:C,imageHeight:b}=this.getWH(t,r);if(E&&m)if(m.width=x,m.height=w,E.clearRect(0,0,x,w),e){var I;const e=this.maskCanvas.getContext("2d"),o=this.canvasRender.getContext("2d");if(!e||!o)return;if(!(null==(I=this.props.segmentation)?void 0:I.mask))return void e.clearRect(0,0,x,w);const a=new Image;a.onload=()=>{this.maskCanvas.width=C,this.maskCanvas.height=b,this.canvasRender.width=t,this.canvasRender.height=r,e.drawImage(a,0,0,C,b);const l=e.getImageData(0,0,C,b),d=l.data;for(let e=0;e<d.length;e+=4){const t=!(255!==d[e]&&254!==d[e]||255!==d[e+1]&&254!==d[e+1]||255!==d[e+2]&&254!==d[e+2]);this.props.inverse?this.props.delete?t?d[e+3]=0:(d[e]=f,d[e+1]=v,d[e+2]=S,d[e+3]=255):t?d[e+3]=0:(d[e+1]=128,d[e+2]=255,d[e+3]=100):this.props.delete?t?(d[e]=f,d[e+1]=v,d[e+2]=S):d[e+3]=0:t?(d[e]=0,d[e+1]=128,d[e+2]=255,d[e+3]=100):d[e+3]=0}e.putImageData(l,0,0);const _=C/x,g=b/w;o.drawImage(this.maskCanvas,0,0,t,r,-p*_,-u*g,t+h*_,r+c*g),E.drawImage(this.maskCanvas,0,0,C,b,i-p*n,s-u*n,x+h*n,w+c*n),this.props.setData({maskCanvas:this.canvasRender})},a.src=(0,d.isString)(l.mask)?`data:image/png;base64,${l.mask}`:""}else E.drawImage(this.maskCanvas,0,0,C,b,i-p*n,s-u*n,x+h*n,w+c*n)}getWH(e,t){const r=t/e;let o,n;return r>1.77?(o=t/r,n=t):(o=e,n=e*r),{imageWidth:o,imageHeight:n}}render(){return(0,o.jsx)("canvas",{style:{position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none"},ref:this.canvasBg})}constructor(e){super(e),this.canvasBg=(0,n.createRef)(),this.maskCanvas=document.createElement("canvas"),this.canvasRender=document.createElement("canvas")}}const u={setData:c.setData},p=(0,i.connect)((e=>({currentBackgroundUrl:(0,s.getCurrentImageUrl)(e),croppedY:e.present.data.croppedY,croppedX:e.present.data.croppedX,croppedWidth:e.present.data.croppedWidth,croppedHeight:e.present.data.croppedHeight,originalWidth:e.present.data.originalWidth,originalHeight:e.present.data.originalHeight,segmentation:e.present.ml.segmentation,inverse:e.present.settings.segmentation.inverse,delete:e.present.settings.segmentation.delete,color:e.present.settings.segmentation.color})),u)(h)},393522:(e,t,r)=>{r.d(t,{StatusPanel:()=>p});var o=r(785893),n=r(667294),s=r(50533),i=r(234448),a=r(659397),l=r(506281),c=r(813412),d=r(653927);class h extends n.Component{componentDidMount(){const{current:e}=this.scrollElement,t=document.querySelector('[data-status-active="true"]');if(!e||!t)return;t.offsetLeft+30>e.offsetWidth&&this.setPosition(e.offsetWidth)}constructor(e){super(e),this.componentDidUpdate=()=>{this.scrollWithAnimation=!1},this.render=()=>{var e;const{langMap:t}=this.props,{currentIndex:r,items:n}=this.props.layers,s=null!==r&&n[r],i=s&&s.type===c.LAYER_TYPES.TEXT&&s.isEdit;let l="";var h;if(s)if(s.type===c.LAYER_TYPES.STICKER)l=null==(h=t)?void 0:h.photos_pe_delete_sticker;else if(s.type===c.LAYER_TYPES.TEXT){var u;l=null==(u=t)?void 0:u.photos_pe_delete_text}let p;return this.props.currentBackgroundType!==c.BACKGROUND_MODES.BACKGROUND||s||(p=!0),(0,o.jsx)("div",{className:(0,a.classNames)(d.default.root,d.default.square),children:p?this.renderBackgrounds():(0,o.jsxs)("div",{className:d.default.inner,children:[this.renderLeftBlock(),(0,o.jsxs)("div",{children:[s&&!i&&(0,o.jsx)("a",{className:d.default.link,onClick:this.props.deleteLayer,children:l}),s&&i&&(0,o.jsx)("a",{className:d.default.link,onClick:this.props.closeTextEditor,children:null==(e=t)?void 0:e.photos_pe_save_text})]})]})})},this.renderLeftBlock=()=>{const{addons:e,langMap:t}=this.props;var r,n,s;return"photo"===this.props.context?(0,o.jsxs)("div",{children:[e&&e.edited&&e.canEdit&&(0,o.jsx)("a",{className:d.default.link,onClick:e.restore,children:null==(r=t)?void 0:r.photos_filtered_restore}),e&&!e.canEdit&&(0,o.jsx)("span",{className:d.default.info,children:null==(n=t)?void 0:n.photos_will_be_saved_to_pe_album})]}):(0,o.jsx)("div",{children:this.props.currentBackgroundType===c.BACKGROUND_MODES.PHOTO&&(0,o.jsx)("a",{className:d.default.link,onClick:()=>this.props.uploadPhoto(),children:null==(s=t)?void 0:s.photos_pe_change_photo})})},this.renderBackgrounds=()=>{const{scrollBlockPosition:e}=this.state,{advice_gradients:t,colors:r}=this.props.backgrounds,{current:n}=this.scrollElement,s=n?e+n.offsetWidth:0,i=!!e,c=!n||!!(n.scrollWidth-s),h=[...t,...r];return(0,o.jsxs)("div",{className:d.default.backgrounds,onWheel:this.panelMouseWheel,children:[(0,o.jsx)("div",{style:{transform:`translateX(-${e}px)`,transition:""+(this.scrollWithAnimation?"transform .3s ease-out":"")},ref:this.scrollElement,children:h.map((({id:e,preview:t,background:r})=>(0,o.jsx)("a",{className:(0,a.classNames)(d.default.background,e===this.props.currentBackgroundId&&d.default.backgroundActive),"data-status-active":e===this.props.currentBackgroundId,style:{backgroundColor:r,backgroundImage:`url(${t})`},onClick:()=>{var t;this.props.setCurrentBackgroundId(e),null==(t=this.props.helpers)||t.sendStat("select_background")}},e)))}),i&&(0,o.jsx)("div",{className:(0,a.classNames)(d.default.arrow,d.default.arrowLeft),onClick:()=>this.handleArrowClick(!0),children:(0,o.jsx)(l.Icon24Chevron,{className:d.default.arrowIcon})}),c&&(0,o.jsx)("div",{className:(0,a.classNames)(d.default.arrow,d.default.arrowRight),onClick:()=>this.handleArrowClick(!1),children:(0,o.jsx)(l.Icon24Chevron,{className:d.default.arrowIcon})})]})},this.panelMouseWheel=e=>{this.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},this.setPosition=(e,t)=>{const{current:r}=this.scrollElement;if(!r)return;const{scrollBlockPosition:o}=this.state,n=r.offsetWidth,s=Math.max(0,Math.min(o+e,r.scrollWidth-n));t&&(this.scrollWithAnimation=!0),this.setState({scrollBlockPosition:s})},this.handleArrowClick=e=>{const{current:t}=this.scrollElement;if(!t)return;let r=t.offsetWidth/2;e&&(r=-r),this.setPosition(r,!0)},this.state={scrollBlockPosition:0},this.scrollElement=(0,n.createRef)(),this.scrollWithAnimation=!1}}const u={deleteLayer:i.deleteLayer,closeTextEditor:i.closeTextEditor},p=(0,s.connect)((e=>({context:e.present.data.context,layers:e.present.layers,addons:e.present.data.addons,helpers:e.present.data.helepers,langMap:e.present.data.langMap})),u)(h)},330141:(e,t,r)=>{r.d(t,{StickerPacksPanel:()=>f});var o=r(785893),n=r(667294),s=r(50533),i=r(489143),a=r(2413),l=r(659397),c=r(135826),d=r(50466),h=r(427323),u=r(506281),p=r(813412),_=r(119504);class g extends n.Component{fetchStickers(){this.props.helpers.fetchStickers((e=>{const t={};e.stickers.forEach((e=>{e.items.forEach((e=>{t[e.id]=e}))})),this.props.setData({stickers:e.stickers,stickersMap:t})}),(e=>(console.error(e),!0)))}showStickerShop(){this.props.helpers.showStickerShop((()=>this.fetchStickers()))}constructor(e){super(e),this.componentDidMount=()=>{this.fetchStickers()},this.componentDidUpdate=()=>{this.scrollWithAnimation=!1},this.render=()=>{const e="vkcom_dark"===document.body.getAttribute("scheme"),{stickers:t,stickerMouseDown:r}=this.props,{stickerHeaderScrollPosition:n,currentStickerPackIndex:s}=this.props.ui,{current:i}=this.scrollElement,a=!!n;let g=!1,m=0;i&&(m=((0,l.isNumber)(n)?n:0)+i.offsetWidth,g=!!(i.scrollWidth-m));let f=t[s]?t[s].items:[];const v=[];for(let e=0,t=f.length;e<t;e+=3)v.push(f.slice(e,e+3));return(0,o.jsxs)("div",{className:_.default.root,children:[(0,o.jsxs)("div",{className:_.default.header,children:[(0,o.jsxs)("div",{className:_.default.scroll,style:{transform:`translateX(-${n}px)`,transition:""+(this.scrollWithAnimation?"transform .3s ease-out":"")},ref:this.scrollElement,onWheel:this.tabsMouseWheel,children:[(0,o.jsx)("div",{className:_.default.tab,onClick:()=>this.showStickerShop(),children:(0,o.jsx)(c.Icon24StorefrontOutline,{})}),t.map((({id:e},t)=>{const r=this.getTabPreviewUrl(t);if(!r)return null;const n=!["recent","editor"].includes(e.toString()),i=(0,l.classNames)(_.default.tab,t===s&&_.default.tabSelected),a=n?null:"recent"===e?(0,o.jsx)(d.Icon24RecentOutline,{}):(0,o.jsx)(h.Icon24SmileOutline,{});return(0,o.jsx)("div",{className:i,style:n?{backgroundImage:`url('${r}')`}:void 0,onClick:()=>this.selectStickerPack(t),children:a},e)}))]}),a&&(0,o.jsx)("div",{className:(0,l.classNames)(_.default.arrow,_.default.arrowLeft,e&&_.default.arrowLeftDark),onClick:()=>this.handleTabArrowClick(!0),children:(0,o.jsx)(u.Icon24Chevron,{className:_.default.arrowIcon})}),g&&(0,o.jsx)("div",{className:(0,l.classNames)(_.default.arrow,_.default.arrowRight,e&&_.default.arrowRightDark),onClick:()=>this.handleTabArrowClick(!1),children:(0,o.jsx)(u.Icon24Chevron,{className:_.default.arrowIcon})})]}),(0,o.jsx)("div",{className:_.default.content,children:v.map(((t,n)=>(0,o.jsx)("div",{children:t.map((({id:t,sizes:n})=>{const s=n[e&&!t.startsWith("editor_")?`${p.STICKER_MEDIUM}b`:`${p.STICKER_MEDIUM}`];return(0,o.jsx)("div",{className:_.default.preview,onMouseDown:e=>r(e,t),children:(0,o.jsx)("img",{src:s,className:_.default.previewImage})},t)}))},n)))})]})},this.getTabPreviewUrl=e=>{const{items:t}=this.props.stickers[e],[r=null]=t||[];return!(!t||!r)&&r.sizes[p.STICKER_THUMB]},this.selectStickerPack=e=>{this.props.setCurrentStickerPackIndex(e)},this.tabsMouseWheel=e=>{this.setPosition(Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX)},this.handleTabArrowClick=e=>{const{current:t}=this.scrollElement;if(!t)return;let r=t.offsetWidth;e&&(r=-r),this.setPosition(r,!0)},this.setPosition=(e,t)=>{const{current:r}=this.scrollElement,{stickerHeaderScrollPosition:o}=this.props.ui;if(!r)return;const n=r.offsetWidth,s=Math.max(0,Math.min(((0,l.isNumber)(o)?o:0)+e,r.scrollWidth-n));t&&(this.scrollWithAnimation=!0),this.props.setHeaderScrollPosition(s)},this.loadingLimit=25,this.scrollElement=(0,n.createRef)(),this.scrollWithAnimation=!1}}const m={setCurrentStickerPackIndex:i.setCurrentStickerPackIndex,setHeaderScrollPosition:i.setHeaderScrollPosition,setData:a.setData},f=(0,s.connect)((e=>({ui:e.present.ui,stickers:e.present.data.stickers,helpers:e.present.data.helpers})),m)(g)},651242:(e,t,r)=>{r.d(t,{StickersPanel:()=>i});var o=r(785893),n=r(813412),s=r(443940);const i=({stickerMouseDown:e,customStickers:t})=>{const r=t.map(((t,r)=>{const i=t.sizes[n.STICKER_MEDIUM];return(0,o.jsx)("div",{className:s.default.preview,onMouseDown:r=>e(r,t.id),children:(0,o.jsx)("img",{src:i,className:s.default.previewImage})},r)}));return(0,o.jsx)("div",{className:s.default.root,children:(0,o.jsx)("div",{className:s.default.content,children:r})})}},992774:(e,t,r)=>{r.d(t,{TextPanel:()=>v});var o=r(785893),n=r(667294),s=r(50533),i=r(234448),a=r(709483),l=r(95756),c=r(86894),d=r(279513),h=r(832550),u=r(279207),p=r(813412),_=r(560707),g=r(842386);class m extends n.Component{constructor(){super(...arguments),this.render=()=>{var e,t,r,n,s;const{settings:i,setColor:a,setFontSize:m,layer:f,fontsPlaceholders:v,avgColor:S,langMap:E,globalScale:T}=this.props,y=f&&f.isEdit,x=f&&f.fontStyle,w=f&&f.fontSize,C=f&&f.color,b=e=>{switch(e){case"typewriter":return"18px";case"poster":return"24px";case"retro":return"19px";case"marker":return"26px";case"italics":return"22px";default:return"20px"}};return(0,o.jsxs)("div",{className:_.default.root,children:[y?(0,o.jsx)(h.Button,{mode:"primary",onClick:this.props.closeTextEditor,children:null==(e=E)?void 0:e.photos_pe_save_text}):(0,o.jsx)(h.Button,{mode:"primary",before:(0,o.jsx)(d.Icon12Add,{}),onClick:()=>this.props.addLayerText(!0,{isEdit:!0,baseScale:T}),children:null==(t=E)?void 0:t.photos_pe_add_text}),(0,o.jsxs)("div",{className:_.default.fonts,children:[(0,o.jsx)("div",{className:_.default.title,children:null==(r=E)?void 0:r.photos_pe_font}),p.FONTS.map(((e,t)=>(0,o.jsx)(c.Radio,{className:_.default.radio,value:e,name:"photo_editor_fonts",onChange:()=>this.props.setFontStyle(e),checked:x?x===e:i.fontStyle===e,children:(0,o.jsx)("span",{style:{fontSize:b(e)},className:(0,g.getComputedFontFamily)(e),children:v&&v[t]})},e)))]}),(0,o.jsxs)("div",{className:_.default.fontSize,children:[(0,o.jsx)("div",{className:_.default.title,children:null==(n=E)?void 0:n.photos_pe_font_size}),(0,o.jsx)(u.Slider,{min:0,max:1,isShowHandle:!0,value:w||i.fontSize,formatHint:e=>`${Math.round(100*e)}`,onChange:e=>m(e)})]}),(0,o.jsxs)("div",{className:_.default.colors,children:[(0,o.jsx)("div",{className:_.default.title,children:null==(s=E)?void 0:s.photos_pe_color}),(0,o.jsx)(l.ColorPicker,{color:C||i.color,avgColor:S,setColor:a})]})]})}}}const f={addLayerText:i.addLayerText,setColor:a.setColor,setFontSize:a.setFontSize,setFontStyle:a.setFontStyle,closeTextEditor:i.closeTextEditor},v=(0,s.connect)((e=>{const{items:t,currentIndex:r}=e.present.layers;let o=null;return null!==r&&(o=t[r]),{settings:e.present.settings,layer:o,fontsPlaceholders:e.present.data.fontsPlaceholders,avgColor:e.present.layers.items[0].avgColor,langMap:e.present.data.langMap,globalScale:e.present.layers.globalScale}}),f)(m)},578683:(e,t,r)=>{r.d(t,{UndoRedo:()=>h});var o=r(785893),n=r(21090),s=r(50533),i=r(589612),a=r(318455),l=r(507591),c=r(659397);const d=n.ActionCreators,h=(0,s.connect)((e=>({canUndo:e.past.length>0,canRedo:e.future.length>0,helpers:e.present.data.helpers})),d)((({canUndo:e,canRedo:t,undo:r,redo:n,helpers:s})=>(0,o.jsxs)("div",{className:l.default.root,children:[(0,o.jsx)("button",{className:(0,c.classNames)(l.default.scaleButton,e&&l.default.scaleButtonActive),disabled:!e,onClick:()=>{var e;null==(e=s)||e.sendStat("undo"),r()},children:(0,o.jsx)(i.Icon24ArrowUturnLeftOutline,{})}),(0,o.jsx)("button",{className:(0,c.classNames)(l.default.scaleButton,t&&l.default.scaleButtonActive),disabled:!t,onClick:()=>{var e;null==(e=s)||e.sendStat("redo"),n()},children:(0,o.jsx)(a.Icon24ArrowUturnRightOutline,{})})]})))},485243:(e,t,r)=>{r.d(t,{ZoomWrapper:()=>c});var o=r(785893),n=r(686191),s=r(50533),i=r(234448),a=r(813412);const l={setLayersScale:i.setLayersScale},c=(0,s.connect)((e=>({layers:e.present.layers,settings:e.present.settings,currentMode:e.present.ui.currentMode})),l)((({layers:e,settings:t,setLayersScale:r,currentMode:s})=>{const{globalScale:i}=e,l=s===a.TABS.SEGMENTATION&&t.segmentation.enabled;return(0,o.jsx)(n.Zoom,{globalScale:i,scale:e=>{const t=e<=1?1:e<=3?e:3;r(Math.round(100*t)/100,i)},disabled:l})}))},993661:(e,t,r)=>{r.d(t,{$undoRedoStatusFiltered:()=>d,getEditedPhoto:()=>l,redoAction:()=>a,undoAction:()=>i,undoRedoStatus:()=>c});var o=r(798116),n=r(659397);const s=(0,o.createDomain)("PhotoEditorDesktop"),i=s.createEvent(),a=s.createEvent(),l=s.createEvent(),c=s.createEvent(),d=s.createStore({canUndo:!1,canRedo:!1}).on(c,((e,t)=>(0,n.isEqual)(e,t)?e:t))},769824:(e,t,r)=>{r.d(t,{PhotoEditor:()=>u});var o=r(434788),n=r(785893),s=r(667294),i=r(50533),a=r(471198),l=r(659397),c=r(813412),d=r(774893);class h extends s.Component{render(){const e=(0,a.createPhotoEditorStore)({data:(0,o._)({},this.props,{imageContainerWidth:this.props.imageContainerWidth||this.props.artboardWidth,imageContainerHeight:this.props.imageContainerHeight||this.props.artboardHeight,context:this.props.context||"photo",renderStart:performance.now()})});return(0,l.isFunction)(this.props.storeInit)&&this.props.storeInit(e),(0,n.jsx)(i.Provider,{store:e,children:(0,n.jsx)(d.BaseEditor,{stickers:this.props.stickers,ref:e=>{(0,l.isFunction)(this.props.refCb)&&this.props.refCb(e)}})})}constructor(){super(...arguments),this.componentWillUnmount=()=>{(0,l.isFunction)(this.props.onDestroy)&&this.props.onDestroy()}}}h.defaultProps={originalWidth:c.STORY_BASE_WIDTH,originalHeight:c.STORY_BASE_HEIGHT};const u=h},708241:(e,t,r)=>{r.d(t,{background:()=>i});var o=r(434788),n=r(455566);const s={currentBackgroundType:"none",currentPhotoUrl:null,currentBackgroundId:null},i=(e=s,t)=>{switch(t.type){case n.SET_CURRENT_BACKGROUND_TYPE:return(0,o._)({},e,{currentBackgroundType:t.value});case n.SET_CURRENT_PHOTO_URL:return(0,o._)({},e,{currentPhotoUrl:t.value});case n.SET_CURRENT_BACKGROUND_ID:return(0,o._)({},e,{currentBackgroundId:t.value});default:return e}}},958269:(e,t,r)=>{r.d(t,{data:()=>s});var o=r(434788),n=r(455566);const s=(e={},t)=>t.type===n.SET_DATA?(0,o._)({},e,t.payload):e},851816:(e,t,r)=>{r.d(t,{drawings:()=>n});var o=r(455566);const n=(e=[],t)=>{switch(t.type){case o.ADD_DRAWING:return[...e,t.payload];case o.UPDATE_DRAWING:return t.payload;default:return e}}},85447:(e,t,r)=>{r.d(t,{reducers:()=>m});var o,n=r(14890),s=r(21090),i=r(459755),a=r(69005),l=r(907960),c=r(851816),d=r(708241),h=r(958269),u=r(672048),p=r(455566);let _,g=!1;const m=((null==(o=s.default)?void 0:o.default)?s.default.default:s.default)((0,n.combineReducers)({ui:i.ui,settings:a.settings,layers:l.layers,drawings:c.drawings,background:d.background,data:h.data,ml:u.ml}),{limit:100,syncFilter:!0,filter:(0,s.combineFilters)((function(e){return![p.SET_CURRENT_BACKGROUND_ID,p.SET_CURRENT_BACKGROUND_TYPE,p.ADD_LAYER_TEXT,p.ADD_LAYER_IMAGE,p.ADD_LAYER_STICKER,p.SET_CURRENT_PHOTO_URL,p.SET_LAYERS_SCALE,p.SET_LAYERS_SHIFT,p.SET_SETTING_LOADING,p.SET_SETTING_SEGMENTATION_RESET].includes(e.type)||e.canUndo}),(0,s.includeAction)([p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_POSITION,p.SET_SETTING_BLUR_ENABLE,p.SET_SETTING_BLUR_FORM,p.SET_SETTING_AUTO_CORRECTION,p.SET_SETTING_FILTER,p.SET_SETTING_FILTER_AMOUNT,p.ADD_LAYER_STICKER,p.ADD_LAYER_TEXT,p.DELETE_LAYER,p.ADD_DRAWING,p.SET_CURRENT_BACKGROUND_TYPE,p.SET_CURRENT_PHOTO_URL,p.SET_CURRENT_BACKGROUND_ID,p.SET_LAYER_COLOR,p.SET_LAYER_FONT_SIZE,p.SET_LAYER_FONT_STYLE,p.TOGGLE_TEXT_EDIT,p.SET_SHOW_DROP_BOX,p.START_LAYER_SCALE,p.SET_SEGMENTATION_DATA,p.RESET_SEGMENTATION_DATA,p.SET_SETTING_SEGMENTATION_INVERSE,p.SET_SETTING_SEGMENTATION_DELETE,p.SET_SETTING_SEGMENTATION_RESET,p.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR,p.SET_SETTING_ENHANCE]),(function(e){return e.type===p.TOGGLE_TEXT_EDIT?e.payload.isEdit:e.type===p.SET_SHOW_DROP_BOX?e.value:![p.SET_SETTING_COLOR_CORRECTION,p.SET_SETTING_FILTER_AMOUNT,p.SET_SETTING_BLUR_SIZE,p.SET_SETTING_BLUR_POSITION,p.SET_LAYER_FONT_SIZE].includes(e.type)||(e.type!==_?(g=!1,_=e.type,!0):!g&&(g=!0,setTimeout((()=>{g=!1}),500),!0))}))})},907960:(e,t,r)=>{r.d(t,{layers:()=>a});var o=r(434788),n=r(455566),s=r(813412);const i={currentIndex:null,items:[{canvas:document.createElement("canvas"),type:s.LAYER_TYPES.BACKGROUND,width:1,height:1,isBackground:!0,locked:!0,x:0,y:0,rotate:0,canDelete:!1,scale:1,avgColor:{r:128,g:128,b:128},baseScale:1}],globalScale:1,shiftX:0,shiftY:0},a=(e=i,t)=>{switch(t.type){case n.SET_CURRENT_LAYER:return(0,o._)({},e,{currentIndex:t.index});case n.ADD_LAYER_STICKER:case n.ADD_LAYER_TEXT:case n.ADD_LAYER_IMAGE:return(0,o._)({},e,{items:[...e.items,t.payload]});case n.SET_LAYER_POSITION:case n.SET_LAYER_SCALE:case n.SET_LAYER_COLOR:case n.SET_LAYER_FONT_SIZE:case n.SET_LAYER_FONT_STYLE:case n.SET_LAYER_TEXT:case n.TOGGLE_TEXT_EDIT:return(0,o._)({},e,{items:e.items.map(((r,n)=>e.currentIndex===n?(0,o._)({},r,t.payload):r))});case n.SET_LAYERS_SCALE:return(0,o._)({},e,{globalScale:t.payload.scale,shiftX:t.payload.shiftX,shiftY:t.payload.shiftY});case n.SET_LAYERS_SHIFT:return(0,o._)({},e,{shiftX:t.payload.shiftX,shiftY:t.payload.shiftY});case n.START_LAYER_SCALE:return(0,o._)({},e);case n.UPDATE_BACKGROUND_LAYER:return(0,o._)({},e,{items:e.items.map(((e,r)=>0===r?(0,o._)({},e,t.payload):e))});case n.DELETE_LAYER:return(0,o._)({},e,{currentIndex:null,items:e.items.filter(((e,r)=>r!==t.index))});case n.UPDATE_LAYERS_AFTER_CROP:return(0,o._)({},e,{items:t.items});default:return e}}},672048:(e,t,r)=>{r.d(t,{ml:()=>s});var o=r(434788),n=r(455566);const s=(e={},t)=>{switch(t.type){case n.SET_SEGMENTATION_DATA:var r;return(0,o._)({},e,{segmentation:{mask:t.payload.mask,clicks:[...(null==(r=e.segmentation)?void 0:r.clicks)||[],t.payload.click]}});case n.RESET_SEGMENTATION_DATA:return(0,o._)({},e,{segmentation:{mask:"",clicks:[]}});default:return e}}},69005:(e,t,r)=>{r.d(t,{settings:()=>a});var o=r(434788),n=r(455566),s=r(813412);const i={color:s.COLORS[0],brushWidth:.5,brushOpacity:1,fontSize:.5,fontStyle:s.FONTS[0],filter:{name:s.PHOTO_FILTERS[0],value:.5},colorCorrection:{exposure:0,contrast:0,saturation:0,warmth:0,vignette:0,sharpness:0,grain:0},blur:{isEnabled:!1,form:s.BLUR_TYPES.ROUND,size:50,position:[.5,.5]},isAutoCorrection:!1,cropAspect:s.CROP_ASPECT_FREE,isCropped:!1,flipX:!1,flipY:!1,rotation:0,segmentation:{enabled:!1,mode:"positive",inverse:!1,delete:!1,color:"#FFFFFF"},loading:{enhance:!1,segmentation:!1},enhance:{active:!1,url:""}},a=(e=i,t)=>{switch(t.type){case n.SET_SETTING_COLOR:return(0,o._)({},e,{color:t.color});case n.SET_SETTING_BRUSH_WIDTH:return(0,o._)({},e,{brushWidth:t.brushWidth});case n.SET_SETTING_BRUSH_OPACITY:return(0,o._)({},e,{brushOpacity:t.brushOpacity});case n.SET_SETTING_FONT_SIZE:return(0,o._)({},e,{fontSize:t.fontSize});case n.SET_SETTING_FONT_FAMILY:return(0,o._)({},e,{fontStyle:t.fontStyle});case n.SET_SETTING_COLOR_CORRECTION:return(0,o._)({},e,{colorCorrection:(0,o._)({},e.colorCorrection,{[t.filter]:t.value})});case n.SET_SETTING_FILTER:return(0,o._)({},e,{filter:(0,o._)({},e.filter,{name:t.name})});case n.SET_SETTING_FILTER_AMOUNT:return(0,o._)({},e,{filter:(0,o._)({},e.filter,{value:t.value})});case n.SET_SETTING_BLUR_ENABLE:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{isEnabled:t.isEnabled})});case n.SET_SETTING_BLUR_FORM:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{form:t.form})});case n.SET_SETTING_BLUR_SIZE:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{size:t.size})});case n.SET_SETTING_BLUR_POSITION:return(0,o._)({},e,{blur:(0,o._)({},e.blur,{position:t.position})});case n.SET_SETTING_AUTO_CORRECTION:return(0,o._)({},e,{isAutoCorrection:t.isAutoCorrection});case n.SET_SETTING_CROP_ASPECT:return(0,o._)({},e,{cropAspect:t.aspect});case n.SET_SETTING_CROPPED:return(0,o._)({},e,{isCropped:t.isCropped});case n.SET_SETTING_FLIP_X:return(0,o._)({},e,{flipX:t.value});case n.SET_SETTING_FLIP_Y:return(0,o._)({},e,{flipY:t.value});case n.SET_SETTING_ROTATE:return(0,o._)({},e,{rotation:t.value});case n.SET_SETTING_SEGMENTATION:return(0,o._)({},e,{segmentation:t.value});case n.SET_SETTING_SEGMENTATION_INVERSE:return(0,o._)({},e,{segmentation:(0,o._)({},e.segmentation,{inverse:t.value})});case n.SET_SETTING_SEGMENTATION_BACKGROUND_COLOR:return(0,o._)({},e,{segmentation:(0,o._)({},e.segmentation,{color:t.value})});case n.SET_SETTING_SEGMENTATION_DELETE:return(0,o._)({},e,{segmentation:(0,o._)({},e.segmentation,{delete:t.value,enabled:!1})});case n.SET_SETTING_SEGMENTATION_RESET:return(0,o._)({},e,{segmentation:{delete:!1,inverse:!1,mode:"positive",enabled:!1,color:"#FFFFFF"}});case n.SET_SETTING_LOADING:return(0,o._)({},e,{loading:(0,o._)({},e.loading,t.value)});case n.SET_SETTING_ENHANCE:return(0,o._)({},e,{enhance:(0,o._)({},e.enhance,t.value)});default:return e}}},459755:(e,t,r)=>{r.d(t,{ui:()=>i});var o=r(434788),n=r(455566);const s={isDataLoaded:!1,isShowDropBox:!1,isSaveLoading:!1,currentMode:r(813412).TABS.STICKERS,currentStickerPackIndex:0,stickerHeaderScrollPosition:0},i=(e=s,t)=>{switch(t.type){case n.SET_DATA_LOADED:return(0,o._)({},e,{isDataLoaded:!0});case n.SET_SHOW_DROP_BOX:return(0,o._)({},e,{isShowDropBox:t.value});case n.SET_SAVE_LOADING:return(0,o._)({},e,{isSaveLoading:t.value});case n.SET_CURRENT_TAB:return(0,o._)({},e,{currentMode:t.value});case n.SET_CURRENT_STICKER_PACK_INDEX:return(0,o._)({},e,{currentStickerPackIndex:t.value});case n.SET_HEADER_SCROLL_POSITION:return(0,o._)({},e,{stickerHeaderScrollPosition:t.value});default:return e}}},471198:(e,t,r)=>{r.d(t,{createPhotoEditorStore:()=>l});var o=r(14890),n=r(21090),s=r(929804),i=r(753894),a=r(85447);const l=e=>{const t=(0,n.newHistory)([],e,[]),r=s.composeWithDevTools((0,o.applyMiddleware)(i.default));return(0,o.createStore)(a.reducers,t,r)}},350409:(e,t,r)=>{r.d(t,{getCurrentImageUrl:()=>s,getMarginTop:()=>i});var o=r(813412);const n={};function s(e){const{currentBackgroundType:t,currentPhotoUrl:r,currentBackgroundId:s}=e.present.background;let i="";if(t===o.BACKGROUND_MODES.PHOTO)i=r||"";else{const{gradients:t,emojies:r,advice_gradients:o,colors:a}=e.present.data.backgrounds,l=[...t,...r,...o,...a].filter((({id:e})=>e===s))[0];if(l.url)i=l.url;else if(n[l.id])i=n[l.id];else{const{originalWidth:t,originalHeight:r}=e.present.data,o=document.createElement("canvas"),s=o.getContext("2d");o.width=t,o.height=r,s.fillStyle=l.background,s.fillRect(0,0,t,r),n[l.id]=o.toDataURL(),i=n[l.id]}}return i}function i(e){const{addons:t,artboardHeight:r}=e.present.data;let o=r;return t&&t.photoHeight&&(o=t.photoHeight),r/2-o/2}},842386:(e,t,r)=>{r.d(t,{clean:()=>m,copyCanvas:()=>_,domData:()=>f,drawBlurFromImage:()=>h,getAverageRGB:()=>a,getComputedFontFamily:()=>S,getOrientation:()=>l,getPositionWithGravity:()=>d,getRelativeXY:()=>n,hexToRgba:()=>s,hexToRgbaValues:()=>i,hsl2hex:()=>p,irand:()=>v,printAtWordWrap:()=>g,resetOrientation:()=>c,rgb2hsv:()=>u});var o=r(208973);function n(e,t){if(!t)return{x:0,y:0,xOrigin:0,yOrigin:0,width:0,height:0};const{left:r,top:o,width:n,height:s}=t.getBoundingClientRect();return{x:e.clientX-r,y:e.clientY-o,xOrigin:r,yOrigin:o,width:n,height:s}}function s(e,t){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!r)return"rgba(0, 0, 0, 1)";return`rgba(${parseInt(r[1],16)}, ${parseInt(r[2],16)}, ${parseInt(r[3],16)}, ${t})`}function i(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!t)return{r:0,g:0,b:0};return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function a(e){const t=e.getContext("2d"),r={r:0,g:0,b:0};let o;if(!t)return r;try{o=t.getImageData(0,0,t.canvas.width,t.canvas.height)}catch(e){return r}let n=-4,s=0;for(;(n+=20)<o.data.length;)++s,r.r+=o.data[n],r.g+=o.data[n+1],r.b+=o.data[n+2];return r.r=~~(r.r/s),r.g=~~(r.g/s),r.b=~~(r.b/s),r}function l(e){return new Promise((t=>{const r=new FileReader;r.onload=e=>{if(!e.target)return;const r=e.target,o=new DataView(r.result);if(65496!==o.getUint16(0,!1))return t(-2);const n=o.byteLength;let s=2;for(;s<n;){if(o.getUint16(s+2,!1)<=8)return t(-1);let e=o.getUint16(s,!1);if(s+=2,65505===e){if(1165519206!==o.getUint32(s+=2,!1))return t(-1);let e=18761===o.getUint16(s+=6,!1);s+=o.getUint32(s+4,e);let r=o.getUint16(s,e);s+=2;for(let n=0;n<r;n++)if(274===o.getUint16(s+12*n,e))return t(o.getUint16(s+12*n+8,e))}else{if(65280!=(65280&e))break;s+=o.getUint16(s,!1)}}return t(-1)},r.readAsArrayBuffer(e)}))}function c(e,t){return new Promise(((r,o)=>{const n=new Image;n.onload=()=>{const e=n.width,s=n.height,i=document.createElement("canvas"),a=i.getContext("2d");if(!a)return o();switch(4<t&&t<9?(i.width=s,i.height=e):(i.width=e,i.height=s),t){case 2:a.transform(-1,0,0,1,e,0);break;case 3:a.transform(-1,0,0,-1,e,s);break;case 4:a.transform(1,0,0,-1,0,s);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,s,0);break;case 7:a.transform(0,-1,-1,0,s,e);break;case 8:a.transform(0,-1,1,0,0,e)}a.drawImage(n,0,0),r(i.toDataURL())},n.src=e}))}function d(e,t,r,o,n,s,i){let a=0,l=0;switch(e){case"left_top":a=o+s,l=n+i;break;case"left_center":a=o+s,l=r/2+i;break;case"left_bottom":a=o+s,l=r-n+i;break;case"center_top":a=t/2+s,l=n+i;break;case"center":a=t/2+s,l=r/2+i;break;case"center_bottom":a=t/2+s,l=r-n+i;break;case"right_top":a=t-o+s,l=n+i;break;case"right_center":a=t-o+s,l=r/2+i;break;case"right_bottom":a=t-o+s,l=r-n+i}return{x:Math.round(a),y:Math.round(l)}}function h(e,t,r){const o=e.getContext("2d");o&&(o.clearRect(0,0,e.width,e.height),o.fillStyle="rgb(30, 30, 30)",o.fillRect(0,0,e.width,e.height),o.save(),o.filter="blur(135px)",o.drawImage(t,0,0,e.width,e.height),o.restore(),"none"!==o.filter&&(o.fillStyle=`rgb(${r.r}, ${r.g}, ${r.b})`,o.fillRect(0,0,e.width,e.height)))}function u(e,t,r){let o=0,n=0,s=e/255,i=t/255,a=r/255,l=Math.max(s,i,a),c=l-Math.min(s,i,a);const d=e=>(l-e)/6/c+.5,h=e=>Math.round(100*e)/100;if(0!==c){n=c/l;const e=d(s),t=d(i),r=d(a);s===l?o=r-t:i===l?o=1/3+e-r:a===l&&(o=2/3+t-e),o<0?o+=1:o>1&&(o-=1)}return{h:Math.round(360*o),s:h(100*n),v:h(100*l)}}function p(e,t,r){t/=100,r/=100;let o=(1-Math.abs(2*r-1))*t,n=o*(1-Math.abs(e/60%2-1)),s=r-o/2,i=0,a=0,l=0;return 0<=e&&e<60?(i=o,a=n,l=0):60<=e&&e<120?(i=n,a=o,l=0):120<=e&&e<180?(i=0,a=o,l=n):180<=e&&e<240?(i=0,a=n,l=o):240<=e&&e<300?(i=n,a=0,l=o):300<=e&&e<360&&(i=o,a=0,l=n),i=Math.round(255*(i+s)).toString(16),a=Math.round(255*(a+s)).toString(16),l=Math.round(255*(l+s)).toString(16),1===i.length&&(i="0"+i),1===a.length&&(a="0"+a),1===l.length&&(l="0"+l),"#"+i+a+l}function _(e){var t;const r=document.createElement("canvas"),o=r.getContext("2d");return r.width=e.width,r.height=e.height,null==(t=o)||t.drawImage(e,0,0,e.width,e.height),r}function g(e,t,r,o,n,s){if((s=s||0)<=0)return void e.fillText(t,r,o);let i=t.replace(/(\v)/gm,"\n").split("\n"),a=0,l=1;for(;i.length>0&&l<=i.length;){const t=i.slice(0,l).join(" ");e.measureText(t).width>s?(1===l&&(l=2),e.fillText(i.slice(0,l-1).join(" "),r,o+n*a),a++,i=i.splice(l-1),l=1):l++}l>0&&e.fillText(i.join(" "),r,o+n*a)}function m(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function f(e,t,r){return e?void 0!==r?(null===r?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,r),r):e.getAttribute("data-"+t):null}const v=(e,t)=>Math.floor(((e,t)=>Math.random()*(t-e+1)+e)(e,t)),S=e=>{switch(e){case"typewriter":return o.default.typewriter;case"poster":return o.default.poster;case"retro":return o.default.retro;case"marker":return o.default.marker;case"italics":return o.default.italics;case"cursive":return o.default.cursive;case"classic":return o.default.classic;case"impact":return o.default.impact;case"lobster":return o.default.lobster;default:return}}},721259:(e,t,r)=>{r.d(t,{browser:()=>n});const o=navigator.userAgent.toLowerCase(),n={version:(o.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(o)||/opr/i.test(o),vivaldi:/vivaldi/i.test(o),amigo:/amigo.*mrchrome soc/i.test(o),msie:/msie/i.test(o)&&!/opera/i.test(o)||/trident\//i.test(o)||/edge/i.test(o),msie6:/msie 6/i.test(o)&&!/opera/i.test(o),msie7:/msie 7/i.test(o)&&!/opera/i.test(o),msie8:/msie 8/i.test(o)&&!/opera/i.test(o),msie9:/msie 9/i.test(o)&&!/opera/i.test(o),msie_edge:/edge/i.test(o)&&!/opera/i.test(o),mozilla:/firefox/i.test(o),yabrowser:/yabrowser/i.test(o),whale:/whale/i.test(o),chrome:/chrome/i.test(o)&&!/edge/i.test(o),safari:!/chrome/i.test(o)&&/webkit|safari|khtml/i.test(o),iphone:/iphone/i.test(o),ipod:/ipod/i.test(o),iphone4:/iphone.*OS 4/i.test(o),ipod4:/ipod.*OS 4/i.test(o),ipad:/ipad/i.test(o),ios:/.+(ipod|ipad|iphone.*os)/i.test(o),android:/android/i.test(o),bada:/bada/i.test(o),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(o),msie_mobile:/iemobile/i.test(o),safari_mobile:/iphone|ipod|ipad/i.test(o),opera_mobile:/opera mini|opera mobi/i.test(o),opera_mini:/opera mini/i.test(o),mac:/mac/i.test(o),windows7:/windows nt 6.1/i.test(o),windowsVista:/windows nt 6.0/i.test(o),windowsXp:/windows nt (5.2|5.1)/i.test(o),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(o),smart_tv:/smart-tv|smarttv/i.test(o)}},531202:(e,t,r)=>{r.d(t,{loadImage:()=>o});const o=(e,t)=>new Promise(((r,o)=>{const n=new Image;n.crossOrigin="Anonymous",t&&(n.dataset.name=t),n.onerror=()=>{var t;const r=(null==(t=e)?void 0:t.startsWith("data:"))?"<dataURL>":e;o(new Error(`Failed to load image's URL: ${r}`))},n.onload=()=>{r(n)},n.src=e}))},427164:(e,t,r)=>{r.d(t,{default:()=>s});var o,n=r(310396);e=r.hmd(e),o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e;const s=(0,n.default)(o)},310396:(e,t,r)=>{function o(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,{default:()=>o})},619978:(e,t,r)=>{e.exports=r.p+"images/894a4bad6f3936dd9445.png"},713932:(e,t,r)=>{e.exports=r.p+"images/d76c3df1076f7efabc7d.png"},150531:(e,t,r)=>{e.exports=r.p+"images/e95e343f81803403d5d3.png"},773333:(e,t,r)=>{e.exports=r.p+"images/f873a6bb7bb460dfb539.png"},239022:(e,t,r)=>{e.exports=r.p+"images/8ff21c6e9f0a2788db49.png"},770805:(e,t,r)=>{e.exports=r.p+"images/842e80feda60b4718b10.png"},450795:(e,t,r)=>{e.exports=r.p+"images/352bb0d293c648a40028.png"},137429:(e,t,r)=>{e.exports=r.p+"images/abf5e076ba1b7cd28c89.png"},804194:(e,t,r)=>{e.exports=r.p+"images/e653d1e4f9de15944019.png"},167811:(e,t,r)=>{e.exports=r.p+"images/fc49bc4f2595c3f75d43.png"},940760:(e,t,r)=>{e.exports=r.p+"images/f564d813eeba2ab2a257.png"},93790:(e,t,r)=>{e.exports=r.p+"images/b0a46866fade1ae1a0c6.png"},780699:(e,t,r)=>{e.exports=r.p+"images/7d0e0fa74fbfe517a63c.png"},350704:(e,t,r)=>{e.exports=r.p+"images/0206c1608a7a28e29ab1.png"},600582:(e,t,r)=>{e.exports=r.p+"images/0e0e54c3291044088ce8.png"},265558:(e,t,r)=>{e.exports=r.p+"images/67d056c2554b7d1ceb6a.png"},791417:(e,t,r)=>{e.exports=r.p+"images/fc79828aadf10edcc85d.png"},393353:(e,t,r)=>{e.exports=r.p+"images/73005d8850c204a4ecd7.png"},99847:(e,t,r)=>{e.exports=r.p+"images/499fb00242bf9fa034ac.png"},702146:(e,t,r)=>{e.exports=r.p+"images/6152209fae492be8fc19.png"},825727:(e,t,r)=>{e.exports=r.p+"images/5548832dd35bb85bc6b5.png"},128399:(e,t,r)=>{e.exports=r.p+"images/c54637bd9fd6fcabbd1e.png"},527622:(e,t,r)=>{e.exports=r.p+"images/f593f66eddb36ba672e2.png"},903478:(e,t,r)=>{e.exports=r.p+"images/b1df19b965bc898b1b44.png"}}]);try{stManager.done("dist/9b69690c2f17eb6642dea9531af86fbd.6f2367cc799367c3a6c0.js")}catch(e){}